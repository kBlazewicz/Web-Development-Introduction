var wH=Object.defineProperty,EH=Object.defineProperties,CH=Object.getOwnPropertyDescriptors,Y1=Object.getOwnPropertySymbols,DH=Object.prototype.hasOwnProperty,TH=Object.prototype.propertyIsEnumerable,Q1=(Ke,ye,P)=>ye in Ke?wH(Ke,ye,{enumerable:!0,configurable:!0,writable:!0,value:P}):Ke[ye]=P,We=(Ke,ye)=>{for(var P in ye||(ye={}))DH.call(ye,P)&&Q1(Ke,P,ye[P]);if(Y1)for(var P of Y1(ye))TH.call(ye,P)&&Q1(Ke,P,ye[P]);return Ke},Di=(Ke,ye)=>EH(Ke,CH(ye));(self.webpackChunkrestaurant=self.webpackChunkrestaurant||[]).push([[179],{7905:(Ke,ye,P)=>{"use strict";P.d(ye,{hO:()=>Be,xv:()=>ue,Dh:()=>oe,GT:()=>me,cc:()=>Te,on:()=>q,pX:()=>se});var c=P(3668),J=P(7892),N=P(7233);Ke=P.hmd(Ke);const ce=["ngOnDestroy"],se=(K,le,De,ve={})=>new Proxy(K,{get:($e,Oe)=>De.runOutsideAngular(()=>{var ze;if(K[Oe])return(null===(ze=null==ve?void 0:ve.spy)||void 0===ze?void 0:ze.get)&&ve.spy.get(Oe,K[Oe]),K[Oe];if(ce.indexOf(Oe)>-1)return()=>{};const Ye=le.toPromise().then(gt=>{const ne=gt&&gt[Oe];return"function"==typeof ne?ne.bind(gt):ne&&ne.then?ne.then(de=>De.run(()=>de)):De.run(()=>ne)});return new Proxy(()=>{},{get:(gt,ne)=>Ye[ne],apply:(gt,ne,de)=>Ye.then(we=>{var Ce;const Ne=we&&we(...de);return(null===(Ce=null==ve?void 0:ve.spy)||void 0===Ce?void 0:Ce.apply)&&ve.spy.apply(Oe,de,Ne),Ne})})})}),me=(K,le)=>{le.forEach(De=>{Object.getOwnPropertyNames(De.prototype||De).forEach(ve=>{Object.defineProperty(K.prototype,ve,Object.getOwnPropertyDescriptor(De.prototype||De,ve))})})};class te{constructor(le){return le}}const oe=new c.OlP("angularfire2.app.options"),ue=new c.OlP("angularfire2.app.name");function q(K,le,De){const $e="object"==typeof De&&De||{};$e.name=$e.name||"string"==typeof De&&De||"[DEFAULT]";const ze=J.Z.apps.filter(Ye=>Ye&&Ye.name===$e.name)[0]||le.runOutsideAngular(()=>J.Z.initializeApp(K,$e));try{JSON.stringify(K)!==JSON.stringify(ze.options)&&H("error",`${ze.name} Firebase App already initialized with different options${Ke.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ye){}return new te(ze)}const H=(K,...le)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[K](...le)},X={provide:te,useFactory:q,deps:[oe,c.R0b,[new c.FiY,ue]]};let Be=(()=>{class K{constructor(De){J.Z.registerVersion("angularfire",N.q4.full,"core"),J.Z.registerVersion("angularfire",N.q4.full,"app-compat"),J.Z.registerVersion("angular",c.q4F.full,De.toString())}static initializeApp(De,ve){return{ngModule:K,providers:[{provide:oe,useValue:De},{provide:ue,useValue:ve}]}}}return K.\u0275fac=function(De){return new(De||K)(c.LFG(c.Lbi))},K.\u0275mod=c.oAB({type:K}),K.\u0275inj=c.cJS({providers:[X]}),K})();function Te(K,le,De,ve,$e){const[,Oe,ze]=globalThis.\u0275AngularfireInstanceCache.find(Ye=>Ye[0]===K)||[];if(Oe)return function(K,le){try{return K.toString()===le.toString()}catch(De){return K===le}}($e,ze)||(ae("error",`${le} was already initialized on the ${De} Firebase App with different settings.${Ue?" You may need to reload as Firebase is not HMR aware.":""}`),ae("warn",{is:$e,was:ze})),Oe;{const Ye=ve();return globalThis.\u0275AngularfireInstanceCache.push([K,Ye,$e]),Ye}}const Ue=!!Ke.hot,ae=(K,...le)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[K](...le)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},7233:(Ke,ye,P)=>{"use strict";P.d(ye,{q4:()=>Vu,iC:()=>so,fc:()=>zn,HU:()=>Tc,vb:()=>Bu,JM:()=>Dc});var c=P(3668),J=P(7713),N=P(8239),ce=P(1572),se=P(4213),me=P(1177),te=P(3855),oe=P(4995);const ue="@firebase/installations",q="0.5.5",X=`w:${q}`,Be="FIS_v2",le=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function De(D){return D instanceof se.ZR&&D.code.includes("request-failed")}function ve({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function $e(D){return{token:D.token,requestStatus:2,expiresIn:we(D.expiresIn),creationTime:Date.now()}}function Oe(D,T){return ze.apply(this,arguments)}function ze(){return(ze=(0,N.Z)(function*(D,T){const V=(yield T.json()).error;return le.create("request-failed",{requestName:D,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function Ye({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function gt(D,{refreshToken:T}){const R=Ye(D);return R.append("Authorization",function(D){return`${Be} ${D}`}(T)),R}function ne(D){return de.apply(this,arguments)}function de(){return(de=(0,N.Z)(function*(D){const T=yield D();return T.status>=500&&T.status<600?D():T})).apply(this,arguments)}function we(D){return Number(D.replace("s","000"))}function Ne(D,T){return ge.apply(this,arguments)}function ge(){return(ge=(0,N.Z)(function*(D,{fid:T}){const R=ve(D),ie={method:"POST",headers:Ye(D),body:JSON.stringify({fid:T,authVersion:Be,appId:D.appId,sdkVersion:X})},Me=yield ne(()=>fetch(R,ie));if(Me.ok){const et=yield Me.json();return{fid:et.fid||T,registrationStatus:2,refreshToken:et.refreshToken,authToken:$e(et.authToken)}}throw yield Oe("Create Installation",Me)})).apply(this,arguments)}function Mt(D){return new Promise(T=>{setTimeout(T,D)})}const ir=/^[cdef][\w-]{21}$/;function Tt(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const R=function(D){return function(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return ir.test(R)?R:""}catch(D){return""}}function pn(D){return`${D.appName}!${D.appId}`}const zr=new Map;function li(D,T){const R=pn(D);Fn(R,T),function(D,T){const R=(!$t&&"BroadcastChannel"in self&&($t=new BroadcastChannel("[Firebase] FID Change"),$t.onmessage=D=>{Fn(D.data.key,D.data.fid)}),$t);R&&R.postMessage({key:D,fid:T}),0===zr.size&&$t&&($t.close(),$t=null)}(R,T)}function Fn(D,T){const R=zr.get(D);if(R)for(const V of R)V(T)}let $t=null;const Ae="firebase-installations-store";let hr=null;function Yn(){return hr||(hr=(0,oe.openDb)("firebase-installations-database",1,D=>{0===D.oldVersion&&D.createObjectStore(Ae)})),hr}function yt(D,T){return zt.apply(this,arguments)}function zt(){return(zt=(0,N.Z)(function*(D,T){const R=pn(D),Y=(yield Yn()).transaction(Ae,"readwrite"),ie=Y.objectStore(Ae),Me=yield ie.get(R);return yield ie.put(T,R),yield Y.complete,(!Me||Me.fid!==T.fid)&&li(D,T.fid),T})).apply(this,arguments)}function Ui(D){return ci.apply(this,arguments)}function ci(){return(ci=(0,N.Z)(function*(D){const T=pn(D),V=(yield Yn()).transaction(Ae,"readwrite");yield V.objectStore(Ae).delete(T),yield V.complete})).apply(this,arguments)}function pt(D,T){return vt.apply(this,arguments)}function vt(){return(vt=(0,N.Z)(function*(D,T){const R=pn(D),Y=(yield Yn()).transaction(Ae,"readwrite"),ie=Y.objectStore(Ae),Me=yield ie.get(R),et=T(Me);return void 0===et?yield ie.delete(R):yield ie.put(et,R),yield Y.complete,et&&(!Me||Me.fid!==et.fid)&&li(D,et.fid),et})).apply(this,arguments)}function Vt(D){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,N.Z)(function*(D){let T;const R=yield pt(D,V=>{const Y=ui(V),ie=Qt(D,Y);return T=ie.registrationPromise,ie.installationEntry});return""===R.fid?{installationEntry:yield T}:{installationEntry:R,registrationPromise:T}})).apply(this,arguments)}function ui(D){return St(D||{fid:Tt(),registrationStatus:0})}function Qt(D,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(le.create("app-offline"))};const R={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},V=function(D,T){return ht.apply(this,arguments)}(D,R);return{installationEntry:R,registrationPromise:V}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:yu(D)}:{installationEntry:T}}function ht(){return(ht=(0,N.Z)(function*(D,T){try{return yt(D,yield Ne(D,T))}catch(R){throw De(R)&&409===R.customData.serverCode?yield Ui(D):yield yt(D,{fid:T.fid,registrationStatus:0}),R}})).apply(this,arguments)}function yu(D){return qs.apply(this,arguments)}function qs(){return(qs=(0,N.Z)(function*(D){let T=yield tn(D);for(;1===T.registrationStatus;)yield Mt(100),T=yield tn(D);if(0===T.registrationStatus){const{installationEntry:R,registrationPromise:V}=yield Vt(D);return V||R}return T})).apply(this,arguments)}function tn(D){return pt(D,T=>{if(!T)throw le.create("installation-not-found");return St(T)})}function St(D){return function(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function vu(D,T){return G.apply(this,arguments)}function G(){return(G=(0,N.Z)(function*({appConfig:D,platformLoggerProvider:T},R){const V=U(D,R),Y=gt(D,R),ie=T.getImmediate({optional:!0});ie&&Y.append("x-firebase-client",ie.getPlatformInfoString());const et={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:X}})},Je=yield ne(()=>fetch(V,et));if(Je.ok)return $e(yield Je.json());throw yield Oe("Generate Auth Token",Je)})).apply(this,arguments)}function U(D,{fid:T}){return`${ve(D)}/${T}/authTokens:generate`}function z(D){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,N.Z)(function*(D,T=!1){let R;const V=yield pt(D.appConfig,ie=>{if(!On(ie))throw le.create("not-registered");const Me=ie.authToken;if(!T&&di(Me))return ie;if(1===Me.requestStatus)return R=re(D,T),ie;{if(!navigator.onLine)throw le.create("app-offline");const et=wr(ie);return R=nn(D,et),et}});return R?yield R:V.authToken})).apply(this,arguments)}function re(D,T){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,N.Z)(function*(D,T){let R=yield mt(D.appConfig);for(;1===R.authToken.requestStatus;)yield Mt(100),R=yield mt(D.appConfig);const V=R.authToken;return 0===V.requestStatus?z(D,T):V})).apply(this,arguments)}function mt(D){return pt(D,T=>{if(!On(T))throw le.create("not-registered");return function(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function nn(D,T){return br.apply(this,arguments)}function br(){return(br=(0,N.Z)(function*(D,T){try{const R=yield vu(D,T),V=Object.assign(Object.assign({},T),{authToken:R});return yield yt(D.appConfig,V),R}catch(R){if(!De(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const V=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield yt(D.appConfig,V)}else yield Ui(D.appConfig);throw R}})).apply(this,arguments)}function On(D){return void 0!==D&&2===D.registrationStatus}function di(D){return 2===D.requestStatus&&!function(D){const T=Date.now();return T<D.creationTime||D.creationTime+D.expiresIn<T+36e5}(D)}function wr(D){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:T})}function Ya(){return(Ya=(0,N.Z)(function*(D){const T=D,{installationEntry:R,registrationPromise:V}=yield Vt(T.appConfig);return V?V.catch(console.error):z(T).catch(console.error),R.fid})).apply(this,arguments)}function go(){return(go=(0,N.Z)(function*(D,T=!1){const R=D;return yield bu(R.appConfig),(yield z(R,T)).token})).apply(this,arguments)}function bu(D){return mn.apply(this,arguments)}function mn(){return(mn=(0,N.Z)(function*(D){const{registrationPromise:T}=yield Vt(D);T&&(yield T)})).apply(this,arguments)}function ji(D){return le.create("missing-app-config-values",{valueName:D})}const Qn="installations";(0,ce._registerComponent)(new me.wA(Qn,D=>{const T=D.getProvider("app").getImmediate(),R=function(D){if(!D||!D.options)throw ji("App Configuration");if(!D.name)throw ji("App Name");const T=["projectId","apiKey","appId"];for(const R of T)if(!D.options[R])throw ji(R);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(T);return{app:T,appConfig:R,platformLoggerProvider:(0,ce._getProvider)(T,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ce._registerComponent)(new me.wA("installations-internal",D=>{const T=D.getProvider("app").getImmediate(),R=(0,ce._getProvider)(T,Qn).getImmediate();return{getId:()=>function(D){return Ya.apply(this,arguments)}(R),getToken:Y=>function(D){return go.apply(this,arguments)}(R,Y)}},"PRIVATE")),(0,ce.registerVersion)(ue,q),(0,ce.registerVersion)(ue,q,"esm2017");const bt="@firebase/remote-config",on=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Vf{constructor(T,R,V,Y){this.client=T,this.storage=R,this.storageCache=V,this.logger=Y}isCachedDataFresh(T,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-R,Y=V<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${Y}.`),Y}fetch(T){var R=this;return(0,N.Z)(function*(){const[V,Y]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(Y&&R.isCachedDataFresh(T.cacheMaxAgeMillis,V))return Y;T.eTag=Y&&Y.eTag;const ie=yield R.client.fetch(T),Me=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ie.status&&Me.push(R.storage.setLastSuccessfulFetchResponse(ie)),yield Promise.all(Me),ie})()}}function Rg(D=navigator){return D.languages&&D.languages[0]||D.language}class qi{constructor(T,R,V,Y,ie,Me){this.firebaseInstallations=T,this.sdkVersion=R,this.namespace=V,this.projectId=Y,this.apiKey=ie,this.appId=Me}fetch(T){var R=this;return(0,N.Z)(function*(){const[V,Y]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,et={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},Je={sdk_version:R.sdkVersion,app_instance_id:V,app_instance_id_token:Y,app_id:R.appId,language_code:Rg()},Lt={method:"POST",headers:et,body:JSON.stringify(Je)},sn=fetch(Me,Lt),Br=new Promise((hn,Sn)=>{T.signal.addEventListener(()=>{const Ro=new Error("The operation was aborted.");Ro.name="AbortError",Sn(Ro)})});let jr;try{yield Promise.race([sn,Br]),jr=yield sn}catch(hn){let Sn="fetch-client-network";throw"AbortError"===hn.name&&(Sn="fetch-timeout"),on.create(Sn,{originalErrorMessage:hn.message})}let Bn=jr.status;const Jr=jr.headers.get("ETag")||void 0;let oo,ki;if(200===jr.status){let hn;try{hn=yield jr.json()}catch(Sn){throw on.create("fetch-client-parse",{originalErrorMessage:Sn.message})}oo=hn.entries,ki=hn.state}if("INSTANCE_STATE_UNSPECIFIED"===ki?Bn=500:"NO_CHANGE"===ki?Bn=304:("NO_TEMPLATE"===ki||"EMPTY_CONFIG"===ki)&&(oo={}),304!==Bn&&200!==Bn)throw on.create("fetch-status",{httpStatus:Bn});return{status:Bn,eTag:Jr,config:oo}})()}}class Gd{constructor(T,R){this.client=T,this.storage=R}fetch(T){var R=this;return(0,N.Z)(function*(){const V=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(T,V)})()}attemptFetch(T,{throttleEndTimeMillis:R,backoffCount:V}){var Y=this;return(0,N.Z)(function*(){yield function(D,T){return new Promise((R,V)=>{const Y=Math.max(T-Date.now(),0),ie=setTimeout(R,Y);D.addEventListener(()=>{clearTimeout(ie),V(on.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,R);try{const ie=yield Y.client.fetch(T);return yield Y.storage.deleteThrottleMetadata(),ie}catch(ie){if(!function(D){if(!(D instanceof se.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ie))throw ie;const Me={throttleEndTimeMillis:Date.now()+(0,se.$s)(V),backoffCount:V+1};return yield Y.storage.setThrottleMetadata(Me),Y.attemptFetch(T,Me)}})()}}class Pg{constructor(T,R,V,Y,ie){this.app=T,this._client=R,this._storageCache=V,this._storage=Y,this._logger=ie,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function el(D,T){const R=D.target.error||void 0;return on.create(T,{originalErrorMessage:R&&R.message})}const ra="app_namespace_store";class Ng{constructor(T,R,V,Y=function(){return new Promise((D,T)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=V=>{T(el(V,"storage-open"))},R.onsuccess=V=>{D(V.target.result)},R.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore(ra,{keyPath:"compositeKey"})}}catch(R){T(on.create("storage-open",{originalErrorMessage:R}))}})}()){this.appId=T,this.appName=R,this.namespace=V,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var R=this;return(0,N.Z)(function*(){const V=yield R.openDbPromise;return new Promise((Y,ie)=>{const et=V.transaction([ra],"readonly").objectStore(ra),Je=R.createCompositeKey(T);try{const Lt=et.get(Je);Lt.onerror=sn=>{ie(el(sn,"storage-get"))},Lt.onsuccess=sn=>{const Br=sn.target.result;Y(Br?Br.value:void 0)}}catch(Lt){ie(on.create("storage-get",{originalErrorMessage:Lt&&Lt.message}))}})})()}set(T,R){var V=this;return(0,N.Z)(function*(){const Y=yield V.openDbPromise;return new Promise((ie,Me)=>{const Je=Y.transaction([ra],"readwrite").objectStore(ra),Lt=V.createCompositeKey(T);try{const sn=Je.put({compositeKey:Lt,value:R});sn.onerror=Br=>{Me(el(Br,"storage-set"))},sn.onsuccess=()=>{ie()}}catch(sn){Me(on.create("storage-set",{originalErrorMessage:sn&&sn.message}))}})})()}delete(T){var R=this;return(0,N.Z)(function*(){const V=yield R.openDbPromise;return new Promise((Y,ie)=>{const et=V.transaction([ra],"readwrite").objectStore(ra),Je=R.createCompositeKey(T);try{const Lt=et.delete(Je);Lt.onerror=sn=>{ie(el(sn,"storage-delete"))},Lt.onsuccess=()=>{Y()}}catch(Lt){ie(on.create("storage-delete",{originalErrorMessage:Lt&&Lt.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Wd{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,N.Z)(function*(){const R=T.storage.getLastFetchStatus(),V=T.storage.getLastSuccessfulFetchTimestampMillis(),Y=T.storage.getActiveConfig(),ie=yield R;ie&&(T.lastFetchStatus=ie);const Me=yield V;Me&&(T.lastSuccessfulFetchTimestampMillis=Me);const et=yield Y;et&&(T.activeConfig=et)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function tl(){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,N.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch(D){return!1}})).apply(this,arguments)}(0,ce._registerComponent)(new me.wA("remote-config",function(T,{instanceIdentifier:R}){const V=T.getProvider("app").getImmediate(),Y=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw on.create("registration-window");if(!(0,se.hl)())throw on.create("indexed-db-unavailable");const{projectId:ie,apiKey:Me,appId:et}=V.options;if(!ie)throw on.create("registration-project-id");if(!Me)throw on.create("registration-api-key");if(!et)throw on.create("registration-app-id");const Je=new Ng(et,V.name,R=R||"firebase"),Lt=new Wd(Je),sn=new te.Yd(bt);sn.logLevel=te.in.ERROR;const Br=new qi(Y,ce.SDK_VERSION,R,ie,Me,et),jr=new Gd(Br,Je),Bn=new Vf(jr,Je,Lt,sn),Jr=new Pg(V,Bn,Lt,Je,sn);return function(D){const T=(0,se.m9)(D);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Jr),Jr},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(bt,"0.3.4"),(0,ce.registerVersion)(bt,"0.3.4","esm2017");const Kd="/firebase-messaging-sw.js",Lg="/firebase-cloud-messaging-push-scope",hs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Zs="google.c.a.c_id",_o="google.c.a.c_l",Ws="google.c.a.ts",ia="google.c.a.e";var Dr=(()=>{return(D=Dr||(Dr={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Dr;var D})();function Ss(D){const T=new Uint8Array(D);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function nl(D){const R=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(R),Y=new Uint8Array(V.length);for(let ie=0;ie<V.length;++ie)Y[ie]=V.charCodeAt(ie);return Y}const Tu="fcm_token_details_db",Qd="fcm_token_object_Store";function Iu(D){return uc.apply(this,arguments)}function uc(){return uc=(0,N.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ie=>ie.name).includes(Tu))return null;let T=null;return(yield(0,oe.openDb)(Tu,5,function(){var V=(0,N.Z)(function*(Y){var ie;if(Y.oldVersion<2||!Y.objectStoreNames.contains(Qd))return;const Me=Y.transaction.objectStore(Qd),et=yield Me.index("fcmSenderId").get(D);if(yield Me.clear(),et)if(2===Y.oldVersion){const Je=et;if(!Je.auth||!Je.p256dh||!Je.endpoint)return;T={token:Je.fcmToken,createTime:null!==(ie=Je.createTime)&&void 0!==ie?ie:Date.now(),subscriptionOptions:{auth:Je.auth,p256dh:Je.p256dh,endpoint:Je.endpoint,swScope:Je.swScope,vapidKey:"string"==typeof Je.vapidKey?Je.vapidKey:Ss(Je.vapidKey)}}}else if(3===Y.oldVersion){const Je=et;T={token:Je.fcmToken,createTime:Je.createTime,subscriptionOptions:{auth:Ss(Je.auth),p256dh:Ss(Je.p256dh),endpoint:Je.endpoint,swScope:Je.swScope,vapidKey:Ss(Je.vapidKey)}}}else if(4===Y.oldVersion){const Je=et;T={token:Je.fcmToken,createTime:Je.createTime,subscriptionOptions:{auth:Ss(Je.auth),p256dh:Ss(Je.p256dh),endpoint:Je.endpoint,swScope:Je.swScope,vapidKey:Ss(Je.vapidKey)}}}});return function(Y){return V.apply(this,arguments)}}())).close(),yield(0,oe.deleteDb)(Tu),yield(0,oe.deleteDb)("fcm_vapid_details_db"),yield(0,oe.deleteDb)("undefined"),Hf(T)?T:null}),uc.apply(this,arguments)}function Hf(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:T}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const ln="firebase-messaging-store";let Su=null;function vo(){return Su||(Su=(0,oe.openDb)("firebase-messaging-database",1,D=>{0===D.oldVersion&&D.createObjectStore(ln)})),Su}function qn(D){return bo.apply(this,arguments)}function bo(){return(bo=(0,N.Z)(function*(D){const T=wo(D),V=yield(yield vo()).transaction(ln).objectStore(ln).get(T);if(V)return V;{const Y=yield Iu(D.appConfig.senderId);if(Y)return yield Wr(D,Y),Y}})).apply(this,arguments)}function Wr(D,T){return $i.apply(this,arguments)}function $i(){return($i=(0,N.Z)(function*(D,T){const R=wo(D),Y=(yield vo()).transaction(ln,"readwrite");return yield Y.objectStore(ln).put(T,R),yield Y.complete,T})).apply(this,arguments)}function $n(D){return dc.apply(this,arguments)}function dc(){return(dc=(0,N.Z)(function*(D){const T=wo(D),V=(yield vo()).transaction(ln,"readwrite");yield V.objectStore(ln).delete(T),yield V.complete})).apply(this,arguments)}function wo({appConfig:D}){return D.appId}const rn=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function As(D,T){return il.apply(this,arguments)}function il(){return(il=(0,N.Z)(function*(D,T){const R=yield hc(D),V=sa(T),Y={method:"POST",headers:R,body:JSON.stringify(V)};let ie;try{ie=yield(yield fetch(rt(D.appConfig),Y)).json()}catch(Me){throw rn.create("token-subscribe-failed",{errorInfo:Me})}if(ie.error)throw rn.create("token-subscribe-failed",{errorInfo:ie.error.message});if(!ie.token)throw rn.create("token-subscribe-no-token");return ie.token})).apply(this,arguments)}function Co(D,T){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,N.Z)(function*(D,T){const R=yield hc(D),V=sa(T.subscriptionOptions),Y={method:"PATCH",headers:R,body:JSON.stringify(V)};let ie;try{ie=yield(yield fetch(`${rt(D.appConfig)}/${T.token}`,Y)).json()}catch(Me){throw rn.create("token-update-failed",{errorInfo:Me})}if(ie.error)throw rn.create("token-update-failed",{errorInfo:ie.error.message});if(!ie.token)throw rn.create("token-update-no-token");return ie.token})).apply(this,arguments)}function sl(D,T){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,N.Z)(function*(D,T){const V={method:"DELETE",headers:yield hc(D)};try{const ie=yield(yield fetch(`${rt(D.appConfig)}/${T}`,V)).json();if(ie.error)throw rn.create("token-unsubscribe-failed",{errorInfo:ie.error.message})}catch(Y){throw rn.create("token-unsubscribe-failed",{errorInfo:Y})}})).apply(this,arguments)}function rt({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function hc(D){return ol.apply(this,arguments)}function ol(){return(ol=(0,N.Z)(function*({appConfig:D,installations:T}){const R=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function sa({p256dh:D,auth:T,endpoint:R,vapidKey:V}){const Y={web:{endpoint:R,auth:T,p256dh:D}};return V!==hs&&(Y.web.applicationPubKey=V),Y}const al=6048e5;function fc(D){return pc.apply(this,arguments)}function pc(){return(pc=(0,N.Z)(function*(D){const T=yield xs(D.swRegistration,D.vapidKey),R={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:T.endpoint,auth:Ss(T.getKey("auth")),p256dh:Ss(T.getKey("p256dh"))},V=yield qn(D.firebaseDependencies);if(V){if(gc(V.subscriptionOptions,R))return Date.now()>=V.createTime+al?Bt(D,{token:V.token,createTime:Date.now(),subscriptionOptions:R}):V.token;try{yield sl(D.firebaseDependencies,V.token)}catch(Y){console.warn(Y)}return Dn(D.firebaseDependencies,R)}return Dn(D.firebaseDependencies,R)})).apply(this,arguments)}function Jd(D){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,N.Z)(function*(D){const T=yield qn(D.firebaseDependencies);T&&(yield sl(D.firebaseDependencies,T.token),yield $n(D.firebaseDependencies));const R=yield D.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function Bt(D,T){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,N.Z)(function*(D,T){try{const R=yield Co(D.firebaseDependencies,T),V=Object.assign(Object.assign({},T),{token:R,createTime:Date.now()});return yield Wr(D.firebaseDependencies,V),R}catch(R){throw yield Jd(D),R}})).apply(this,arguments)}function Dn(D,T){return ll.apply(this,arguments)}function ll(){return(ll=(0,N.Z)(function*(D,T){const V={token:yield As(D,T),createTime:Date.now(),subscriptionOptions:T};return yield Wr(D,V),V.token})).apply(this,arguments)}function xs(D,T){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,N.Z)(function*(D,T){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:nl(T)})})).apply(this,arguments)}function gc(D,T){return T.vapidKey===D.vapidKey&&T.endpoint===D.endpoint&&T.auth===D.auth&&T.p256dh===D.p256dh}function Do(D){const T={from:D.from,collapseKey:D.collapse_key,messageId:D.fcm_message_id};return function(D,T){if(!T.notification)return;D.notification={};const R=T.notification.title;R&&(D.notification.title=R);const V=T.notification.body;V&&(D.notification.body=V);const Y=T.notification.image;Y&&(D.notification.image=Y)}(T,D),function(D,T){!T.data||(D.data=T.data)}(T,D),function(D,T){if(!T.fcmOptions)return;D.fcmOptions={};const R=T.fcmOptions.link;R&&(D.fcmOptions.link=R);const V=T.fcmOptions.analytics_label;V&&(D.fcmOptions.analyticsLabel=V)}(T,D),T}function To(D){return"object"==typeof D&&!!D&&Zs in D}function fr(D,T){const R=[];for(let V=0;V<D.length;V++)R.push(D.charAt(V)),V<T.length&&R.push(T.charAt(V));return R.join("")}function ul(D){return rn.create("missing-app-config-values",{valueName:D})}fr("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),fr("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ys{constructor(T,R,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function(D){if(!D||!D.options)throw ul("App Configuration Object");if(!D.name)throw ul("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:R}=D;for(const V of T)if(!R[V])throw ul(V);return{appName:D.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:Y,installations:R,analyticsProvider:V}}_delete(){return Promise.resolve()}}function fs(D){return dl.apply(this,arguments)}function dl(){return(dl=(0,N.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Kd,{scope:Lg}),D.swRegistration.update().catch(()=>{})}catch(T){throw rn.create("failed-service-worker-registration",{browserErrorMessage:T.message})}})).apply(this,arguments)}function hl(D,T){return fl.apply(this,arguments)}function fl(){return(fl=(0,N.Z)(function*(D,T){if(!T&&!D.swRegistration&&(yield fs(D)),T||!D.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw rn.create("invalid-sw-registration");D.swRegistration=T}})).apply(this,arguments)}function mc(D,T){return pl.apply(this,arguments)}function pl(){return(pl=(0,N.Z)(function*(D,T){T?D.vapidKey=T:D.vapidKey||(D.vapidKey=hs)})).apply(this,arguments)}function _c(){return(_c=(0,N.Z)(function*(D,T){if(!navigator)throw rn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw rn.create("permission-blocked");return yield mc(D,null==T?void 0:T.vapidKey),yield hl(D,null==T?void 0:T.serviceWorkerRegistration),fc(D)})).apply(this,arguments)}function aa(D,T,R){return Xd.apply(this,arguments)}function Xd(){return(Xd=(0,N.Z)(function*(D,T,R){const V=yc(T);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:R[Zs],message_name:R[_o],message_time:R[Ws],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function yc(D){switch(D){case Dr.NOTIFICATION_CLICKED:return"notification_open";case Dr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function gl(){return(gl=(0,N.Z)(function*(D,T){const R=T.data;if(!R.isFirebaseMessaging)return;D.onMessageHandler&&R.messageType===Dr.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Do(R)):D.onMessageHandler.next(Do(R)));const V=R.data;To(V)&&"1"===V[ia]&&(yield aa(D,R.messageType,V))})).apply(this,arguments)}const xu="@firebase/messaging";function ku(){return _n.apply(this,arguments)}function _n(){return(_n=(0,N.Z)(function*(){return"undefined"!=typeof window&&(0,se.hl)()&&(yield(0,se.eu)())&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ce._registerComponent)(new me.wA("messaging",D=>{const T=new Ys(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function(D,T){return gl.apply(this,arguments)}(T,R)),T},"PUBLIC")),(0,ce._registerComponent)(new me.wA("messaging-internal",D=>{const T=D.getProvider("messaging").getImmediate();return{getToken:V=>function(D,T){return _c.apply(this,arguments)}(T,V)}},"PRIVATE")),(0,ce.registerVersion)(xu,"0.9.5"),(0,ce.registerVersion)(xu,"0.9.5","esm2017");const Js="analytics",bc="firebase_id",Ou="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",rh="https://www.googletagmanager.com/gtag/js",vn=new te.Yd("@firebase/analytics");function vl(D){return Promise.all(D.map(T=>T.catch(R=>R)))}function Bg(D,T){const R=document.createElement("script");R.src=`${rh}?l=${D}&id=${T}`,R.async=!0,document.head.appendChild(R)}function ca(D,T,R,V,Y,ie){return wc.apply(this,arguments)}function wc(){return(wc=(0,N.Z)(function*(D,T,R,V,Y,ie){const Me=V[Y];try{if(Me)yield T[Me];else{const Je=(yield vl(R)).find(Lt=>Lt.measurementId===Y);Je&&(yield T[Je.appId])}}catch(et){vn.error(et)}D("config",Y,ie)})).apply(this,arguments)}function bl(D,T,R,V,Y){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,N.Z)(function*(D,T,R,V,Y){try{let ie=[];if(Y&&Y.send_to){let Me=Y.send_to;Array.isArray(Me)||(Me=[Me]);const et=yield vl(R);for(const Je of Me){const Lt=et.find(Br=>Br.measurementId===Je),sn=Lt&&T[Lt.appId];if(!sn){ie=[];break}ie.push(sn)}}0===ie.length&&(ie=Object.values(T)),yield Promise.all(ie),D("event",V,Y||{})}catch(ie){vn.error(ie)}})).apply(this,arguments)}function Pu(){const D=window.document.getElementsByTagName("script");for(const T of Object.values(D))if(T.src&&T.src.includes(rh))return T;return null}const Ft=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Rn=new class{constructor(T={},R=1e3){this.throttleMetadata=T,this.intervalMillis=R}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,R){this.throttleMetadata[T]=R}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function wn(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function gs(D){return dt.apply(this,arguments)}function dt(){return(dt=(0,N.Z)(function*(D){var T;const{appId:R,apiKey:V}=D,Y={method:"GET",headers:wn(V)},ie=Ou.replace("{app-id}",R),Me=yield fetch(ie,Y);if(200!==Me.status&&304!==Me.status){let et="";try{const Je=yield Me.json();(null===(T=Je.error)||void 0===T?void 0:T.message)&&(et=Je.error.message)}catch(Je){}throw Ft.create("config-fetch-failed",{httpStatus:Me.status,responseMessage:et})}return Me.json()})).apply(this,arguments)}function dn(D){return zi.apply(this,arguments)}function zi(){return(zi=(0,N.Z)(function*(D,T=Rn,R){const{appId:V,apiKey:Y,measurementId:ie}=D.options;if(!V)throw Ft.create("no-app-id");if(!Y){if(ie)return{measurementId:ie,appId:V};throw Ft.create("no-api-key")}const Me=T.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},et=new Pn;return setTimeout((0,N.Z)(function*(){et.abort()}),void 0!==R?R:6e4),wl({appId:V,apiKey:Y,measurementId:ie},Me,et,T)})).apply(this,arguments)}function wl(D,T,R){return ua.apply(this,arguments)}function ua(){return(ua=(0,N.Z)(function*(D,{throttleEndTimeMillis:T,backoffCount:R},V,Y=Rn){const{appId:ie,measurementId:Me}=D;try{yield Ir(V,T)}catch(et){if(Me)return vn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${et.message}]`),{appId:ie,measurementId:Me};throw et}try{const et=yield gs(D);return Y.deleteThrottleMetadata(ie),et}catch(et){if(!El(et)){if(Y.deleteThrottleMetadata(ie),Me)return vn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${et.message}]`),{appId:ie,measurementId:Me};throw et}const Je=503===Number(et.customData.httpStatus)?(0,se.$s)(R,Y.intervalMillis,30):(0,se.$s)(R,Y.intervalMillis),Lt={throttleEndTimeMillis:Date.now()+Je,backoffCount:R+1};return Y.setThrottleMetadata(ie,Lt),vn.debug(`Calling attemptFetch again in ${Je} millis`),wl(D,Lt,V,Y)}})).apply(this,arguments)}function Ir(D,T){return new Promise((R,V)=>{const Y=Math.max(T-Date.now(),0),ie=setTimeout(R,Y);D.addEventListener(()=>{clearTimeout(ie),V(Ft.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function El(D){if(!(D instanceof se.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Pn{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}function Io(){return So.apply(this,arguments)}function So(){return(So=(0,N.Z)(function*(){if(!(0,se.hl)())return vn.warn(Ft.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(D){return vn.warn(Ft.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function gi(){return(gi=(0,N.Z)(function*(D,T,R,V,Y,ie,Me){var et;const Je=dn(D);Je.then(Bn=>{R[Bn.measurementId]=Bn.appId,D.options.measurementId&&Bn.measurementId!==D.options.measurementId&&vn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Bn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Bn=>vn.error(Bn)),T.push(Je);const Lt=Io().then(Bn=>{if(Bn)return V.getId()}),[sn,Br]=yield Promise.all([Je,Lt]);Pu()||Bg(ie,sn.measurementId),Y("js",new Date);const jr=null!==(et=null==Me?void 0:Me.config)&&void 0!==et?et:{};return jr.origin="firebase",jr.update=!0,null!=Br&&(jr[bc]=Br),Y("config",sn.measurementId,jr),sn.measurementId})).apply(this,arguments)}class Nu{constructor(T){this.app=T}_delete(){return delete ms[this.app.options.appId],Promise.resolve()}}let ms={},pr=[];const gr={};let Zi,Gn,Cl="dataLayer",Yr=!1;function _s(D,T,R){!function(){const D=[];if((0,se.ru)()&&D.push("This is a browser extension environment."),(0,se.zI)()||D.push("Cookies are not available."),D.length>0){const T=D.map((V,Y)=>`(${Y+1}) ${V}`).join(" "),R=Ft.create("invalid-analytics-context",{errorInfo:T});vn.warn(R.message)}}();const V=D.options.appId;if(!V)throw Ft.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw Ft.create("no-api-key");vn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ms[V])throw Ft.create("already-exists",{id:V});if(!Yr){!function(D){let T=[];Array.isArray(window[D])?T=window[D]:window[D]=T}(Cl);const{wrappedGtag:ie,gtagCore:Me}=function(D,T,R,V,Y){let ie=function(...Me){window[V].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(ie=window[Y]),window[Y]=function(D,T,R,V){function ie(){return(ie=(0,N.Z)(function*(Me,et,Je){try{"event"===Me?yield bl(D,T,R,et,Je):"config"===Me?yield ca(D,T,R,V,et,Je):D("set",et)}catch(Lt){vn.error(Lt)}})).apply(this,arguments)}return function(Me,et,Je){return ie.apply(this,arguments)}}(ie,D,T,R),{gtagCore:ie,wrappedGtag:window[Y]}}(ms,pr,gr,Cl,"gtag");Gn=ie,Zi=Me,Yr=!0}return ms[V]=function(D,T,R,V,Y,ie,Me){return gi.apply(this,arguments)}(D,pr,gr,T,Zi,Cl,R),new Nu(D)}function ha(){return(ha=(0,N.Z)(function*(D,T,R,V,Y){if(Y&&Y.global)D("event",R,V);else{const ie=yield T;D("event",R,Object.assign(Object.assign({},V),{send_to:ie}))}})).apply(this,arguments)}function cn(){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,N.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch(D){return!1}})).apply(this,arguments)}const ih="@firebase/analytics";(0,ce._registerComponent)(new me.wA(Js,(T,{options:R})=>_s(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ce._registerComponent)(new me.wA("analytics-internal",function(T){try{const R=T.getProvider(Js).getImmediate();return{logEvent:(V,Y,ie)=>function(D,T,R,V){D=(0,se.m9)(D),function(D,T,R,V,Y){return ha.apply(this,arguments)}(Gn,ms[D.app.options.appId],T,R,V).catch(Y=>vn.error(Y))}(R,V,Y,ie)}}catch(R){throw Ft.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ce.registerVersion)(ih,"0.7.5"),(0,ce.registerVersion)(ih,"0.7.5","esm2017");var Un=P(2869),Xn=P(8843);const Ur=new class extends Xn.v{}(class extends Un.o{constructor(T,R){super(T,R),this.scheduler=T,this.work=R}schedule(T,R=0){return R>0?super.schedule(T,R):(this.delay=R,this.state=T,this.scheduler.flush(this),this)}execute(T,R){return R>0||this.closed?super.execute(T,R):this._execute(T,R)}requestAsyncId(T,R,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(T,R,V):T.flush(this)}});var Ki=P(2210),Dl=P(7384),Mo=P(4763),pa=P(5222);const Vu=new c.GfV("7.2.0"),Uu="__angularfire_symbol__analyticsIsSupported",ko="__angularfire_symbol__remoteConfigIsSupported",mr="__angularfire_symbol__messagingIsSupported";function Dc(D,T,R){if(T){if(1===T.length)return T[0];const ie=T.filter(Me=>Me.app===R);if(1===ie.length)return ie[0]}return R.container.getProvider(D).getImmediate({optional:!0})}globalThis[Uu]||(globalThis[Uu]=cn().then(D=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=D)),globalThis[mr]||(globalThis[mr]=ku().then(D=>globalThis.__angularfire_symbol__messagingIsSupportedValue=D)),globalThis[ko]||(globalThis[ko]=tl().then(D=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=D));const Bu=(D,T)=>{const R=T?[T]:(0,J.C6)(),V=[];return R.forEach(Y=>{Y.container.getProvider(D).instances.forEach(Me=>{V.includes(Me)||V.push(Me)})}),V};function no(){}class ah{constructor(T,R=Ur){this.zone=T,this.delegate=R}now(){return this.delegate.now()}schedule(T,R,V){const Y=this.zone;return this.delegate.schedule(function(Me){Y.runGuarded(()=>{T.apply(this,[Me])})},R,V)}}class ju{constructor(T){this.zone=T,this.task=null}call(T,R){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",no,{},no,no)),R.pipe((0,Dl.b)({next:V,complete:V,error:V})).subscribe(T).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Tc=(()=>{class D{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new ah(Zone.current)),this.insideAngular=R.run(()=>new ah(Zone.current,Ki.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(R){return new(R||D)(c.LFG(c.R0b))},D.\u0275prov=c.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function xi(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function zn(D){return D.pipe((0,Mo.Q)(xi().outsideAngular))}function so(D){return xi(),function(D){return function(R){return(R=R.lift(new ju(D.ngZone))).pipe((0,pa.R)(D.outsideAngular),(0,Mo.Q)(D.insideAngular))}}(xi())(D)}},4213:(Ke,ye,P)=>{"use strict";P.d(ye,{BH:()=>Be,LL:()=>ge,ZR:()=>Ne,zI:()=>de,US:()=>me,tV:()=>ue,$s:()=>tn,r3:()=>gn,Sg:()=>Te,ne:()=>hr,vZ:()=>$t,ZB:()=>H,pd:()=>ls,m9:()=>vu,z$:()=>je,jU:()=>K,ru:()=>le,d:()=>ve,xb:()=>Fn,w1:()=>$e,hl:()=>gt,uI:()=>Ue,UG:()=>ae,b$:()=>De,G6:()=>Ye,Mn:()=>Oe,xO:()=>ta,zd:()=>Vi,eu:()=>ne});const ce=function(G){const U=[];let z=0;for(let Ee=0;Ee<G.length;Ee++){let re=G.charCodeAt(Ee);re<128?U[z++]=re:re<2048?(U[z++]=re>>6|192,U[z++]=63&re|128):55296==(64512&re)&&Ee+1<G.length&&56320==(64512&G.charCodeAt(Ee+1))?(re=65536+((1023&re)<<10)+(1023&G.charCodeAt(++Ee)),U[z++]=re>>18|240,U[z++]=re>>12&63|128,U[z++]=re>>6&63|128,U[z++]=63&re|128):(U[z++]=re>>12|224,U[z++]=re>>6&63|128,U[z++]=63&re|128)}return U},me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(G,U){if(!Array.isArray(G))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=U?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ee=[];for(let re=0;re<G.length;re+=3){const Xe=G[re],mt=re+1<G.length,nn=mt?G[re+1]:0,br=re+2<G.length,On=br?G[re+2]:0;let wr=(15&nn)<<2|On>>6,po=63&On;br||(po=64,mt||(wr=64)),Ee.push(z[Xe>>2],z[(3&Xe)<<4|nn>>4],z[wr],z[po])}return Ee.join("")},encodeString(G,U){return this.HAS_NATIVE_SUPPORT&&!U?btoa(G):this.encodeByteArray(ce(G),U)},decodeString(G,U){return this.HAS_NATIVE_SUPPORT&&!U?atob(G):function(G){const U=[];let z=0,Ee=0;for(;z<G.length;){const re=G[z++];if(re<128)U[Ee++]=String.fromCharCode(re);else if(re>191&&re<224){const Xe=G[z++];U[Ee++]=String.fromCharCode((31&re)<<6|63&Xe)}else if(re>239&&re<365){const br=((7&re)<<18|(63&G[z++])<<12|(63&G[z++])<<6|63&G[z++])-65536;U[Ee++]=String.fromCharCode(55296+(br>>10)),U[Ee++]=String.fromCharCode(56320+(1023&br))}else{const Xe=G[z++],mt=G[z++];U[Ee++]=String.fromCharCode((15&re)<<12|(63&Xe)<<6|63&mt)}}return U.join("")}(this.decodeStringToByteArray(G,U))},decodeStringToByteArray(G,U){this.init_();const z=U?this.charToByteMapWebSafe_:this.charToByteMap_,Ee=[];for(let re=0;re<G.length;){const Xe=z[G.charAt(re++)],nn=re<G.length?z[G.charAt(re)]:0;++re;const On=re<G.length?z[G.charAt(re)]:64;++re;const jt=re<G.length?z[G.charAt(re)]:64;if(++re,null==Xe||null==nn||null==On||null==jt)throw Error();Ee.push(Xe<<2|nn>>4),64!==On&&(Ee.push(nn<<4&240|On>>2),64!==jt&&Ee.push(On<<6&192|jt))}return Ee},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let G=0;G<this.ENCODED_VALS.length;G++)this.byteToCharMap_[G]=this.ENCODED_VALS.charAt(G),this.charToByteMap_[this.byteToCharMap_[G]]=G,this.byteToCharMapWebSafe_[G]=this.ENCODED_VALS_WEBSAFE.charAt(G),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[G]]=G,G>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(G)]=G,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(G)]=G)}}},oe=function(G){return function(G){const U=ce(G);return me.encodeByteArray(U,!0)}(G).replace(/\./g,"")},ue=function(G){try{return me.decodeString(G,!0)}catch(U){console.error("base64Decode failed: ",U)}return null};function H(G,U){if(!(U instanceof Object))return U;switch(U.constructor){case Date:return new Date(U.getTime());case Object:void 0===G&&(G={});break;case Array:G=[];break;default:return U}for(const z in U)!U.hasOwnProperty(z)||!X(z)||(G[z]=H(G[z],U[z]));return G}function X(G){return"__proto__"!==G}class Be{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((U,z)=>{this.resolve=U,this.reject=z})}wrapCallback(U){return(z,Ee)=>{z?this.reject(z):this.resolve(Ee),"function"==typeof U&&(this.promise.catch(()=>{}),1===U.length?U(z):U(z,Ee))}}}function Te(G,U){if(G.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ee=U||"demo-project",re=G.iat||0,Xe=G.sub||G.user_id;if(!Xe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const mt=Object.assign({iss:`https://securetoken.google.com/${Ee}`,aud:Ee,iat:re,exp:re+3600,auth_time:re,sub:Xe,user_id:Xe,firebase:{sign_in_provider:"custom",identities:{}}},G);return[oe(JSON.stringify({alg:"none",type:"JWT"})),oe(JSON.stringify(mt)),""].join(".")}function je(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ue(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}function ae(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(G){return!1}}function K(){return"object"==typeof self&&self.self===self}function le(){const G="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof G&&void 0!==G.id}function De(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ve(){return je().indexOf("Electron/")>=0}function $e(){const G=je();return G.indexOf("MSIE ")>=0||G.indexOf("Trident/")>=0}function Oe(){return je().indexOf("MSAppHost/")>=0}function Ye(){return!ae()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gt(){return"object"==typeof indexedDB}function ne(){return new Promise((G,U)=>{try{let z=!0;const Ee="validate-browser-context-for-indexeddb-analytics-module",re=self.indexedDB.open(Ee);re.onsuccess=()=>{re.result.close(),z||self.indexedDB.deleteDatabase(Ee),G(!0)},re.onupgradeneeded=()=>{z=!1},re.onerror=()=>{var Xe;U((null===(Xe=re.error)||void 0===Xe?void 0:Xe.message)||"")}}catch(z){U(z)}})}function de(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ne extends Error{constructor(U,z,Ee){super(z),this.code=U,this.customData=Ee,this.name="FirebaseError",Object.setPrototypeOf(this,Ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ge.prototype.create)}}class ge{constructor(U,z,Ee){this.service=U,this.serviceName=z,this.errors=Ee}create(U,...z){const Ee=z[0]||{},re=`${this.service}/${U}`,Xe=this.errors[U],mt=Xe?function(G,U){return G.replace(Kt,(z,Ee)=>{const re=U[Ee];return null!=re?String(re):`<${Ee}?>`})}(Xe,Ee):"Error";return new Ne(re,`${this.serviceName}: ${mt} (${re}).`,Ee)}}const Kt=/\{\$([^}]+)}/g;function gn(G,U){return Object.prototype.hasOwnProperty.call(G,U)}function Fn(G){for(const U in G)if(Object.prototype.hasOwnProperty.call(G,U))return!1;return!0}function $t(G,U){if(G===U)return!0;const z=Object.keys(G),Ee=Object.keys(U);for(const re of z){if(!Ee.includes(re))return!1;const Xe=G[re],mt=U[re];if(kn(Xe)&&kn(mt)){if(!$t(Xe,mt))return!1}else if(Xe!==mt)return!1}for(const re of Ee)if(!z.includes(re))return!1;return!0}function kn(G){return null!==G&&"object"==typeof G}function ta(G){const U=[];for(const[z,Ee]of Object.entries(G))Array.isArray(Ee)?Ee.forEach(re=>{U.push(encodeURIComponent(z)+"="+encodeURIComponent(re))}):U.push(encodeURIComponent(z)+"="+encodeURIComponent(Ee));return U.length?"&"+U.join("&"):""}function Vi(G){const U={};return G.replace(/^\?/,"").split("&").forEach(Ee=>{if(Ee){const[re,Xe]=Ee.split("=");U[decodeURIComponent(re)]=decodeURIComponent(Xe)}}),U}function ls(G){const U=G.indexOf("?");if(!U)return"";const z=G.indexOf("#",U);return G.substring(U,z>0?z:void 0)}function hr(G,U){const z=new Yn(G,U);return z.subscribe.bind(z)}class Yn{constructor(U,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{U(this)}).catch(Ee=>{this.error(Ee)})}next(U){this.forEachObserver(z=>{z.next(U)})}error(U){this.forEachObserver(z=>{z.error(U)}),this.close(U)}complete(){this.forEachObserver(U=>{U.complete()}),this.close()}subscribe(U,z,Ee){let re;if(void 0===U&&void 0===z&&void 0===Ee)throw new Error("Missing Observer.");re=function(G,U){if("object"!=typeof G||null===G)return!1;for(const z of["next","error","complete"])if(z in G&&"function"==typeof G[z])return!0;return!1}(U)?U:{next:U,error:z,complete:Ee},void 0===re.next&&(re.next=Ui),void 0===re.error&&(re.error=Ui),void 0===re.complete&&(re.complete=Ui);const Xe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?re.error(this.finalError):re.complete()}catch(mt){}}),this.observers.push(re),Xe}unsubscribeOne(U){void 0===this.observers||void 0===this.observers[U]||(delete this.observers[U],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(U){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,U)}sendOne(U,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[U])try{z(this.observers[U])}catch(Ee){"undefined"!=typeof console&&console.error&&console.error(Ee)}})}close(U){this.finalized||(this.finalized=!0,void 0!==U&&(this.finalError=U),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ui(){}function tn(G,U=1e3,z=2){const Ee=U*Math.pow(z,G),re=Math.round(.5*Ee*(Math.random()-.5)*2);return Math.min(144e5,Ee+re)}function vu(G){return G&&G._delegate?G._delegate:G}},7713:(Ke,ye,P)=>{"use strict";P.d(ye,{Mq:()=>c.getApp,C6:()=>c.getApps});var c=P(1572);(0,c.registerVersion)("firebase","9.6.2","app")},7892:(Ke,ye,P)=>{"use strict";P.d(ye,{Z:()=>c.Z});var c=P(6293);c.Z.registerVersion("firebase","9.6.2","app-compat")},4891:(Ke,ye,P)=>{"use strict";P.r(ye);var c=P(8239),J=P(6293),N=P(4213),ce=P(1572);function oe(_,f){var g={};for(var b in _)Object.prototype.hasOwnProperty.call(_,b)&&f.indexOf(b)<0&&(g[b]=_[b]);if(null!=_&&"function"==typeof Object.getOwnPropertySymbols){var I=0;for(b=Object.getOwnPropertySymbols(_);I<b.length;I++)f.indexOf(b[I])<0&&Object.prototype.propertyIsEnumerable.call(_,b[I])&&(g[b[I]]=_[b[I]])}return g}var Ne=P(3855),ge=P(1177);const zr=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},li=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},gn=new N.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Fn=new Ne.Yd("@firebase/auth");function Li(_,...f){Fn.logLevel<=Ne.in.ERROR&&Fn.error(`Auth (${ce.SDK_VERSION}): ${_}`,...f)}function $t(_,...f){throw ls(_,...f)}function kn(_,...f){return ls(_,...f)}function ta(_,f,g){const b=Object.assign(Object.assign({},li()),{[f]:g});return new N.LL("auth","Firebase",b).create(f,{appName:_.name})}function Vi(_,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&$t(_,"argument-error"),ta(_,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ls(_,...f){if("string"!=typeof _){const g=f[0],b=[...f.slice(1)];return b[0]&&(b[0].appName=_.name),_._errorFactory.create(g,...b)}return gn.create(_,...f)}function Ae(_,f,...g){if(!_)throw ls(f,...g)}function hr(_){const f="INTERNAL ASSERTION FAILED: "+_;throw Li(f),new Error(f)}function Yn(_,f){_||hr(f)}const yt=new Map;function zt(_){Yn(_ instanceof Function,"Expected a class definition");let f=yt.get(_);return f?(Yn(f instanceof _,"Instance stored in cache mismatched with class"),f):(f=new _,yt.set(_,f),f)}function pt(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function vt(){return"http:"===Vt()||"https:"===Vt()}function Vt(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class Qt{constructor(f,g){this.shortDelay=f,this.longDelay=g,Yn(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,N.uI)()||(0,N.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(vt()||(0,N.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Qe(_,f){Yn(_.emulator,"Emulator should always be set here");const{url:g}=_.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class ht{static initialize(f,g,b){this.fetchImpl=f,g&&(this.headersImpl=g),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const yu={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},qs=new Qt(3e4,6e4);function tn(_,f){return _.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:_.tenantId}):f}function St(_,f,g,b){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,c.Z)(function*(_,f,g,b,I={}){return vu(_,I,(0,c.Z)(function*(){let k={},j={};b&&("GET"===f?j=b:k={body:JSON.stringify(b)});const ee=(0,N.xO)(Object.assign({key:_.config.apiKey},j)).slice(1),xe=yield _._getAdditionalHeaders();return xe["Content-Type"]="application/json",_.languageCode&&(xe["X-Firebase-Locale"]=_.languageCode),ht.fetch()(Ee(_,_.config.apiHost,g,ee),Object.assign({method:f,headers:xe,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function vu(_,f,g){return G.apply(this,arguments)}function G(){return(G=(0,c.Z)(function*(_,f,g){_._canInitEmulator=!1;const b=Object.assign(Object.assign({},yu),f);try{const I=new re(_),k=yield Promise.race([g(),I.promise]);I.clearNetworkTimeout();const j=yield k.json();if("needConfirmation"in j)throw Xe(_,"account-exists-with-different-credential",j);if(k.ok&&!("errorMessage"in j))return j;{const ee=k.ok?j.errorMessage:j.error.message,[xe,Re]=ee.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===xe)throw Xe(_,"credential-already-in-use",j);if("EMAIL_EXISTS"===xe)throw Xe(_,"email-already-in-use",j);const st=b[xe]||xe.toLowerCase().replace(/[_\s]+/g,"-");if(Re)throw ta(_,st,Re);$t(_,st)}}catch(I){if(I instanceof N.ZR)throw I;$t(_,"network-request-failed")}})).apply(this,arguments)}function U(_,f,g,b){return z.apply(this,arguments)}function z(){return(z=(0,c.Z)(function*(_,f,g,b,I={}){const k=yield St(_,f,g,b,I);return"mfaPendingCredential"in k&&$t(_,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function Ee(_,f,g,b){const I=`${f}${g}?${b}`;return _.config.emulator?Qe(_.config,I):`${_.config.apiScheme}://${I}`}class re{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,b)=>{this.timer=setTimeout(()=>b(kn(this.auth,"timeout")),qs.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xe(_,f,g){const b={appName:_.name};g.email&&(b.email=g.email),g.phoneNumber&&(b.phoneNumber=g.phoneNumber);const I=kn(_,f,b);return I.customData._tokenResponse=g,I}function nn(){return(nn=(0,c.Z)(function*(_,f){return St(_,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function br(_,f){return On.apply(this,arguments)}function On(){return(On=(0,c.Z)(function*(_,f){return St(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function di(_,f){return jt.apply(this,arguments)}function jt(){return(jt=(0,c.Z)(function*(_,f){return St(_,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function wr(_){if(_)try{const f=new Date(Number(_));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Ya(){return(Ya=(0,c.Z)(function*(_,f=!1){const g=(0,N.m9)(_),b=yield g.getIdToken(f),I=go(b);Ae(I&&I.exp&&I.auth_time&&I.iat,g.auth,"internal-error");const k="object"==typeof I.firebase?I.firebase:void 0,j=null==k?void 0:k.sign_in_provider;return{claims:I,token:b,authTime:wr(sc(I.auth_time)),issuedAtTime:wr(sc(I.iat)),expirationTime:wr(sc(I.exp)),signInProvider:j||null,signInSecondFactor:(null==k?void 0:k.sign_in_second_factor)||null}})).apply(this,arguments)}function sc(_){return 1e3*Number(_)}function go(_){const[f,g,b]=_.split(".");if(void 0===f||void 0===g||void 0===b)return Li("JWT malformed, contained fewer than 3 sections"),null;try{const I=(0,N.tV)(g);return I?JSON.parse(I):(Li("Failed to decode base64 JWT payload"),null)}catch(I){return Li("Caught error parsing JWT payload as JSON",I),null}}function mn(_,f){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,c.Z)(function*(_,f,g=!1){if(g)return f;try{return yield f}catch(b){throw b instanceof N.ZR&&Ti(b)&&_.auth.currentUser===_&&(yield _.auth.signOut()),b}})).apply(this,arguments)}function Ti({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class Er{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const I=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,I)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const b=this.getInterval(f);this.timerId=setTimeout((0,c.Z)(function*(){yield g.iteration()}),b)}iteration(){var f=this;return(0,c.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class Ii{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=wr(this.lastLoginAt),this.creationTime=wr(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function He(_){return kt.apply(this,arguments)}function kt(){return(kt=(0,c.Z)(function*(_){var f;const g=_.auth,b=yield _.getIdToken(),I=yield mn(_,di(g,{idToken:b}));Ae(null==I?void 0:I.users.length,g,"internal-error");const k=I.users[0];_._notifyReloadListener(k);const j=(null===(f=k.providerUserInfo)||void 0===f?void 0:f.length)?Qn(k.providerUserInfo):[],ee=ji(_.providerData,j),st=!!_.isAnonymous&&!(_.email&&k.passwordHash||(null==ee?void 0:ee.length)),tt={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:ee,metadata:new Ii(k.createdAt,k.lastLoginAt),isAnonymous:st};Object.assign(_,tt)})).apply(this,arguments)}function Lr(){return(Lr=(0,c.Z)(function*(_){const f=(0,N.m9)(_);yield He(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function ji(_,f){return[..._.filter(b=>!f.some(I=>I.providerId===b.providerId)),...f]}function Qn(_){return _.map(f=>{var{providerId:g}=f,b=oe(f,["providerId"]);return{providerId:g,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function In(){return(In=(0,c.Z)(function*(_,f){const g=yield vu(_,{},(0,c.Z)(function*(){const b=(0,N.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:I,apiKey:k}=_.config,j=Ee(_,I,"/v1/token",`key=${k}`),ee=yield _._getAdditionalHeaders();return ee["Content-Type"]="application/x-www-form-urlencoded",ht.fetch()(j,{method:"POST",headers:ee,body:b})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Hi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){Ae(f.idToken,"internal-error"),Ae(void 0!==f.idToken,"internal-error"),Ae(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function(_){const f=go(_);return Ae(f,"internal-error"),Ae(void 0!==f.exp,"internal-error"),Ae(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var b=this;return(0,c.Z)(function*(){return Ae(!b.accessToken||b.refreshToken,f,"user-token-expired"),g||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(f,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var b=this;return(0,c.Z)(function*(){const{accessToken:I,refreshToken:k,expiresIn:j}=yield function(_,f){return In.apply(this,arguments)}(f,g);b.updateTokensAndExpiration(I,k,Number(j))})()}updateTokensAndExpiration(f,g,b){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(f,g){const{refreshToken:b,accessToken:I,expirationTime:k}=g,j=new Hi;return b&&(Ae("string"==typeof b,"internal-error",{appName:f}),j.refreshToken=b),I&&(Ae("string"==typeof I,"internal-error",{appName:f}),j.accessToken=I),k&&(Ae("number"==typeof k,"internal-error",{appName:f}),j.expirationTime=k),j}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Hi,this.toJSON())}_performRefresh(){return hr("not implemented")}}function hi(_,f){Ae("string"==typeof _||void 0===_,"internal-error",{appName:f})}class bt{constructor(f){var{uid:g,auth:b,stsTokenManager:I}=f,k=oe(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Er(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=b,this.stsTokenManager=I,this.accessToken=I.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.metadata=new Ii(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,c.Z)(function*(){const b=yield mn(g,g.stsTokenManager.getToken(g.auth,f));return Ae(b,g.auth,"internal-error"),g.accessToken!==b&&(g.accessToken=b,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),b})()}getIdTokenResult(f){return function(_){return Ya.apply(this,arguments)}(this,f)}reload(){return function(_){return Lr.apply(this,arguments)}(this)}_assign(f){this!==f&&(Ae(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new bt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var b=this;return(0,c.Z)(function*(){let I=!1;f.idToken&&f.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(f),I=!0),g&&(yield He(b)),yield b.auth._persistUserIfCurrent(b),I&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var f=this;return(0,c.Z)(function*(){const g=yield f.getIdToken();return yield mn(f,function(_,f){return nn.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var b,I,k,j,ee,xe,Re,st;const tt=null!==(b=g.displayName)&&void 0!==b?b:void 0,Ht=null!==(I=g.email)&&void 0!==I?I:void 0,_r=null!==(k=g.phoneNumber)&&void 0!==k?k:void 0,ei=null!==(j=g.photoURL)&&void 0!==j?j:void 0,Xu=null!==(ee=g.tenantId)&&void 0!==ee?ee:void 0,Nh=null!==(xe=g._redirectEventId)&&void 0!==xe?xe:void 0,wp=null!==(Re=g.createdAt)&&void 0!==Re?Re:void 0,ed=null!==(st=g.lastLoginAt)&&void 0!==st?st:void 0,{uid:Fc,emailVerified:Ep,isAnonymous:Fh,providerData:lr,stsTokenManager:Vo}=g;Ae(Fc&&Vo,f,"internal-error");const Uo=Hi.fromJSON(this.name,Vo);Ae("string"==typeof Fc,f,"internal-error"),hi(tt,f.name),hi(Ht,f.name),Ae("boolean"==typeof Ep,f,"internal-error"),Ae("boolean"==typeof Fh,f,"internal-error"),hi(_r,f.name),hi(ei,f.name),hi(Xu,f.name),hi(Nh,f.name),hi(wp,f.name),hi(ed,f.name);const Aa=new bt({uid:Fc,auth:f,email:Ht,emailVerified:Ep,displayName:tt,isAnonymous:Fh,photoURL:ei,phoneNumber:_r,tenantId:Xu,stsTokenManager:Uo,createdAt:wp,lastLoginAt:ed});return lr&&Array.isArray(lr)&&(Aa.providerData=lr.map(Lh=>Object.assign({},Lh))),Nh&&(Aa._redirectEventId=Nh),Aa}static _fromIdTokenResponse(f,g,b=!1){return(0,c.Z)(function*(){const I=new Hi;I.updateFromServerResponse(g);const k=new bt({uid:g.localId,auth:f,stsTokenManager:I,isAnonymous:b});return yield He(k),k})()}}const fi=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(g,b){var I=this;return(0,c.Z)(function*(){I.storage[g]=b})()}_get(g){var b=this;return(0,c.Z)(function*(){const I=b.storage[g];return void 0===I?null:I})()}_remove(g){var b=this;return(0,c.Z)(function*(){delete b.storage[g]})()}_addListener(g,b){}_removeListener(g,b){}}return _.type="NONE",_})();function pi(_,f,g){return`firebase:${_}:${f}:${g}`}class Si{constructor(f,g,b){this.persistence=f,this.auth=g,this.userKey=b;const{config:I,name:k}=this.auth;this.fullUserKey=pi(this.userKey,I.apiKey,k),this.fullPersistenceKey=pi("persistence",I.apiKey,k),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,c.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?bt._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,c.Z)(function*(){if(g.persistence===f)return;const b=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,b?g.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,b="authUser"){return(0,c.Z)(function*(){if(!g.length)return new Si(zt(fi),f,b);const I=(yield Promise.all(g.map(function(){var Re=(0,c.Z)(function*(st){if(yield st._isAvailable())return st});return function(st){return Re.apply(this,arguments)}}()))).filter(Re=>Re);let k=I[0]||zt(fi);const j=pi(b,f.config.apiKey,f.name);let ee=null;for(const Re of g)try{const st=yield Re._get(j);if(st){const tt=bt._fromJSON(f,st);Re!==k&&(ee=tt),k=Re;break}}catch(st){}const xe=I.filter(Re=>Re._shouldAllowMigration);return k._shouldAllowMigration&&xe.length?(k=xe[0],ee&&(yield k._set(j,ee.toJSON())),yield Promise.all(g.map(function(){var Re=(0,c.Z)(function*(st){if(st!==k)try{yield st._remove(j)}catch(tt){}});return function(st){return Re.apply(this,arguments)}}())),new Si(k,f,b)):new Si(k,f,b)})()}}function on(_){const f=_.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(an(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Qa(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(cs(f))return"Blackberry";if(Xa(f))return"Webos";if($s(f))return"Safari";if((f.includes("chrome/")||sr(f))&&!f.includes("edge/"))return"Chrome";if(Ja(f))return"Android";{const b=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function Qa(_=(0,N.z$)()){return/firefox\//i.test(_)}function $s(_=(0,N.z$)()){const f=_.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function sr(_=(0,N.z$)()){return/crios\//i.test(_)}function an(_=(0,N.z$)()){return/iemobile/i.test(_)}function Ja(_=(0,N.z$)()){return/android/i.test(_)}function cs(_=(0,N.z$)()){return/blackberry/i.test(_)}function Xa(_=(0,N.z$)()){return/webos/i.test(_)}function Gs(_=(0,N.z$)()){return/iphone|ipad|ipod/i.test(_)}function Ln(_=(0,N.z$)()){return Gs(_)||Ja(_)||Xa(_)||cs(_)||/windows phone/i.test(_)||an(_)}function us(_,f=[]){let g;switch(_){case"Browser":g=on((0,N.z$)());break;case"Worker":g=`${on((0,N.z$)())}-${_}`;break;default:g=_}const b=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${ce.SDK_VERSION}/${b}`}class ds{constructor(f,g){this.app=f,this.config=g,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Is(this),this.idTokenSubscription=new Is(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=g.sdkClientVersion}_initializeWithPersistence(f,g){var b=this;return g&&(this._popupRedirectResolver=zt(g)),this._initializationPromise=this.queue((0,c.Z)(function*(){var I,k;if(!b._deleted&&(b.persistenceManager=yield Si.create(b,f),!b._deleted)){if(null===(I=b._popupRedirectResolver)||void 0===I?void 0:I._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch(j){}yield b.initializeCurrentUser(g),b.lastNotifiedUid=(null===(k=b.currentUser)||void 0===k?void 0:k.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,c.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g)}})()}initializeCurrentUser(f){var g=this;return(0,c.Z)(function*(){var b;let I=yield g.assertedPersistence.getCurrentUser();if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const k=null===(b=g.redirectUser)||void 0===b?void 0:b._redirectEventId,j=null==I?void 0:I._redirectEventId,ee=yield g.tryRedirectSignIn(f);(!k||k===j)&&(null==ee?void 0:ee.user)&&(I=ee.user)}return I?I._redirectEventId?(Ae(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===I._redirectEventId?g.directlySetCurrentUser(I):g.reloadAndSetCurrentUserOrClear(I)):g.reloadAndSetCurrentUserOrClear(I):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var g=this;return(0,c.Z)(function*(){let b=null;try{b=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(I){yield g._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,c.Z)(function*(){try{yield He(f)}catch(b){if("auth/network-request-failed"!==b.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var f=this;return(0,c.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,c.Z)(function*(){const b=f?(0,N.m9)(f):null;return b&&Ae(b.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(b&&b._clone(g))})()}_updateCurrentUser(f){var g=this;return(0,c.Z)(function*(){if(!g._deleted)return f&&Ae(g.tenantId===f.tenantId,g,"tenant-id-mismatch"),g.queue((0,c.Z)(function*(){yield g.directlySetCurrentUser(f),g.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,c.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var g=this;return this.queue((0,c.Z)(function*(){yield g.assertedPersistence.setPersistence(zt(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new N.LL("auth","Firebase",f())}onAuthStateChanged(f,g,b){return this.registerStateListener(this.authStateSubscription,f,g,b)}onIdTokenChanged(f,g,b){return this.registerStateListener(this.idTokenSubscription,f,g,b)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var b=this;return(0,c.Z)(function*(){const I=yield b.getOrInitRedirectPersistenceManager(g);return null===f?I.removeCurrentUser():I.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,c.Z)(function*(){if(!g.redirectPersistenceManager){const b=f&&zt(f)||g._popupRedirectResolver;Ae(b,g,"argument-error"),g.redirectPersistenceManager=yield Si.create(g,[zt(b._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,c.Z)(function*(){var b,I;return g._isInitialized&&(yield g.queue((0,c.Z)(function*(){}))),(null===(b=g._currentUser)||void 0===b?void 0:b._redirectEventId)===f?g._currentUser:(null===(I=g.redirectUser)||void 0===I?void 0:I._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,c.Z)(function*(){if(f===g.currentUser)return g.queue((0,c.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,b,I){if(this._deleted)return()=>{};const k="function"==typeof g?g:g.next.bind(g),j=this._isInitialized?Promise.resolve():this._initializationPromise;return Ae(j,this,"internal-error"),j.then(()=>k(this.currentUser)),"function"==typeof g?f.addObserver(g,b,I):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,c.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=us(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,c.Z)(function*(){const g={"X-Client-Version":f.clientVersion};return f.app.options.appId&&(g["X-Firebase-gmpid"]=f.app.options.appId),g})()}}function or(_){return(0,N.m9)(_)}class Is{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,N.ne)(g=>this.observer=g)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ai(_){const f=_.indexOf(":");return f<0?"":_.substr(0,f+1)}function Rg(_){if(!_)return null;const f=Number(_);return isNaN(f)?null:f}class na{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return hr("not implemented")}_getIdTokenResponse(f){return hr("not implemented")}_linkToIdToken(f,g){return hr("not implemented")}_getReauthenticationResolver(f){return hr("not implemented")}}function Uf(_,f){return Gd.apply(this,arguments)}function Gd(){return(Gd=(0,c.Z)(function*(_,f){return St(_,"POST","/v1/accounts:resetPassword",tn(_,f))})).apply(this,arguments)}function Bf(_,f){return zd.apply(this,arguments)}function zd(){return(zd=(0,c.Z)(function*(_,f){return St(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Pg(_,f){return el.apply(this,arguments)}function el(){return(el=(0,c.Z)(function*(_,f){return St(_,"POST","/v1/accounts:update",tn(_,f))})).apply(this,arguments)}function lc(){return(lc=(0,c.Z)(function*(_,f){return U(_,"POST","/v1/accounts:signInWithPassword",tn(_,f))})).apply(this,arguments)}function Eu(_,f){return Zd.apply(this,arguments)}function Zd(){return(Zd=(0,c.Z)(function*(_,f){return St(_,"POST","/v1/accounts:sendOobCode",tn(_,f))})).apply(this,arguments)}function Ng(_,f){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,c.Z)(function*(_,f){return Eu(_,f)})).apply(this,arguments)}function Fg(_,f){return jf.apply(this,arguments)}function jf(){return(jf=(0,c.Z)(function*(_,f){return Eu(_,f)})).apply(this,arguments)}function cc(_,f){return tl.apply(this,arguments)}function tl(){return(tl=(0,c.Z)(function*(_,f){return Eu(_,f)})).apply(this,arguments)}function Cu(_,f){return Kd.apply(this,arguments)}function Kd(){return(Kd=(0,c.Z)(function*(_,f){return Eu(_,f)})).apply(this,arguments)}function hs(){return(hs=(0,c.Z)(function*(_,f){return U(_,"POST","/v1/accounts:signInWithEmailLink",tn(_,f))})).apply(this,arguments)}function Zs(){return(Zs=(0,c.Z)(function*(_,f){return U(_,"POST","/v1/accounts:signInWithEmailLink",tn(_,f))})).apply(this,arguments)}class _o extends na{constructor(f,g,b,I=null){super("password",b),this._email=f,this._password=g,this._tenantId=I}static _fromEmailAndPassword(f,g){return new _o(f,g,"password")}static _fromEmailAndCode(f,g,b=null){return new _o(f,g,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,c.Z)(function*(){switch(g.signInMethod){case"password":return function(_,f){return lc.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function(_,f){return hs.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:$t(f,"internal-error")}})()}_linkToIdToken(f,g){var b=this;return(0,c.Z)(function*(){switch(b.signInMethod){case"password":return Bf(f,{idToken:g,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function(_,f){return Zs.apply(this,arguments)}(f,{idToken:g,email:b._email,oobCode:b._password});default:$t(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Ws(_,f){return ia.apply(this,arguments)}function ia(){return(ia=(0,c.Z)(function*(_,f){return U(_,"POST","/v1/accounts:signInWithIdp",tn(_,f))})).apply(this,arguments)}class Dr extends na{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new Dr(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):$t("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:b,signInMethod:I}=g,k=oe(g,["providerId","signInMethod"]);if(!b||!I)return null;const j=new Dr(b,I);return j.idToken=k.idToken||void 0,j.accessToken=k.accessToken||void 0,j.secret=k.secret,j.nonce=k.nonce,j.pendingToken=k.pendingToken||null,j}_getIdTokenResponse(f){return Ws(f,this.buildRequest())}_linkToIdToken(f,g){const b=this.buildRequest();return b.idToken=g,Ws(f,b)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Ws(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,N.xO)(g)}return f}}function Ss(_,f){return nl.apply(this,arguments)}function nl(){return(nl=(0,c.Z)(function*(_,f){return St(_,"POST","/v1/accounts:sendVerificationCode",tn(_,f))})).apply(this,arguments)}function Vr(){return(Vr=(0,c.Z)(function*(_,f){return U(_,"POST","/v1/accounts:signInWithPhoneNumber",tn(_,f))})).apply(this,arguments)}function Iu(){return(Iu=(0,c.Z)(function*(_,f){const g=yield U(_,"POST","/v1/accounts:signInWithPhoneNumber",tn(_,f));if(g.temporaryProof)throw Xe(_,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const uc={USER_NOT_FOUND:"user-not-found"};function rl(){return(rl=(0,c.Z)(function*(_,f){return U(_,"POST","/v1/accounts:signInWithPhoneNumber",tn(_,Object.assign(Object.assign({},f),{operation:"REAUTH"})),uc)})).apply(this,arguments)}class yo extends na{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new yo({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new yo({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function(_,f){return Vr.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function(_,f){return Iu.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function(_,f){return rl.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:b,verificationCode:I}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:b,code:I}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:b,phoneNumber:I,temporaryProof:k}=f;return b||g||I||k?new yo({verificationId:g,verificationCode:b,phoneNumber:I,temporaryProof:k}):null}}class vo{constructor(f){var g,b,I,k,j,ee;const xe=(0,N.zd)((0,N.pd)(f)),Re=null!==(g=xe.apiKey)&&void 0!==g?g:null,st=null!==(b=xe.oobCode)&&void 0!==b?b:null,tt=function(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(I=xe.mode)&&void 0!==I?I:null);Ae(Re&&st&&tt,"argument-error"),this.apiKey=Re,this.operation=tt,this.code=st,this.continueUrl=null!==(k=xe.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(j=xe.languageCode)&&void 0!==j?j:null,this.tenantId=null!==(ee=xe.tenantId)&&void 0!==ee?ee:null}static parseLink(f){const g=function(_){const f=(0,N.zd)((0,N.pd)(_)).link,g=f?(0,N.zd)((0,N.pd)(f)).deep_link_id:null,b=(0,N.zd)((0,N.pd)(_)).deep_link_id;return(b?(0,N.zd)((0,N.pd)(b)).link:null)||b||g||f||_}(f);try{return new vo(g)}catch(b){return null}}}let bo=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(g,b){return _o._fromEmailAndPassword(g,b)}static credentialWithLink(g,b){const I=vo.parseLink(b);return Ae(I,"argument-error"),_o._fromEmailAndCode(g,I.code,I.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class Wr{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class $i extends Wr{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class $n extends $i{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return Ae("providerId"in g&&"signInMethod"in g,"argument-error"),Dr._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return Ae(f.idToken||f.accessToken,"argument-error"),Dr._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return $n.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return $n.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:b,oauthTokenSecret:I,pendingToken:k,nonce:j,providerId:ee}=f;if(!b&&!I&&!g&&!k||!ee)return null;try{return new $n(ee)._credential({idToken:g,accessToken:b,nonce:j,pendingToken:k})}catch(xe){return null}}}let dc=(()=>{class _ extends $i{constructor(){super("facebook.com")}static credential(g){return Dr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch(b){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),wo=(()=>{class _ extends $i{constructor(){super("google.com"),this.addScope("profile")}static credential(g,b){return Dr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:b})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:b,oauthAccessToken:I}=g;if(!b&&!I)return null;try{return _.credential(b,I)}catch(k){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),Eo=(()=>{class _ extends $i{constructor(){super("github.com")}static credential(g){return Dr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch(b){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class As extends na{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Ws(f,this.buildRequest())}_linkToIdToken(f,g){const b=this.buildRequest();return b.idToken=g,Ws(f,b)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Ws(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:b,signInMethod:I,pendingToken:k}=g;return b&&I&&k&&b===I?new As(b,k):null}static _create(f,g){return new As(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Co extends Wr{constructor(f){Ae(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Co.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Co.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=As.fromJSON(f);return Ae(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:b}=f;if(!g||!b)return null;try{return As._create(b,g)}catch(I){return null}}}let Kr=(()=>{class _ extends $i{constructor(){super("twitter.com")}static credential(g,b){return Dr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:b})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:b,oauthTokenSecret:I}=g;if(!b||!I)return null;try{return _.credential(b,I)}catch(k){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function sl(_,f){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,c.Z)(function*(_,f){return U(_,"POST","/v1/accounts:signUp",tn(_,f))})).apply(this,arguments)}class rt{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,b,I=!1){return(0,c.Z)(function*(){const k=yield bt._fromIdTokenResponse(f,b,I),j=hc(b);return new rt({user:k,providerId:j,_tokenResponse:b,operationType:g})})()}static _forOperation(f,g,b){return(0,c.Z)(function*(){yield f._updateTokensIfNecessary(b,!0);const I=hc(b);return new rt({user:f,providerId:I,_tokenResponse:b,operationType:g})})()}}function hc(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function sa(){return(sa=(0,c.Z)(function*(_){var f;const g=or(_);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new rt({user:g.currentUser,providerId:null,operationType:"signIn"});const b=yield sl(g,{returnSecureToken:!0}),I=yield rt._fromIdTokenResponse(g,"signIn",b,!0);return yield g._updateCurrentUser(I.user),I})).apply(this,arguments)}class al extends N.ZR{constructor(f,g,b,I){var k;super(g.code,g.message),this.operationType=b,this.user=I,Object.setPrototypeOf(this,al.prototype),this.customData={appName:f.name,tenantId:null!==(k=f.tenantId)&&void 0!==k?k:void 0,_serverResponse:g.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(f,g,b,I){return new al(f,g,b,I)}}function fc(_,f,g,b){return("reauthenticate"===f?g._getReauthenticationResolver(_):g._getIdTokenResponse(_)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?al._fromErrorAndOperation(_,k,f,b):k})}function pc(_){return new Set(_.map(({providerId:f})=>f).filter(f=>!!f))}function Ie(){return(Ie=(0,c.Z)(function*(_,f){const g=(0,N.m9)(_);yield Dn(!0,g,f);const{providerUserInfo:b}=yield br(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),I=pc(b||[]);return g.providerData=g.providerData.filter(k=>I.has(k.providerId)),I.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Bt(_,f){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,c.Z)(function*(_,f,g=!1){const b=yield mn(_,f._linkToIdToken(_.auth,yield _.getIdToken()),g);return rt._forOperation(_,"link",b)})).apply(this,arguments)}function Dn(_,f,g){return ll.apply(this,arguments)}function ll(){return(ll=(0,c.Z)(function*(_,f,g){yield He(f);const I=!1===_?"provider-already-linked":"no-such-provider";Ae(pc(f.providerData).has(g)===_,f.auth,I)})).apply(this,arguments)}function xs(_,f){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,c.Z)(function*(_,f,g=!1){const{auth:b}=_,I="reauthenticate";try{const k=yield mn(_,fc(b,I,f,_),g);Ae(k.idToken,b,"internal-error");const j=go(k.idToken);Ae(j,b,"internal-error");const{sub:ee}=j;return Ae(_.uid===ee,b,"user-mismatch"),rt._forOperation(_,I,k)}catch(k){throw"auth/user-not-found"===(null==k?void 0:k.code)&&$t(b,"user-mismatch"),k}})).apply(this,arguments)}function gc(_,f){return Do.apply(this,arguments)}function Do(){return(Do=(0,c.Z)(function*(_,f,g=!1){const b="signIn",I=yield fc(_,b,f),k=yield rt._fromIdTokenResponse(_,b,I);return g||(yield _._updateCurrentUser(k.user)),k})).apply(this,arguments)}function Au(_,f){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,c.Z)(function*(_,f){return gc(or(_),f)})).apply(this,arguments)}function cl(_,f){return To.apply(this,arguments)}function To(){return(To=(0,c.Z)(function*(_,f){const g=(0,N.m9)(_);return yield Dn(!1,g,f.providerId),Bt(g,f)})).apply(this,arguments)}function fr(_,f){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,c.Z)(function*(_,f){return xs((0,N.m9)(_),f)})).apply(this,arguments)}function ul(_,f){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,c.Z)(function*(_,f){return U(_,"POST","/v1/accounts:signInWithCustomToken",tn(_,f))})).apply(this,arguments)}function dl(){return(dl=(0,c.Z)(function*(_,f){const g=or(_),b=yield ul(g,{token:f,returnSecureToken:!0}),I=yield rt._fromIdTokenResponse(g,"signIn",b);return yield g._updateCurrentUser(I.user),I})).apply(this,arguments)}class hl{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?fl._fromServerResponse(f,g):$t(f,"internal-error")}}class fl extends hl{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new fl(g)}}function mc(_,f,g){var b;Ae((null===(b=g.url)||void 0===b?void 0:b.length)>0,_,"invalid-continue-uri"),Ae(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(Ae(g.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(Ae(g.android.packageName.length>0,_,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function oa(){return(oa=(0,c.Z)(function*(_,f,g){const b=(0,N.m9)(_),I={requestType:"PASSWORD_RESET",email:f};g&&mc(b,I,g),yield Fg(b,I)})).apply(this,arguments)}function aa(){return(aa=(0,c.Z)(function*(_,f,g){yield Uf((0,N.m9)(_),{oobCode:f,newPassword:g})})).apply(this,arguments)}function yc(){return(yc=(0,c.Z)(function*(_,f){yield Pg((0,N.m9)(_),{oobCode:f})})).apply(this,arguments)}function vc(_,f){return gl.apply(this,arguments)}function gl(){return(gl=(0,c.Z)(function*(_,f){const g=(0,N.m9)(_),b=yield Uf(g,{oobCode:f}),I=b.requestType;switch(Ae(I,g,"internal-error"),I){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ae(b.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ae(b.mfaInfo,g,"internal-error");default:Ae(b.email,g,"internal-error")}let k=null;return b.mfaInfo&&(k=hl._fromServerResponse(or(g),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:k},operation:I}})).apply(this,arguments)}function ml(){return(ml=(0,c.Z)(function*(_,f){const{data:g}=yield vc((0,N.m9)(_),f);return g.email})).apply(this,arguments)}function _l(){return(_l=(0,c.Z)(function*(_,f,g){const b=or(_),I=yield sl(b,{returnSecureToken:!0,email:f,password:g}),k=yield rt._fromIdTokenResponse(b,"signIn",I);return yield b._updateCurrentUser(k.user),k})).apply(this,arguments)}function _n(){return(_n=(0,c.Z)(function*(_,f,g){const b=(0,N.m9)(_),I={requestType:"EMAIL_SIGNIN",email:f};Ae(g.handleCodeInApp,b,"argument-error"),g&&mc(b,I,g),yield cc(b,I)})).apply(this,arguments)}function la(){return(la=(0,c.Z)(function*(_,f,g){const b=(0,N.m9)(_),I=bo.credentialWithLink(f,g||pt());return Ae(I._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Au(b,I)})).apply(this,arguments)}function qf(_,f){return $f.apply(this,arguments)}function $f(){return($f=(0,c.Z)(function*(_,f){return St(_,"POST","/v1/accounts:createAuthUri",tn(_,f))})).apply(this,arguments)}function Gf(){return(Gf=(0,c.Z)(function*(_,f){const b={identifier:f,continueUri:vt()?pt():"http://localhost"},{signinMethods:I}=yield qf((0,N.m9)(_),b);return I||[]})).apply(this,arguments)}function Js(){return(Js=(0,c.Z)(function*(_,f){const g=(0,N.m9)(_),I={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};f&&mc(g.auth,I,f);const{email:k}=yield Ng(g.auth,I);k!==_.email&&(yield _.reload())})).apply(this,arguments)}function yl(){return(yl=(0,c.Z)(function*(_,f,g){const b=(0,N.m9)(_),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:f};g&&mc(b.auth,k,g);const{email:j}=yield Cu(b.auth,k);j!==_.email&&(yield _.reload())})).apply(this,arguments)}function nh(_,f){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,c.Z)(function*(_,f){return St(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function vn(){return(vn=(0,c.Z)(function*(_,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const b=(0,N.m9)(_),k={idToken:yield b.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},j=yield mn(b,nh(b.auth,k));b.displayName=j.displayName||null,b.photoURL=j.photoUrl||null;const ee=b.providerData.find(({providerId:xe})=>"password"===xe);ee&&(ee.displayName=b.displayName,ee.photoURL=b.photoURL),yield b._updateTokensIfNecessary(j)})).apply(this,arguments)}function zf(_,f,g){return ca.apply(this,arguments)}function ca(){return(ca=(0,c.Z)(function*(_,f,g){const{auth:b}=_,k={idToken:yield _.getIdToken(),returnSecureToken:!0};f&&(k.email=f),g&&(k.password=g);const j=yield mn(_,Bf(b,k));yield _._updateTokensIfNecessary(j,!0)})).apply(this,arguments)}class bl{constructor(f,g,b={}){this.isNewUser=f,this.providerId=g,this.profile=b}}class Ru extends bl{constructor(f,g,b,I){super(f,g,b),this.username=I}}class jg extends bl{constructor(f,g){super(f,"facebook.com",g)}}class ay extends Ru{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Pu extends bl{constructor(f,g){super(f,"google.com",g)}}class ps extends Ru{constructor(f,g,b){super(f,"twitter.com",g,b)}}function Ft(_){const{user:f,_tokenResponse:g}=_;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function(_){var f,g;if(!_)return null;const{providerId:b}=_,I=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},k=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!b&&(null==_?void 0:_.idToken)){const j=null===(g=null===(f=go(_.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(j)return new bl(k,"anonymous"!==j&&"custom"!==j?j:null)}if(!b)return null;switch(b){case"facebook.com":return new jg(k,I);case"github.com":return new ay(k,I);case"google.com":return new Pu(k,I);case"twitter.com":return new ps(k,I,_.screenName||null);case"custom":case"anonymous":return new bl(k,null);default:return new bl(k,b,I)}}(g)}class zi{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new zi("enroll",f)}static _fromMfaPendingCredential(f){return new zi("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,b;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return zi._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(b=f.multiFactorSession)||void 0===b?void 0:b.idToken)return zi._fromIdtoken(f.multiFactorSession.idToken)}return null}}class wl{constructor(f,g,b){this.session=f,this.hints=g,this.signInResolver=b}static _fromError(f,g){const b=or(f),I=g.customData._serverResponse,k=(I.mfaInfo||[]).map(ee=>hl._fromServerResponse(b,ee));Ae(I.mfaPendingCredential,b,"internal-error");const j=zi._fromMfaPendingCredential(I.mfaPendingCredential);return new wl(j,k,function(){var ee=(0,c.Z)(function*(xe){const Re=yield xe._process(b,j);delete I.mfaInfo,delete I.mfaPendingCredential;const st=Object.assign(Object.assign({},I),{idToken:Re.idToken,refreshToken:Re.refreshToken});switch(g.operationType){case"signIn":const tt=yield rt._fromIdTokenResponse(b,g.operationType,st);return yield b._updateCurrentUser(tt.user),tt;case"reauthenticate":return Ae(g.user,b,"internal-error"),rt._forOperation(g.user,g.operationType,st);default:$t(b,"internal-error")}});return function(xe){return ee.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,c.Z)(function*(){return g.signInResolver(f)})()}}function Ir(_,f){return St(_,"POST","/v2/accounts/mfaEnrollment:start",tn(_,f))}class Io{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(b=>hl._fromServerResponse(f.auth,b)))})}static _fromUser(f){return new Io(f)}getSession(){var f=this;return(0,c.Z)(function*(){return zi._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var b=this;return(0,c.Z)(function*(){const I=f,k=yield b.getSession(),j=yield mn(b.user,I._process(b.user.auth,k,g));return yield b.user._updateTokensIfNecessary(j),b.user.reload()})()}unenroll(f){var g=this;return(0,c.Z)(function*(){const b="string"==typeof f?f:f.uid,I=yield g.user.getIdToken(),k=yield mn(g.user,function(_,f){return St(_,"POST","/v2/accounts/mfaEnrollment:withdraw",tn(_,f))}(g.user.auth,{idToken:I,mfaEnrollmentId:b}));g.enrolledFactors=g.enrolledFactors.filter(({uid:j})=>j!==b),yield g.user._updateTokensIfNecessary(k);try{yield g.user.reload()}catch(j){if("auth/user-token-expired"!==j.code)throw j}})()}}const So=new WeakMap,gi="__sak";class Nu{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(gi,"1"),this.storage.removeItem(gi),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const pe=(()=>{class _ extends Nu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,b)=>this.onStorageEvent(g,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const _=(0,N.z$)();return $s(_)||Gs(_)}()&&function(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=Ln(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const b of Object.keys(this.listeners)){const I=this.storage.getItem(b),k=this.localCache[b];I!==k&&g(b,k,I)}}onStorageEvent(g,b=!1){if(!g.key)return void this.forAllChangedKeys((ee,xe,Re)=>{this.notifyListeners(ee,Re)});const I=g.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ee=this.storage.getItem(I);if(g.newValue!==ee)null!==g.newValue?this.storage.setItem(I,g.newValue):this.storage.removeItem(I);else if(this.localCache[I]===g.newValue&&!b)return}const k=()=>{const ee=this.storage.getItem(I);!b&&this.localCache[I]===ee||this.notifyListeners(I,ee)},j=this.storage.getItem(I);(0,N.w1)()&&10===document.documentMode&&j!==g.newValue&&g.newValue!==g.oldValue?setTimeout(k,10):k()}notifyListeners(g,b){this.localCache[g]=b;const I=this.listeners[g];if(I)for(const k of Array.from(I))k(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,b,I)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:b,newValue:I}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,b){var I=()=>super._set,k=this;return(0,c.Z)(function*(){yield I().call(k,g,b),k.localCache[g]=JSON.stringify(b)})()}_get(g){var b=()=>super._get,I=this;return(0,c.Z)(function*(){const k=yield b().call(I,g);return I.localCache[g]=JSON.stringify(k),k})()}_remove(g){var b=()=>super._remove,I=this;return(0,c.Z)(function*(){yield b().call(I,g),delete I.localCache[g]})()}}return _.type="LOCAL",_})(),Gn=(()=>{class _ extends Nu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,b){}_removeListener(g,b){}}return _.type="SESSION",_})();let Ct=(()=>{class _{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const b=this.receivers.find(k=>k.isListeningto(g));if(b)return b;const I=new _(g);return this.receivers.push(I),I}isListeningto(g){return this.eventTarget===g}handleEvent(g){var b=this;return(0,c.Z)(function*(){const I=g,{eventId:k,eventType:j,data:ee}=I.data,xe=b.handlersMap[j];if(!(null==xe?void 0:xe.size))return;I.ports[0].postMessage({status:"ack",eventId:k,eventType:j});const Re=Array.from(xe).map(function(){var tt=(0,c.Z)(function*(Ht){return Ht(I.origin,ee)});return function(Ht){return tt.apply(this,arguments)}}()),st=yield function(_){return Promise.all(_.map(function(){var f=(0,c.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(b){return{fulfilled:!1,reason:b}}});return function(g){return f.apply(this,arguments)}}()))}(Re);I.ports[0].postMessage({status:"done",eventId:k,eventType:j,response:st})})()}_subscribe(g,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(b)}_unsubscribe(g,b){this.handlersMap[g]&&b&&this.handlersMap[g].delete(b),(!b||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function da(_="",f=10){let g="";for(let b=0;b<f;b++)g+=Math.floor(10*Math.random());return _+g}class _s{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,b=50){var I=this;return(0,c.Z)(function*(){const k="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let j,ee;return new Promise((xe,Re)=>{const st=da("",20);k.port1.start();const tt=setTimeout(()=>{Re(new Error("unsupported_event"))},b);ee={messageChannel:k,onMessage(Ht){const _r=Ht;if(_r.data.eventId===st)switch(_r.data.status){case"ack":clearTimeout(tt),j=setTimeout(()=>{Re(new Error("timeout"))},3e3);break;case"done":clearTimeout(j),xe(_r.data.response);break;default:clearTimeout(tt),clearTimeout(j),Re(new Error("invalid_response"))}}},I.handlers.add(ee),k.port1.addEventListener("message",ee.onMessage),I.target.postMessage({eventType:f,eventId:st,data:g},[k.port2])}).finally(()=>{ee&&I.removeMessageHandler(ee)})})()}}function Fe(){return window}function wt(){return void 0!==Fe().WorkerGlobalScope&&"function"==typeof Fe().importScripts}function ys(){return(ys=(0,c.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const vs="firebaseLocalStorageDb",Wi="firebaseLocalStorage",Hg="fbase_key";class Vn{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function cn(_,f){return _.transaction([Wi],f?"readwrite":"readonly").objectStore(Wi)}function to(){const _=indexedDB.open(vs,1);return new Promise((f,g)=>{_.addEventListener("error",()=>{g(_.error)}),_.addEventListener("upgradeneeded",()=>{const b=_.result;try{b.createObjectStore(Wi,{keyPath:Hg})}catch(I){g(I)}}),_.addEventListener("success",(0,c.Z)(function*(){const b=_.result;b.objectStoreNames.contains(Wi)?f(b):(b.close(),yield function(){const _=indexedDB.deleteDatabase(vs);return new Vn(_).toPromise()}(),f(yield to()))}))})}function qg(_,f,g){return Zf.apply(this,arguments)}function Zf(){return(Zf=(0,c.Z)(function*(_,f,g){const b=cn(_,!0).put({[Hg]:f,value:g});return new Vn(b).toPromise()})).apply(this,arguments)}function Lu(){return(Lu=(0,c.Z)(function*(_,f){const g=cn(_,!1).get(f),b=yield new Vn(g).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function ih(_,f){const g=cn(_,!0).delete(f);return new Vn(g).toPromise()}const ks=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,c.Z)(function*(){return g.db||(g.db=yield to()),g.db})()}_withRetries(g){var b=this;return(0,c.Z)(function*(){let I=0;for(;;)try{const k=yield b._openDb();return yield g(k)}catch(k){if(I++>3)throw k;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,c.Z)(function*(){return wt()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,c.Z)(function*(){g.receiver=Ct._getInstance(wt()?self:null),g.receiver._subscribe("keyChanged",function(){var b=(0,c.Z)(function*(I,k){return{keyProcessed:(yield g._poll()).includes(k.key)}});return function(I,k){return b.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var b=(0,c.Z)(function*(I,k){return["keyChanged"]});return function(I,k){return b.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,c.Z)(function*(){var b,I;if(g.activeServiceWorker=yield function(){return ys.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new _s(g.activeServiceWorker);const k=yield g.sender._send("ping",{},800);!k||(null===(b=k[0])||void 0===b?void 0:b.fulfilled)&&(null===(I=k[0])||void 0===I?void 0:I.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var b=this;return(0,c.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:g},b.serviceWorkerReceiverAvailable?800:50)}catch(I){}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const g=yield to();return yield qg(g,gi,"1"),yield ih(g,gi),!0}catch(g){}return!1})()}_withPendingWrite(g){var b=this;return(0,c.Z)(function*(){b.pendingWrites++;try{yield g()}finally{b.pendingWrites--}})()}_set(g,b){var I=this;return(0,c.Z)(function*(){return I._withPendingWrite((0,c.Z)(function*(){return yield I._withRetries(k=>qg(k,g,b)),I.localCache[g]=b,I.notifyServiceWorker(g)}))})()}_get(g){var b=this;return(0,c.Z)(function*(){const I=yield b._withRetries(k=>function(_,f){return Lu.apply(this,arguments)}(k,g));return b.localCache[g]=I,I})()}_remove(g){var b=this;return(0,c.Z)(function*(){return b._withPendingWrite((0,c.Z)(function*(){return yield b._withRetries(I=>ih(I,g)),delete b.localCache[g],b.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,c.Z)(function*(){const b=yield g._withRetries(j=>{const ee=cn(j,!1).getAll();return new Vn(ee).toPromise()});if(!b)return[];if(0!==g.pendingWrites)return[];const I=[],k=new Set;for(const{fbase_key:j,value:ee}of b)k.add(j),JSON.stringify(g.localCache[j])!==JSON.stringify(ee)&&(g.notifyListeners(j,ee),I.push(j));for(const j of Object.keys(g.localCache))g.localCache[j]&&!k.has(j)&&(g.notifyListeners(j,null),I.push(j));return I})()}notifyListeners(g,b){this.localCache[g]=b;const I=this.listeners[g];if(I)for(const k of Array.from(I))k(b)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function Xn(_,f){return St(_,"POST","/v2/accounts/mfaSignIn:start",tn(_,f))}function Qr(){return(Qr=(0,c.Z)(function*(_){return(yield St(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Dl(_){return new Promise((f,g)=>{const b=document.createElement("script");b.setAttribute("src",_),b.onload=f,b.onerror=I=>{const k=kn("internal-error");k.customData=I,g(k)},b.type="text/javascript",b.charset="UTF-8",function(){var _,f;return null!==(f=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==f?f:document}().appendChild(b)})}function Mo(_){return`__${_}${Math.floor(1e6*Math.random())}`}const xo=1e12;class Uu{constructor(f){this.auth=f,this.counter=xo,this._widgets=new Map}render(f,g){const b=this.counter;return this._widgets.set(b,new Wf(f,this.auth.name,g||{})),this.counter++,b}reset(f){var g;const b=f||xo;null===(g=this._widgets.get(b))||void 0===g||g.delete(),this._widgets.delete(b)}getResponse(f){var g;return(null===(g=this._widgets.get(f||xo))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,c.Z)(function*(){var b;return null===(b=g._widgets.get(f||xo))||void 0===b||b.execute(),""})()}}class Wf{constructor(f,g,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const I="string"==typeof f?document.getElementById(f):f;Ae(I,"argument-error",{appName:g}),this.container=I,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(_){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<50;b++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}();const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ga=Mo("rcb"),mr=new Qt(3e4,6e4);class Tl{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Fe().grecaptcha}load(f,g=""){return Ae((_=g).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Fe().grecaptcha):new Promise((b,I)=>{const k=Fe().setTimeout(()=>{I(kn(f,"network-request-failed"))},mr.get());Fe()[ga]=()=>{Fe().clearTimeout(k),delete Fe()[ga];const ee=Fe().grecaptcha;if(!ee)return void I(kn(f,"internal-error"));const xe=ee.render;ee.render=(Re,st)=>{const tt=xe(Re,st);return this.counter++,tt},this.hostLanguage=g,b(ee)},Dl(`https://www.google.com/recaptcha/api.js??${(0,N.xO)({onload:ga,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(k),I(kn(f,"internal-error"))})});var _}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!Fe().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Cc{load(f){return(0,c.Z)(function*(){return new Uu(f)})()}clearedOneInstance(){}}const Dc="recaptcha",Bu={theme:"light",type:"image"};class no{constructor(f,g=Object.assign({},Bu),b){this.parameters=g,this.type=Dc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=or(b),this.isInvisible="invisible"===this.parameters.size,Ae("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const I="string"==typeof f?document.getElementById(f):f;Ae(I,this.auth,"argument-error"),this.container=I,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Cc:new Tl,this.validateStartingState()}verify(){var f=this;return(0,c.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),b=f.getAssertedRecaptcha();return b.getResponse(g)||new Promise(k=>{const j=ee=>{!ee||(f.tokenChangeListeners.delete(j),k(ee))};f.tokenChangeListeners.add(j),f.isInvisible&&b.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){Ae(!this.parameters.sitekey,this.auth,"argument-error"),Ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ae("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(b=>b(g)),"function"==typeof f)f(g);else if("string"==typeof f){const b=Fe()[f];"function"==typeof b&&b(g)}}}assertNotDestroyed(){Ae(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,c.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const b=document.createElement("div");g.appendChild(b),g=b}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,c.Z)(function*(){Ae(vt()&&!wt(),f.auth,"internal-error"),yield function(){let _=null;return new Promise(f=>{"complete"!==document.readyState?(_=()=>f(),window.addEventListener("load",_)):f()}).catch(f=>{throw _&&window.removeEventListener("load",_),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function(_){return Qr.apply(this,arguments)}(f.auth);Ae(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return Ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ju{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=yo._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function xi(){return(xi=(0,c.Z)(function*(_,f,g){const b=or(_),I=yield so(b,f,(0,N.m9)(g));return new ju(I,k=>Au(b,k))})).apply(this,arguments)}function ro(){return(ro=(0,c.Z)(function*(_,f,g){const b=(0,N.m9)(_);yield Dn(!1,b,"phone");const I=yield so(b.auth,f,(0,N.m9)(g));return new ju(I,k=>cl(b,k))})).apply(this,arguments)}function io(){return(io=(0,c.Z)(function*(_,f,g){const b=(0,N.m9)(_),I=yield so(b.auth,f,(0,N.m9)(g));return new ju(I,k=>fr(b,k))})).apply(this,arguments)}function so(_,f,g){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,c.Z)(function*(_,f,g){var b;const I=yield g.verify();try{let k;if(Ae("string"==typeof I,_,"argument-error"),Ae(g.type===Dc,_,"argument-error"),k="string"==typeof f?{phoneNumber:f}:f,"session"in k){const j=k.session;if("phoneNumber"in k)return Ae("enroll"===j.type,_,"internal-error"),(yield Ir(_,{idToken:j.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:I}})).phoneSessionInfo.sessionInfo;{Ae("signin"===j.type,_,"internal-error");const ee=(null===(b=k.multiFactorHint)||void 0===b?void 0:b.uid)||k.multiFactorUid;return Ae(ee,_,"missing-multi-factor-info"),(yield Xn(_,{mfaPendingCredential:j.credential,mfaEnrollmentId:ee,phoneSignInInfo:{recaptchaToken:I}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:j}=yield Ss(_,{phoneNumber:k.phoneNumber,recaptchaToken:I});return j}}finally{g._reset()}})).apply(this,arguments)}function lh(){return(lh=(0,c.Z)(function*(_,f){yield Bt((0,N.m9)(_),f)})).apply(this,arguments)}let D=(()=>{class _{constructor(g){this.providerId=_.PROVIDER_ID,this.auth=or(g)}verifyPhoneNumber(g,b){return so(this.auth,g,(0,N.m9)(b))}static credential(g,b){return yo._fromVerification(g,b)}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:b,temporaryProof:I}=g;return b&&I?yo._fromTokenResponse(b,I):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function T(_,f){return f?zt(f):(Ae(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class R extends na{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Ws(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Ws(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Ws(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function V(_){return gc(_.auth,new R(_),_.bypassAuthState)}function Y(_){const{auth:f,user:g}=_;return Ae(g,f,"internal-error"),xs(g,new R(_),_.bypassAuthState)}function ie(_){return Me.apply(this,arguments)}function Me(){return(Me=(0,c.Z)(function*(_){const{auth:f,user:g}=_;return Ae(g,f,"internal-error"),Bt(g,new R(_),_.bypassAuthState)})).apply(this,arguments)}class et{constructor(f,g,b,I,k=!1){this.auth=f,this.resolver=b,this.user=I,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,c.Z)(function*(b,I){f.pendingPromise={resolve:b,reject:I};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(k){f.reject(k)}});return function(b,I){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,c.Z)(function*(){const{urlResponse:b,sessionId:I,postBody:k,tenantId:j,error:ee,type:xe}=f;if(ee)return void g.reject(ee);const Re={auth:g.auth,requestUri:b,sessionId:I,tenantId:j||void 0,postBody:k||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(xe)(Re))}catch(st){g.reject(st)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return V;case"linkViaPopup":case"linkViaRedirect":return ie;case"reauthViaPopup":case"reauthViaRedirect":return Y;default:$t(this.auth,"internal-error")}}resolve(f){Yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Je=new Qt(2e3,1e4);function sn(){return(sn=(0,c.Z)(function*(_,f,g){const b=or(_);Vi(_,f,Wr);const I=T(b,g);return new oo(b,"signInViaPopup",f,I).executeNotNull()})).apply(this,arguments)}function jr(){return(jr=(0,c.Z)(function*(_,f,g){const b=(0,N.m9)(_);Vi(b.auth,f,Wr);const I=T(b.auth,g);return new oo(b.auth,"reauthViaPopup",f,I,b).executeNotNull()})).apply(this,arguments)}function Jr(){return(Jr=(0,c.Z)(function*(_,f,g){const b=(0,N.m9)(_);Vi(b.auth,f,Wr);const I=T(b.auth,g);return new oo(b.auth,"linkViaPopup",f,I,b).executeNotNull()})).apply(this,arguments)}let oo=(()=>{class _ extends et{constructor(g,b,I,k,j){super(g,b,k,j),this.provider=I,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var g=this;return(0,c.Z)(function*(){const b=yield g.execute();return Ae(b,g.auth,"internal-error"),b})()}onExecution(){var g=this;return(0,c.Z)(function*(){Yn(1===g.filter.length,"Popup operations only handle one event");const b=da();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],b),g.authWindow.associatedEvent=b,g.resolver._originValidation(g.auth).catch(I=>{g.reject(I)}),g.resolver._isIframeWebStorageSupported(g.auth,I=>{I||g.reject(kn(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const g=()=>{var b,I;this.pollId=(null===(I=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===I?void 0:I.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(kn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Je.get())};g()}}return _.currentPopupAction=null,_})();const hn=new Map;class Sn extends et{constructor(f,g,b=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,b),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,c.Z)(function*(){let b=hn.get(g.auth._key());if(!b){try{const k=(yield function(_,f){return _a.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;b=()=>Promise.resolve(k)}catch(I){b=()=>Promise.reject(I)}hn.set(g.auth._key(),b)}return g.bypassAuthState||hn.set(g.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,b=this;return(0,c.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(b,f);if("unknown"!==f.type){if(f.eventId){const I=yield b.auth._redirectUserForId(f.eventId);if(I)return b.user=I,g().call(b,f);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function _a(){return(_a=(0,c.Z)(function*(_,f){const g=Sc(f),b=Il(_);if(!(yield b._isAvailable()))return!1;const I="true"===(yield b._get(g));return yield b._remove(g),I})).apply(this,arguments)}function ch(_,f){return Yf.apply(this,arguments)}function Yf(){return(Yf=(0,c.Z)(function*(_,f){return Il(_)._set(Sc(f),"true")})).apply(this,arguments)}function Il(_){return zt(_._redirectPersistence)}function Sc(_){return pi("pendingRedirect",_.config.apiKey,_.name)}function uh(){return(uh=(0,c.Z)(function*(_,f,g){const b=or(_);Vi(_,f,Wr);const I=T(b,g);return yield ch(I,b),I._openRedirect(b,f,"signInViaRedirect")})).apply(this,arguments)}function Xf(){return(Xf=(0,c.Z)(function*(_,f,g){const b=(0,N.m9)(_);Vi(b.auth,f,Wr);const I=T(b.auth,g);yield ch(I,b.auth);const k=yield Wg(b);return I._openRedirect(b.auth,f,"reauthViaRedirect",k)})).apply(this,arguments)}function ya(){return(ya=(0,c.Z)(function*(_,f,g){const b=(0,N.m9)(_);Vi(b.auth,f,Wr);const I=T(b.auth,g);yield Dn(!1,b,f.providerId),yield ch(I,b.auth);const k=yield Wg(b);return I._openRedirect(b.auth,f,"linkViaRedirect",k)})).apply(this,arguments)}function va(){return(va=(0,c.Z)(function*(_,f){return yield or(_)._initializationPromise,ba(_,f,!1)})).apply(this,arguments)}function ba(_,f){return fh.apply(this,arguments)}function fh(){return(fh=(0,c.Z)(function*(_,f,g=!1){const b=or(_),I=T(b,f),j=yield new Sn(b,I,g).execute();return j&&!g&&(delete j.user._redirectEventId,yield b._persistUserIfCurrent(j.user),yield b._setRedirectUser(null,f)),j})).apply(this,arguments)}function Wg(_){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,c.Z)(function*(_){const f=da(`${_.uid}:::`);return _._redirectEventId=f,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),f})).apply(this,arguments)}class tp{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(f,b)&&(g=!0,this.sendToConsumer(f,b),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wa(_);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var b;if(f.error&&!wa(f)){const I=(null===(b=f.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";g.onError(kn(this.auth,I))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const b=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&b}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(np(f))}saveEventToCache(f){this.cachedEventUids.add(np(f)),this.lastProcessedEventTime=Date.now()}}function np(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(f=>f).join("-")}function wa({type:_,error:f}){return"unknown"===_&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Yg(_){return Po.apply(this,arguments)}function Po(){return(Po=(0,c.Z)(function*(_,f={}){return St(_,"GET","/v1/projects",f)})).apply(this,arguments)}const Qg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ph=/^https?/;function Oi(){return(Oi=(0,c.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:f}=yield Yg(_);for(const g of f)try{if(Mc(g))return}catch(b){}$t(_,"unauthorized-domain")})).apply(this,arguments)}function Mc(_){const f=pt(),{protocol:g,hostname:b}=new URL(f);if(_.startsWith("chrome-extension://")){const j=new URL(_);return""===j.hostname&&""===b?"chrome-extension:"===g&&_.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&j.hostname===b}if(!ph.test(g))return!1;if(Qg.test(_))return b===_;const I=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+I+"|"+I+")$","i").test(b)}const mi=new Qt(3e4,6e4);function Xg(){const _=Fe().___jsl;if(null==_?void 0:_.H)for(const f of Object.keys(_.H))if(_.H[f].r=_.H[f].r||[],_.H[f].L=_.H[f].L||[],_.H[f].r=[..._.H[f].L],_.CP)for(let g=0;g<_.CP.length;g++)_.CP[g]=null}let xc=null;function cy(_){return xc=xc||function(_){return new Promise((f,g)=>{var b,I,k;function j(){Xg(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Xg(),g(kn(_,"network-request-failed"))},timeout:mi.get()})}if(null===(I=null===(b=Fe().gapi)||void 0===b?void 0:b.iframes)||void 0===I?void 0:I.Iframe)f(gapi.iframes.getContext());else{if(!(null===(k=Fe().gapi)||void 0===k?void 0:k.load)){const ee=Mo("iframefcb");return Fe()[ee]=()=>{gapi.load?j():g(kn(_,"network-request-failed"))},Dl(`https://apis.google.com/js/api.js?onload=${ee}`).catch(xe=>g(xe))}j()}}).catch(f=>{throw xc=null,f})}(_),xc}const em=new Qt(5e3,15e3),Hu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ip=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sp(_){const f=_.config;Ae(f.authDomain,_,"auth-domain-config-required");const g=f.emulator?Qe(f,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,b={apiKey:f.apiKey,appName:_.name,v:ce.SDK_VERSION},I=ip.get(_.config.apiHost);I&&(b.eid=I);const k=_._getFrameworks();return k.length&&(b.fw=k.join(",")),`${g}?${(0,N.xO)(b).slice(1)}`}function kc(){return kc=(0,c.Z)(function*(_){const f=yield cy(_),g=Fe().gapi;return Ae(g,_,"internal-error"),f.open({where:document.body,url:sp(_),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Hu,dontclear:!0},b=>new Promise(function(){var I=(0,c.Z)(function*(k,j){yield b.restyle({setHideOnLeave:!1});const ee=kn(_,"network-request-failed"),xe=Fe().setTimeout(()=>{j(ee)},em.get());function Re(){Fe().clearTimeout(xe),k(b)}b.ping(Re).then(Re,()=>{j(ee)})});return function(k,j){return I.apply(this,arguments)}}()))}),kc.apply(this,arguments)}const Ea={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class $u{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function No(_,f,g,b,I,k){Ae(_.config.authDomain,_,"auth-domain-config-required"),Ae(_.config.apiKey,_,"invalid-api-key");const j={apiKey:_.config.apiKey,appName:_.name,authType:g,redirectUrl:b,v:ce.SDK_VERSION,eventId:I};if(f instanceof Wr){f.setDefaultLanguage(_.languageCode),j.providerId=f.providerId||"",(0,N.xb)(f.getCustomParameters())||(j.customParameters=JSON.stringify(f.getCustomParameters()));for(const[xe,Re]of Object.entries(k||{}))j[xe]=Re}if(f instanceof $i){const xe=f.getScopes().filter(Re=>""!==Re);xe.length>0&&(j.scopes=xe.join(","))}_.tenantId&&(j.tid=_.tenantId);const ee=j;for(const xe of Object.keys(ee))void 0===ee[xe]&&delete ee[xe];return`${function({config:_}){return _.emulator?Qe(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,N.xO)(ee).slice(1)}`}const Ca="webStorageSupport";class lp extends class{constructor(f){this.factorId=f}_process(f,g,b){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,b);case"signin":return this._finalizeSignIn(f,g.credential);default:return hr("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new lp(f)}_finalizeEnroll(f,g,b){return function(_,f){return St(_,"POST","/v2/accounts/mfaEnrollment:finalize",tn(_,f))}(f,{idToken:g,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function(_,f){return St(_,"POST","/v2/accounts/mfaSignIn:finalize",tn(_,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let cp=(()=>{class _{constructor(){}static assertion(g){return lp._fromCredential(g)}}return _.FACTOR_ID="phone",_})();var _,xl="@firebase/auth";class Da{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,c.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(b=>{var I;f((null===(I=b)||void 0===I?void 0:I.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function _i(){return window}function Oc(){return Oc=(0,c.Z)(function*(_,f,g){var b;const{BuildInfo:I}=_i();Yn(f.sessionId,"AuthEvent did not contain a session ID");const k=yield Zu(f.sessionId),j={};return Gs()?j.ibi=I.packageName:Ja()?j.apn=I.packageName:$t(_,"operation-not-supported-in-this-environment"),I.displayName&&(j.appDisplayName=I.displayName),j.sessionId=k,No(_,g,f.type,void 0,null!==(b=f.eventId)&&void 0!==b?b:void 0,j)}),Oc.apply(this,arguments)}function En(){return En=(0,c.Z)(function*(_){const{BuildInfo:f}=_i(),g={};Gs()?g.iosBundleId=f.packageName:Ja()?g.androidPackageName=f.packageName:$t(_,"operation-not-supported-in-this-environment"),yield Yg(_,g)}),En.apply(this,arguments)}function up(){return up=(0,c.Z)(function*(_,f,g){const{cordova:b}=_i();let I=()=>{};try{yield new Promise((k,j)=>{let ee=null;function xe(){var tt;k();const Ht=null===(tt=b.plugins.browsertab)||void 0===tt?void 0:tt.close;"function"==typeof Ht&&Ht(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Re(){ee||(ee=window.setTimeout(()=>{j(kn(_,"redirect-cancelled-by-user"))},2e3))}function st(){"visible"===(null==document?void 0:document.visibilityState)&&Re()}f.addPassiveListener(xe),document.addEventListener("resume",Re,!1),Ja()&&document.addEventListener("visibilitychange",st,!1),I=()=>{f.removePassiveListener(xe),document.removeEventListener("resume",Re,!1),document.removeEventListener("visibilitychange",st,!1),ee&&window.clearTimeout(ee)}})}finally{I()}}),up.apply(this,arguments)}function Zu(_){return rm.apply(this,arguments)}function rm(){return rm=(0,c.Z)(function*(_){const f=py(_),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(I=>I.toString(16).padStart(2,"0")).join("")}),rm.apply(this,arguments)}function py(_){if(Yn(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(_);const f=new ArrayBuffer(_.length),g=new Uint8Array(f);for(let b=0;b<_.length;b++)g[b]=_.charCodeAt(b);return g}_="Browser",(0,ce._registerComponent)(new ge.wA("auth",(f,{options:g})=>{const b=f.getProvider("app").getImmediate(),{apiKey:I,authDomain:k}=b.options;return(j=>{Ae(I&&!I.includes(":"),"invalid-api-key",{appName:j.name}),Ae(!(null==k?void 0:k.includes(":")),"argument-error",{appName:j.name});const ee={apiKey:I,authDomain:k,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:us(_)},xe=new ds(j,ee);return function(_,f){const g=(null==f?void 0:f.persistence)||[],b=(Array.isArray(g)?g:[g]).map(zt);(null==f?void 0:f.errorMap)&&_._updateErrorMap(f.errorMap),_._initializeWithPersistence(b,null==f?void 0:f.popupRedirectResolver)}(xe,g),xe})(b)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,b)=>{f.getProvider("auth-internal").initialize()})),(0,ce._registerComponent)(new ge.wA("auth-internal",f=>{const g=or(f.getProvider("auth").getImmediate());return new Da(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ce.registerVersion)(xl,"0.19.5",void 0),(0,ce.registerVersion)(xl,"0.19.5","esm2017");class yi extends tp{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,c.Z)(function*(){yield f.initPromise})()}}function kl(_){return An.apply(this,arguments)}function An(){return An=(0,c.Z)(function*(_){const f=yield Dh()._get(Ia(_));return f&&(yield Dh()._remove(Ia(_))),f}),An.apply(this,arguments)}function Ch(){const _=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const b=Math.floor(Math.random()*f.length);_.push(f.charAt(b))}return _.join("")}function Dh(){return zt(pe)}function Ia(_){return pi("authEvent",_.config.apiKey,_.name)}function Pc(_){if(!(null==_?void 0:_.includes("?")))return{};const[f,...g]=_.split("?");return(0,N.zd)(g.join("?"))}function Th(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:kn("no-auth-event")}}function gp(){var _;return(null===(_=null==self?void 0:self.location)||void 0===_?void 0:_.protocol)||null}function lm(_=(0,N.z$)()){return!("file:"!==gp()&&"ionic:"!==gp()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function yp(){try{const _=self.localStorage,f=da();if(_)return _.setItem(f,"1"),_.removeItem(f),!function(_=(0,N.z$)()){return(0,N.w1)()&&11===(null==document?void 0:document.documentMode)||function(_=(0,N.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,N.hl)()}catch(_){return Ol()&&(0,N.hl)()}return!1}function Ol(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Rl(){return("http:"===gp()||"https:"===gp()||(0,N.ru)()||lm())&&!((0,N.b$)()||(0,N.UG)())&&yp()&&!Ol()}function vp(){return lm()&&"undefined"!=typeof document}function Mh(){return Mh=(0,c.Z)(function*(){return!!vp()&&new Promise(_=>{const f=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),_(!0)})})}),Mh.apply(this,arguments)}const Yi={LOCAL:"local",NONE:"none",SESSION:"session"},Ku=Ae,bp="persistence";function xh(_){return kh.apply(this,arguments)}function kh(){return kh=(0,c.Z)(function*(_){yield _._initializationPromise;const f=Ri(),g=pi(bp,_.config.apiKey,_.name);(null==f?void 0:f.sessionStorage)&&f.sessionStorage.setItem(g,_._getPersistence())}),kh.apply(this,arguments)}function Ri(){return"undefined"!=typeof window?window:null}const yy=Ae;class vi{constructor(){this.browserResolver=zt(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gn,this._completeRedirectFn=ba}_openPopup(f,g,b,I){var k=this;return(0,c.Z)(function*(){var j;Yn(null===(j=k.eventManagers[f._key()])||void 0===j?void 0:j.manager,"_initialize() not called before _openPopup()");const ee=No(f,g,b,pt(),I);return function(_,f,g,b=500,I=600){const k=Math.max((window.screen.availHeight-I)/2,0).toString(),j=Math.max((window.screen.availWidth-b)/2,0).toString();let ee="";const xe=Object.assign(Object.assign({},Ea),{width:b.toString(),height:I.toString(),top:k,left:j}),Re=(0,N.z$)().toLowerCase();g&&(ee=sr(Re)?"_blank":g),Qa(Re)&&(f=f||"http://localhost",xe.scrollbars="yes");const st=Object.entries(xe).reduce((Ht,[_r,ei])=>`${Ht}${_r}=${ei},`,"");if(function(_=(0,N.z$)()){var f;return Gs(_)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Re)&&"_self"!==ee)return function(_,f){const g=document.createElement("a");g.href=_,g.target=f;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(b)}(f||"",ee),new $u(null);const tt=window.open(f||"",ee,st);Ae(tt,_,"popup-blocked");try{tt.focus()}catch(Ht){}return new $u(tt)}(f,ee,da())})()}_openRedirect(f,g,b,I){var k=this;return(0,c.Z)(function*(){return yield k._originValidation(f),_=No(f,g,b,pt(),I),Fe().location.href=_,new Promise(()=>{});var _})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:I,promise:k}=this.eventManagers[g];return I?Promise.resolve(I):(Yn(k,"If manager is not set, promise should be"),k)}const b=this.initAndGetManager(f);return this.eventManagers[g]={promise:b},b.catch(()=>{delete this.eventManagers[g]}),b}initAndGetManager(f){var g=this;return(0,c.Z)(function*(){const b=yield function(_){return kc.apply(this,arguments)}(f),I=new tp(f);return b.register("authEvent",k=>(Ae(null==k?void 0:k.authEvent,f,"invalid-auth-event"),{status:I.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:I},g.iframes[f._key()]=b,I})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Ca,{type:Ca},I=>{var k;const j=null===(k=null==I?void 0:I[0])||void 0===k?void 0:k[Ca];void 0!==j&&g(!!j),$t(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(_){return Oi.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return Ln()||$s()||Gs()}}),this.cordovaResolver=zt(class{constructor(){this._redirectPersistence=Gn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ba}_initialize(f){var g=this;return(0,c.Z)(function*(){const b=f._key();let I=g.eventManagers.get(b);return I||(I=new yi(f),g.eventManagers.set(b,I),g.attachCallbackListeners(f,I)),I})()}_openPopup(f){$t(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,b,I){var k=this;return(0,c.Z)(function*(){!function(_){var f,g,b,I,k,j,ee,xe,Re,st;const tt=_i();Ae("function"==typeof(null===(f=null==tt?void 0:tt.universalLinks)||void 0===f?void 0:f.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ae(void 0!==(null===(g=null==tt?void 0:tt.BuildInfo)||void 0===g?void 0:g.packageName),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ae("function"==typeof(null===(k=null===(I=null===(b=null==tt?void 0:tt.cordova)||void 0===b?void 0:b.plugins)||void 0===I?void 0:I.browsertab)||void 0===k?void 0:k.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ae("function"==typeof(null===(xe=null===(ee=null===(j=null==tt?void 0:tt.cordova)||void 0===j?void 0:j.plugins)||void 0===ee?void 0:ee.browsertab)||void 0===xe?void 0:xe.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ae("function"==typeof(null===(st=null===(Re=null==tt?void 0:tt.cordova)||void 0===Re?void 0:Re.InAppBrowser)||void 0===st?void 0:st.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const j=yield k._initialize(f);yield j.initialized(),j.resetRedirect(),hn.clear(),yield k._originValidation(f);const ee=function(_,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:Ch(),postBody:null,tenantId:_.tenantId,error:kn(_,"no-auth-event")}}(f,b,I);yield function(_,f){return Dh()._set(Ia(_),f)}(f,ee);const xe=yield function(_,f,g){return Oc.apply(this,arguments)}(f,ee,g),Re=yield function(_){const{cordova:f}=_i();return new Promise(g=>{f.plugins.browsertab.isAvailable(b=>{let I=null;b?f.plugins.browsertab.openUrl(_):I=f.InAppBrowser.open(_,function(_=(0,N.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),g(I)})})}(xe);return function(_,f,g){return up.apply(this,arguments)}(f,j,Re)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(_){return En.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:b,handleOpenURL:I,BuildInfo:k}=_i(),j=setTimeout((0,c.Z)(function*(){yield kl(f),g.onEvent(Th())}),500),ee=function(){var st=(0,c.Z)(function*(tt){clearTimeout(j);const Ht=yield kl(f);let _r=null;Ht&&(null==tt?void 0:tt.url)&&(_r=function(_,f){var g,b;const I=function(_){const f=Pc(_),g=f.link?decodeURIComponent(f.link):void 0,b=Pc(g).link,I=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Pc(I).link||I||b||g||_}(f);if(I.includes("/__/auth/callback")){const k=Pc(I),j=k.firebaseError?function(_){try{return JSON.parse(_)}catch(f){return null}}(decodeURIComponent(k.firebaseError)):null,ee=null===(b=null===(g=null==j?void 0:j.code)||void 0===g?void 0:g.split("auth/"))||void 0===b?void 0:b[1],xe=ee?kn(ee):null;return xe?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:xe,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:I,postBody:null}}return null}(Ht,tt.url)),g.onEvent(_r||Th())});return function(Ht){return st.apply(this,arguments)}}();void 0!==b&&"function"==typeof b.subscribe&&b.subscribe(null,ee);const xe=I,Re=`${k.packageName.toLowerCase()}://`;_i().handleOpenURL=function(){var st=(0,c.Z)(function*(tt){if(tt.toLowerCase().startsWith(Re)&&ee({url:tt}),"function"==typeof xe)try{xe(tt)}catch(Ht){console.error(Ht)}});return function(tt){return st.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Gn,this._completeRedirectFn=ba}_initialize(f){var g=this;return(0,c.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,b,I){var k=this;return(0,c.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openPopup(f,g,b,I)})()}_openRedirect(f,g,b,I){var k=this;return(0,c.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openRedirect(f,g,b,I)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return vp()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,c.Z)(function*(){if(f.underlyingResolver)return;const g=yield function(){return Mh.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function Oh(_){return _.unwrap()}function bs(_){return Yu(_)}function Yu(_){const{_tokenResponse:f}=_ instanceof N.ZR?_.customData:_;if(!f)return null;if(!(_ instanceof N.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return D.credentialFromResult(_);const g=f.providerId;if(!g||"password"===g)return null;let b;switch(g){case"google.com":b=wo;break;case"facebook.com":b=dc;break;case"github.com":b=Eo;break;case"twitter.com":b=Kr;break;default:const{oauthIdToken:I,oauthAccessToken:k,oauthTokenSecret:j,pendingToken:ee,nonce:xe}=f;return k||j||I||ee?ee?g.startsWith("saml.")?As._create(g,ee):Dr._fromParams({providerId:g,signInMethod:g,pendingToken:ee,idToken:I,accessToken:k}):new $n(g).credential({idToken:I,accessToken:k,rawNonce:xe}):null}return _ instanceof N.ZR?b.credentialFromError(_):b.credentialFromResult(_)}function Xr(_,f){return f.catch(g=>{throw g instanceof N.ZR&&function(_,f){var g;const b=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new Rh(_,function(_,f){var g;const b=(0,N.m9)(_),I=f;return Ae(f.customData.operationType,b,"argument-error"),Ae(null===(g=I.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,b,"argument-error"),wl._fromError(b,I)}(_,f));else if(b){const I=Yu(f),k=f;I&&(k.credential=I,k.tenantId=b.tenantId||void 0,k.email=b.email||void 0,k.phoneNumber=b.phoneNumber||void 0)}}(_,g),g}).then(g=>{const I=g.user;return{operationType:g.operationType,credential:bs(g),additionalUserInfo:Ft(g),user:Qi.getOrCreate(I)}})}function Fl(_,f){return Sa.apply(this,arguments)}function Sa(){return Sa=(0,c.Z)(function*(_,f){const g=yield f;return{verificationId:g.verificationId,confirm:b=>Xr(_,g.confirm(b))}}),Sa.apply(this,arguments)}class Rh{constructor(f,g){this.resolver=g,this.auth=function(_){return _.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Xr(Oh(this.auth),this.resolver.resolveSignIn(f))}}class Qi{constructor(f){this._delegate=f,this.multiFactor=function(_){const f=(0,N.m9)(_);return So.has(f)||So.set(f,Io._fromUser(f)),So.get(f)}(f)}static getOrCreate(f){return Qi.USER_MAP.has(f)||Qi.USER_MAP.set(f,new Qi(f)),Qi.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,c.Z)(function*(){return Xr(g.auth,cl(g._delegate,f))})()}linkWithPhoneNumber(f,g){var b=this;return(0,c.Z)(function*(){return Fl(b.auth,function(_,f,g){return ro.apply(this,arguments)}(b._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,c.Z)(function*(){return Xr(g.auth,function(_,f,g){return Jr.apply(this,arguments)}(g._delegate,f,vi))})()}linkWithRedirect(f){var g=this;return(0,c.Z)(function*(){return yield xh(or(g.auth)),function(_,f,g){return function(_,f,g){return ya.apply(this,arguments)}(_,f,g)}(g._delegate,f,vi)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,c.Z)(function*(){return Xr(g.auth,fr(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Fl(this.auth,function(_,f,g){return io.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return Xr(this.auth,function(_,f,g){return jr.apply(this,arguments)}(this._delegate,f,vi))}reauthenticateWithRedirect(f){var g=this;return(0,c.Z)(function*(){return yield xh(or(g.auth)),function(_,f,g){return function(_,f,g){return Xf.apply(this,arguments)}(_,f,g)}(g._delegate,f,vi)})()}sendEmailVerification(f){return function(_,f){return Js.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,c.Z)(function*(){return yield function(_,f){return Ie.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function(_,f){return zf((0,N.m9)(_),f,null)}(this._delegate,f)}updatePassword(f){return function(_,f){return zf((0,N.m9)(_),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function(_,f){return lh.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function(_,f){return vn.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function(_,f,g){return yl.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Qi.USER_MAP=new WeakMap;const Ll=Ae;let Qu=(()=>{class _{constructor(g,b){if(this.app=g,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:I}=g.options;Ll(I,"invalid-api-key",{appName:g.name}),Ll(I,"invalid-api-key",{appName:g.name});const k="undefined"!=typeof window?vi:void 0;this._delegate=b.initialize({options:{persistence:vy(I,g.name),popupRedirectResolver:k}}),this._delegate._updateErrorMap(zr),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Qi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,b){!function(_,f,g){const b=or(_);Ae(b._canInitEmulator,b,"emulator-config-failed"),Ae(/^https?:\/\//.test(f),b,"invalid-emulator-scheme");const I=!!(null==g?void 0:g.disableWarnings),k=Ai(f),{host:j,port:ee}=function(_){const f=Ai(_),g=/(\/\/)?([^?#/]+)/.exec(_.substr(f.length));if(!g)return{host:"",port:null};const b=g[2].split("@").pop()||"",I=/^(\[[^\]]+\])(:|$)/.exec(b);if(I){const k=I[1];return{host:k,port:Rg(b.substr(k.length+1))}}{const[k,j]=b.split(":");return{host:k,port:Rg(j)}}}(f);b.config.emulator={url:`${k}//${j}${null===ee?"":`:${ee}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:j,port:ee,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:I})}),I||function(){function _(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,g,b)}applyActionCode(g){return function(_,f){return yc.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return vc(this._delegate,g)}confirmPasswordReset(g,b){return function(_,f,g){return aa.apply(this,arguments)}(this._delegate,g,b)}createUserWithEmailAndPassword(g,b){var I=this;return(0,c.Z)(function*(){return Xr(I._delegate,function(_,f,g){return _l.apply(this,arguments)}(I._delegate,g,b))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function(_,f){return Gf.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function(_,f){const g=vo.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,c.Z)(function*(){Ll(Rl(),g._delegate,"operation-not-supported-in-this-environment");const b=yield function(_,f){return va.apply(this,arguments)}(g._delegate,vi);return b?Xr(g._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function(_,f){or(_)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,b,I){const{next:k,error:j,complete:ee}=Vl(g,b,I);return this._delegate.onAuthStateChanged(k,j,ee)}onIdTokenChanged(g,b,I){const{next:k,error:j,complete:ee}=Vl(g,b,I);return this._delegate.onIdTokenChanged(k,j,ee)}sendSignInLinkToEmail(g,b){return function(_,f,g){return _n.apply(this,arguments)}(this._delegate,g,b)}sendPasswordResetEmail(g,b){return function(_,f,g){return oa.apply(this,arguments)}(this._delegate,g,b||void 0)}setPersistence(g){var b=this;return(0,c.Z)(function*(){let I;switch(function(_,f){Ku(Object.values(Yi).includes(f),_,"invalid-persistence-type"),(0,N.b$)()?Ku(f!==Yi.SESSION,_,"unsupported-persistence-type"):(0,N.UG)()?Ku(f===Yi.NONE,_,"unsupported-persistence-type"):Ol()?Ku(f===Yi.NONE||f===Yi.LOCAL&&(0,N.hl)(),_,"unsupported-persistence-type"):Ku(f===Yi.NONE||yp(),_,"unsupported-persistence-type")}(b._delegate,g),g){case Yi.SESSION:I=Gn;break;case Yi.LOCAL:I=(yield zt(ks)._isAvailable())?ks:pe;break;case Yi.NONE:I=fi;break;default:return $t("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(I)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Xr(this._delegate,function(_){return sa.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Xr(this._delegate,Au(this._delegate,g))}signInWithCustomToken(g){return Xr(this._delegate,function(_,f){return dl.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,b){return Xr(this._delegate,function(_,f,g){return Au((0,N.m9)(_),bo.credential(f,g))}(this._delegate,g,b))}signInWithEmailLink(g,b){return Xr(this._delegate,function(_,f,g){return la.apply(this,arguments)}(this._delegate,g,b))}signInWithPhoneNumber(g,b){return Fl(this._delegate,function(_,f,g){return xi.apply(this,arguments)}(this._delegate,g,b))}signInWithPopup(g){var b=this;return(0,c.Z)(function*(){return Ll(Rl(),b._delegate,"operation-not-supported-in-this-environment"),Xr(b._delegate,function(_,f,g){return sn.apply(this,arguments)}(b._delegate,g,vi))})()}signInWithRedirect(g){var b=this;return(0,c.Z)(function*(){return Ll(Rl(),b._delegate,"operation-not-supported-in-this-environment"),yield xh(b._delegate),function(_,f,g){return function(_,f,g){return uh.apply(this,arguments)}(_,f,g)}(b._delegate,g,vi)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function(_,f){return ml.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=Yi,_})();function Vl(_,f,g){let b=_;"function"!=typeof _&&({next:b,error:f,complete:g}=_);const I=b;return{next:j=>I(j&&Qi.getOrCreate(j)),error:f,complete:g}}function vy(_,f){const g=function(_,f){const g=Ri();if(!(null==g?void 0:g.sessionStorage))return[];const b=pi(bp,_,f);switch(g.sessionStorage.getItem(b)){case Yi.NONE:return[fi];case Yi.LOCAL:return[ks,Gn];case Yi.SESSION:return[Gn];default:return[]}}(_,f);if("undefined"!=typeof self&&!g.includes(ks)&&g.push(ks),"undefined"!=typeof window)for(const b of[pe,Gn])g.includes(b)||g.push(b);return g.includes(fi)||g.push(fi),g}class Lo{constructor(){this.providerId="phone",this._delegate=new D(Oh(J.Z.auth()))}static credential(f,g){return D.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Lo.PHONE_SIGN_IN_METHOD=D.PHONE_SIGN_IN_METHOD,Lo.PROVIDER_ID=D.PROVIDER_ID;const Ju=Ae;class Ph{constructor(f,g,b=J.Z.app()){var I;Ju(null===(I=b.options)||void 0===I?void 0:I.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new no(f,g,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(_){_.INTERNAL.registerComponent(new ge.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),b=f.getProvider("auth");return new Qu(g,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:bo,FacebookAuthProvider:dc,GithubAuthProvider:Eo,GoogleAuthProvider:wo,OAuthProvider:$n,SAMLAuthProvider:Co,PhoneAuthProvider:Lo,PhoneMultiFactorGenerator:cp,RecaptchaVerifier:Ph,TwitterAuthProvider:Kr,Auth:Qu,AuthCredential:na,Error:N.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.5")}(J.Z)},4995:function(Ke,ye){!function(P){"use strict";function c(ae){return Array.prototype.slice.call(ae)}function J(ae){return new Promise(function(K,le){ae.onsuccess=function(){K(ae.result)},ae.onerror=function(){le(ae.error)}})}function N(ae,K,le){var De,ve=new Promise(function($e,Oe){J(De=ae[K].apply(ae,le)).then($e,Oe)});return ve.request=De,ve}function ce(ae,K,le){var De=N(ae,K,le);return De.then(function(ve){if(ve)return new q(ve,De.request)})}function se(ae,K,le){le.forEach(function(De){Object.defineProperty(ae.prototype,De,{get:function(){return this[K][De]},set:function(ve){this[K][De]=ve}})})}function me(ae,K,le,De){De.forEach(function(ve){ve in le.prototype&&(ae.prototype[ve]=function(){return N(this[K],ve,arguments)})})}function te(ae,K,le,De){De.forEach(function(ve){ve in le.prototype&&(ae.prototype[ve]=function(){return this[K][ve].apply(this[K],arguments)})})}function oe(ae,K,le,De){De.forEach(function(ve){ve in le.prototype&&(ae.prototype[ve]=function(){return ce(this[K],ve,arguments)})})}function ue(ae){this._index=ae}function q(ae,K){this._cursor=ae,this._request=K}function H(ae){this._store=ae}function X(ae){this._tx=ae,this.complete=new Promise(function(K,le){ae.oncomplete=function(){K()},ae.onerror=function(){le(ae.error)},ae.onabort=function(){le(ae.error)}})}function Be(ae,K,le){this._db=ae,this.oldVersion=K,this.transaction=new X(le)}function Te(ae){this._db=ae}se(ue,"_index",["name","keyPath","multiEntry","unique"]),me(ue,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),oe(ue,"_index",IDBIndex,["openCursor","openKeyCursor"]),se(q,"_cursor",["direction","key","primaryKey","value"]),me(q,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(ae){ae in IDBCursor.prototype&&(q.prototype[ae]=function(){var K=this,le=arguments;return Promise.resolve().then(function(){return K._cursor[ae].apply(K._cursor,le),J(K._request).then(function(De){if(De)return new q(De,K._request)})})})}),H.prototype.createIndex=function(){return new ue(this._store.createIndex.apply(this._store,arguments))},H.prototype.index=function(){return new ue(this._store.index.apply(this._store,arguments))},se(H,"_store",["name","keyPath","indexNames","autoIncrement"]),me(H,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),oe(H,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),te(H,"_store",IDBObjectStore,["deleteIndex"]),X.prototype.objectStore=function(){return new H(this._tx.objectStore.apply(this._tx,arguments))},se(X,"_tx",["objectStoreNames","mode"]),te(X,"_tx",IDBTransaction,["abort"]),Be.prototype.createObjectStore=function(){return new H(this._db.createObjectStore.apply(this._db,arguments))},se(Be,"_db",["name","version","objectStoreNames"]),te(Be,"_db",IDBDatabase,["deleteObjectStore","close"]),Te.prototype.transaction=function(){return new X(this._db.transaction.apply(this._db,arguments))},se(Te,"_db",["name","version","objectStoreNames"]),te(Te,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(ae){[H,ue].forEach(function(K){ae in K.prototype&&(K.prototype[ae.replace("open","iterate")]=function(){var le=c(arguments),De=le[le.length-1],ve=this._store||this._index,$e=ve[ae].apply(ve,le.slice(0,-1));$e.onsuccess=function(){De($e.result)}})})}),[ue,H].forEach(function(ae){ae.prototype.getAll||(ae.prototype.getAll=function(K,le){var De=this,ve=[];return new Promise(function($e){De.iterateCursor(K,function(Oe){Oe?(ve.push(Oe.value),void 0===le||ve.length!=le?Oe.continue():$e(ve)):$e(ve)})})})}),P.openDb=function(ae,K,le){var De=N(indexedDB,"open",[ae,K]),ve=De.request;return ve&&(ve.onupgradeneeded=function($e){le&&le(new Be(ve.result,$e.oldVersion,ve.transaction))}),De.then(function($e){return new Te($e)})},P.deleteDb=function(ae){return N(indexedDB,"deleteDatabase",[ae])},Object.defineProperty(P,"__esModule",{value:!0})}(ye)},8305:(Ke,ye,P)=>{"use strict";P.d(ye,{y:()=>q});var c=P(584),J=P(7908),N=P(4816),ce=P(4623);var te=P(5367),oe=P(5044),ue=P(8706);let q=(()=>{class Te{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const ae=new Te;return ae.source=this,ae.operator=Ue,ae}subscribe(Ue,ae,K){const le=function(Te){return Te&&Te instanceof c.Lv||function(Te){return Te&&(0,oe.m)(Te.next)&&(0,oe.m)(Te.error)&&(0,oe.m)(Te.complete)}(Te)&&(0,J.Nn)(Te)}(Ue)?Ue:new c.Hp(Ue,ae,K);return(0,ue.x)(()=>{const{operator:De,source:ve}=this;le.add(De?De.call(le,ve):ve?this._subscribe(le):this._trySubscribe(le))}),le}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(ae){Ue.error(ae)}}forEach(Ue,ae){return new(ae=H(ae))((K,le)=>{let De;De=this.subscribe(ve=>{try{Ue(ve)}catch($e){le($e),null==De||De.unsubscribe()}},le,K)})}_subscribe(Ue){var ae;return null===(ae=this.source)||void 0===ae?void 0:ae.subscribe(Ue)}[N.L](){return this}pipe(...Ue){return function(Te){return 0===Te.length?ce.y:1===Te.length?Te[0]:function(Ue){return Te.reduce((ae,K)=>K(ae),Ue)}}(Ue)(this)}toPromise(Ue){return new(Ue=H(Ue))((ae,K)=>{let le;this.subscribe(De=>le=De,De=>K(De),()=>ae(le))})}}return Te.create=je=>new Te(je),Te})();function H(Te){var je;return null!==(je=null!=Te?Te:te.v.Promise)&&void 0!==je?je:Promise}},273:(Ke,ye,P)=>{"use strict";P.d(ye,{x:()=>te});var c=P(8305),J=P(7908);const ce=(0,P(4893).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=P(3980),me=P(8706);let te=(()=>{class ue extends c.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const X=new oe(this,this);return X.operator=H,X}_throwIfClosed(){if(this.closed)throw new ce}next(H){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const X=this.observers.slice();for(const Be of X)Be.next(H)}})}error(H){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:X}=this;for(;X.length;)X.shift().error(H)}})}complete(){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:X,isStopped:Be,observers:Te}=this;return X||Be?J.Lc:(Te.push(H),new J.w0(()=>(0,se.P)(Te,H)))}_checkFinalizedStatuses(H){const{hasError:X,thrownError:Be,isStopped:Te}=this;X?H.error(Be):Te&&H.complete()}asObservable(){const H=new c.y;return H.source=this,H}}return ue.create=(q,H)=>new oe(q,H),ue})();class oe extends te{constructor(q,H){super(),this.destination=q,this.source=H}next(q){var H,X;null===(X=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===X||X.call(H,q)}error(q){var H,X;null===(X=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===X||X.call(H,q)}complete(){var q,H;null===(H=null===(q=this.destination)||void 0===q?void 0:q.complete)||void 0===H||H.call(q)}_subscribe(q){var H,X;return null!==(X=null===(H=this.source)||void 0===H?void 0:H.subscribe(q))&&void 0!==X?X:J.Lc}}},584:(Ke,ye,P)=>{"use strict";P.d(ye,{Hp:()=>Be,Lv:()=>X});var c=P(5044),J=P(7908),N=P(5367),ce=P(5160),se=P(6921);const me=ue("C",void 0,void 0);function ue(K,le,De){return{kind:K,value:le,error:De}}var q=P(2496),H=P(8706);class X extends J.w0{constructor(le){super(),this.isStopped=!1,le?(this.destination=le,(0,J.Nn)(le)&&le.add(this)):this.destination=ae}static create(le,De,ve){return new Be(le,De,ve)}next(le){this.isStopped?Ue(ue("N",le,void 0),this):this._next(le)}error(le){this.isStopped?Ue(ue("E",void 0,le),this):(this.isStopped=!0,this._error(le))}complete(){this.isStopped?Ue(me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(le){this.destination.next(le)}_error(le){try{this.destination.error(le)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Be extends X{constructor(le,De,ve){let $e;if(super(),(0,c.m)(le))$e=le;else if(le){let Oe;({next:$e,error:De,complete:ve}=le),this&&N.v.useDeprecatedNextContext?(Oe=Object.create(le),Oe.unsubscribe=()=>this.unsubscribe()):Oe=le,$e=null==$e?void 0:$e.bind(Oe),De=null==De?void 0:De.bind(Oe),ve=null==ve?void 0:ve.bind(Oe)}this.destination={next:$e?Te($e):se.Z,error:Te(null!=De?De:je),complete:ve?Te(ve):se.Z}}}function Te(K,le){return(...De)=>{try{K(...De)}catch(ve){N.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(ve):(0,ce.h)(ve)}}}function je(K){throw K}function Ue(K,le){const{onStoppedNotification:De}=N.v;De&&q.z.setTimeout(()=>De(K,le))}const ae={closed:!0,next:se.Z,error:je,complete:se.Z}},7908:(Ke,ye,P)=>{"use strict";P.d(ye,{Lc:()=>me,w0:()=>se,Nn:()=>te});var c=P(5044);const N=(0,P(4893).d)(ue=>function(H){ue(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((X,Be)=>`${Be+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var ce=P(3980);class se{constructor(q){this.initialTeardown=q,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let q;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Te of H)Te.remove(this);else H.remove(this);const{initialTeardown:X}=this;if((0,c.m)(X))try{X()}catch(Te){q=Te instanceof N?Te.errors:[Te]}const{_teardowns:Be}=this;if(Be){this._teardowns=null;for(const Te of Be)try{oe(Te)}catch(je){q=null!=q?q:[],je instanceof N?q=[...q,...je.errors]:q.push(je)}}if(q)throw new N(q)}}add(q){var H;if(q&&q!==this)if(this.closed)oe(q);else{if(q instanceof se){if(q.closed||q._hasParent(this))return;q._addParent(this)}(this._teardowns=null!==(H=this._teardowns)&&void 0!==H?H:[]).push(q)}}_hasParent(q){const{_parentage:H}=this;return H===q||Array.isArray(H)&&H.includes(q)}_addParent(q){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(q),H):H?[H,q]:q}_removeParent(q){const{_parentage:H}=this;H===q?this._parentage=null:Array.isArray(H)&&(0,ce.P)(H,q)}remove(q){const{_teardowns:H}=this;H&&(0,ce.P)(H,q),q instanceof se&&q._removeParent(this)}}se.EMPTY=(()=>{const ue=new se;return ue.closed=!0,ue})();const me=se.EMPTY;function te(ue){return ue instanceof se||ue&&"closed"in ue&&(0,c.m)(ue.remove)&&(0,c.m)(ue.add)&&(0,c.m)(ue.unsubscribe)}function oe(ue){(0,c.m)(ue)?ue():ue.unsubscribe()}},5367:(Ke,ye,P)=>{"use strict";P.d(ye,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5583:(Ke,ye,P)=>{"use strict";P.d(ye,{E:()=>J});const J=new(P(8305).y)(se=>se.complete())},5947:(Ke,ye,P)=>{"use strict";P.d(ye,{D:()=>$e});var c=P(9985),J=P(4763),N=P(5222),me=P(8305),oe=P(5497),ue=P(5044),q=P(8395);function X(Oe,ze){if(!Oe)throw new Error("Iterable cannot be null");return new me.y(Ye=>{(0,q.f)(Ye,ze,()=>{const gt=Oe[Symbol.asyncIterator]();(0,q.f)(Ye,ze,()=>{gt.next().then(ne=>{ne.done?Ye.complete():Ye.next(ne.value)})},0,!0)})})}var Be=P(1073),Te=P(2442),je=P(1537),Ue=P(2317),ae=P(9908),K=P(3754),le=P(7751);function $e(Oe,ze){return ze?function(Oe,ze){if(null!=Oe){if((0,Be.c)(Oe))return function(Oe,ze){return(0,c.Xf)(Oe).pipe((0,N.R)(ze),(0,J.Q)(ze))}(Oe,ze);if((0,je.z)(Oe))return function(Oe,ze){return new me.y(Ye=>{let gt=0;return ze.schedule(function(){gt===Oe.length?Ye.complete():(Ye.next(Oe[gt++]),Ye.closed||this.schedule())})})}(Oe,ze);if((0,Te.t)(Oe))return function(Oe,ze){return(0,c.Xf)(Oe).pipe((0,N.R)(ze),(0,J.Q)(ze))}(Oe,ze);if((0,ae.D)(Oe))return X(Oe,ze);if((0,Ue.T)(Oe))return function(Oe,ze){return new me.y(Ye=>{let gt;return(0,q.f)(Ye,ze,()=>{gt=Oe[oe.h](),(0,q.f)(Ye,ze,()=>{let ne,de;try{({value:ne,done:de}=gt.next())}catch(we){return void Ye.error(we)}de?Ye.complete():Ye.next(ne)},0,!0)}),()=>(0,ue.m)(null==gt?void 0:gt.return)&&gt.return()})}(Oe,ze);if((0,le.L)(Oe))return function(Oe,ze){return X((0,le.Q)(Oe),ze)}(Oe,ze)}throw(0,K.z)(Oe)}(Oe,ze):(0,c.Xf)(Oe)}},9985:(Ke,ye,P)=>{"use strict";P.d(ye,{Xf:()=>Be});var c=P(9162),J=P(1537),N=P(2442),ce=P(8305),se=P(1073),me=P(9908),te=P(3754),oe=P(2317),ue=P(7751),q=P(5044),H=P(5160),X=P(4816);function Be(ve){if(ve instanceof ce.y)return ve;if(null!=ve){if((0,se.c)(ve))return function(ve){return new ce.y($e=>{const Oe=ve[X.L]();if((0,q.m)(Oe.subscribe))return Oe.subscribe($e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ve);if((0,J.z)(ve))return function(ve){return new ce.y($e=>{for(let Oe=0;Oe<ve.length&&!$e.closed;Oe++)$e.next(ve[Oe]);$e.complete()})}(ve);if((0,N.t)(ve))return function(ve){return new ce.y($e=>{ve.then(Oe=>{$e.closed||($e.next(Oe),$e.complete())},Oe=>$e.error(Oe)).then(null,H.h)})}(ve);if((0,me.D)(ve))return K(ve);if((0,oe.T)(ve))return function(ve){return new ce.y($e=>{for(const Oe of ve)if($e.next(Oe),$e.closed)return;$e.complete()})}(ve);if((0,ue.L)(ve))return function(ve){return K((0,ue.Q)(ve))}(ve)}throw(0,te.z)(ve)}function K(ve){return new ce.y($e=>{(function(ve,$e){var Oe,ze,Ye,gt;return(0,c.mG)(this,void 0,void 0,function*(){try{for(Oe=(0,c.KL)(ve);!(ze=yield Oe.next()).done;)if($e.next(ze.value),$e.closed)return}catch(ne){Ye={error:ne}}finally{try{ze&&!ze.done&&(gt=Oe.return)&&(yield gt.call(Oe))}finally{if(Ye)throw Ye.error}}$e.complete()})})(ve,$e).catch(Oe=>$e.error(Oe))})}},3719:(Ke,ye,P)=>{"use strict";P.d(ye,{T:()=>me});var c=P(5373),J=P(9985),N=P(5583),ce=P(7613),se=P(5947);function me(...te){const oe=(0,ce.yG)(te),ue=(0,ce._6)(te,1/0),q=te;return q.length?1===q.length?(0,J.Xf)(q[0]):(0,c.J)(ue)((0,se.D)(q,oe)):N.E}},8889:(Ke,ye,P)=>{"use strict";P.d(ye,{Q:()=>J});var c=P(584);class J extends c.Lv{constructor(ce,se,me,te,oe){super(ce),this.onFinalize=oe,this._next=se?function(ue){try{se(ue)}catch(q){ce.error(q)}}:super._next,this._error=te?function(ue){try{te(ue)}catch(q){ce.error(q)}finally{this.unsubscribe()}}:super._error,this._complete=me?function(){try{me()}catch(ue){ce.error(ue)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ce;const{closed:se}=this;super.unsubscribe(),!se&&(null===(ce=this.onFinalize)||void 0===ce||ce.call(this))}}},4753:(Ke,ye,P)=>{"use strict";P.d(ye,{U:()=>N});var c=P(9947),J=P(8889);function N(ce,se){return(0,c.e)((me,te)=>{let oe=0;me.subscribe(new J.Q(te,ue=>{te.next(ce.call(se,ue,oe++))}))})}},5373:(Ke,ye,P)=>{"use strict";P.d(ye,{J:()=>N});var c=P(5724),J=P(4623);function N(ce=1/0){return(0,c.z)(J.y,ce)}},5724:(Ke,ye,P)=>{"use strict";P.d(ye,{z:()=>oe});var c=P(4753),J=P(9985),N=P(9947),se=(P(8395),P(8889)),te=P(5044);function oe(ue,q,H=1/0){return(0,te.m)(q)?oe((X,Be)=>(0,c.U)((Te,je)=>q(X,Te,Be,je))((0,J.Xf)(ue(X,Be))),H):("number"==typeof q&&(H=q),(0,N.e)((X,Be)=>function(ue,q,H,X,Be,Te,je,Ue){const ae=[];let K=0,le=0,De=!1;const ve=()=>{De&&!ae.length&&!K&&q.complete()},$e=ze=>K<X?Oe(ze):ae.push(ze),Oe=ze=>{K++;let Ye=!1;(0,J.Xf)(H(ze,le++)).subscribe(new se.Q(q,gt=>{q.next(gt)},()=>{Ye=!0},void 0,()=>{if(Ye)try{for(K--;ae.length&&K<X;){const gt=ae.shift();Oe(gt)}ve()}catch(gt){q.error(gt)}}))};return ue.subscribe(new se.Q(q,$e,()=>{De=!0,ve()})),()=>{}}(X,Be,ue,H)))}},4763:(Ke,ye,P)=>{"use strict";P.d(ye,{Q:()=>ce});var c=P(8395),J=P(9947),N=P(8889);function ce(se,me=0){return(0,J.e)((te,oe)=>{te.subscribe(new N.Q(oe,ue=>(0,c.f)(oe,se,()=>oe.next(ue),me),()=>(0,c.f)(oe,se,()=>oe.complete(),me),ue=>(0,c.f)(oe,se,()=>oe.error(ue),me)))})}},3174:(Ke,ye,P)=>{"use strict";P.d(ye,{B:()=>me});var c=P(5947),J=P(9468),N=P(273),ce=P(584),se=P(9947);function me(oe={}){const{connector:ue=(()=>new N.x),resetOnError:q=!0,resetOnComplete:H=!0,resetOnRefCountZero:X=!0}=oe;return Be=>{let Te=null,je=null,Ue=null,ae=0,K=!1,le=!1;const De=()=>{null==je||je.unsubscribe(),je=null},ve=()=>{De(),Te=Ue=null,K=le=!1},$e=()=>{const Oe=Te;ve(),null==Oe||Oe.unsubscribe()};return(0,se.e)((Oe,ze)=>{ae++,!le&&!K&&De();const Ye=Ue=null!=Ue?Ue:ue();ze.add(()=>{ae--,0===ae&&!le&&!K&&(je=te($e,X))}),Ye.subscribe(ze),Te||(Te=new ce.Hp({next:gt=>Ye.next(gt),error:gt=>{le=!0,De(),je=te(ve,q,gt),Ye.error(gt)},complete:()=>{K=!0,De(),je=te(ve,H),Ye.complete()}}),(0,c.D)(Oe).subscribe(Te))})(Be)}}function te(oe,ue,...q){return!0===ue?(oe(),null):!1===ue?null:ue(...q).pipe((0,J.q)(1)).subscribe(()=>oe())}},5222:(Ke,ye,P)=>{"use strict";P.d(ye,{R:()=>J});var c=P(9947);function J(N,ce=0){return(0,c.e)((se,me)=>{me.add(N.schedule(()=>se.subscribe(me),ce))})}},9468:(Ke,ye,P)=>{"use strict";P.d(ye,{q:()=>ce});var c=P(5583),J=P(9947),N=P(8889);function ce(se){return se<=0?()=>c.E:(0,J.e)((me,te)=>{let oe=0;me.subscribe(new N.Q(te,ue=>{++oe<=se&&(te.next(ue),se<=oe&&te.complete())}))})}},7384:(Ke,ye,P)=>{"use strict";P.d(ye,{b:()=>se});var c=P(5044),J=P(9947),N=P(8889),ce=P(4623);function se(me,te,oe){const ue=(0,c.m)(me)||te||oe?{next:me,error:te,complete:oe}:me;return ue?(0,J.e)((q,H)=>{var X;null===(X=ue.subscribe)||void 0===X||X.call(ue);let Be=!0;q.subscribe(new N.Q(H,Te=>{var je;null===(je=ue.next)||void 0===je||je.call(ue,Te),H.next(Te)},()=>{var Te;Be=!1,null===(Te=ue.complete)||void 0===Te||Te.call(ue),H.complete()},Te=>{var je;Be=!1,null===(je=ue.error)||void 0===je||je.call(ue,Te),H.error(Te)},()=>{var Te,je;Be&&(null===(Te=ue.unsubscribe)||void 0===Te||Te.call(ue)),null===(je=ue.finalize)||void 0===je||je.call(ue)}))}):ce.y}},2869:(Ke,ye,P)=>{"use strict";P.d(ye,{o:()=>se});var c=P(7908);class J extends c.w0{constructor(te,oe){super()}schedule(te,oe=0){return this}}const N={setInterval(...me){const{delegate:te}=N;return((null==te?void 0:te.setInterval)||setInterval)(...me)},clearInterval(me){const{delegate:te}=N;return((null==te?void 0:te.clearInterval)||clearInterval)(me)},delegate:void 0};var ce=P(3980);class se extends J{constructor(te,oe){super(te,oe),this.scheduler=te,this.work=oe,this.pending=!1}schedule(te,oe=0){if(this.closed)return this;this.state=te;const ue=this.id,q=this.scheduler;return null!=ue&&(this.id=this.recycleAsyncId(q,ue,oe)),this.pending=!0,this.delay=oe,this.id=this.id||this.requestAsyncId(q,this.id,oe),this}requestAsyncId(te,oe,ue=0){return N.setInterval(te.flush.bind(te,this),ue)}recycleAsyncId(te,oe,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return oe;N.clearInterval(oe)}execute(te,oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(te,oe);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(te,oe){let q,ue=!1;try{this.work(te)}catch(H){ue=!0,q=H||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),q}unsubscribe(){if(!this.closed){const{id:te,scheduler:oe}=this,{actions:ue}=oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ce.P)(ue,this),null!=te&&(this.id=this.recycleAsyncId(oe,te,null)),this.delay=null,super.unsubscribe()}}}},8843:(Ke,ye,P)=>{"use strict";P.d(ye,{v:()=>N});var c=P(1733);class J{constructor(se,me=J.now){this.schedulerActionCtor=se,this.now=me}schedule(se,me=0,te){return new this.schedulerActionCtor(this,se).schedule(te,me)}}J.now=c.l.now;class N extends J{constructor(se,me=J.now){super(se,me),this.actions=[],this._active=!1,this._scheduled=void 0}flush(se){const{actions:me}=this;if(this._active)return void me.push(se);let te;this._active=!0;do{if(te=se.execute(se.state,se.delay))break}while(se=me.shift());if(this._active=!1,te){for(;se=me.shift();)se.unsubscribe();throw te}}}},2210:(Ke,ye,P)=>{"use strict";P.d(ye,{z:()=>N,P:()=>ce});var c=P(2869);const N=new(P(8843).v)(c.o),ce=N},1733:(Ke,ye,P)=>{"use strict";P.d(ye,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},2496:(Ke,ye,P)=>{"use strict";P.d(ye,{z:()=>c});const c={setTimeout(...J){const{delegate:N}=c;return((null==N?void 0:N.setTimeout)||setTimeout)(...J)},clearTimeout(J){const{delegate:N}=c;return((null==N?void 0:N.clearTimeout)||clearTimeout)(J)},delegate:void 0}},5497:(Ke,ye,P)=>{"use strict";P.d(ye,{h:()=>J});const J="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},4816:(Ke,ye,P)=>{"use strict";P.d(ye,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},7613:(Ke,ye,P)=>{"use strict";P.d(ye,{jO:()=>ce,yG:()=>se,_6:()=>me});var c=P(5044),J=P(7398);function N(te){return te[te.length-1]}function ce(te){return(0,c.m)(N(te))?te.pop():void 0}function se(te){return(0,J.K)(N(te))?te.pop():void 0}function me(te,oe){return"number"==typeof N(te)?te.pop():oe}},3980:(Ke,ye,P)=>{"use strict";function c(J,N){if(J){const ce=J.indexOf(N);0<=ce&&J.splice(ce,1)}}P.d(ye,{P:()=>c})},4893:(Ke,ye,P)=>{"use strict";function c(J){const ce=J(se=>{Error.call(se),se.stack=(new Error).stack});return ce.prototype=Object.create(Error.prototype),ce.prototype.constructor=ce,ce}P.d(ye,{d:()=>c})},8706:(Ke,ye,P)=>{"use strict";P.d(ye,{x:()=>N,O:()=>ce});var c=P(5367);let J=null;function N(se){if(c.v.useDeprecatedSynchronousErrorHandling){const me=!J;if(me&&(J={errorThrown:!1,error:null}),se(),me){const{errorThrown:te,error:oe}=J;if(J=null,te)throw oe}}else se()}function ce(se){c.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=se)}},8395:(Ke,ye,P)=>{"use strict";function c(J,N,ce,se=0,me=!1){const te=N.schedule(function(){ce(),me?J.add(this.schedule(null,se)):this.unsubscribe()},se);if(J.add(te),!me)return te}P.d(ye,{f:()=>c})},4623:(Ke,ye,P)=>{"use strict";function c(J){return J}P.d(ye,{y:()=>c})},1537:(Ke,ye,P)=>{"use strict";P.d(ye,{z:()=>c});const c=J=>J&&"number"==typeof J.length&&"function"!=typeof J},9908:(Ke,ye,P)=>{"use strict";P.d(ye,{D:()=>J});var c=P(5044);function J(N){return Symbol.asyncIterator&&(0,c.m)(null==N?void 0:N[Symbol.asyncIterator])}},5044:(Ke,ye,P)=>{"use strict";function c(J){return"function"==typeof J}P.d(ye,{m:()=>c})},1073:(Ke,ye,P)=>{"use strict";P.d(ye,{c:()=>N});var c=P(4816),J=P(5044);function N(ce){return(0,J.m)(ce[c.L])}},2317:(Ke,ye,P)=>{"use strict";P.d(ye,{T:()=>N});var c=P(5497),J=P(5044);function N(ce){return(0,J.m)(null==ce?void 0:ce[c.h])}},2442:(Ke,ye,P)=>{"use strict";P.d(ye,{t:()=>J});var c=P(5044);function J(N){return(0,c.m)(null==N?void 0:N.then)}},7751:(Ke,ye,P)=>{"use strict";P.d(ye,{Q:()=>N,L:()=>ce});var c=P(9162),J=P(5044);function N(se){return(0,c.FC)(this,arguments,function*(){const te=se.getReader();try{for(;;){const{value:oe,done:ue}=yield(0,c.qq)(te.read());if(ue)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(oe)}}finally{te.releaseLock()}})}function ce(se){return(0,J.m)(null==se?void 0:se.getReader)}},7398:(Ke,ye,P)=>{"use strict";P.d(ye,{K:()=>J});var c=P(5044);function J(N){return N&&(0,c.m)(N.schedule)}},9947:(Ke,ye,P)=>{"use strict";P.d(ye,{A:()=>J,e:()=>N});var c=P(5044);function J(ce){return(0,c.m)(null==ce?void 0:ce.lift)}function N(ce){return se=>{if(J(se))return se.lift(function(me){try{return ce(me,this)}catch(te){this.error(te)}});throw new TypeError("Unable to lift unknown Observable type")}}},6921:(Ke,ye,P)=>{"use strict";function c(){}P.d(ye,{Z:()=>c})},5160:(Ke,ye,P)=>{"use strict";P.d(ye,{h:()=>N});var c=P(5367),J=P(2496);function N(ce){J.z.setTimeout(()=>{const{onUnhandledError:se}=c.v;if(!se)throw ce;se(ce)})}},3754:(Ke,ye,P)=>{"use strict";function c(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(ye,{z:()=>c})},9637:(Ke,ye,P)=>{"use strict";var c=P(3668);let J=null;function N(){return J}const te=new c.OlP("DocumentToken");let oe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.LFG)(H)},providedIn:"platform"}),n})();const q=new c.OlP("Location Initialized");let H=(()=>{class n extends oe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){X()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){X()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(te))},n.\u0275prov=c.Yz7({token:n,factory:function(){return new H((0,c.LFG)(te))},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function Te(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function je(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ue(n){return n&&"?"!==n[0]?"?"+n:n}let ae=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function(n){const e=(0,c.LFG)(te).location;return new De((0,c.LFG)(oe),e&&e.origin||"")}()},providedIn:"root"}),n})();const le=new c.OlP("appBaseHref");let De=(()=>{class n extends ae{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Te(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ue(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const d=this.prepareExternalUrl(i+Ue(a));this._platformLocation.pushState(t,r,d)}replaceState(t,r,i,a){const d=this.prepareExternalUrl(i+Ue(a));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null==(i=(r=this._platformLocation).historyGo)||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(oe),c.LFG(le,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),ve=(()=>{class n extends ae{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Te(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let d=this.prepareExternalUrl(i+Ue(a));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,i,a){let d=this.prepareExternalUrl(i+Ue(a));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null==(i=(r=this._platformLocation).historyGo)||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(oe),c.LFG(le,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),$e=(()=>{class n{constructor(t,r){this._subject=new c.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=je(Ye(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ue(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ye(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null==(i=(r=this._platformStrategy).historyGo)||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ue,n.joinWithSlash=Te,n.stripTrailingSlash=je,n.\u0275fac=function(t){return new(t||n)(c.LFG(ae),c.LFG(oe))},n.\u0275prov=c.Yz7({token:n,factory:function(){return new $e((0,c.LFG)(ae),(0,c.LFG)(oe))},providedIn:"root"}),n})();function Ye(n){return n.replace(/\/index.html$/,"")}var de=(()=>((de=de||{})[de.Zero=0]="Zero",de[de.One=1]="One",de[de.Two=2]="Two",de[de.Few=3]="Few",de[de.Many=4]="Many",de[de.Other=5]="Other",de))();const ls=c.kL8;class pi{}let on=(()=>{class n extends pi{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(ls(r||this.locale)(t)){case de.Zero:return"zero";case de.One:return"one";case de.Two:return"two";case de.Few:return"few";case de.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.soG))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),sr=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,c.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,c.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.ZZ4),c.Y36(c.aQg),c.Y36(c.SBq),c.Y36(c.Qsj))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class Ja{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let cs=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((i,a,d)=>{if(null==i.previousIndex){const p=this._viewContainer.createEmbeddedView(this._template,new Ja(null,this._ngForOf,-1,-1),null===d?void 0:d),y=new Xa(i,p);r.push(y)}else if(null==d)this._viewContainer.remove(null===a?void 0:a);else if(null!==a){const p=this._viewContainer.get(a);this._viewContainer.move(p,d);const y=new Xa(i,p);r.push(y)}});for(let i=0;i<r.length;i++)this._perViewChange(r[i].view,r[i].record);for(let i=0,a=this._viewContainer.length;i<a;i++){const d=this._viewContainer.get(i);d.context.index=i,d.context.count=a,d.context.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{this._viewContainer.get(i.currentIndex).context.$implicit=i.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class Xa{constructor(e,t){this.record=e,this.view=t}}let Cr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new ac,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){zs("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){zs("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class ac{constructor(){this.$implicit=null,this.ngIf=null}}function zs(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}function qi(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,c.AaK)(n)}'`)}let lc=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw qi(n,t);return t.toUpperCase()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=c.Yjl({name:"uppercase",type:n,pure:!0}),n})(),_o=(()=>{class n{transform(t,r,i){if(null==t)return null;if(!this.supports(t))throw qi(n,t);return t.slice(r,i)}supports(t){return"string"==typeof t||Array.isArray(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=c.Yjl({name:"slice",type:n,pure:!1}),n})(),ia=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[{provide:pi,useClass:on}]}),n})();const Yd="browser";function Vr(n){return"server"===n}let Hf=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new rl((0,c.LFG)(te),window)}),n})();class rl{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const d=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(d)return d}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=yo(this.window.history)||yo(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function yo(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class bo extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new bo,J||(J=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Wr=Wr||document.querySelector("base"),Wr?Wr.getAttribute("href"):null);return null==t?null:function(n){$n=$n||document.createElement("a"),$n.setAttribute("href",n);const e=$n.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Wr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let $n,Wr=null;const wo=new c.OlP("TRANSITION_ID"),rn=[{provide:c.ip1,useFactory:function(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const r=N(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[wo,te,c.zs3],multi:!0}];class As{static init(){(0,c.VLi)(new As)}addToWindow(e){c.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const i=c.dqk.getAllAngularTestabilities();let a=i.length,d=!1;const p=function(y){d=d||y,a--,0==a&&r(d)};i.forEach(function(y){y.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let il=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Co=new c.OlP("EventManagerPlugins");let Kr=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const d=i[a];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Co),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class sl{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=N().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Ks=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),rt=(()=>{class n extends Ks{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const d=this._doc.createElement("style");d.textContent=a,i.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(hc),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(hc))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(te))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function hc(n){N().remove(n)}const ol={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},sa=/%COMP%/g;function Ms(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ms(n,i,t):(i=i.replace(sa,n),t.push(i))}return t}function Dn(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let xs=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Tr(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case c.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Au(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case c.ifc.ShadowDom:return new Mu(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ms(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Kr),c.LFG(rt),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Tr{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ol[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=ol[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ol[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,i&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Dn(r)):this.eventManager.addEventListener(e,t,Dn(r))}}class Au extends Tr{constructor(e,t,r,i){super(e),this.component=r;const a=Ms(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr="_ngcontent-%COMP%".replace(sa,i+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(sa,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Mu extends Tr{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Ms(i.id,i.styles,[]);for(let d=0;d<a.length;d++){const p=document.createElement("style");p.textContent=a[d],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let cl=(()=>{class n extends sl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(te))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const To=["alt","control","meta","shift"],Gi={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ul={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ys={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let fs=(()=>{class n extends sl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),d=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,a.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let d="";if(To.forEach(y=>{const E=r.indexOf(y);E>-1&&(r.splice(E,1),d+=y+".")}),d+=a,0!=r.length||0===a.length)return null;const p={};return p.domEventName=i,p.fullKey=d,p}static getEventFullKey(t){let r="",i=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ul.hasOwnProperty(e)&&(e=ul[e]))}return Gi[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),To.forEach(a=>{a!=i&&Ys[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(te))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const oa=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:Yd},{provide:c.g9A,useValue:function(){bo.makeCurrent(),As.init()},multi:!0},{provide:te,useFactory:function(){return(0,c.RDi)(document),document},deps:[]}]),_c=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function(){return new c.qLn},deps:[]},{provide:Co,useClass:cl,multi:!0,deps:[te,c.R0b,c.Lbi]},{provide:Co,useClass:fs,multi:!0,deps:[te]},{provide:xs,useClass:xs,deps:[Kr,rt,c.AFp]},{provide:c.FYo,useExisting:xs},{provide:Ks,useExisting:rt},{provide:rt,useClass:rt,deps:[te]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b]},{provide:Kr,useClass:Kr,deps:[Co,c.R0b]},{provide:class{},useClass:il,deps:[]}];let aa=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:wo,useExisting:c.AFp},rn]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(n,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:_c,imports:[ia,c.hGG]}),n})();"undefined"!=typeof window&&window,P(4891);var ps=P(7892),Ft=P(273);class bn extends Ft.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var at=P(4753),Ec=P(2210),Rn=P(8305),wn=P(5947),gs=P(7613);function dt(...n){const e=(0,gs.yG)(n);return(0,wn.D)(n,e)}var dn=P(7233),zi=P(5373);function ua(...n){return(0,zi.J)(1)((0,wn.D)(n,(0,gs.yG)(n)))}var Ir=P(9947);function El(...n){const e=(0,gs.yG)(n);return(0,Ir.e)((t,r)=>{(e?ua(n,t,e):ua(n,t)).subscribe(r)})}var Pn=P(8889);function Io(){return(0,Ir.e)((n,e)=>{let t,r=!1;n.subscribe(new Pn.Q(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function So(n,e,t,r,i){return(a,d)=>{let p=t,y=e,E=0;a.subscribe(new Pn.Q(d,S=>{const x=E++;y=p?n(y,S,x):(p=!0,S),r&&d.next(y)},i&&(()=>{p&&d.next(y),d.complete()})))}}function Xs(n,e){return(0,Ir.e)(So(n,e,arguments.length>=2,!0))}var gi=P(4623);function Nu(n,e=gi.y){return n=null!=n?n:ms,(0,Ir.e)((t,r)=>{let i,a=!0;t.subscribe(new Pn.Q(r,d=>{const p=e(d);(a||!n(i,p))&&(a=!1,i=p,r.next(d))}))})}function ms(n,e){return n===e}function pr(n,e){return(0,Ir.e)((t,r)=>{let i=0;t.subscribe(new Pn.Q(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Fe,gr=P(7905),Cl=P(6293),pe=P(8239),Zi=P(1572),Gn=P(1177),Yr=P(3855),Ct=P(4213),da="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},_s={},ha=ha||{},wt=da||self;function eo(){}function ys(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Mi(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var vs="closure_uid_"+(1e9*Math.random()>>>0),Fu=0;function Wi(n,e,t){return n.call.apply(n.bind,arguments)}function Hg(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Vn(n,e,t){return(Vn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Wi:Hg).apply(null,arguments)}function cn(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Jn(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var d=Array(arguments.length-2),p=2;p<arguments.length;p++)d[p-2]=arguments[p];return e.prototype[i].apply(r,d)}}function to(){this.s=this.s,this.o=this.o}var Zf={};to.prototype.s=!1,to.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,vs)&&n[vs]||(n[vs]=++Fu)}(this);delete Zf[n]}},to.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const $g=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Lu=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function Ao(n){return Array.prototype.concat.apply([],arguments)}function sh(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Un(n){return/^[\s\xa0]*$/.test(n)}var Ur,ks=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Xn(n,e){return-1!=n.indexOf(e)}function oh(n,e){return n<e?-1:n>e?1:0}e:{var Qr=wt.navigator;if(Qr){var Ki=Qr.userAgent;if(Ki){Ur=Ki;break e}}Ur=""}function Dl(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Mo(n){const e={};for(const t in n)e[t]=n[t];return e}var pa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Vu(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<pa.length;a++)t=pa[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function xo(n){return xo[" "](n),n}xo[" "]=eo;var Cc,n,Wf=Xn(Ur,"Opera"),ko=Xn(Ur,"Trident")||Xn(Ur,"MSIE"),ga=Xn(Ur,"Edge"),mr=ga||ko,ma=Xn(Ur,"Gecko")&&!(Xn(Ur.toLowerCase(),"webkit")&&!Xn(Ur,"Edge"))&&!(Xn(Ur,"Trident")||Xn(Ur,"MSIE"))&&!Xn(Ur,"Edge"),Tl=Xn(Ur.toLowerCase(),"webkit")&&!Xn(Ur,"Edge");function Gg(){var n=wt.document;return n?n.documentMode:void 0}e:{var Dc="",Bu=(n=Ur,ma?/rv:([^\);]+)(\)|;)/.exec(n):ga?/Edge\/([\d\.]+)/.exec(n):ko?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Tl?/WebKit\/(\S+)/.exec(n):Wf?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Bu&&(Dc=Bu?Bu[1]:""),ko){var no=Gg();if(null!=no&&no>parseFloat(Dc)){Cc=String(no);break e}}Cc=Dc}var ah={};function ju(){return e=ah,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=ks(String(Cc)).split("."),t=ks("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var i=e[d]||"",a=t[d]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=oh(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||oh(0==i[2].length,0==a[2].length)||oh(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n}();var e}var Ic=wt.document&&ko&&(Gg()||parseInt(Cc,10))||void 0,ro=function(){if(!wt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{wt.addEventListener("test",eo,e),wt.removeEventListener("test",eo,e)}catch(t){}return n}();function zn(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function io(n,e){if(zn.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(ma){e:{try{xo(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:so[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&io.Z.h.call(this)}}zn.prototype.h=function(){this.defaultPrevented=!0},Jn(io,zn);var so={2:"touch",3:"pen",4:"mouse"};io.prototype.h=function(){io.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Oo="closure_listenable_"+(1e6*Math.random()|0),Kf=0;function lh(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++Kf,this.ca=this.fa=!1}function D(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function T(n){this.src=n,this.g={},this.h=0}function R(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=$g(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(D(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function V(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}T.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var d=V(n,e,r,i);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new lh(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var Y="closure_lm_"+(1e6*Math.random()|0),ie={};function Me(n,e,t,r,i){if(r&&r.once)return Lt(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)Me(n,e[a],t,r,i);return null}return t=ki(t),n&&n[Oo]?n.N(e,t,Mi(r)?!!r.capture:!!r,i):et(n,e,t,!1,r,i)}function et(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var d=Mi(i)?!!i.capture:!!i,p=Jr(n);if(p||(n[Y]=p=new T(n)),(t=p.add(e,t,r,d,a)).proxy)return t;if(r=function(){var e=Bn;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)ro||(i=d),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(jr(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Lt(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Lt(n,e[a],t,r,i);return null}return t=ki(t),n&&n[Oo]?n.O(e,t,Mi(r)?!!r.capture:!!r,i):et(n,e,t,!0,r,i)}function sn(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)sn(n,e[a],t,r,i);else r=Mi(r)?!!r.capture:!!r,t=ki(t),n&&n[Oo]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=V(a=n.g[e],t,r,i))&&(D(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Jr(n))&&(e=n.g[e.toString()],n=-1,e&&(n=V(e,t,r,i)),(t=-1<n?e[n]:null)&&Br(t))}function Br(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Oo])R(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(jr(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Jr(e))?(R(t,n),0==t.h&&(t.src=null,e[Y]=null)):D(n)}}}function jr(n){return n in ie?ie[n]:ie[n]="on"+n}function Bn(n,e){if(n.ca)n=!0;else{e=new io(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Br(n),n=t.call(r,e)}return n}function Jr(n){return(n=n[Y])instanceof T?n:null}var oo="__closure_events_fn_"+(1e9*Math.random()>>>0);function ki(n){return"function"==typeof n?n:(n[oo]||(n[oo]=function(e){return n.handleEvent(e)}),n[oo])}function hn(){to.call(this),this.i=new T(this),this.P=this,this.I=null}function Sn(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new zn(e,n);else if(e instanceof zn)e.target=e.target||n;else{var i=e;Vu(e=new zn(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var d=e.g=t[a];i=Ro(d,r,!0,e)&&i}if(i=Ro(d=e.g=n,r,!0,e)&&i,i=Ro(d,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Ro(d=e.g=t[a],r,!1,e)&&i}function Ro(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var d=e[a];if(d&&!d.ca&&d.capture==t){var p=d.listener,y=d.ia||d.src;d.fa&&R(n.i,d),i=!1!==p.call(y,r)&&i}}return i&&!r.defaultPrevented}Jn(hn,to),hn.prototype[Oo]=!0,hn.prototype.removeEventListener=function(n,e,t,r){sn(this,n,e,t,r)},hn.prototype.M=function(){if(hn.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)D(t[r]);delete n.g[e],n.h--}}this.I=null},hn.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},hn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var _a=wt.JSON.stringify;function ch(){var n=ly;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Zg,zg=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Il,n=>n.reset());class Il{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Sc(n){wt.setTimeout(()=>{throw n},0)}function Qf(n,e){Zg||function(){var n=wt.Promise.resolve(void 0);Zg=function(){n.then(Xf)}}(),Jf||(Zg(),Jf=!0),ly.add(n,e)}var Jf=!1,ly=new class{constructor(){this.h=this.g=null}add(e,t){const r=zg.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Xf(){for(var n;n=ch();){try{n.h.call(n.g)}catch(t){Sc(t)}var e=zg;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Jf=!1}function dh(n,e){hn.call(this),this.h=n||1,this.g=e||wt,this.j=Vn(this.kb,this),this.l=Date.now()}function ep(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function ya(n,e,t){if("function"==typeof n)t&&(n=Vn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Vn(n.handleEvent,n)}return 2147483647<Number(e)?-1:wt.setTimeout(n,e||0)}function hh(n){n.g=ya(()=>{n.g=null,n.i&&(n.i=!1,hh(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Jn(dh,hn),(Fe=dh.prototype).da=!1,Fe.S=null,Fe.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Sn(this,"tick"),this.da&&(ep(this),this.start()))}},Fe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Fe.M=function(){dh.Z.M.call(this),ep(this),delete this.g};class va extends to{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:hh(this)}M(){super.M(),this.g&&(wt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ba(n){to.call(this),this.h=n,this.g={}}Jn(ba,to);var fh=[];function Wg(n,e,t,r){Array.isArray(t)||(t&&(fh[0]=t.toString()),t=fh);for(var i=0;i<t.length;i++){var a=Me(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function Sl(n){Dl(n.g,function(e,t){this.g.hasOwnProperty(t)&&Br(e)},n),n.g={}}function Ac(){this.g=!0}function wa(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var d=1;d<i.length;d++)i[d]=""}}}return _a(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}ba.prototype.M=function(){ba.Z.M.call(this),Sl(this)},ba.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ac.prototype.Aa=function(){this.g=!1},Ac.prototype.info=function(){};var Po={},Qg=null;function ph(){return Qg=Qg||new hn}function Jg(n){zn.call(this,Po.Ma,n)}function Oi(n){const e=ph();Sn(e,new Jg(e,n))}function Mc(n,e){zn.call(this,Po.STAT_EVENT,n),this.stat=e}function mi(n){const e=ph();Sn(e,new Mc(e,n))}function Xg(n,e){zn.call(this,Po.Na,n),this.size=e}function gh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return wt.setTimeout(function(){n()},e)}Po.Ma="serverreachability",Jn(Jg,zn),Po.STAT_EVENT="statevent",Jn(Mc,zn),Po.Na="timingevent",Jn(Xg,zn);var xc={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},cy={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function em(){}function tm(){}em.prototype.h=null;var nm,Hu={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ip(){zn.call(this,"d")}function sp(){zn.call(this,"c")}function kc(){}function Ea(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new ba(this),this.P=ao,this.W=new dh(n=mr?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new op}function op(){this.i=null,this.g="",this.h=!1}Jn(ip,zn),Jn(sp,zn),Jn(kc,em),kc.prototype.g=function(){return new XMLHttpRequest},kc.prototype.i=function(){return{}},nm=new kc;var ao=45e3,Al={},qu={};function $u(n,e,t){n.K=1,n.v=Eh(_i(e)),n.s=t,n.U=!0,ap(n,null)}function ap(n,e){n.F=Date.now(),No(n),n.A=_i(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Dh(t.h,"t",r),n.C=0,t=n.l.H,n.h=new op,n.g=k(n.l,t?e:null,!n.s),0<n.O&&(n.L=new va(Vn(n.Ia,n,n.g),n.O)),Wg(n.V,n.g,"readystatechange",n.gb),e=n.H?Mo(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Oi(1),function(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var d="",p=a.split("&"),y=0;y<p.length;y++){var E=p[y].split("=");if(1<E.length){var S=E[0];E=E[1];var x=S.split("_");d=2<=x.length&&"type"==x[1]?d+(S+"=")+E+"&":d+(S+"=redacted&")}}else d=null;else d=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function uy(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function dy(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=N0(n,t),i==qu){4==e&&(n.o=4,mi(14),r=!1),wa(n.j,n.m,null,"[Incomplete Response]");break}if(i==Al){n.o=4,mi(15),wa(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}wa(n.j,n.m,i,null),yh(n,i)}uy(n)&&i!=qu&&i!=Al&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,mi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ph(e),e.L=!0,mi(11))):(wa(n.j,n.m,t,"[Invalid Chunked Response]"),Ml(n),_h(n))}function N0(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?qu:(t=Number(e.substring(t,r)),isNaN(t)?Al:(r+=1)+t>e.length?qu:(e=e.substr(r,t),n.C=r+t,e))}function No(n){n.Y=Date.now()+n.P,mh(n,n.P)}function mh(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=gh(Vn(n.eb,n),e)}function Ca(n){n.B&&(wt.clearTimeout(n.B),n.B=null)}function _h(n){0==n.l.G||n.I||_(n.l,n)}function Ml(n){Ca(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,ep(n.W),Sl(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function yh(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Th(t.i,n)))if(t.I=n.N,!n.J&&Th(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(E){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=gh(Vn(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Nc(t),Fl(t)}Ju(t),mi(18)}if(1>=om(t.i)&&t.ka){try{t.ka()}catch(E){}t.ka=void 0}}else g(t,11)}else if((n.J||t.g==n)&&Nc(t),!Un(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let E=i[e];if(t.U=E[0],E=E[1],2==t.G)if("c"==E[0]){t.J=E[1],t.la=E[2];const S=E[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const x=E[4];null!=x&&(t.za=x,t.h.info("SVER="+t.za));const L=E[5];null!=L&&"number"==typeof L&&0<L&&(t.K=r=1.5*L,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const B=n.g;if(B){const W=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(W){var a=r.i;!a.g&&(Xn(W,"spdy")||Xn(W,"quic")||Xn(W,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(fp(a,a.h),a.h=null))}if(r.D){const he=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;he&&(r.sa=he,En(r.F,r.D,he))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=I(r,r.H?r.la:null,r.W),d.J){Ih(r.i,d);var p=d,y=r.K;y&&p.setTimeout(y),p.B&&(Ca(p),No(p)),r.g=d}else Lo(r);0<t.l.length&&Qi(t)}else"stop"!=E[0]&&"close"!=E[0]||g(t,7);else 3==t.G&&("stop"==E[0]||"close"==E[0]?"stop"==E[0]?g(t,7):Xr(t):"noop"!=E[0]&&t.j&&t.j.wa(E),t.A=0)}Oi(4)}catch(E){}}function cp(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(ys(n)||"string"==typeof n)Lu(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(ys(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(ys(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function xl(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof xl)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function vh(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Da(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Da(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Da(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Fe=Ea.prototype).setTimeout=function(n){this.P=n},Fe.gb=function(n){n=n.target;const e=this.L;e&&3==vi(n)?e.l():this.Ia(n)},Fe.Ia=function(n){try{if(n==this.g)e:{const S=vi(this.g);var e=this.g.Da();const x=this.g.ba();if(!(3>S)&&(3!=S||mr||this.g&&(this.h.h||this.g.ga()||Oh(this.g)))){this.I||4!=S||7==e||Oi(8==e||0>=x?3:2),Ca(this);var t=this.g.ba();this.N=t;t:if(uy(this)){var r=Oh(this.g);n="";var i=r.length,a=4==vi(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ml(this),_h(this);var d="";break t}this.h.i=new wt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function(n,e,t,r,i,a,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+d})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,y=this.g;if((p=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Un(p)){var E=p;break t}}E=null}if(!(t=E)){this.i=!1,this.o=3,mi(12),Ml(this),_h(this);break e}wa(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,yh(this,t)}this.U?(dy(this,S,d),mr&&this.i&&3==S&&(Wg(this.V,this.W,"tick",this.fb),this.W.start())):(wa(this.j,this.m,d,null),yh(this,d)),4==S&&Ml(this),this.i&&!this.I&&(4==S?_(this.l,this):(this.i=!1,No(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,mi(12)):(this.o=0,mi(13)),Ml(this),_h(this)}}}catch(S){}},Fe.fb=function(){if(this.g){var n=vi(this.g),e=this.g.ga();this.C<e.length&&(Ca(this),dy(this,n,e),this.i&&4!=n&&No(this))}},Fe.cancel=function(){this.I=!0,Ml(this)},Fe.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Oi(3),mi(17)),Ml(this),this.o=2,_h(this)):mh(this,this.Y-n)},(Fe=xl.prototype).R=function(){vh(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Fe.T=function(){return vh(this),this.g.concat()},Fe.get=function(n,e){return Da(this.h,n)?this.h[n]:e},Fe.set=function(n,e){Da(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Fe.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var Gu=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ta(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Ta){this.g=void 0!==e?e:n.g,jn(this,n.j),this.s=n.s,bh(this,n.i),Oc(this,n.m),this.l=n.l,e=n.h;var t=new kl;t.i=e.i,e.g&&(t.g=new xl(e.g),t.h=e.h),wh(this,t),this.o=n.o}else n&&(t=String(n).match(Gu))?(this.g=!!e,jn(this,t[1]||"",!0),this.s=zu(t[2]||""),bh(this,t[3]||"",!0),Oc(this,t[4]),this.l=zu(t[5]||"",!0),wh(this,t[6]||"",!0),this.o=zu(t[7]||"")):(this.g=!!e,this.h=new kl(null,this.g))}function _i(n){return new Ta(n)}function jn(n,e,t){n.j=t?zu(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function bh(n,e,t){n.i=t?zu(e,!0):e}function Oc(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function wh(n,e,t){e instanceof kl?(n.h=e,function(n,e){e&&!n.j&&(An(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Rc(this,r),Dh(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Zu(e,dp)),n.h=new kl(e,n.g))}function En(n,e,t){n.h.set(e,t)}function Eh(n){return En(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function zu(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Zu(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,rm),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function rm(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ta.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Zu(e,py,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Zu(e,py,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Zu(t,"/"==t.charAt(0)?yi:Wu,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Zu(t,im)),n.join("")};var py=/[#\/\?@]/g,Wu=/[#\?:]/g,yi=/[#\?]/g,dp=/[#\?@]/g,im=/#/g;function kl(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function An(n){n.g||(n.g=new xl,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Rc(n,e){An(n),e=Ia(n,e),Da(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Da((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&vh(n)))}function Ch(n,e){return An(n),e=Ia(n,e),Da(n.g.h,e)}function Dh(n,e,t){Rc(n,e),0<t.length&&(n.i=null,n.g.set(Ia(n,e),sh(t)),n.h+=t.length)}function Ia(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Pc(n){this.l=n||my,n=wt.PerformanceNavigationTiming?0<(n=wt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(wt.g&&wt.g.Ea&&wt.g.Ea()&&wt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Fe=kl.prototype).add=function(n,e){An(this),this.i=null,n=Ia(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Fe.forEach=function(n,e){An(this),this.g.forEach(function(t,r){Lu(t,function(i){n.call(e,i,r,this)},this)},this)},Fe.T=function(){An(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},Fe.R=function(n){An(this);var e=[];if("string"==typeof n)Ch(this,n)&&(e=Ao(e,this.g.get(Ia(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Ao(e,n[t])}return e},Fe.set=function(n,e){return An(this),this.i=null,Ch(this,n=Ia(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Fe.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Fe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var d=i;""!==r[a]&&(d+="="+encodeURIComponent(String(r[a]))),n.push(d)}}return this.i=n.join("&")};var my=10;function hp(n){return!!n.h||!!n.g&&n.g.size>=n.j}function om(n){return n.h?1:n.g?n.g.size:0}function Th(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function fp(n,e){n.g?n.g.add(e):n.h=e}function Ih(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function am(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return sh(n.i)}function pp(){}function gp(){this.g=new pp}function mp(n,e,t){const r=t||"";try{cp(n,function(i,a){let d=i;Mi(i)&&(d=_a(i)),e.push(r+a+"="+encodeURIComponent(d))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Sh(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function Fo(n){this.l=n.$b||null,this.j=n.ib||!1}function Ah(n,e){hn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=_p,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Pc.prototype.cancel=function(){if(this.i=am(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},pp.prototype.stringify=function(n){return wt.JSON.stringify(n,void 0)},pp.prototype.parse=function(n){return wt.JSON.parse(n,void 0)},Jn(Fo,em),Fo.prototype.g=function(){return new Ah(this.l,this.j)},Fo.prototype.i=function(n){return function(){return n}}({}),Jn(Ah,hn);var _p=0;function yp(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Ol(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Rl(n)}function Rl(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Fe=Ah.prototype).open=function(n,e){if(this.readyState!=_p)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Rl(this)},Fe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||wt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Fe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ol(this)),this.readyState=_p},Fe.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Rl(this)),this.g&&(this.readyState=3,Rl(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==wt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;yp(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Fe.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ol(this):Rl(this),3==this.readyState&&yp(this)}},Fe.Ua=function(n){this.g&&(this.response=this.responseText=n,Ol(this))},Fe.Ta=function(n){this.g&&(this.response=n,Ol(this))},Fe.ha=function(){this.g&&Ol(this)},Fe.setRequestHeader=function(n,e){this.v.append(n,e)},Fe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Fe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Ah.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var vp=wt.JSON.parse;function ar(n){hn.call(this),this.headers=new xl,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Mh,this.K=this.L=!1}Jn(ar,hn);var Mh="",Yi=/^https?$/i,Ku=["POST","PUT"];function _y(n){return"content-type"==n.toLowerCase()}function xh(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,kh(n),Ri(n)}function kh(n){n.D||(n.D=!0,Sn(n,"complete"),Sn(n,"error"))}function Pl(n){if(n.h&&void 0!==ha&&(!n.C[1]||4!=vi(n)||2!=n.ba()))if(n.v&&4==vi(n))ya(n.Fa,0,n);else if(Sn(n,"readystatechange"),4==vi(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(Gu)[1]||null;if(!i&&wt.self&&wt.self.location){var a=wt.self.location.protocol;i=a.substr(0,a.length-1)}r=!Yi.test(i?i.toLowerCase():"")}t=r}if(t)Sn(n,"complete"),Sn(n,"success");else{n.m=6;try{var d=2<vi(n)?n.g.statusText:""}catch(y){d=""}n.j=d+" ["+n.ba()+"]",kh(n)}}finally{Ri(n)}}}function Ri(n,e){if(n.g){yy(n);const t=n.g,r=n.C[0]?eo:null;n.g=null,n.C=null,e||Sn(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function yy(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(wt.clearTimeout(n.A),n.A=null)}function vi(n){return n.g?n.g.readyState:0}function Oh(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Mh:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function bs(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return Dl(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):En(n,e,t))}function Nl(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Yu(n){this.za=0,this.l=[],this.h=new Ac,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Nl("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Nl("baseRetryDelayMs",5e3,n),this.$a=Nl("retryDelaySeedMs",1e4,n),this.Ya=Nl("forwardChannelMaxRetries",2,n),this.ra=Nl("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Pc(n&&n.concurrentRequestLimit),this.Ca=new gp,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Xr(n){if(Sa(n),3==n.G){var e=n.V++,t=_i(n.F);En(t,"SID",n.J),En(t,"RID",e),En(t,"TYPE","terminate"),Vl(n,t),(e=new Ea(n,n.h,e,void 0)).K=2,e.v=Eh(_i(t)),t=!1,wt.navigator&&wt.navigator.sendBeacon&&(t=wt.navigator.sendBeacon(e.v.toString(),"")),!t&&wt.Image&&((new Image).src=e.v,t=!0),t||(e.g=k(e.l,null),e.g.ea(e.v)),e.F=Date.now(),No(e)}b(n)}function Fl(n){n.g&&(Ph(n),n.g.cancel(),n.g=null)}function Sa(n){Fl(n),n.u&&(wt.clearTimeout(n.u),n.u=null),Nc(n),n.i.cancel(),n.m&&("number"==typeof n.m&&wt.clearTimeout(n.m),n.m=null)}function Rh(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Qi(n)}function Qi(n){hp(n.i)||n.m||(n.m=!0,Qf(n.Ha,n),n.C=0)}function Qu(n,e){var t;t=e?e.m:n.V++;const r=_i(n.F);En(r,"SID",n.J),En(r,"RID",t),En(r,"AID",n.U),Vl(n,r),n.o&&n.s&&bs(r,n.o,n.s),t=new Ea(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=vy(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),fp(n.i,t),$u(t,r,e)}function Vl(n,e){n.j&&cp({},function(t,r){En(e,r,t)})}function vy(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Vn(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const d=["count="+t];-1==a?0<t?(a=i[0].h,d.push("ofs="+a)):a=0:d.push("ofs="+a);let p=!0;for(let y=0;y<t;y++){let E=i[y].h;const S=i[y].g;if(E-=a,0>E)a=Math.max(0,i[y].h-100),p=!1;else try{mp(S,d,"req"+E+"_")}catch(x){r&&r(S)}}if(p){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Lo(n){n.g||n.u||(n.Y=1,Qf(n.Ga,n),n.A=0)}function Ju(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=gh(Vn(n.Ga,n),f(n,n.A)),n.A++,0))}function Ph(n){null!=n.B&&(wt.clearTimeout(n.B),n.B=null)}function cm(n){n.g=new Ea(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=_i(n.oa);En(e,"RID","rpc"),En(e,"SID",n.J),En(e,"CI",n.N?"0":"1"),En(e,"AID",n.U),Vl(n,e),En(e,"TYPE","xmlhttp"),n.o&&n.s&&bs(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Eh(_i(e)),t.s=null,t.U=!0,ap(t,n)}function Nc(n){null!=n.v&&(wt.clearTimeout(n.v),n.v=null)}function _(n,e){var t=null;if(n.g==e){Nc(n),Ph(n),n.g=null;var r=2}else{if(!Th(n.i,e))return;t=e.D,Ih(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Sn(r=ph(),new Xg(r,t,e,i)),Qi(n)}else Lo(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function(n,e){return!(om(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=gh(Vn(n.Ha,n,e),f(n,n.C)),n.C++,0)))}(n,e)||2==r&&Ju(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:g(n,5);break;case 4:g(n,10);break;case 3:g(n,6);break;default:g(n,2)}}function f(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function g(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Vn(n.jb,n);t||(t=new Ta("//www.google.com/images/cleardot.gif"),wt.location&&"http"==wt.location.protocol||jn(t,"https"),Eh(t)),function(n,e){const t=new Ac;if(wt.Image){const r=new Image;r.onload=cn(Sh,t,r,"TestLoadImage: loaded",!0,e),r.onerror=cn(Sh,t,r,"TestLoadImage: error",!1,e),r.onabort=cn(Sh,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=cn(Sh,t,r,"TestLoadImage: timeout",!1,e),wt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else mi(2);n.G=0,n.j&&n.j.va(e),b(n),Sa(n)}function b(n){n.G=0,n.I=-1,n.j&&((0!=am(n.i).length||0!=n.l.length)&&(n.i.i.length=0,sh(n.l),n.l.length=0),n.j.ua())}function I(n,e,t){let r=function(n){return n instanceof Ta?_i(n):new Ta(n,void 0)}(t);if(""!=r.i)e&&bh(r,e+"."+r.i),Oc(r,r.m);else{const i=wt.location;r=function(n,e,t,r){var i=new Ta(null,void 0);return n&&jn(i,n),e&&bh(i,e),t&&Oc(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Dl(n.aa,function(i,a){En(r,a,i)}),t=n.sa,(e=n.D)&&t&&En(r,e,t),En(r,"VER",n.ma),Vl(n,r),r}function k(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ar(t&&n.Ba&&!n.qa?new Fo({ib:!0}):n.qa)).L=n.H,e}function j(){}function ee(){if(ko&&!(10<=Number(Ic)))throw Error("Environmental error: no available transport.")}function xe(n,e){hn.call(this),this.g=new Yu(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Un(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Un(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new tt(this)}function Re(n){ip.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function st(){sp.call(this),this.status=1}function tt(n){this.g=n}(Fe=ar.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():nm.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:nm),this.g.onreadystatechange=Vn(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void xh(this,a)}n=t||"";const i=new xl(this.headers);r&&cp(r,function(a,d){i.set(d,a)}),r=function(n){e:{var e=_y;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=wt.FormData&&n instanceof wt.FormData,!(0<=$g(Ku,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,d){this.g.setRequestHeader(d,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{yy(this),0<this.B&&((this.K=function(n){return ko&&ju()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Vn(this.pa,this)):this.A=ya(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){xh(this,a)}},Fe.pa=function(){void 0!==ha&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Sn(this,"timeout"),this.abort(8))},Fe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Sn(this,"complete"),Sn(this,"abort"),Ri(this))},Fe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ri(this,!0)),ar.Z.M.call(this)},Fe.Fa=function(){this.s||(this.F||this.v||this.l?Pl(this):this.cb())},Fe.cb=function(){Pl(this)},Fe.ba=function(){try{return 2<vi(this)?this.g.status:-1}catch(n){return-1}},Fe.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Fe.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),vp(e)}},Fe.Da=function(){return this.m},Fe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Fe=Yu.prototype).ma=8,Fe.G=1,Fe.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Fe.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Ea(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=Mo(a),Vu(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=vy(this,i,e),En(t=_i(this.F),"RID",n),En(t,"CVER",22),this.D&&En(t,"X-HTTP-Session-Id",this.D),Vl(this,t),this.o&&a&&bs(t,this.o,a),fp(this.i,i),this.Ra&&En(t,"TYPE","init"),this.ja?(En(t,"$req",e),En(t,"SID","null"),i.$=!0,$u(i,t,null)):$u(i,t,e),this.G=2}}else 3==this.G&&(n?Qu(this,n):0==this.l.length||hp(this.i)||Qu(this))},Fe.Ga=function(){if(this.u=null,cm(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=gh(Vn(this.bb,this),n)}},Fe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,mi(10),Fl(this),cm(this))},Fe.ab=function(){null!=this.v&&(this.v=null,Fl(this),Ju(this),mi(19))},Fe.jb=function(n){n?(this.h.info("Successfully pinged google.com"),mi(2)):(this.h.info("Failed to ping google.com"),mi(1))},(Fe=j.prototype).xa=function(){},Fe.wa=function(){},Fe.va=function(){},Fe.ua=function(){},Fe.Oa=function(){},ee.prototype.g=function(n,e){return new xe(n,e)},Jn(xe,hn),xe.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Qf(Vn(n.hb,n,e))),mi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=I(n,null,n.W),Qi(n)},xe.prototype.close=function(){Xr(this.g)},xe.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Rh(this.g,e)}else this.v?((e={}).__data__=_a(n),Rh(this.g,e)):Rh(this.g,n)},xe.prototype.M=function(){this.g.j=null,delete this.j,Xr(this.g),delete this.g,xe.Z.M.call(this)},Jn(Re,ip),Jn(st,sp),Jn(tt,j),tt.prototype.xa=function(){Sn(this.g,"a")},tt.prototype.wa=function(n){Sn(this.g,new Re(n))},tt.prototype.va=function(n){Sn(this.g,new st(n))},tt.prototype.ua=function(){Sn(this.g,"b")},ee.prototype.createWebChannel=ee.prototype.g,xe.prototype.send=xe.prototype.u,xe.prototype.open=xe.prototype.m,xe.prototype.close=xe.prototype.close,xc.NO_ERROR=0,xc.TIMEOUT=8,xc.HTTP_ERROR=6,cy.COMPLETE="complete",tm.EventType=Hu,Hu.OPEN="a",Hu.CLOSE="b",Hu.ERROR="c",Hu.MESSAGE="d",hn.prototype.listen=hn.prototype.N,ar.prototype.listenOnce=ar.prototype.O,ar.prototype.getLastError=ar.prototype.La,ar.prototype.getLastErrorCode=ar.prototype.Da,ar.prototype.getStatus=ar.prototype.ba,ar.prototype.getResponseJson=ar.prototype.Qa,ar.prototype.getResponseText=ar.prototype.ga,ar.prototype.send=ar.prototype.ea;var Ht=_s.createWebChannelTransport=function(){return new ee},_r=_s.getStatEventTarget=function(){return ph()},ei=_s.ErrorCode=xc,Xu=_s.EventType=cy,Nh=_s.Event=Po,wp=_s.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ed=_s.FetchXmlHttpFactory=Fo,Fc=_s.WebChannel=tm,Ep=_s.XhrIo=ar;const Fh="@firebase/firestore";class lr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}lr.UNAUTHENTICATED=new lr(null),lr.GOOGLE_CREDENTIALS=new lr("google-credentials-uid"),lr.FIRST_PARTY=new lr("first-party-uid"),lr.MOCK_USER=new lr("mock-user");let Vo="9.6.2";const Uo=new Yr.Yd("@firebase/firestore");function Aa(){return Uo.logLevel}function Ve(n,...e){if(Uo.logLevel<=Yr.in.DEBUG){const t=e.map(Cp);Uo.debug(`Firestore (${Vo}): ${n}`,...t)}}function cr(n,...e){if(Uo.logLevel<=Yr.in.ERROR){const t=e.map(Cp);Uo.error(`Firestore (${Vo}): ${n}`,...t)}}function Vh(n,...e){if(Uo.logLevel<=Yr.in.WARN){const t=e.map(Cp);Uo.warn(`Firestore (${Vo}): ${n}`,...t)}}function Cp(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function lt(n="Unexpected state"){const e=`FIRESTORE (${Vo}) INTERNAL ASSERTION FAILED: `+n;throw cr(e),new Error(e)}function At(n,e){n||lt()}function Ge(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends Ct.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Sr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class by{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class EM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(lr.UNAUTHENTICATED))}shutdown(){}}class V0{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class eT{constructor(e){this.t=e,this.currentUser=lr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=E=>this.i!==i?(i=this.i,t(E)):Promise.resolve();let d=new Sr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Sr,e.enqueueRetryable(()=>a(this.currentUser))};const p=()=>{const E=d;e.enqueueRetryable((0,pe.Z)(function*(){yield E.promise,yield a(r.currentUser)}))},y=E=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(E=>y(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?y(E):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Sr)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(At("string"==typeof r.accessToken),new by(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return At(null===e||"string"==typeof e),new lr(e)}}class U0{constructor(e,t,r){this.type="FirstParty",this.user=lr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class tT{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new U0(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(lr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class B0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Bo{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null}start(e,t){this.o=i=>{e.enqueueRetryable(()=>{return null!=(a=i).error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`),t(a.token);var a})};const r=i=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.g.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.g.getImmediate({optional:!0});i?r(i):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(At("string"==typeof t.token),new B0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ws{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.p(r),this.T=r=>t.writeSequenceNumber(r))}p(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function nT(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}ws.I=-1;class j0{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=nT(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Zt(n,e){return n<e?-1:n>e?1:0}function Uh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function wy(n){return n+"\0"}class ti{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ti.fromMillis(Date.now())}static fromDate(e){return ti.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ti(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Zt(this.nanoseconds,e.nanoseconds):Zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ot{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ot(e)}static min(){return new Ot(new ti(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function H0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function It(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ey(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Bh{constructor(e,t,r){void 0===t?t=0:t>e.length&&lt(),void 0===r?r=e.length-t:r>e.length-t&&lt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Bh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Bh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),d=t.get(i);if(a<d)return-1;if(a>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class un extends Bh{construct(e,t,r){return new un(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new un(t)}static emptyPath(){return new un([])}}const um=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mn extends Bh{construct(e,t,r){return new Mn(e,t,r)}static isValidIdentifier(e){return um.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Mn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Pe(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new Pe(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Pe(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===p?(d=!d,i++):"."!==p||d?(r+=p,i++):(a(),i++)}if(a(),d)throw new Pe(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mn(t)}static emptyPath(){return new Mn([])}}class td{constructor(e){this.fields=e,e.sort(Mn.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Uh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class yr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new yr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new yr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yr.EMPTY_BYTE_STRING=new yr("");const Ul=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ma(n){if(At(!!n),"string"==typeof n){let e=0;const t=Ul.exec(n);if(At(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vr(n.seconds),nanos:vr(n.nanos)}}function vr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Lc(n){return"string"==typeof n?yr.fromBase64String(n):yr.fromUint8Array(n)}function q0(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Cy(n){const e=n.mapValue.fields.__previous_value__;return q0(e)?Cy(e):e}function dm(n){const e=Ma(n.mapValue.fields.__local_write_time__.timestampValue);return new ti(e.seconds,e.nanos)}function xa(n){return null==n}function nd(n){return 0===n&&1/n==-1/0}function hm(n){return"number"==typeof n&&Number.isInteger(n)&&!nd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class ct{constructor(e){this.path=e}static fromPath(e){return new ct(un.fromString(e))}static fromName(e){return new ct(un.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===un.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return un.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ct(new un(e.slice()))}}function Bl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?q0(n)?4:10:lt()}function jl(n,e){if(n===e)return!0;const t=Bl(n);if(t!==Bl(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return dm(n).isEqual(dm(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Ma(r.timestampValue),d=Ma(i.timestampValue);return a.seconds===d.seconds&&a.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Lc(n.bytesValue).isEqual(Lc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return vr(r.geoPointValue.latitude)===vr(i.geoPointValue.latitude)&&vr(r.geoPointValue.longitude)===vr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return vr(r.integerValue)===vr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=vr(r.doubleValue),d=vr(i.doubleValue);return a===d?nd(a)===nd(d):isNaN(a)&&isNaN(d)}return!1}(n,e);case 9:return Uh(n.arrayValue.values||[],e.arrayValue.values||[],jl);case 10:return function(r,i){const a=r.mapValue.fields||{},d=i.mapValue.fields||{};if(H0(a)!==H0(d))return!1;for(const p in a)if(a.hasOwnProperty(p)&&(void 0===d[p]||!jl(a[p],d[p])))return!1;return!0}(n,e);default:return lt()}var i}function Dp(n,e){return void 0!==(n.values||[]).find(t=>jl(t,e))}function jh(n,e){if(n===e)return 0;const t=Bl(n),r=Bl(e);if(t!==r)return Zt(t,r);switch(t){case 0:return 0;case 1:return Zt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const d=vr(i.integerValue||i.doubleValue),p=vr(a.integerValue||a.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(n,e);case 3:return $0(n.timestampValue,e.timestampValue);case 4:return $0(dm(n),dm(e));case 5:return Zt(n.stringValue,e.stringValue);case 6:return function(i,a){const d=Lc(i),p=Lc(a);return d.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const d=i.split("/"),p=a.split("/");for(let y=0;y<d.length&&y<p.length;y++){const E=Zt(d[y],p[y]);if(0!==E)return E}return Zt(d.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const d=Zt(vr(i.latitude),vr(a.latitude));return 0!==d?d:Zt(vr(i.longitude),vr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const d=i.values||[],p=a.values||[];for(let y=0;y<d.length&&y<p.length;++y){const E=jh(d[y],p[y]);if(E)return E}return Zt(d.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){const d=i.fields||{},p=Object.keys(d),y=a.fields||{},E=Object.keys(y);p.sort(),E.sort();for(let S=0;S<p.length&&S<E.length;++S){const x=Zt(p[S],E[S]);if(0!==x)return x;const L=jh(d[p[S]],y[E[S]]);if(0!==L)return L}return Zt(p.length,E.length)}(n.mapValue,e.mapValue);default:throw lt()}}function $0(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Zt(n,e);const t=Ma(n),r=Ma(e),i=Zt(t.seconds,r.seconds);return 0!==i?i:Zt(t.nanos,r.nanos)}function Dy(n){return fm(n)}function fm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Ma(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Lc(n.bytesValue).toBase64():"referenceValue"in n?ct.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const d of r.values||[])a?a=!1:i+=",",i+=fm(d);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",d=!0;for(const p of i)d?d=!1:a+=",",a+=`${p}:${fm(r.fields[p])}`;return a+"}"}(n.mapValue):lt();var e}function Ty(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Iy(n){return!!n&&"integerValue"in n}function G0(n){return!!n&&"arrayValue"in n}function Sy(n){return!!n&&"nullValue"in n}function Ay(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function pm(n){return!!n&&"mapValue"in n}function rd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return It(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=rd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=rd(n.arrayValue.values[t]);return e}return Object.assign({},n)}class Ji{constructor(e){this.value=e}static empty(){return new Ji({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!pm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=rd(t)}setAll(e){let t=Mn.emptyPath(),r={},i=[];e.forEach((d,p)=>{if(!t.isImmediateParentOf(p)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=p.popLast()}d?r[p.lastSegment()]=rd(d):i.push(p.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());pm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return jl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];pm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){It(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Ji(rd(this.value))}}function iT(n){const e=[];return It(n.fields,(t,r)=>{const i=new Mn([t]);if(pm(r)){const a=iT(r.mapValue).fields;if(0===a.length)e.push(i);else for(const d of a)e.push(i.child(d))}else e.push(i)}),new td(e)}class er{constructor(e,t,r,i,a){this.key=e,this.documentType=t,this.version=r,this.data=i,this.documentState=a}static newInvalidDocument(e){return new er(e,0,Ot.min(),Ji.empty(),0)}static newFoundDocument(e,t,r){return new er(e,1,t,r,0)}static newNoDocument(e,t){return new er(e,2,t,Ji.empty(),0)}static newUnknownDocument(e,t){return new er(e,3,t,Ji.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ji.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ji.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof er&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new er(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class DM{constructor(e,t=null,r=[],i=[],a=null,d=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=d,this.endAt=p,this.R=null}}function sT(n,e=null,t=[],r=[],i=null,a=null,d=null){return new DM(n,e,t,r,i,a,d)}function gm(n){const e=Ge(n);if(null===e.R){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>function(n){return n.field.canonicalString()+n.op.toString()+Dy(n.value)}(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),xa(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=_m(e.startAt)),e.endAt&&(t+="|ub:",t+=_m(e.endAt)),e.R=t}return e.R}function My(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!lT(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!jl(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!W0(n.startAt,e.startAt)&&W0(n.endAt,e.endAt)}function xy(n){return ct.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Es extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,r):new ky(e,t,r):"array-contains"===t?new Z0(e,r):"in"===t?new Oy(e,r):"not-in"===t?new aT(e,r):"array-contains-any"===t?new Uc(e,r):new Es(e,t,r)}static P(e,t,r){return"in"===t?new oT(e,r):new z0(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(jh(t,this.value)):null!==t&&Bl(this.value)===Bl(t)&&this.v(jh(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return lt()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class ky extends Es{constructor(e,t,r){super(e,t,r),this.key=ct.fromName(r.referenceValue)}matches(e){const t=ct.comparator(e.key,this.key);return this.v(t)}}class oT extends Es{constructor(e,t){super(e,"in",t),this.keys=mm(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class z0 extends Es{constructor(e,t){super(e,"not-in",t),this.keys=mm(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function mm(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ct.fromName(r.referenceValue))}class Z0 extends Es{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return G0(t)&&Dp(t.arrayValue,this.value)}}class Oy extends Es{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Dp(this.value.arrayValue,t)}}class aT extends Es{constructor(e,t){super(e,"not-in",t)}matches(e){if(Dp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Dp(this.value.arrayValue,t)}}class Uc extends Es{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!G0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Dp(this.value.arrayValue,r))}}class Hh{constructor(e,t){this.position=e,this.before=t}}function _m(n){return`${n.before?"b":"a"}:${n.position.map(e=>Dy(e)).join(",")}`}class Bc{constructor(e,t="asc"){this.field=e,this.dir=t}}function lT(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Ry(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],d=n.position[i];if(r=a.field.isKeyField()?ct.comparator(ct.fromName(d.referenceValue),t.key):jh(d,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return n.before?r<=0:r<0}function W0(n,e){if(null===n)return null===e;if(null===e||n.before!==e.before||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!jl(n.position[t],e.position[t]))return!1;return!0}class Hl{constructor(e,t=null,r=[],i=[],a=null,d="F",p=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=d,this.startAt=p,this.endAt=y,this.S=null,this.D=null}}function qh(n,e,t,r,i,a,d,p){return new Hl(n,e,t,r,i,a,d,p)}function jo(n){return new Hl(n)}function $h(n){return!xa(n.limit)&&"F"===n.limitType}function ql(n){return!xa(n.limit)&&"L"===n.limitType}function id(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function jc(n){for(const e of n.filters)if(e.V())return e.field;return null}function Py(n){return null!==n.collectionGroup}function sd(n){const e=Ge(n);if(null===e.S){e.S=[];const t=jc(e),r=id(e);if(null!==t&&null===r)t.isKeyField()||e.S.push(new Bc(t)),e.S.push(new Bc(Mn.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.S.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.S.push(new Bc(Mn.keyField(),a))}}}return e.S}function Os(n){const e=Ge(n);if(!e.D)if("F"===e.limitType)e.D=sT(e.path,e.collectionGroup,sd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of sd(e))t.push(new Bc(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Hh(e.endAt.position,!e.endAt.before):null,i=e.startAt?new Hh(e.startAt.position,!e.startAt.before):null;e.D=sT(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.D}function ym(n,e,t){return new Hl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function od(n,e){return My(Os(n),Os(e))&&n.limitType===e.limitType}function Ny(n){return`${gm(Os(n))}|lt:${n.limitType}`}function Gh(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Dy(r.value)}`;var r}).join(", ")}]`),xa(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: "+_m(n.startAt)),n.endAt&&(e+=", endAt: "+_m(n.endAt)),`Target(${e})`}(Os(n))}; limitType=${n.limitType})`}function Tp(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):ct.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!Ry(t.startAt,sd(t),r)||t.endAt&&Ry(t.endAt,sd(t),r)));var t,r}function Fy(n){return(e,t)=>{let r=!1;for(const i of sd(n)){const a=IM(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function IM(n,e,t){const r=n.field.isKeyField()?ct.comparator(e.key,t.key):function(i,a,d){const p=a.data.field(i),y=d.data.field(i);return null!==p&&null!==y?jh(p,y):lt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return lt()}}function Ly(n,e){if(n.C){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nd(e)?"-0":e}}function Vy(n){return{integerValue:""+n}}function K0(n,e){return hm(e)?Vy(e):Ly(n,e)}class Ip{constructor(){this._=void 0}}function cT(n,e,t){return n instanceof zh?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof ad?dT(n,e):n instanceof Zh?Uy(n,e):function(r,i){const a=Cs(r,i),d=Y0(a)+Y0(r.N);return Iy(a)&&Iy(r.N)?Vy(d):Ly(r.k,d)}(n,e)}function uT(n,e,t){return n instanceof ad?dT(n,e):n instanceof Zh?Uy(n,e):t}function Cs(n,e){return n instanceof Sp?Iy(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class zh extends Ip{}class ad extends Ip{constructor(e){super(),this.elements=e}}function dT(n,e){const t=vm(e);for(const r of n.elements)t.some(i=>jl(i,r))||t.push(r);return{arrayValue:{values:t}}}class Zh extends Ip{constructor(e){super(),this.elements=e}}function Uy(n,e){let t=vm(e);for(const r of n.elements)t=t.filter(i=>!jl(i,r));return{arrayValue:{values:t}}}class Sp extends Ip{constructor(e,t){super(),this.k=e,this.N=t}}function Y0(n){return vr(n.integerValue||n.doubleValue)}function vm(n){return G0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Wh{constructor(e,t){this.field=e,this.transform=t}}class fT{constructor(e,t){this.version=e,this.transformResults=t}}class Ar{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ar}static exists(e){return new Ar(void 0,e)}static updateTime(e){return new Ar(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ap(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class bm{}function Q0(n,e,t){n instanceof Mp?function(r,i,a){const d=r.value.clone(),p=J0(r.fieldTransforms,i,a.transformResults);d.setAll(p),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,e,t):n instanceof bi?function(r,i,a){if(!Ap(r.precondition,i))return void i.convertToUnknownDocument(a.version);const d=J0(r.fieldTransforms,i,a.transformResults),p=i.data;p.setAll(wm(r)),p.setAll(d),i.convertToFoundDocument(a.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function By(n,e,t){var i;n instanceof Mp?function(r,i,a){if(!Ap(r.precondition,i))return;const d=r.value.clone(),p=X0(r.fieldTransforms,a,i);d.setAll(p),i.convertToFoundDocument(Hy(i),d).setHasLocalMutations()}(n,e,t):n instanceof bi?function(r,i,a){if(!Ap(r.precondition,i))return;const d=X0(r.fieldTransforms,a,i),p=i.data;p.setAll(wm(r)),p.setAll(d),i.convertToFoundDocument(Hy(i),p).setHasLocalMutations()}(n,e,t):Ap(n.precondition,i=e)&&i.convertToNoDocument(Ot.min())}function pT(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=Cs(r.transform,i||null);null!=a&&(null==t&&(t=Ji.empty()),t.set(r.field,a))}return t||null}function jy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Uh(t,r,(i,a)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof ad&&r instanceof ad||t instanceof Zh&&r instanceof Zh?Uh(t.elements,r.elements,jl):t instanceof Sp&&r instanceof Sp?jl(t.N,r.N):t instanceof zh&&r instanceof zh);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Hy(n){return n.isFoundDocument()?n.version:Ot.min()}class Mp extends bm{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class bi extends bm{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function wm(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function J0(n,e,t){const r=new Map;At(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],d=a.transform,p=e.data.field(a.field);r.set(a.field,uT(d,p,t[i]))}return r}function X0(n,e,t){const r=new Map;for(const i of n){const a=i.transform,d=t.data.field(i.field);r.set(i.field,cT(a,d,e))}return r}class Em extends bm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Cm extends bm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class gT{constructor(e){this.count=e}}var Mr,Jt;function Dm(n){switch(n){default:return lt();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function ew(n){if(void 0===n)return cr("GRPC error has no .code"),fe.UNKNOWN;switch(n){case Mr.OK:return fe.OK;case Mr.CANCELLED:return fe.CANCELLED;case Mr.UNKNOWN:return fe.UNKNOWN;case Mr.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case Mr.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case Mr.INTERNAL:return fe.INTERNAL;case Mr.UNAVAILABLE:return fe.UNAVAILABLE;case Mr.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case Mr.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case Mr.NOT_FOUND:return fe.NOT_FOUND;case Mr.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case Mr.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case Mr.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case Mr.ABORTED:return fe.ABORTED;case Mr.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case Mr.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case Mr.DATA_LOSS:return fe.DATA_LOSS;default:return lt()}}(Jt=Mr||(Mr={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";class Hr{constructor(e,t){this.comparator=e,this.root=t||qr.EMPTY}insert(e,t){return new Hr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qr.BLACK,null,null))}remove(e){return new Hr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ld(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ld(this.root,e,this.comparator,!1)}getReverseIterator(){return new ld(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ld(this.root,e,this.comparator,!0)}}class ld{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qr{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:qr.RED,this.left=null!=i?i:qr.EMPTY,this.right=null!=a?a:qr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new qr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return qr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return qr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lt();const e=this.left.check();if(e!==this.right.check())throw lt();return e+(this.isRed()?0:1)}}qr.EMPTY=null,qr.RED=!0,qr.BLACK=!1,qr.EMPTY=new class{constructor(){this.size=0}get key(){throw lt()}get value(){throw lt()}get color(){throw lt()}get left(){throw lt()}get right(){throw lt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new qr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ur{constructor(e){this.comparator=e,this.data=new Hr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Tm(this.data.getIterator())}getIteratorFrom(e){return new Tm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ur)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ur(this.comparator);return t.data=e,t}}class Tm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const qy=new Hr(ct.comparator);function Rs(){return qy}const mT=new Hr(ct.comparator);function $y(){return mT}const Gy=new Hr(ct.comparator);function _T(){return Gy}const yT=new ur(ct.comparator);function yn(...n){let e=yT;for(const t of n)e=e.add(t);return e}const tw=new ur(Zt);function xp(){return tw}class Kh{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Yh.createSynthesizedTargetChangeForCurrentChange(e,t)),new Kh(Ot.min(),r,xp(),Rs(),yn())}}class Yh{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Yh(yr.EMPTY_BYTE_STRING,t,yn(),yn(),yn())}}class lo{constructor(e,t,r,i){this.$=e,this.removedTargetIds=t,this.key=r,this.O=i}}class kp{constructor(e,t){this.targetId=e,this.F=t}}class nw{constructor(e,t,r=yr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class rw{constructor(){this.M=0,this.L=zy(),this.B=yr.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.M}get j(){return this.q}W(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}G(){let e=yn(),t=yn(),r=yn();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:lt()}}),new Yh(this.B,this.U,e,t,r)}H(){this.q=!1,this.L=zy()}J(e,t){this.q=!0,this.L=this.L.insert(e,t)}Y(e){this.q=!0,this.L=this.L.remove(e)}X(){this.M+=1}Z(){this.M-=1}tt(){this.q=!0,this.U=!0}}class SM{constructor(e){this.et=e,this.nt=new Map,this.st=Rs(),this.it=Im(),this.rt=new ur(Zt)}ot(e){for(const t of e.$)e.O&&e.O.isFoundDocument()?this.at(t,e.O):this.ct(t,e.key,e.O);for(const t of e.removedTargetIds)this.ct(t,e.key,e.O)}ut(e){this.forEachTarget(e,t=>{const r=this.ht(t);switch(e.state){case 0:this.lt(t)&&r.W(e.resumeToken);break;case 1:r.Z(),r.K||r.H(),r.W(e.resumeToken);break;case 2:r.Z(),r.K||this.removeTarget(t);break;case 3:this.lt(t)&&(r.tt(),r.W(e.resumeToken));break;case 4:this.lt(t)&&(this.ft(t),r.W(e.resumeToken));break;default:lt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((r,i)=>{this.lt(i)&&t(i)})}dt(e){const t=e.targetId,r=e.F.count,i=this.wt(t);if(i){const a=i.target;if(xy(a))if(0===r){const d=new ct(a.path);this.ct(t,d,er.newNoDocument(d,Ot.min()))}else At(1===r);else this._t(t)!==r&&(this.ft(t),this.rt=this.rt.add(t))}}gt(e){const t=new Map;this.nt.forEach((a,d)=>{const p=this.wt(d);if(p){if(a.current&&xy(p.target)){const y=new ct(p.target.path);null!==this.st.get(y)||this.yt(d,y)||this.ct(d,y,er.newNoDocument(y,e))}a.j&&(t.set(d,a.G()),a.H())}});let r=yn();this.it.forEach((a,d)=>{let p=!0;d.forEachWhile(y=>{const E=this.wt(y);return!E||2===E.purpose||(p=!1,!1)}),p&&(r=r.add(a))});const i=new Kh(e,t,this.rt,this.st,r);return this.st=Rs(),this.it=Im(),this.rt=new ur(Zt),i}at(e,t){if(!this.lt(e))return;const r=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,r),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.lt(e))return;const i=this.ht(e);this.yt(e,t)?i.J(t,1):i.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),r&&(this.st=this.st.insert(t,r))}removeTarget(e){this.nt.delete(e)}_t(e){const t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}X(e){this.ht(e).X()}ht(e){let t=this.nt.get(e);return t||(t=new rw,this.nt.set(e,t)),t}Tt(e){let t=this.it.get(e);return t||(t=new ur(Zt),this.it=this.it.insert(e,t)),t}lt(e){const t=null!==this.wt(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}ft(e){this.nt.set(e,new rw),this.et.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}yt(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}function Im(){return new Hr(ct.comparator)}function zy(){return new Hr(ct.comparator)}const Zy={asc:"ASCENDING",desc:"DESCENDING"},Op={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class vT{constructor(e,t){this.databaseId=e,this.C=t}}function cd(n,e){return n.C?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Wy(n,e){return n.C?e.toBase64():e.toUint8Array()}function iw(n,e){return cd(n,e.toTimestamp())}function $r(n){return At(!!n),Ot.fromTimestamp(function(e){const t=Ma(e);return new ti(t.seconds,t.nanos)}(n))}function Ky(n,e){return(t=n,new un(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Sm(n){const e=un.fromString(n);return At(IT(e)),e}function Rp(n,e){return Ky(n.databaseId,e.path)}function ka(n,e){const t=Sm(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ct(sw(t))}function Am(n,e){return Ky(n.databaseId,e)}function ud(n){const e=Sm(n);return 4===e.length?un.emptyPath():sw(e)}function Qh(n){return new un(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function sw(n){return At(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function ow(n,e,t){return{name:Rp(n,e),fields:t.value.mapValue.fields}}function dd(n,e,t){const r=ka(n,e.name),i=$r(e.updateTime),a=new Ji({mapValue:{fields:e.fields}}),d=er.newFoundDocument(r,i,a);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Mm(n,e){let t;if(e instanceof Mp)t={update:ow(n,e.key,e.value)};else if(e instanceof Em)t={delete:Rp(n,e.key)};else if(e instanceof bi)t={update:ow(n,e.key,e.data),updateMask:TT(e.fieldMask)};else{if(!(e instanceof Cm))return lt();t={verify:Rp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const d=a.transform;if(d instanceof zh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ad)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Zh)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Sp)return{fieldPath:a.field.canonicalString(),increment:d.N};throw lt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:iw(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:lt()),t;var i}function aw(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Ar.updateTime($r(i.updateTime)):void 0!==i.exists?Ar.exists(i.exists):Ar.none():Ar.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,d){let p=null;"setToServerValue"in d?(At("REQUEST_TIME"===d.setToServerValue),p=new zh):"appendMissingElements"in d?p=new ad(d.appendMissingElements.values||[]):"removeAllFromArray"in d?p=new Zh(d.removeAllFromArray.values||[]):"increment"in d?p=new Sp(a,d.increment):lt();const y=Mn.fromServerFormat(d.fieldPath);return new Wh(y,p)}(n,i)):[];var i;if(e.update){const i=ka(n,e.update.name),a=new Ji({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new td((e.updateMask.fieldPaths||[]).map(E=>Mn.fromServerFormat(E)));return new bi(i,a,d,t,r)}return new Mp(i,a,t,r)}if(e.delete){const i=ka(n,e.delete);return new Em(i,t)}if(e.verify){const i=ka(n,e.verify);return new Cm(i,t)}return lt()}function xm(n,e){return{documents:[Am(n,e.path)]}}function Yy(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Am(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Am(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0===p.length)return;const y=p.map(E=>function(S){if("=="===S.op){if(Ay(S.value))return{unaryFilter:{field:hd(S.field),op:"IS_NAN"}};if(Sy(S.value))return{unaryFilter:{field:hd(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(Ay(S.value))return{unaryFilter:{field:hd(S.field),op:"IS_NOT_NAN"}};if(Sy(S.value))return{unaryFilter:{field:hd(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hd(S.field),op:CT(S.op),value:S.value}}}(E));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(p){if(0!==p.length)return p.map(y=>{return{field:hd((E=y).field),direction:ET(E.dir)};var E})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const d=(y=e.limit,n.C||xa(y)?y:{value:y});var y;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=cw(e.startAt)),e.endAt&&(t.structuredQuery.endAt=cw(e.endAt)),t}function Qy(n){let e=ud(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){At(1===r);const S=t.from[0];S.allDescendants?i=S.collectionId:e=e.child(S.collectionId)}let a=[];t.where&&(a=Jy(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(S=>{return new Bc(Pp((x=S).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let p=null;t.limit&&(p=function(S){let x;return x="object"==typeof S?S.value:S,xa(x)?null:x}(t.limit));let y=null;t.startAt&&(y=uw(t.startAt));let E=null;return t.endAt&&(E=uw(t.endAt)),qh(e,i,d,a,p,"F",y,E)}function Jy(n){return n?void 0!==n.unaryFilter?[DT(n)]:void 0!==n.fieldFilter?[dw(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Jy(e)).reduce((e,t)=>e.concat(t)):lt():[]}function cw(n){return{before:n.before,values:n.position}}function uw(n){return new Hh(n.values||[],!!n.before)}function ET(n){return Zy[n]}function CT(n){return Op[n]}function hd(n){return{fieldPath:n.canonicalString()}}function Pp(n){return Mn.fromServerFormat(n.fieldPath)}function dw(n){return Es.create(Pp(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lt()}}(n.fieldFilter.op),n.fieldFilter.value)}function DT(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Pp(n.unaryFilter.field);return Es.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Pp(n.unaryFilter.field);return Es.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Pp(n.unaryFilter.field);return Es.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Pp(n.unaryFilter.field);return Es.create(i,"!=",{nullValue:"NULL_VALUE"});default:return lt()}}function TT(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function IT(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Oa(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=hw(e)),e=Xy(n.get(t),e);return hw(e)}function Xy(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function hw(n){return n+"\x01\x01"}function Ra(n){const e=n.length;if(At(e>=2),2===e)return At("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),un.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const d=n.indexOf("\x01",a);switch((d<0||d>t)&&lt(),n.charAt(d+1)){case"\x01":const p=n.substring(a,d);let y;0===i.length?y=p:(i+=p,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(a,d),i+="\0";break;case"\x11":i+=n.substring(a,d+1);break;default:lt()}a=d+2}return new un(r)}class fw{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class uo{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}uo.store="owner",uo.key="owner";class ni{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}ni.store="mutationQueues",ni.keyPath="userId";class Zn{constructor(e,t,r,i,a){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a}}Zn.store="mutations",Zn.keyPath="batchId",Zn.userMutationsIndex="userMutationsIndex",Zn.userMutationsKeyPath=["userId","batchId"];class Xi{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,Oa(t)]}static key(e,t,r){return[e,Oa(t),r]}}Xi.store="documentMutations",Xi.PLACEHOLDER=new Xi;class pw{constructor(e,t){this.path=e,this.readTime=t}}class gw{constructor(e,t){this.path=e,this.version=t}}class tr{constructor(e,t,r,i,a,d){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=d}}tr.store="remoteDocuments",tr.readTimeIndex="readTimeIndex",tr.readTimeIndexPath="readTime",tr.collectionReadTimeIndex="collectionReadTimeIndex",tr.collectionReadTimeIndexPath=["parentPath","readTime"];class Pa{constructor(e){this.byteSize=e}}Pa.store="remoteDocumentGlobal",Pa.key="remoteDocumentGlobalKey";class Ps{constructor(e,t,r,i,a,d,p){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=d,this.query=p}}Ps.store="targets",Ps.keyPath="targetId",Ps.queryTargetsIndexName="queryTargetsIndex",Ps.queryTargetsKeyPath=["canonicalId","targetId"];class ri{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}ri.store="targetDocuments",ri.keyPath=["targetId","path"],ri.documentTargetsIndex="documentTargetsIndex",ri.documentTargetsKeyPath=["path","targetId"];class es{constructor(e,t,r,i){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=i}}es.key="targetGlobalKey",es.store="targetGlobal";class fd{constructor(e,t){this.collectionId=e,this.parent=t}}fd.store="collectionParents",fd.keyPath=["collectionId","parent"];class Ho{constructor(e,t,r,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=i}}Ho.store="clientMetadata",Ho.keyPath="clientId";class Jh{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}Jh.store="bundles",Jh.keyPath="bundleId";class Xh{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}Xh.store="namedQueries",Xh.keyPath="name";const ST=[ni.store,Zn.store,Xi.store,tr.store,Ps.store,uo.store,es.store,ri.store,Ho.store,Pa.store,fd.store,Jh.store,Xh.store],mw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _w{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ke{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ke((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ke?t:ke.resolve(t)}catch(t){return ke.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ke.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ke.reject(t)}static resolve(e){return new ke((t,r)=>{t(e)})}static reject(e){return new ke((t,r)=>{r(e)})}static waitFor(e){return new ke((t,r)=>{let i=0,a=0,d=!1;e.forEach(p=>{++i,p.next(()=>{++a,d&&a===i&&t()},y=>r(y))}),d=!0,a===i&&t()})}static or(e){let t=ke.resolve(!1);for(const r of e)t=t.next(i=>i?ke.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class pd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.It=new Sr,this.transaction.oncomplete=()=>{this.It.resolve()},this.transaction.onabort=()=>{t.error?this.It.reject(new $l(e,t.error)):this.It.resolve()},this.transaction.onerror=r=>{const i=md(r.target.error);this.It.reject(new $l(e,i))}}static open(e,t,r,i){try{return new pd(t,e.transaction(i,r))}catch(a){throw new $l(t,a)}}get At(){return this.It.promise}abort(e){e&&this.It.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new MT(t)}}class Pi{constructor(e,t,r){this.name=e,this.version=t,this.Rt=r,12.2===Pi.bt((0,Ct.z$)())&&cr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),Gl(window.indexedDB.deleteDatabase(e)).toPromise()}static Pt(){if(!(0,Ct.hl)())return!1;if(Pi.vt())return!0;const e=(0,Ct.z$)(),t=Pi.bt(e),r=0<t&&t<10,i=Pi.Vt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static vt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.St)}static Dt(e,t){return e.store(t)}static bt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Vt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Ct(e){var t=this;return(0,pe.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=d=>{r(d.target.result)},a.onblocked=()=>{i(new $l(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=d=>{const p=d.target.error;i("VersionError"===p.name?new Pe(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Pe(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new $l(e,p))},a.onupgradeneeded=d=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.Rt.Nt(d.target.result,a.transaction,d.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.kt&&(t.db.onversionchange=r=>t.kt(r)),t.db})()}xt(e){this.kt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,pe.Z)(function*(){const d="readonly"===t;let p=0;for(;;){++p;try{a.db=yield a.Ct(e);const y=pd.open(a.db,e,d?"readonly":"readwrite",r),E=i(y).catch(S=>(y.abort(S),ke.reject(S))).toPromise();return E.catch(()=>{}),yield y.At,E}catch(y){const E="FirebaseError"!==y.name&&p<3;if(Ve("SimpleDb","Transaction failed with error:",y.message,"Retrying:",E),a.close(),!E)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class AT{constructor(e){this.$t=e,this.Ot=!1,this.Ft=null}get isDone(){return this.Ot}get Mt(){return this.Ft}set cursor(e){this.$t=e}done(){this.Ot=!0}Lt(e){this.Ft=e}delete(){return Gl(this.$t.delete())}}class $l extends Pe{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function gd(n){return"IndexedDbTransactionError"===n.name}class MT{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Gl(r)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),Gl(this.store.add(e))}get(e){return Gl(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),Gl(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),Gl(this.store.count())}Bt(e,t){const r=this.cursor(this.options(e,t)),i=[];return this.Ut(r,(a,d)=>{i.push(d)}).next(()=>i)}qt(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Kt=!1;const i=this.cursor(r);return this.Ut(i,(a,d,p)=>p.delete())}jt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Ut(i,t)}Qt(e){const t=this.cursor({});return new ke((r,i)=>{t.onerror=a=>{const d=md(a.target.error);i(d)},t.onsuccess=a=>{const d=a.target.result;d?e(d.primaryKey,d.value).next(p=>{p?d.continue():r()}):r()}})}Ut(e,t){const r=[];return new ke((i,a)=>{e.onerror=d=>{a(d.target.error)},e.onsuccess=d=>{const p=d.target.result;if(!p)return void i();const y=new AT(p),E=t(p.primaryKey,p.value,y);if(E instanceof ke){const S=E.catch(x=>(y.done(),ke.reject(x)));r.push(S)}y.isDone?i():null===y.Mt?p.continue():p.continue(y.Mt)}}).next(()=>ke.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Kt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Gl(n){return new ke((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=md(r.target.error);t(i)}})}let qo=!1;function md(n){const e=Pi.bt((0,Ct.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return qo||(qo=!0,setTimeout(()=>{throw r},0)),r}}return n}class wi extends _w{constructor(e,t){super(),this.Wt=e,this.currentSequenceNumber=t}}function xr(n,e){const t=Ge(n);return Pi.Dt(t.Wt,e)}class ef{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Q0(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&By(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&By(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Ot.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),yn())}isEqual(e){return this.batchId===e.batchId&&Uh(this.mutations,e.mutations,(t,r)=>jy(t,r))&&Uh(this.baseMutations,e.baseMutations,(t,r)=>jy(t,r))}}class Ds{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){At(e.mutations.length===r.length);let i=_T();const a=e.mutations;for(let d=0;d<a.length;d++)i=i.insert(a[d].key,r[d].version);return new Ds(e,t,r,i)}}class Na{constructor(e,t,r,i,a=Ot.min(),d=Ot.min(),p=yr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p}withSequenceNumber(e){return new Na(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Na(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Na(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class _d{constructor(e){this.Gt=e}}function Hc(n,e){if(e.document)return dd(n.Gt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=ct.fromSegments(e.noDocument.path),r=Go(e.noDocument.readTime),i=er.newNoDocument(t,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){const t=ct.fromSegments(e.unknownDocument.path),r=Go(e.unknownDocument.version);return er.newUnknownDocument(t,r)}return lt()}function yd(n,e,t){const r=qc(t),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){const a={name:Rp(p=n.Gt,(y=e).key),fields:y.data.value.mapValue.fields,updateTime:cd(p,y.version.toTimestamp())};return new tr(null,null,a,e.hasCommittedMutations,r,i)}var p,y;if(e.isNoDocument()){const a=e.key.path.toArray(),d=$o(e.version),p=e.hasCommittedMutations;return new tr(null,new pw(a,d),null,p,r,i)}if(e.isUnknownDocument()){const a=e.key.path.toArray(),d=$o(e.version);return new tr(new gw(a,d),null,null,!0,r,i)}return lt()}function qc(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function vd(n){const e=new ti(n[0],n[1]);return Ot.fromTimestamp(e)}function $o(n){const e=n.toTimestamp();return new fw(e.seconds,e.nanoseconds)}function Go(n){const e=new ti(n.seconds,n.nanoseconds);return Ot.fromTimestamp(e)}function zo(n,e){const t=(e.baseMutations||[]).map(a=>aw(n.Gt,a));for(let a=0;a<e.mutations.length-1;++a){const d=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(d.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>aw(n.Gt,a)),i=ti.fromMillis(e.localWriteTimeMs);return new ef(e.batchId,i,t,r)}function Fa(n){const e=Go(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Go(n.lastLimboFreeSnapshotVersion):Ot.min();let r;var i;return void 0!==n.query.documents?(At(1===(i=n.query).documents.length),r=Os(jo(ud(i.documents[0])))):r=Os(Qy(n.query)),new Na(r,n.targetId,0,n.lastListenSequenceNumber,e,t,yr.fromBase64String(n.resumeToken))}function ev(n,e){const t=$o(e.snapshotVersion),r=$o(e.lastLimboFreeSnapshotVersion);let i;i=xy(e.target)?xm(n.Gt,e.target):Yy(n.Gt,e.target);const a=e.resumeToken.toBase64();return new Ps(e.targetId,gm(e.target),t,a,e.sequenceNumber,r,i)}function km(n){const e=Qy({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?ym(e,e.limit,"L"):e}class yw{getBundleMetadata(e,t){return tv(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Go(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return tv(e).put({bundleId:(r=t).id,createTime:$o($r(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return nv(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:km(i.bundledQuery),readTime:Go(i.readTime)};var i})}saveNamedQuery(e,t){return nv(e).put({name:(r=t).name,readTime:$o($r(r.readTime)),bundledQuery:r.bundledQuery});var r}}function tv(n){return xr(n,Jh.store)}function nv(n){return xr(n,Xh.store)}class vw{constructor(){this.zt=new Om}addToCollectionParentIndex(e,t){return this.zt.add(t),ke.resolve()}getCollectionParents(e,t){return ke.resolve(this.zt.getEntries(t))}}class Om{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ur(un.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ur(un.comparator)).toArray()}}class bw{constructor(){this.Ht=new Om}addToCollectionParentIndex(e,t){if(!this.Ht.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ht.add(t)});const a={collectionId:r,parent:Oa(i)};return rv(e).put(a)}return ke.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[wy(t),""],!1,!0);return rv(e).Bt(i).next(a=>{for(const d of a){if(d.collectionId!==t)break;r.push(Ra(d.parent))}return r})}}function rv(n){return xr(n,fd.store)}const ww={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ts{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ts(e,ts.DEFAULT_COLLECTION_PERCENTILE,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Ew(n,e,t){const r=n.store(Zn.store),i=n.store(Xi.store),a=[],d=IDBKeyRange.only(t.batchId);let p=0;const y=r.jt({range:d},(S,x,L)=>(p++,L.delete()));a.push(y.next(()=>{At(1===p)}));const E=[];for(const S of t.mutations){const x=Xi.key(e,S.key.path,t.batchId);a.push(i.delete(x)),E.push(S.key)}return ke.waitFor(a).next(()=>E)}function Np(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw lt();e=n.noDocument}return JSON.stringify(e).length}ts.DEFAULT_COLLECTION_PERCENTILE=10,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ts.DEFAULT=new ts(41943040,ts.DEFAULT_COLLECTION_PERCENTILE,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ts.DISABLED=new ts(-1,0,0);class Rm{constructor(e,t,r,i){this.userId=e,this.k=t,this.Jt=r,this.referenceDelegate=i,this.Yt={}}static Xt(e,t,r,i){At(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new Rm(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $c(e).jt({index:Zn.userMutationsIndex,range:r},(i,a,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=bd(e),d=$c(e);return d.add({}).next(p=>{At("number"==typeof p);const y=new ef(p,t,r,i),E=function(L,B,W){const he=W.baseMutations.map(nt=>Mm(L.Gt,nt)),be=W.mutations.map(nt=>Mm(L.Gt,nt));return new Zn(B,W.batchId,W.localWriteTime.toMillis(),he,be)}(this.k,this.userId,y),S=[];let x=new ur((L,B)=>Zt(L.canonicalString(),B.canonicalString()));for(const L of i){const B=Xi.key(this.userId,L.key.path,p);x=x.add(L.key.path.popLast()),S.push(d.put(E)),S.push(a.put(B,Xi.PLACEHOLDER))}return x.forEach(L=>{S.push(this.Jt.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.Yt[p]=y.keys()}),ke.waitFor(S).next(()=>y)})}lookupMutationBatch(e,t){return $c(e).get(t).next(r=>r?(At(r.userId===this.userId),zo(this.k,r)):null)}Zt(e,t){return this.Yt[t]?ke.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Yt[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return $c(e).jt({index:Zn.userMutationsIndex,range:i},(d,p,y)=>{p.userId===this.userId&&(At(p.batchId>=r),a=zo(this.k,p)),y.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return $c(e).jt({index:Zn.userMutationsIndex,range:t,reverse:!0},(i,a,d)=>{r=a.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $c(e).Bt(Zn.userMutationsIndex,t).next(r=>r.map(i=>zo(this.k,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Xi.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return bd(e).jt({range:i},(d,p,y)=>{const[E,S,x]=d,L=Ra(S);if(E===this.userId&&t.path.isEqual(L))return $c(e).get(x).next(B=>{if(!B)throw lt();At(B.userId===this.userId),a.push(zo(this.k,B))});y.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ur(Zt);const i=[];return t.forEach(a=>{const d=Xi.prefixForPath(this.userId,a.path),p=IDBKeyRange.lowerBound(d),y=bd(e).jt({range:p},(E,S,x)=>{const[L,B,W]=E,he=Ra(B);L===this.userId&&a.path.isEqual(he)?r=r.add(W):x.done()});i.push(y)}),ke.waitFor(i).next(()=>this.te(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Xi.prefixForPath(this.userId,r),d=IDBKeyRange.lowerBound(a);let p=new ur(Zt);return bd(e).jt({range:d},(y,E,S)=>{const[x,L,B]=y,W=Ra(L);x===this.userId&&r.isPrefixOf(W)?W.length===i&&(p=p.add(B)):S.done()}).next(()=>this.te(e,p))}te(e,t){const r=[],i=[];return t.forEach(a=>{i.push($c(e).get(a).next(d=>{if(null===d)throw lt();At(d.userId===this.userId),r.push(zo(this.k,d))}))}),ke.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Ew(e.Wt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.ee(t.batchId)}),ke.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ee(e){delete this.Yt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ke.resolve();const r=IDBKeyRange.lowerBound(Xi.prefixForUser(this.userId)),i=[];return bd(e).jt({range:r},(a,d,p)=>{if(a[0]===this.userId){const y=Ra(a[1]);i.push(y)}else p.done()}).next(()=>{At(0===i.length)})})}containsKey(e,t){return Cw(e,this.userId,t)}ne(e){return Dw(e).get(this.userId).next(t=>t||new ni(this.userId,-1,""))}}function Cw(n,e,t){const r=Xi.prefixForPath(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let d=!1;return bd(n).jt({range:a,Kt:!0},(p,y,E)=>{const[S,x,L]=p;S===e&&x===i&&(d=!0),E.done()}).next(()=>d)}function $c(n){return xr(n,Zn.store)}function bd(n){return xr(n,Xi.store)}function Dw(n){return xr(n,ni.store)}class Gc{constructor(e){this.se=e}next(){return this.se+=2,this.se}static ie(){return new Gc(0)}static re(){return new Gc(-1)}}class xT{constructor(e,t){this.referenceDelegate=e,this.k=t}allocateTargetId(e){return this.oe(e).next(t=>{const r=new Gc(t.highestTargetId);return t.highestTargetId=r.next(),this.ae(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.oe(e).next(t=>Ot.fromTimestamp(new ti(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.oe(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.oe(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.ae(e,i)))}addTargetData(e,t){return this.ce(e,t).next(()=>this.oe(e).next(r=>(r.targetCount+=1,this.ue(t,r),this.ae(e,r))))}updateTargetData(e,t){return this.ce(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>tf(e).delete(t.targetId)).next(()=>this.oe(e)).next(r=>(At(r.targetCount>0),r.targetCount-=1,this.ae(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return tf(e).jt((d,p)=>{const y=Fa(p);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,a.push(this.removeTargetData(e,y)))}).next(()=>ke.waitFor(a)).next(()=>i)}forEachTarget(e,t){return tf(e).jt((r,i)=>{const a=Fa(i);t(a)})}oe(e){return kT(e).get(es.key).next(t=>(At(null!==t),t))}ae(e,t){return kT(e).put(es.key,t)}ce(e,t){return tf(e).put(ev(this.k,t))}ue(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.oe(e).next(t=>t.targetCount)}getTargetData(e,t){const r=gm(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return tf(e).jt({range:i,index:Ps.queryTargetsIndexName},(d,p,y)=>{const E=Fa(p);My(t,E.target)&&(a=E,y.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=zc(e);return t.forEach(d=>{const p=Oa(d.path);i.push(a.put(new ri(r,p))),i.push(this.referenceDelegate.addReference(e,r,d))}),ke.waitFor(i)}removeMatchingKeys(e,t,r){const i=zc(e);return ke.forEach(t,a=>{const d=Oa(a.path);return ke.waitFor([i.delete([r,d]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=zc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=zc(e);let a=yn();return i.jt({range:r,Kt:!0},(d,p,y)=>{const E=Ra(d[1]),S=new ct(E);a=a.add(S)}).next(()=>a)}containsKey(e,t){const r=Oa(t.path),i=IDBKeyRange.bound([r],[wy(r)],!1,!0);let a=0;return zc(e).jt({index:ri.documentTargetsIndex,Kt:!0,range:i},([d,p],y,E)=>{0!==d&&(a++,E.done())}).next(()=>a>0)}Et(e,t){return tf(e).get(t).next(r=>r?Fa(r):null)}}function tf(n){return xr(n,Ps.store)}function kT(n){return xr(n,es.store)}function zc(n){return xr(n,ri.store)}function zl(n){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,pe.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==mw)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),Fp.apply(this,arguments)}function Tw([n,e],[t,r]){const i=Zt(n,t);return 0===i?Zt(e,r):i}class AM{constructor(e){this.he=e,this.buffer=new ur(Tw),this.le=0}fe(){return++this.le}de(e){const t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Tw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class MM{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.we=!1,this._e=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}stop(){this._e&&(this._e.cancel(),this._e=null)}get started(){return null!==this._e}me(e){var t=this;const r=this.we?3e5:6e4;Ve("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,pe.Z)(function*(){t._e=null,t.we=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){gd(i)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield zl(i)}yield t.me(e)}))}}class xM{constructor(e,t){this.ge=e,this.params=t}calculateTargetCount(e,t){return this.ge.ye(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ke.resolve(ws.I);const r=new AM(t);return this.ge.forEachTarget(e,i=>r.de(i.sequenceNumber)).next(()=>this.ge.pe(e,i=>r.de(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.ge.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.ge.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),ke.resolve(ww)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ww):this.Te(e,t))}getCacheSize(e){return this.ge.getCacheSize(e)}Te(e,t){let r,i,a,d,p,y,E;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),i=this.params.maximumSequenceNumbersToCollect):i=x,d=Date.now(),this.nthSequenceNumber(e,i))).next(x=>(r=x,p=Date.now(),this.removeTargets(e,r,t))).next(x=>(a=x,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(E=Date.now(),Aa()<=Yr.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-S}ms\n\tDetermined least recently used ${i} in `+(p-d)+`ms\n\tRemoved ${a} targets in `+(y-p)+`ms\n\tRemoved ${x} documents in `+(E-y)+`ms\nTotal Duration: ${E-S}ms`),ke.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:x})))}}class OT{constructor(e,t){this.db=e,this.garbageCollector=new xM(this,t)}ye(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Ee(e){let t=0;return this.pe(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pe(e,t){return this.Ie(e,(r,i)=>t(i))}addReference(e,t,r){return Lp(e,r)}removeReference(e,t,r){return Lp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Lp(e,t)}Ae(e,t){return function(r,i){let a=!1;return Dw(r).Qt(d=>Cw(r,d,i).next(p=>(p&&(a=!0),ke.resolve(!p)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Ie(e,(d,p)=>{if(p<=t){const y=this.Ae(e,d).next(E=>{if(!E)return a++,r.getEntry(e,d).next(()=>(r.removeEntry(d),zc(e).delete([0,Oa(d.path)])))});i.push(y)}}).next(()=>ke.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Lp(e,t)}Ie(e,t){const r=zc(e);let i,a=ws.I;return r.jt({index:ri.documentTargetsIndex},([d,p],{path:y,sequenceNumber:E})=>{0===d?(a!==ws.I&&t(new ct(Ra(i)),a),a=E,i=y):a=ws.I}).next(()=>{a!==ws.I&&t(new ct(Ra(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Lp(n,e){return zc(n).put((r=n.currentSequenceNumber,new ri(0,Oa(e.path),r)));var r}class Vp{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0!==i){for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),!0;return!1}forEach(e){It(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return Ey(this.inner)}}class Iw{constructor(){this.changes=new Vp(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:Ot.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:er.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ke.resolve(r.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class nf{constructor(e,t){this.k=e,this.Jt=t}addEntry(e,t,r){return Zc(e).put(Up(t),r)}removeEntry(e,t){const r=Zc(e),i=Up(t);return r.delete(i)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Re(e,r)))}getEntry(e,t){return Zc(e).get(Up(t)).next(r=>this.be(t,r))}Pe(e,t){return Zc(e).get(Up(t)).next(r=>({document:this.be(t,r),size:Np(r)}))}getEntries(e,t){let r=Rs();return this.ve(e,t,(i,a)=>{const d=this.be(i,a);r=r.insert(i,d)}).next(()=>r)}Ve(e,t){let r=Rs(),i=new Hr(ct.comparator);return this.ve(e,t,(a,d)=>{const p=this.be(a,d);r=r.insert(a,p),i=i.insert(a,Np(d))}).next(()=>({documents:r,Se:i}))}ve(e,t,r){if(t.isEmpty())return ke.resolve();const i=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),a=t.getIterator();let d=a.getNext();return Zc(e).jt({range:i},(p,y,E)=>{const S=ct.fromSegments(p);for(;d&&ct.comparator(d,S)<0;)r(d,null),d=a.getNext();d&&d.isEqual(S)&&(r(d,y),d=a.hasNext()?a.getNext():null),d?E.Lt(d.path.toArray()):E.done()}).next(()=>{for(;d;)r(d,null),d=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,t,r){let i=Rs();const a=t.path.length+1,d={};if(r.isEqual(Ot.min())){const p=t.path.toArray();d.range=IDBKeyRange.lowerBound(p)}else{const p=t.path.toArray(),y=qc(r);d.range=IDBKeyRange.lowerBound([p,y],!0),d.index=tr.collectionReadTimeIndex}return Zc(e).jt(d,(p,y,E)=>{if(p.length!==a)return;const S=Hc(this.k,y);t.path.isPrefixOf(S.key.path)?Tp(t,S)&&(i=i.insert(S.key,S)):E.done()}).next(()=>i)}newChangeBuffer(e){return new RT(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return iv(e).get(Pa.key).next(t=>(At(!!t),t))}Re(e,t){return iv(e).put(Pa.key,t)}be(e,t){if(t){const r=Hc(this.k,t);if(!r.isNoDocument()||!r.version.isEqual(Ot.min()))return r}return er.newInvalidDocument(e)}}class RT extends Iw{constructor(e,t){super(),this.De=e,this.trackRemovals=t,this.Ce=new Vp(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new ur((a,d)=>Zt(a.canonicalString(),d.canonicalString()));return this.changes.forEach((a,d)=>{const p=this.Ce.get(a);if(d.document.isValidDocument()){const y=yd(this.De.k,d.document,this.getReadTime(a));i=i.add(a.path.popLast()),r+=Np(y)-p,t.push(this.De.addEntry(e,a,y))}else if(r-=p,this.trackRemovals){const y=yd(this.De.k,er.newNoDocument(a,Ot.min()),this.getReadTime(a));t.push(this.De.addEntry(e,a,y))}else t.push(this.De.removeEntry(e,a))}),i.forEach(a=>{t.push(this.De.Jt.addToCollectionParentIndex(e,a))}),t.push(this.De.updateMetadata(e,r)),ke.waitFor(t)}getFromCache(e,t){return this.De.Pe(e,t).next(r=>(this.Ce.set(t,r.size),r.document))}getAllFromCache(e,t){return this.De.Ve(e,t).next(({documents:r,Se:i})=>(i.forEach((a,d)=>{this.Ce.set(a,d)}),r))}}function iv(n){return xr(n,Pa.store)}function Zc(n){return xr(n,tr.store)}function Up(n){return n.path.toArray()}class Pm{constructor(e){this.k=e}Nt(e,t,r,i){At(r<i&&r>=0&&i<=11);const a=new pd("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore(uo.store),(p=e).createObjectStore(ni.store,{keyPath:ni.keyPath}),p.createObjectStore(Zn.store,{keyPath:Zn.keyPath,autoIncrement:!0}).createIndex(Zn.userMutationsIndex,Zn.userMutationsKeyPath,{unique:!0}),p.createObjectStore(Xi.store),Sw(e),function(p){p.createObjectStore(tr.store)}(e));let d=ke.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore(ri.store),p.deleteObjectStore(Ps.store),p.deleteObjectStore(es.store)}(e),Sw(e)),d=d.next(()=>function(p){const y=p.store(es.store),E=new es(0,0,Ot.min().toTimestamp(),0);return y.put(es.key,E)}(a))),r<4&&i>=4&&(0!==r&&(d=d.next(()=>function(p,y){return y.store(Zn.store).Bt().next(E=>{p.deleteObjectStore(Zn.store),p.createObjectStore(Zn.store,{keyPath:Zn.keyPath,autoIncrement:!0}).createIndex(Zn.userMutationsIndex,Zn.userMutationsKeyPath,{unique:!0});const S=y.store(Zn.store),x=E.map(L=>S.put(L));return ke.waitFor(x)})}(e,a))),d=d.next(()=>{!function(p){p.createObjectStore(Ho.store,{keyPath:Ho.keyPath})}(e)})),r<5&&i>=5&&(d=d.next(()=>this.Ne(a))),r<6&&i>=6&&(d=d.next(()=>(function(p){p.createObjectStore(Pa.store)}(e),this.ke(a)))),r<7&&i>=7&&(d=d.next(()=>this.xe(a))),r<8&&i>=8&&(d=d.next(()=>this.$e(e,a))),r<9&&i>=9&&(d=d.next(()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e),function(p){const y=p.objectStore(tr.store);y.createIndex(tr.readTimeIndex,tr.readTimeIndexPath,{unique:!1}),y.createIndex(tr.collectionReadTimeIndex,tr.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&i>=10&&(d=d.next(()=>this.Oe(a))),r<11&&i>=11&&(d=d.next(()=>{(function(p){p.createObjectStore(Jh.store,{keyPath:Jh.keyPath})})(e),function(p){p.createObjectStore(Xh.store,{keyPath:Xh.keyPath})}(e)})),d}ke(e){let t=0;return e.store(tr.store).jt((r,i)=>{t+=Np(i)}).next(()=>{const r=new Pa(t);return e.store(Pa.store).put(Pa.key,r)})}Ne(e){const t=e.store(ni.store),r=e.store(Zn.store);return t.Bt().next(i=>ke.forEach(i,a=>{const d=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.Bt(Zn.userMutationsIndex,d).next(p=>ke.forEach(p,y=>{At(y.userId===a.userId);const E=zo(this.k,y);return Ew(e,a.userId,E).next(()=>{})}))}))}xe(e){const t=e.store(ri.store),r=e.store(tr.store);return e.store(es.store).get(es.key).next(i=>{const a=[];return r.jt((d,p)=>{const y=new un(d),E=[0,Oa(y)];a.push(t.get(E).next(S=>S?ke.resolve():t.put(new ri(0,Oa(y),i.highestListenSequenceNumber))))}).next(()=>ke.waitFor(a))})}$e(e,t){e.createObjectStore(fd.store,{keyPath:fd.keyPath});const r=t.store(fd.store),i=new Om,a=d=>{if(i.add(d)){const p=d.lastSegment(),y=d.popLast();return r.put({collectionId:p,parent:Oa(y)})}};return t.store(tr.store).jt({Kt:!0},(d,p)=>{const y=new un(d);return a(y.popLast())}).next(()=>t.store(Xi.store).jt({Kt:!0},([d,p,y],E)=>{const S=Ra(p);return a(S.popLast())}))}Oe(e){const t=e.store(Ps.store);return t.jt((r,i)=>{const a=Fa(i),d=ev(this.k,a);return t.put(d)})}}function Sw(n){n.createObjectStore(ri.store,{keyPath:ri.keyPath}).createIndex(ri.documentTargetsIndex,ri.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(Ps.store,{keyPath:Ps.keyPath}).createIndex(Ps.queryTargetsIndexName,Ps.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(es.store)}const Nm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class sv{constructor(e,t,r,i,a,d,p,y,E,S){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Fe=a,this.window=d,this.document=p,this.Me=E,this.Le=S,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=x=>Promise.resolve(),!sv.Pt())throw new Pe(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new OT(this,i),this.Ge=t+"main",this.k=new _d(y),this.ze=new Pi(this.Ge,11,new Pm(this.k)),this.He=new xT(this.referenceDelegate,this.k),this.Jt=new bw,this.Je=new nf(this.k,this.Jt),this.Ye=new yw,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===S&&cr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ze().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(fe.FAILED_PRECONDITION,Nm);return this.tn(),this.en(),this.nn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.He.getHighestSequenceNumber(e))}).then(e=>{this.Be=new ws(e,this.Me)}).then(()=>{this.Ue=!0}).catch(e=>(this.ze&&this.ze.close(),Promise.reject(e)))}sn(e){var t=this;return this.We=function(){var r=(0,pe.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ze.xt(function(){var t=(0,pe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Fe.enqueueAndForget((0,pe.Z)(function*(){t.started&&(yield t.Ze())})))}Ze(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Fm(e).put(new Ho(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.rn(e).next(t=>{t||(this.isPrimary=!1,this.Fe.enqueueRetryable(()=>this.We(!1)))})}).next(()=>this.on(e)).next(t=>this.isPrimary&&!t?this.an(e).next(()=>!1):!!t&&this.cn(e).next(()=>!0))).catch(e=>{if(gd(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Fe.enqueueRetryable(()=>this.We(e)),this.isPrimary=e})}rn(e){return Bp(e).get(uo.key).next(t=>ke.resolve(this.un(t)))}hn(e){return Fm(e).delete(this.clientId)}ln(){var e=this;return(0,pe.Z)(function*(){if(e.isPrimary&&!e.fn(e.Qe,18e5)){e.Qe=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=xr(r,Ho.store);return i.Bt().next(a=>{const d=e.dn(a,18e5),p=a.filter(y=>-1===d.indexOf(y));return ke.forEach(p,y=>i.delete(y.clientId)).next(()=>p)})}).catch(()=>[]);if(e.Xe)for(const r of t)e.Xe.removeItem(e.wn(r.clientId))}})()}nn(){this.je=this.Fe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ze().then(()=>this.ln()).then(()=>this.nn()))}un(e){return!!e&&e.ownerId===this.clientId}on(e){return this.Le?ke.resolve(!0):Bp(e).get(uo.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)){if(this.un(t)&&this.networkEnabled)return!0;if(!this.un(t)){if(!t.allowTabSynchronization)throw new Pe(fe.FAILED_PRECONDITION,Nm);return!1}}return!(!this.networkEnabled||!this.inForeground)||Fm(e).Bt().next(r=>void 0===this.dn(r,5e3).find(i=>{if(this.clientId!==i.clientId){const d=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||d&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,pe.Z)(function*(){e.Ue=!1,e.mn(),e.je&&(e.je.cancel(),e.je=null),e.gn(),e.yn(),yield e.ze.runTransaction("shutdown","readwrite",[uo.store,Ho.store],t=>{const r=new wi(t,ws.I);return e.an(r).next(()=>e.hn(r))}),e.ze.close(),e.pn()})()}dn(e,t){return e.filter(r=>this.fn(r.updateTimeMs,t)&&!this._n(r.clientId))}Tn(){return this.runTransaction("getActiveClients","readonly",e=>Fm(e).Bt().next(t=>this.dn(t,18e5).map(r=>r.clientId)))}get started(){return this.Ue}getMutationQueue(e){return Rm.Xt(e,this.k,this.Jt,this.referenceDelegate)}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getIndexManager(){return this.Jt}getBundleCache(){return this.Ye}runTransaction(e,t,r){let a;return Ve("IndexedDbPersistence","Starting transaction:",e),this.ze.runTransaction(e,"readonly"===t?"readonly":"readwrite",ST,d=>(a=new wi(d,this.Be?this.Be.next():ws.I),"readwrite-primary"===t?this.rn(a).next(p=>!!p||this.on(a)).next(p=>{if(!p)throw cr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fe.enqueueRetryable(()=>this.We(!1)),new Pe(fe.FAILED_PRECONDITION,mw);return r(a)}).next(p=>this.cn(a).next(()=>p)):this.En(a).next(()=>r(a)))).then(d=>(a.raiseOnCommittedEvent(),d))}En(e){return Bp(e).get(uo.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)&&!this.un(t)&&!(this.Le||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(fe.FAILED_PRECONDITION,Nm)})}cn(e){const t=new uo(this.clientId,this.allowTabSynchronization,Date.now());return Bp(e).put(uo.key,t)}static Pt(){return Pi.Pt()}an(e){const t=Bp(e);return t.get(uo.key).next(r=>this.un(r)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete(uo.key)):ke.resolve())}fn(e,t){const r=Date.now();return!(e<r-t||e>r&&(cr(`Detected an update time that is in the future: ${e} > ${r}`),1))}tn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=()=>{this.Fe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ze()))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}gn(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}en(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=()=>{this.mn(),(0,Ct.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Fe.enterRestrictedMode(!0),this.Fe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.qe))}yn(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}_n(e){var t;try{const r=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return cr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}mn(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(e){cr("Failed to set zombie client id.",e)}}pn(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(e){}}wn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Bp(n){return xr(n,uo.store)}function Fm(n){return xr(n,Ho.store)}function ov(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class PT{constructor(e,t){this.progress=e,this.In=t}}class av{constructor(e,t,r){this.Je=e,this.An=t,this.Jt=r}Rn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.bn(e,t,r))}bn(e,t,r){return this.Je.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}Pn(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}vn(e,t){return this.Je.getEntries(e,t).next(r=>this.Vn(e,r).next(()=>r))}Vn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Pn(t,r))}getDocumentsMatchingQuery(e,t,r){return ct.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Sn(e,t.path):Py(t)?this.Dn(e,t,r):this.Cn(e,t,r);var i}Sn(e,t){return this.Rn(e,new ct(t)).next(r=>{let i=$y();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Dn(e,t,r){const i=t.collectionGroup;let a=$y();return this.Jt.getCollectionParents(e,i).next(d=>ke.forEach(d,p=>{const y=(E=t,S=p.child(i),new Hl(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));var E,S;return this.Cn(e,y,r).next(E=>{E.forEach((S,x)=>{a=a.insert(S,x)})})}).next(()=>a))}Cn(e,t,r){let i,a;return this.Je.getDocumentsMatchingQuery(e,t,r).next(d=>(i=d,this.An.getAllMutationBatchesAffectingQuery(e,t))).next(d=>(a=d,this.Nn(e,a,i).next(p=>{i=p;for(const y of a)for(const E of y.mutations){const S=E.key;let x=i.get(S);null==x&&(x=er.newInvalidDocument(S),i=i.insert(S,x)),By(E,x,y.localWriteTime),x.isFoundDocument()||(i=i.remove(S))}}))).next(()=>(i.forEach((d,p)=>{Tp(t,p)||(i=i.remove(d))}),i))}Nn(e,t,r){let i=yn();for(const d of t)for(const p of d.mutations)p instanceof bi&&null===r.get(p.key)&&(i=i.add(p.key));let a=r;return this.Je.getEntries(e,i).next(d=>(d.forEach((p,y)=>{y.isFoundDocument()&&(a=a.insert(p,y))}),a))}}class lv{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.kn=r,this.xn=i}static $n(e,t){let r=yn(),i=yn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new lv(e,t.fromCache,r,i)}}class cv{On(e){this.Fn=e}getDocumentsMatchingQuery(e,t,r,i){return 0===(a=t).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||r.isEqual(Ot.min())?this.Mn(e,t):this.Fn.vn(e,i).next(a=>{const d=this.Ln(t,a);return($h(t)||ql(t))&&this.Bn(t.limitType,d,i,r)?this.Mn(e,t):(Aa()<=Yr.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Gh(t)),this.Fn.getDocumentsMatchingQuery(e,t,r).next(p=>(d.forEach(y=>{p=p.insert(y.key,y)}),p)))});var a}Ln(e,t){let r=new ur(Fy(e));return t.forEach((i,a)=>{Tp(e,a)&&(r=r.add(a))}),r}Bn(e,t,r,i){if(r.size!==t.size)return!0;const a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Mn(e,t){return Aa()<=Yr.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",Gh(t)),this.Fn.getDocumentsMatchingQuery(e,t,Ot.min())}}class Aw{constructor(e,t,r,i){this.persistence=e,this.Un=t,this.k=i,this.qn=new Hr(Zt),this.Kn=new Vp(a=>gm(a),My),this.jn=Ot.min(),this.An=e.getMutationQueue(r),this.Qn=e.getRemoteDocumentCache(),this.He=e.getTargetCache(),this.Wn=new av(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=e.getBundleCache(),this.Un.On(this.Wn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qn))}}function Lm(n,e,t,r){return new Aw(n,e,t,r)}function NT(n,e){return jp.apply(this,arguments)}function jp(){return jp=(0,pe.Z)(function*(n,e){const t=Ge(n);let r=t.An,i=t.Wn;const a=yield t.persistence.runTransaction("Handle user change","readonly",d=>{let p;return t.An.getAllMutationBatches(d).next(y=>(p=y,r=t.persistence.getMutationQueue(e),i=new av(t.Qn,r,t.persistence.getIndexManager()),r.getAllMutationBatches(d))).next(y=>{const E=[],S=[];let x=yn();for(const L of p){E.push(L.batchId);for(const B of L.mutations)x=x.add(B.key)}for(const L of y){S.push(L.batchId);for(const B of L.mutations)x=x.add(B.key)}return i.vn(d,x).next(L=>({Gn:L,removedBatchIds:E,addedBatchIds:S}))})});return t.An=r,t.Wn=i,t.Un.On(t.Wn),a}),jp.apply(this,arguments)}function FT(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Qn.newChangeBuffer({trackRemovals:!0});return function(d,p,y,E){const S=y.batch,x=S.keys();let L=ke.resolve();return x.forEach(B=>{L=L.next(()=>E.getEntry(p,B)).next(W=>{const he=y.docVersions.get(B);At(null!==he),W.version.compareTo(he)<0&&(S.applyToRemoteDocument(W,y),W.isValidDocument()&&E.addEntry(W,y.commitVersion))})}),L.next(()=>d.An.removeMutationBatch(p,S))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.An.performConsistencyCheck(r)).next(()=>t.Wn.vn(r,i))})}function LT(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.He.getLastRemoteSnapshotVersion(t))}function Hp(n,e){const t=Ge(n),r=e.snapshotVersion;let i=t.qn;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const d=t.Qn.newChangeBuffer({trackRemovals:!0});i=t.qn;const p=[];e.targetChanges.forEach((E,S)=>{const x=i.get(S);if(!x)return;p.push(t.He.removeMatchingKeys(a,E.removedDocuments,S).next(()=>t.He.addMatchingKeys(a,E.addedDocuments,S)));let L=x.withSequenceNumber(a.currentSequenceNumber);var B,W,he;e.targetMismatches.has(S)?L=L.withResumeToken(yr.EMPTY_BYTE_STRING,Ot.min()).withLastLimboFreeSnapshotVersion(Ot.min()):E.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(E.resumeToken,r)),i=i.insert(S,L),W=L,he=E,(0===(B=x).resumeToken.approximateByteSize()||W.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8||he.addedDocuments.size+he.modifiedDocuments.size+he.removedDocuments.size>0)&&p.push(t.He.updateTargetData(a,L))});let y=Rs();if(e.documentUpdates.forEach((E,S)=>{e.resolvedLimboDocuments.has(E)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(a,E))}),p.push(uv(a,d,e.documentUpdates,r,void 0).next(E=>{y=E})),!r.isEqual(Ot.min())){const E=t.He.getLastRemoteSnapshotVersion(a).next(S=>t.He.setTargetsMetadata(a,a.currentSequenceNumber,r));p.push(E)}return ke.waitFor(p).next(()=>d.apply(a)).next(()=>t.Wn.Vn(a,y)).next(()=>y)}).then(a=>(t.qn=i,a))}function uv(n,e,t,r,i){let a=yn();return t.forEach(d=>a=a.add(d)),e.getEntries(n,a).next(d=>{let p=Rs();return t.forEach((y,E)=>{const S=d.get(y),x=(null==i?void 0:i.get(y))||r;E.isNoDocument()&&E.version.isEqual(Ot.min())?(e.removeEntry(y,x),p=p.insert(y,E)):!S.isValidDocument()||E.version.compareTo(S.version)>0||0===E.version.compareTo(S.version)&&S.hasPendingWrites?(e.addEntry(E,x),p=p.insert(y,E)):Ve("LocalStore","Ignoring outdated watch update for ",y,". Current version:",S.version," Watch version:",E.version)}),p})}function dv(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.An.getNextMutationBatchAfterBatchId(r,e)))}function Wc(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.He.getTargetData(r,e).next(a=>a?(i=a,ke.resolve(i)):t.He.allocateTargetId(r).next(d=>(i=new Na(e,d,0,r.currentSequenceNumber),t.He.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.qn.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.qn=t.qn.insert(r.targetId,r),t.Kn.set(e,r.targetId)),r})}function rf(n,e,t){return qp.apply(this,arguments)}function qp(){return qp=(0,pe.Z)(function*(n,e,t){const r=Ge(n),i=r.qn.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,d=>r.persistence.referenceDelegate.removeTarget(d,i)))}catch(d){if(!gd(d))throw d;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.qn=r.qn.remove(e),r.Kn.delete(i.target)}),qp.apply(this,arguments)}function sf(n,e,t){const r=Ge(n);let i=Ot.min(),a=yn();return r.persistence.runTransaction("Execute query","readonly",d=>function(p,y,E){const S=Ge(p),x=S.Kn.get(E);return void 0!==x?ke.resolve(S.qn.get(x)):S.He.getTargetData(y,E)}(r,d,Os(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(d,p.targetId).next(y=>{a=y})}).next(()=>r.Un.getDocumentsMatchingQuery(d,e,t?i:Ot.min(),t?a:yn())).next(p=>({documents:p,zn:a})))}function hv(n,e){const t=Ge(n),r=Ge(t.He),i=t.qn.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Et(a,e).next(d=>d?d.target:null))}function VT(n){const e=Ge(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,i,a){const d=Ge(r);let p=Rs(),y=qc(a);const E=Zc(i),S=IDBKeyRange.lowerBound(y,!0);return E.jt({index:tr.readTimeIndex,range:S},(x,L)=>{const B=Hc(d.k,L);p=p.insert(B.key,B),y=L.readTime}).next(()=>({In:p,readTime:vd(y)}))}(e.Qn,t,e.jn)).then(({In:t,readTime:r})=>(e.jn=r,t))}function $p(){return $p=(0,pe.Z)(function*(n){const e=Ge(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const i=Zc(r);let a=Ot.min();return i.jt({index:tr.readTimeIndex,reverse:!0},(d,p,y)=>{p.readTime&&(a=vd(p.readTime)),y.done()}).next(()=>a)}(t)).then(t=>{e.jn=t})}),$p.apply(this,arguments)}function pv(){return pv=(0,pe.Z)(function*(n,e,t,r){const i=Ge(n);let a=yn(),d=Rs(),p=_T();for(const S of t){const x=e.Hn(S.metadata.name);S.document&&(a=a.add(x)),d=d.insert(x,e.Jn(S)),p=p.insert(x,e.Yn(S.metadata.readTime))}const y=i.Qn.newChangeBuffer({trackRemovals:!0}),E=yield Wc(i,(S=r,Os(jo(un.fromString(`__bundle__/docs/${S}`)))));var S;return i.persistence.runTransaction("Apply bundle documents","readwrite",S=>uv(S,y,d,Ot.min(),p).next(x=>(y.apply(S),x)).next(x=>i.He.removeMatchingKeysForTargetId(S,E.targetId).next(()=>i.He.addMatchingKeys(S,a,E.targetId)).next(()=>i.Wn.Vn(S,x)).next(()=>x)))}),pv.apply(this,arguments)}function Mw(n,e){return Gp.apply(this,arguments)}function Gp(){return Gp=(0,pe.Z)(function*(n,e,t=yn()){const r=yield Wc(n,Os(km(e.bundledQuery))),i=Ge(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const d=$r(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return i.Ye.saveNamedQuery(a,e);const p=r.withResumeToken(yr.EMPTY_BYTE_STRING,d);return i.qn=i.qn.insert(p.targetId,p),i.He.updateTargetData(a,p).next(()=>i.He.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.He.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ye.saveNamedQuery(a,e))})}),Gp.apply(this,arguments)}class xw{constructor(e){this.k=e,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(e,t){return ke.resolve(this.Xn.get(t))}saveBundleMetadata(e,t){var r;return this.Xn.set(t.id,{id:(r=t).id,version:r.version,createTime:$r(r.createTime)}),ke.resolve()}getNamedQuery(e,t){return ke.resolve(this.Zn.get(t))}saveNamedQuery(e,t){return this.Zn.set(t.name,{name:(r=t).name,query:km(r.bundledQuery),readTime:$r(r.readTime)}),ke.resolve();var r}}class Vm{constructor(){this.ts=new ur(kr.es),this.ns=new ur(kr.ss)}isEmpty(){return this.ts.isEmpty()}addReference(e,t){const r=new kr(e,t);this.ts=this.ts.add(r),this.ns=this.ns.add(r)}rs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.os(new kr(e,t))}cs(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new ct(new un([])),r=new kr(t,e),i=new kr(t,e+1),a=[];return this.ns.forEachInRange([r,i],d=>{this.os(d),a.push(d.key)}),a}hs(){this.ts.forEach(e=>this.os(e))}os(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}ls(e){const t=new ct(new un([])),r=new kr(t,e),i=new kr(t,e+1);let a=yn();return this.ns.forEachInRange([r,i],d=>{a=a.add(d.key)}),a}containsKey(e){const t=new kr(e,0),r=this.ts.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class kr{constructor(e,t){this.key=e,this.fs=t}static es(e,t){return ct.comparator(e.key,t.key)||Zt(e.fs,t.fs)}static ss(e,t){return Zt(e.fs,t.fs)||ct.comparator(e.key,t.key)}}class gv{constructor(e,t){this.Jt=e,this.referenceDelegate=t,this.An=[],this.ds=1,this.ws=new ur(kr.es)}checkEmpty(e){return ke.resolve(0===this.An.length)}addMutationBatch(e,t,r,i){const a=this.ds;this.ds++;const d=new ef(a,t,r,i);this.An.push(d);for(const p of i)this.ws=this.ws.add(new kr(p.key,a)),this.Jt.addToCollectionParentIndex(e,p.key.path.popLast());return ke.resolve(d)}lookupMutationBatch(e,t){return ke.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.gs(t+1),a=i<0?0:i;return ke.resolve(this.An.length>a?this.An[a]:null)}getHighestUnacknowledgedBatchId(){return ke.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(e){return ke.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new kr(t,0),i=new kr(t,Number.POSITIVE_INFINITY),a=[];return this.ws.forEachInRange([r,i],d=>{const p=this._s(d.fs);a.push(p)}),ke.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ur(Zt);return t.forEach(i=>{const a=new kr(i,0),d=new kr(i,Number.POSITIVE_INFINITY);this.ws.forEachInRange([a,d],p=>{r=r.add(p.fs)})}),ke.resolve(this.ys(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;ct.isDocumentKey(a)||(a=a.child(""));const d=new kr(new ct(a),0);let p=new ur(Zt);return this.ws.forEachWhile(y=>{const E=y.key.path;return!!r.isPrefixOf(E)&&(E.length===i&&(p=p.add(y.fs)),!0)},d),ke.resolve(this.ys(p))}ys(e){const t=[];return e.forEach(r=>{const i=this._s(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){At(0===this.ps(t.batchId,"removed")),this.An.shift();let r=this.ws;return ke.forEach(t.mutations,i=>{const a=new kr(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ws=r})}ee(e){}containsKey(e,t){const r=new kr(t,0),i=this.ws.firstAfterOrEqual(r);return ke.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ke.resolve()}ps(e,t){return this.gs(e)}gs(e){return 0===this.An.length?0:e-this.An[0].batchId}_s(e){const t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}class BT{constructor(e,t){this.Jt=e,this.Ts=t,this.docs=new Hr(ct.comparator),this.size=0}addEntry(e,t,r){const i=t.key,a=this.docs.get(i),d=a?a.size:0,p=this.Ts(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:p,readTime:r}),this.size+=p-d,this.Jt.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ke.resolve(r?r.document.mutableCopy():er.newInvalidDocument(t))}getEntries(e,t){let r=Rs();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():er.newInvalidDocument(i))}),ke.resolve(r)}getDocumentsMatchingQuery(e,t,r){let i=Rs();const a=new ct(t.path.child("")),d=this.docs.getIteratorFrom(a);for(;d.hasNext();){const{key:p,value:{document:y,readTime:E}}=d.getNext();if(!t.path.isPrefixOf(p.path))break;E.compareTo(r)<=0||Tp(t,y)&&(i=i.insert(y.key,y.mutableCopy()))}return ke.resolve(i)}Es(e,t){return ke.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new kw(this)}getSize(e){return ke.resolve(this.size)}}class kw extends Iw{constructor(e){super(),this.De=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.document.isValidDocument()?t.push(this.De.addEntry(e,i.document,this.getReadTime(r))):this.De.removeEntry(r)}),ke.waitFor(t)}getFromCache(e,t){return this.De.getEntry(e,t)}getAllFromCache(e,t){return this.De.getEntries(e,t)}}class Ow{constructor(e){this.persistence=e,this.Is=new Vp(t=>gm(t),My),this.lastRemoteSnapshotVersion=Ot.min(),this.highestTargetId=0,this.As=0,this.Rs=new Vm,this.targetCount=0,this.bs=Gc.ie()}forEachTarget(e,t){return this.Is.forEach((r,i)=>t(i)),ke.resolve()}getLastRemoteSnapshotVersion(e){return ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ke.resolve(this.As)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),ke.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.As&&(this.As=t),ke.resolve()}ce(e){this.Is.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.bs=new Gc(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}addTargetData(e,t){return this.ce(t),this.targetCount+=1,ke.resolve()}updateTargetData(e,t){return this.ce(t),ke.resolve()}removeTargetData(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,ke.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Is.forEach((d,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Is.delete(d),a.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),ke.waitFor(a).next(()=>i)}getTargetCount(e){return ke.resolve(this.targetCount)}getTargetData(e,t){const r=this.Is.get(t)||null;return ke.resolve(r)}addMatchingKeys(e,t,r){return this.Rs.rs(t,r),ke.resolve()}removeMatchingKeys(e,t,r){this.Rs.cs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(d=>{a.push(i.markPotentiallyOrphaned(e,d))}),ke.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Rs.us(t),ke.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Rs.ls(t);return ke.resolve(r)}containsKey(e,t){return ke.resolve(this.Rs.containsKey(t))}}class mv{constructor(e,t){this.Ps={},this.Be=new ws(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=e(this),this.He=new Ow(this),this.Jt=new vw,this.Je=new BT(this.Jt,r=>this.referenceDelegate.vs(r)),this.k=new _d(t),this.Ye=new xw(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(e){let t=this.Ps[e.toKey()];return t||(t=new gv(this.Jt,this.referenceDelegate),this.Ps[e.toKey()]=t),t}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const i=new Rw(this.Be.next());return this.referenceDelegate.Vs(),r(i).next(a=>this.referenceDelegate.Ss(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ds(e,t){return ke.or(Object.values(this.Ps).map(r=>()=>r.containsKey(e,t)))}}class Rw extends _w{constructor(e){super(),this.currentSequenceNumber=e}}class _v{constructor(e){this.persistence=e,this.Cs=new Vm,this.Ns=null}static ks(e){return new _v(e)}get xs(){if(this.Ns)return this.Ns;throw lt()}addReference(e,t,r){return this.Cs.addReference(r,t),this.xs.delete(r.toString()),ke.resolve()}removeReference(e,t,r){return this.Cs.removeReference(r,t),this.xs.add(r.toString()),ke.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),ke.resolve()}removeTarget(e,t){this.Cs.us(t.targetId).forEach(i=>this.xs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.xs.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Vs(){this.Ns=new Set}Ss(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ke.forEach(this.xs,r=>{const i=ct.fromPath(r);return this.$s(e,i).next(a=>{a||t.removeEntry(i)})}).next(()=>(this.Ns=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.xs.delete(t.toString()):this.xs.add(t.toString())})}vs(e){return 0}$s(e,t){return ke.or([()=>ke.resolve(this.Cs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ds(e,t)])}}function yv(n,e){return`firestore_clients_${n}_${e}`}function vv(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function zp(n,e){return`firestore_targets_${n}_${e}`}class af{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Os(e,t,r){const i=JSON.parse(r);let a,d="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return d&&i.error&&(d="string"==typeof i.error.message&&"string"==typeof i.error.code,d&&(a=new Pe(i.error.code,i.error.message))),d?new af(e,t,i.state,a):(cr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Fs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lf{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Os(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Pe(r.error.code,r.error.message))),a?new lf(e,r.state,i):(cr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Fs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Os(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=xp();for(let d=0;i&&d<r.activeTargetIds.length;++d)i=hm(r.activeTargetIds[d]),a=a.add(r.activeTargetIds[d]);return i?new Zp(e,a):(cr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Um{constructor(e,t){this.clientId=e,this.onlineState=t}static Os(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Um(t.clientId,t.onlineState):(cr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Bm{constructor(){this.activeTargetIds=xp()}Ms(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ls(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Fs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jm{constructor(e,t,r,i,a){this.window=e,this.Fe=t,this.persistenceKey=r,this.Bs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new Hr(Zt),this.started=!1,this.js=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Qs=yv(this.persistenceKey,this.Bs),this.Ws=`firestore_sequence_number_${this.persistenceKey}`,this.Ks=this.Ks.insert(this.Bs,new Bm),this.Gs=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.zs=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.Hs=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.Js=`firestore_online_state_${this.persistenceKey}`,this.Ys=function(p){return`firestore_bundle_loaded_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}static Pt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,pe.Z)(function*(){const t=yield e.syncEngine.Tn();for(const i of t){if(i===e.Bs)continue;const a=e.getItem(yv(e.persistenceKey,i));if(a){const d=Zp.Os(i,a);d&&(e.Ks=e.Ks.insert(d.clientId,d))}}e.Xs();const r=e.storage.getItem(e.Js);if(r){const i=e.Zs(r);i&&e.ti(i)}for(const i of e.js)e.qs(i);e.js=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ei(this.Ks)}isActiveQueryTarget(e){let t=!1;return this.Ks.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ni(e,"pending")}updateMutationState(e,t,r){this.ni(e,t,r),this.si(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(zp(this.persistenceKey,e));if(r){const i=lf.Os(e,r);i&&(t=i.state)}}return this.ii.Ms(e),this.Xs(),t}removeLocalQueryTarget(e){this.ii.Ls(e),this.Xs()}isLocalQueryTarget(e){return this.ii.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(zp(this.persistenceKey,e))}updateQueryState(e,t,r){this.ri(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.si(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.oi(e)}notifyBundleLoaded(){this.ai()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}qs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Qs)return void cr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fe.enqueueRetryable((0,pe.Z)(function*(){if(t.started){if(null!==r.key)if(t.Gs.test(r.key)){if(null==r.newValue){const i=t.ci(r.key);return t.ui(i,null)}{const i=t.hi(r.key,r.newValue);if(i)return t.ui(i.clientId,i)}}else if(t.zs.test(r.key)){if(null!==r.newValue){const i=t.li(r.key,r.newValue);if(i)return t.fi(i)}}else if(t.Hs.test(r.key)){if(null!==r.newValue){const i=t.di(r.key,r.newValue);if(i)return t.wi(i)}}else if(r.key===t.Js){if(null!==r.newValue){const i=t.Zs(r.newValue);if(i)return t.ti(i)}}else if(r.key===t.Ws){const i=function(a){let d=ws.I;if(null!=a)try{const p=JSON.parse(a);At("number"==typeof p),d=p}catch(p){cr("SharedClientState","Failed to read sequence number from WebStorage",p)}return d}(r.newValue);i!==ws.I&&t.sequenceNumberHandler(i)}else if(r.key===t.Ys)return t.syncEngine._i()}else t.js.push(r)}))}}get ii(){return this.Ks.get(this.Bs)}Xs(){this.setItem(this.Qs,this.ii.Fs())}ni(e,t,r){const i=new af(this.currentUser,e,t,r),a=vv(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Fs())}si(e){const t=vv(this.persistenceKey,this.currentUser,e);this.removeItem(t)}oi(e){this.storage.setItem(this.Js,JSON.stringify({clientId:this.Bs,onlineState:e}))}ri(e,t,r){const i=zp(this.persistenceKey,e),a=new lf(e,t,r);this.setItem(i,a.Fs())}ai(){this.setItem(this.Ys,"value-not-used")}ci(e){const t=this.Gs.exec(e);return t?t[1]:null}hi(e,t){const r=this.ci(e);return Zp.Os(r,t)}li(e,t){const r=this.zs.exec(e),i=Number(r[1]);return af.Os(new lr(void 0!==r[2]?r[2]:null),i,t)}di(e,t){const r=this.Hs.exec(e),i=Number(r[1]);return lf.Os(i,t)}Zs(e){return Um.Os(e)}fi(e){var t=this;return(0,pe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.mi(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}wi(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}ui(e,t){const r=t?this.Ks.insert(e,t):this.Ks.remove(e),i=this.ei(this.Ks),a=this.ei(r),d=[],p=[];return a.forEach(y=>{i.has(y)||d.push(y)}),i.forEach(y=>{a.has(y)||p.push(y)}),this.syncEngine.yi(d,p).then(()=>{this.Ks=r})}ti(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ei(e){let t=xp();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class bv{constructor(){this.pi=new Bm,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.pi.Ms(e),this.Ti[e]||"not-current"}updateQueryState(e,t,r){this.Ti[e]=t}removeLocalQueryTarget(e){this.pi.Ls(e)}isLocalQueryTarget(e){return this.pi.activeTargetIds.has(e)}clearQueryState(e){delete this.Ti[e]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(e){return this.pi.activeTargetIds.has(e)}start(){return this.pi=new Bm,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class Pw{Ei(e){}shutdown(){}}class wv{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.bi(),this.Pi=[],this.vi()}Ei(e){this.Pi.push(e)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Pi)e(0)}bi(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Pi)e(1)}static Pt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const kM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class jT{constructor(e){this.Vi=e.Vi,this.Si=e.Si}Di(e){this.Ci=e}Ni(e){this.ki=e}onMessage(e){this.xi=e}close(){this.Si()}send(e){this.Vi(e)}$i(){this.Ci()}Oi(e){this.ki(e)}Fi(e){this.xi(e)}}class HT extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Mi=(e.ssl?"https":"http")+"://"+e.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(e,t,r,i,a){const d=this.Ui(e,t);Ve("RestConnection","Sending: ",d,r);const p={};return this.qi(p,i,a),this.Ki(e,d,p,r).then(y=>(Ve("RestConnection","Received: ",y),y),y=>{throw Vh("RestConnection",`${e} failed with error: `,y,"url: ",d,"request:",r),y})}ji(e,t,r,i,a){return this.Bi(e,t,r,i,a)}qi(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Vo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}Ui(e,t){return`${this.Mi}/v1/${t}:${kM[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Ki(e,t,r,i){return new Promise((a,d)=>{const p=new Ep;p.listenOnce(Xu.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case ei.NO_ERROR:const E=p.getResponseJson();Ve("Connection","XHR received:",JSON.stringify(E)),a(E);break;case ei.TIMEOUT:Ve("Connection",'RPC "'+e+'" timed out'),d(new Pe(fe.DEADLINE_EXCEEDED,"Request time out"));break;case ei.HTTP_ERROR:const S=p.getStatus();if(Ve("Connection",'RPC "'+e+'" failed with status:',S,"response text:",p.getResponseText()),S>0){const x=p.getResponseJson().error;if(x&&x.status&&x.message){const L=function(B){const W=B.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(W)>=0?W:fe.UNKNOWN}(x.status);d(new Pe(L,x.message))}else d(new Pe(fe.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new Pe(fe.UNAVAILABLE,"Connection failed."));break;default:lt()}}finally{Ve("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(i);p.send(t,"POST",y,r,15)})}Qi(e,t,r){const i=[this.Mi,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Ht(),d=_r(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new ed({})),this.qi(p.initMessageHeaders,t,r),(0,Ct.uI)()||(0,Ct.b$)()||(0,Ct.d)()||(0,Ct.w1)()||(0,Ct.Mn)()||(0,Ct.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const y=i.join("");Ve("Connection","Creating WebChannel: "+y,p);const E=a.createWebChannel(y,p);let S=!1,x=!1;const L=new jT({Vi:W=>{x?Ve("Connection","Not sending because WebChannel is closed:",W):(S||(Ve("Connection","Opening WebChannel transport."),E.open(),S=!0),Ve("Connection","WebChannel sending:",W),E.send(W))},Si:()=>E.close()}),B=(W,he,be)=>{W.listen(he,nt=>{try{be(nt)}catch(ot){setTimeout(()=>{throw ot},0)}})};return B(E,Fc.EventType.OPEN,()=>{x||Ve("Connection","WebChannel transport opened.")}),B(E,Fc.EventType.CLOSE,()=>{x||(x=!0,Ve("Connection","WebChannel transport closed"),L.Oi())}),B(E,Fc.EventType.ERROR,W=>{x||(x=!0,Vh("Connection","WebChannel transport errored:",W),L.Oi(new Pe(fe.UNAVAILABLE,"The operation could not be completed")))}),B(E,Fc.EventType.MESSAGE,W=>{var he;if(!x){const be=W.data[0];At(!!be);const nt=be,ot=nt.error||(null===(he=nt[0])||void 0===he?void 0:he.error);if(ot){Ve("Connection","WebChannel received error:",ot);const ft=ot.status;let Ze=function(xn){const dr=Mr[xn];if(void 0!==dr)return ew(dr)}(ft),Gt=ot.message;void 0===Ze&&(Ze=fe.INTERNAL,Gt="Unknown error status: "+ft+" with message "+ot.message),x=!0,L.Oi(new Pe(Ze,Gt)),E.close()}else Ve("Connection","WebChannel received:",be),L.Fi(be)}}),B(d,Nh.STAT_EVENT,W=>{W.stat===wp.PROXY?Ve("Connection","Detected buffering proxy"):W.stat===wp.NOPROXY&&Ve("Connection","Detected no buffering proxy")}),setTimeout(()=>{L.$i()},0),L}}function Ev(){return"undefined"!=typeof window?window:null}function Hm(){return"undefined"!=typeof document?document:null}function nr(n){return new vT(n,!0)}class qm{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Fe=e,this.timerId=t,this.Wi=r,this.Gi=i,this.zi=a,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(e){this.cancel();const t=Math.floor(this.Hi+this.tr()),r=Math.max(0,Date.now()-this.Yi),i=Math.max(0,t-r);i>0&&Ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Hi} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ji=this.Fe.enqueueAfterDelay(this.timerId,i,()=>(this.Yi=Date.now(),e())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class Nw{constructor(e,t,r,i,a,d,p,y){this.Fe=e,this.nr=r,this.sr=i,this.ir=a,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new qm(e,t)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}stop(){var e=this;return(0,pe.Z)(function*(){e.hr()&&(yield e.close(0))})()}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.ar&&(this.ar=this.Fe.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(e){this.yr(),this.stream.send(e)}mr(){var e=this;return(0,pe.Z)(function*(){if(e.lr())return e.close(0)})()}yr(){this.ar&&(this.ar.cancel(),this.ar=null)}pr(){this.cr&&(this.cr.cancel(),this.cr=null)}close(e,t){var r=this;return(0,pe.Z)(function*(){r.yr(),r.pr(),r.ur.cancel(),r.rr++,4!==e?r.ur.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(cr(t.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),r.ur.Xi()):t&&t.code===fe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Tr(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ni(t)})()}Tr(){}auth(){this.state=1;const e=this.Er(this.rr),t=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.rr===t&&this.Ir(r,i)},r=>{e(()=>{const i=new Pe(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ar(i)})})}Ir(e,t){const r=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di(()=>{r(()=>(this.state=2,this.cr=this.Fe.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(i=>{r(()=>this.Ar(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}dr(){var e=this;this.state=5,this.ur.Zi((0,pe.Z)(function*(){e.state=0,e.start()}))}Ar(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Er(e){return t=>{this.Fe.enqueueAndForget(()=>this.rr===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qT extends Nw{constructor(e,t,r,i,a,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,d),this.k=a}Rr(e,t){return this.ir.Qi("Listen",e,t)}onMessage(e){this.ur.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:lt(),i=e.targetChange.targetIds||[],a=function(y,E){return y.C?(At(void 0===E||"string"==typeof E),yr.fromBase64String(E||"")):(At(void 0===E||E instanceof Uint8Array),yr.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&function(y){const E=void 0===y.code?fe.UNKNOWN:ew(y.code);return new Pe(E,y.message||"")}(d);t=new nw(r,i,a,p||null)}else if("documentChange"in e){const r=e.documentChange,i=ka(n,r.document.name),a=$r(r.document.updateTime),d=new Ji({mapValue:{fields:r.document.fields}}),p=er.newFoundDocument(i,a,d);t=new lo(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=ka(n,r.document),a=r.readTime?$r(r.readTime):Ot.min(),d=er.newNoDocument(i,a);t=new lo([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,i=ka(n,r.document);t=new lo([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return lt();{const r=e.filter,a=new gT(r.count||0);t=new kp(r.targetId,a)}}var y;return t}(this.k,e),r=function(i){if(!("targetChange"in i))return Ot.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Ot.min():a.readTime?$r(a.readTime):Ot.min()}(e);return this.listener.br(t,r)}Pr(e){const t={};t.database=Qh(this.k),t.addTarget=function(i,a){let d;const p=a.target;return d=xy(p)?{documents:xm(i,p)}:{query:Yy(i,p)},d.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?d.resumeToken=Wy(i,a.resumeToken):a.snapshotVersion.compareTo(Ot.min())>0&&(d.readTime=cd(i,a.snapshotVersion.toTimestamp())),d}(this.k,e);const r=function(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return lt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.gr(t)}vr(e){const t={};t.database=Qh(this.k),t.removeTarget=e,this.gr(t)}}class Fw extends Nw{constructor(e,t,r,i,a,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,d),this.k=a,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(e,t){return this.ir.Qi("Write",e,t)}onMessage(e){if(At(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();const t=function(n,e){return n&&n.length>0?(At(void 0!==e),n.map(t=>function(r,i){let a=$r(r.updateTime?r.updateTime:i);return a.isEqual(Ot.min())&&(a=$r(i)),new fT(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=$r(e.commitTime);return this.listener.Cr(r,t)}return At(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const e={};e.database=Qh(this.k),this.gr(e)}Dr(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Mm(this.k,r))};this.gr(t)}}class $T extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.ir=r,this.k=i,this.$r=!1}Or(){if(this.$r)throw new Pe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(e,t,r){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.ir.Bi(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(fe.UNKNOWN,i.toString())})}ji(e,t,r){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.ir.ji(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(fe.UNKNOWN,i.toString())})}terminate(){this.$r=!0}}class Lw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Fr=0,this.Mr=null,this.Lr=!0}Br(){0===this.Fr&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Mr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(e){"Online"===this.state?this.Ur("Unknown"):(this.Fr++,this.Fr>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Ur("Offline")))}set(e){this.jr(),this.Fr=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}Ur(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}qr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(cr(t),this.Lr=!1):Ve("OnlineStateTracker",t)}jr(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}class Vw{constructor(e,t,r,i,a){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=a,this.Hr.Ei(p=>{r.enqueueAndForget((0,pe.Z)(function*(){var y;Kc(d)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,pe.Z)(function*(E){const S=Ge(E);S.Gr.add(4),yield cf(S),S.Jr.set("Unknown"),S.Gr.delete(4),yield La(S)}),function(E){return y.apply(this,arguments)})(d))}))}),this.Jr=new Lw(r,i)}}function La(n){return Cv.apply(this,arguments)}function Cv(){return Cv=(0,pe.Z)(function*(n){if(Kc(n))for(const e of n.zr)yield e(!0)}),Cv.apply(this,arguments)}function cf(n){return $m.apply(this,arguments)}function $m(){return $m=(0,pe.Z)(function*(n){for(const e of n.zr)yield e(!1)}),$m.apply(this,arguments)}function Gm(n,e){const t=Ge(n);t.Wr.has(e.targetId)||(t.Wr.set(e.targetId,e),ho(t)?Wp(t):Ed(t).lr()&&Uw(t,e))}function uf(n,e){const t=Ge(n),r=Ed(t);t.Wr.delete(e),r.lr()&&Dv(t,e),0===t.Wr.size&&(r.lr()?r._r():Kc(t)&&t.Jr.set("Unknown"))}function Uw(n,e){n.Yr.X(e.targetId),Ed(n).Pr(e)}function Dv(n,e){n.Yr.X(e),Ed(n).vr(e)}function Wp(n){n.Yr=new SM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Wr.get(e)||null}),Ed(n).start(),n.Jr.Br()}function ho(n){return Kc(n)&&!Ed(n).hr()&&n.Wr.size>0}function Kc(n){return 0===Ge(n).Gr.size}function Bw(n){n.Yr=void 0}function Va(n){return Ns.apply(this,arguments)}function Ns(){return Ns=(0,pe.Z)(function*(n){n.Wr.forEach((e,t)=>{Uw(n,e)})}),Ns.apply(this,arguments)}function Zo(n,e){return zm.apply(this,arguments)}function zm(){return zm=(0,pe.Z)(function*(n,e){Bw(n),ho(n)?(n.Jr.Kr(e),Wp(n)):n.Jr.set("Unknown")}),zm.apply(this,arguments)}function jw(n,e,t){return Tv.apply(this,arguments)}function Tv(){return Tv=(0,pe.Z)(function*(n,e,t){if(n.Jr.set("Online"),e instanceof nw&&2===e.state&&e.cause)try{yield(r=(0,pe.Z)(function*(i,a){const d=a.cause;for(const p of a.targetIds)i.Wr.has(p)&&(yield i.remoteSyncer.rejectListen(p,d),i.Wr.delete(p),i.Yr.removeTarget(p))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Zm(n,r)}else if(e instanceof lo?n.Yr.ot(e):e instanceof kp?n.Yr.dt(e):n.Yr.ut(e),!t.isEqual(Ot.min()))try{const r=yield LT(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const d=i.Yr.gt(a);return d.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const E=i.Wr.get(y);E&&i.Wr.set(y,E.withResumeToken(p.resumeToken,a))}}),d.targetMismatches.forEach(p=>{const y=i.Wr.get(p);if(!y)return;i.Wr.set(p,y.withResumeToken(yr.EMPTY_BYTE_STRING,y.snapshotVersion)),Dv(i,p);const E=new Na(y.target,p,1,y.sequenceNumber);Uw(i,E)}),i.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield Zm(n,r)}var r}),Tv.apply(this,arguments)}function Zm(n,e,t){return Iv.apply(this,arguments)}function Iv(){return Iv=(0,pe.Z)(function*(n,e,t){if(!gd(e))throw e;n.Gr.add(1),yield cf(n),n.Jr.set("Offline"),t||(t=()=>LT(n.localStore)),n.asyncQueue.enqueueRetryable((0,pe.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n.Gr.delete(1),yield La(n)}))}),Iv.apply(this,arguments)}function Hw(n,e){return e().catch(t=>Zm(n,t,e))}function Yc(n){return wd.apply(this,arguments)}function wd(){return wd=(0,pe.Z)(function*(n){const e=Ge(n),t=Zl(e);let r=e.Qr.length>0?e.Qr[e.Qr.length-1].batchId:-1;for(;GT(e);)try{const i=yield dv(e.localStore,r);if(null===i){0===e.Qr.length&&t._r();break}r=i.batchId,qw(e,i)}catch(i){yield Zm(e,i)}$w(e)&&Sv(e)}),wd.apply(this,arguments)}function GT(n){return Kc(n)&&n.Qr.length<10}function qw(n,e){n.Qr.push(e);const t=Zl(n);t.lr()&&t.Sr&&t.Dr(e.mutations)}function $w(n){return Kc(n)&&!Zl(n).hr()&&n.Qr.length>0}function Sv(n){Zl(n).start()}function Gw(n){return df.apply(this,arguments)}function df(){return df=(0,pe.Z)(function*(n){Zl(n).kr()}),df.apply(this,arguments)}function zT(n){return Wm.apply(this,arguments)}function Wm(){return Wm=(0,pe.Z)(function*(n){const e=Zl(n);for(const t of n.Qr)e.Dr(t.mutations)}),Wm.apply(this,arguments)}function zw(n,e,t){return Kp.apply(this,arguments)}function Kp(){return Kp=(0,pe.Z)(function*(n,e,t){const r=n.Qr.shift(),i=Ds.from(r,e,t);yield Hw(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Yc(n)}),Kp.apply(this,arguments)}function Km(n,e){return Yp.apply(this,arguments)}function Yp(){return Yp=(0,pe.Z)(function*(n,e){var t;e&&Zl(n).Sr&&(yield(t=(0,pe.Z)(function*(r,i){if(Dm(a=i.code)&&a!==fe.ABORTED){const d=r.Qr.shift();Zl(r).wr(),yield Hw(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,i)),yield Yc(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),$w(n)&&Sv(n)}),Yp.apply(this,arguments)}function Qp(n,e){return Ym.apply(this,arguments)}function Ym(){return Ym=(0,pe.Z)(function*(n,e){const t=Ge(n);e?(t.Gr.delete(2),yield La(t)):e||(t.Gr.add(2),yield cf(t),t.Jr.set("Unknown"))}),Ym.apply(this,arguments)}function Ed(n){return n.Xr||(n.Xr=function(e,t,r){const i=Ge(e);return i.Or(),new qT(t,i.ir,i.authCredentials,i.appCheckCredentials,i.k,r)}(n.datastore,n.asyncQueue,{Di:Va.bind(null,n),Ni:Zo.bind(null,n),br:jw.bind(null,n)}),n.zr.push(function(){var e=(0,pe.Z)(function*(t){t?(n.Xr.wr(),ho(n)?Wp(n):n.Jr.set("Unknown")):(yield n.Xr.stop(),Bw(n))});return function(t){return e.apply(this,arguments)}}())),n.Xr}function Zl(n){return n.Zr||(n.Zr=function(e,t,r){const i=Ge(e);return i.Or(),new Fw(t,i.ir,i.authCredentials,i.appCheckCredentials,i.k,r)}(n.datastore,n.asyncQueue,{Di:Gw.bind(null,n),Ni:Km.bind(null,n),Nr:zT.bind(null,n),Cr:zw.bind(null,n)}),n.zr.push(function(){var e=(0,pe.Z)(function*(t){t?(n.Zr.wr(),yield Yc(n)):(yield n.Zr.stop(),n.Qr.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.Qr.length} pending writes`),n.Qr=[]))});return function(t){return e.apply(this,arguments)}}())),n.Zr}class Qm{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,i,a){const d=Date.now()+r,p=new Qm(e,t,d,i,a);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cd(n,e){if(cr("AsyncQueue",`${e}: ${n}`),gd(n))return new Pe(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class Dd{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ct.comparator(t.key,r.key):(t,r)=>ct.comparator(t.key,r.key),this.keyedMap=$y(),this.sortedSet=new Hr(this.comparator)}static emptySet(e){return new Dd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Dd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Dd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Zw{constructor(){this.eo=new Hr(ct.comparator)}track(e){const t=e.doc.key,r=this.eo.get(t);r?0!==e.type&&3===r.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==r.type?this.eo=this.eo.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.eo=this.eo.remove(t):1===e.type&&2===r.type?this.eo=this.eo.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):lt():this.eo=this.eo.insert(t,e)}no(){const e=[];return this.eo.inorderTraversal((t,r)=>{e.push(r)}),e}}class hf{constructor(e,t,r,i,a,d,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=y}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(d=>{a.push({type:0,doc:d})}),new hf(e,t,Dd.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&od(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class ZT{constructor(){this.so=void 0,this.listeners=[]}}class WT{constructor(){this.queries=new Vp(e=>Ny(e),od),this.onlineState="Unknown",this.io=new Set}}function Av(n,e){return Mv.apply(this,arguments)}function Mv(){return Mv=(0,pe.Z)(function*(n,e){const t=Ge(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new ZT),i)try{a.so=yield t.onListen(r)}catch(d){const p=Cd(d,`Initialization of query '${Gh(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,a),a.listeners.push(e),e.ro(t.onlineState),a.so&&e.oo(a.so)&&Ov(t)}),Mv.apply(this,arguments)}function xv(n,e){return kv.apply(this,arguments)}function kv(){return kv=(0,pe.Z)(function*(n,e){const t=Ge(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const d=a.listeners.indexOf(e);d>=0&&(a.listeners.splice(d,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),kv.apply(this,arguments)}function KT(n,e){const t=Ge(n);let r=!1;for(const i of e){const d=t.queries.get(i.query);if(d){for(const p of d.listeners)p.oo(i)&&(r=!0);d.so=i}}r&&Ov(t)}function YT(n,e,t){const r=Ge(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function Ov(n){n.io.forEach(e=>{e.next()})}class Rv{constructor(e,t,r){this.query=e,this.ao=t,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=r||{}}oo(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new hf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.co?this.ho(e)&&(this.ao.next(e),t=!0):this.lo(e,this.onlineState)&&(this.fo(e),t=!0),this.uo=e,t}onError(e){this.ao.error(e)}ro(e){this.onlineState=e;let t=!1;return this.uo&&!this.co&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}lo(e,t){return!e.fromCache||!(this.options.wo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}ho(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}fo(e){e=hf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.ao.next(e)}}class QT{constructor(e,t){this.payload=e,this.byteLength=t}_o(){return"metadata"in this.payload}}class Ww{constructor(e){this.k=e}Hn(e){return ka(this.k,e)}Jn(e){return e.metadata.exists?dd(this.k,e.document,!1):er.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}Yn(e){return $r(e)}}class JT{constructor(e,t,r){this.mo=e,this.localStore=t,this.k=r,this.queries=[],this.documents=[],this.progress=Kw(e)}yo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}po(e){const t=new Map,r=new Ww(this.k);for(const i of e)if(i.metadata.queries){const a=r.Hn(i.metadata.name);for(const d of i.metadata.queries){const p=(t.get(d)||yn()).add(a);t.set(d,p)}}return t}complete(){var e=this;return(0,pe.Z)(function*(){const t=yield function(n,e,t,r){return pv.apply(this,arguments)}(e.localStore,new Ww(e.k),e.documents,e.mo.id),r=e.po(e.documents);for(const i of e.queries)yield Mw(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",new PT(Object.assign({},e.progress),t)})()}}function Kw(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Yw{constructor(e){this.key=e}}class Qw{constructor(e){this.key=e}}class Pv{constructor(e,t){this.query=e,this.To=t,this.Eo=null,this.current=!1,this.Io=yn(),this.mutatedKeys=yn(),this.Ao=Fy(e),this.Ro=new Dd(this.Ao)}get bo(){return this.To}Po(e,t){const r=t?t.vo:new Zw,i=t?t.Ro:this.Ro;let a=t?t.mutatedKeys:this.mutatedKeys,d=i,p=!1;const y=$h(this.query)&&i.size===this.query.limit?i.last():null,E=ql(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((S,x)=>{const L=i.get(S),B=Tp(this.query,x)?x:null,W=!!L&&this.mutatedKeys.has(L.key),he=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let be=!1;L&&B?L.data.isEqual(B.data)?W!==he&&(r.track({type:3,doc:B}),be=!0):this.Vo(L,B)||(r.track({type:2,doc:B}),be=!0,(y&&this.Ao(B,y)>0||E&&this.Ao(B,E)<0)&&(p=!0)):!L&&B?(r.track({type:0,doc:B}),be=!0):L&&!B&&(r.track({type:1,doc:L}),be=!0,(y||E)&&(p=!0)),be&&(B?(d=d.add(B),a=he?a.add(S):a.delete(S)):(d=d.delete(S),a=a.delete(S)))}),$h(this.query)||ql(this.query))for(;d.size>this.query.limit;){const S=$h(this.query)?d.last():d.first();d=d.delete(S.key),a=a.delete(S.key),r.track({type:1,doc:S})}return{Ro:d,vo:r,Bn:p,mutatedKeys:a}}Vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;const a=e.vo.no();a.sort((E,S)=>function(x,L){const B=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt()}};return B(x)-B(L)}(E.type,S.type)||this.Ao(E.doc,S.doc)),this.So(r);const d=t?this.Do():[],p=0===this.Io.size&&this.current?1:0,y=p!==this.Eo;return this.Eo=p,0!==a.length||y?{snapshot:new hf(this.query,e.Ro,i,a,e.mutatedKeys,0===p,y,!1),Co:d}:{Co:d}}ro(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new Zw,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}So(e){e&&(e.addedDocuments.forEach(t=>this.To=this.To.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.To=this.To.delete(t)),this.current=e.current)}Do(){if(!this.current)return[];const e=this.Io;this.Io=yn(),this.Ro.forEach(r=>{this.No(r.key)&&(this.Io=this.Io.add(r.key))});const t=[];return e.forEach(r=>{this.Io.has(r)||t.push(new Qw(r))}),this.Io.forEach(r=>{e.has(r)||t.push(new Yw(r))}),t}ko(e){this.To=e.zn,this.Io=yn();const t=this.Po(e.documents);return this.applyChanges(t,!0)}xo(){return hf.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class Jw{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Xw{constructor(e){this.key=e,this.$o=!1}}class eE{constructor(e,t,r,i,a,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=d,this.Oo={},this.Fo=new Vp(p=>Ny(p),od),this.Mo=new Map,this.Lo=new Set,this.Bo=new Hr(ct.comparator),this.Uo=new Map,this.qo=new Vm,this.Ko={},this.jo=new Map,this.Qo=Gc.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}function tE(n,e){return Jm.apply(this,arguments)}function Jm(){return Jm=(0,pe.Z)(function*(n,e){const t=Sd(n);let r,i;const a=t.Fo.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.xo();else{const d=yield Wc(t.localStore,Os(e)),p=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,i=yield Xm(t,e,r,"current"===p),t.isPrimaryClient&&Gm(t.remoteStore,d)}return i}),Jm.apply(this,arguments)}function Xm(n,e,t,r){return e_.apply(this,arguments)}function e_(){return e_=(0,pe.Z)(function*(n,e,t,r){n.Go=(S,x,L)=>{return(B=(0,pe.Z)(function*(W,he,be,nt){let ot=he.view.Po(be);ot.Bn&&(ot=yield sf(W.localStore,he.query,!1).then(({documents:Gt})=>he.view.Po(Gt,ot)));const ft=nt&&nt.targetChanges.get(he.targetId),Ze=he.view.applyChanges(ot,W.isPrimaryClient,ft);return ff(W,he.targetId,Ze.Co),Ze.snapshot}),function(W,he,be,nt){return B.apply(this,arguments)})(n,S,x,L);var B};const i=yield sf(n.localStore,e,!0),a=new Pv(e,i.zn),d=a.Po(i.documents),p=Yh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),y=a.applyChanges(d,n.isPrimaryClient,p);ff(n,t,y.Co);const E=new Jw(e,t,a);return n.Fo.set(e,E),n.Mo.has(t)?n.Mo.get(t).push(e):n.Mo.set(t,[e]),y.snapshot}),e_.apply(this,arguments)}function nE(n,e){return Jp.apply(this,arguments)}function Jp(){return Jp=(0,pe.Z)(function*(n,e){const t=Ge(n),r=t.Fo.get(e),i=t.Mo.get(r.targetId);if(i.length>1)return t.Mo.set(r.targetId,i.filter(a=>!od(a,e))),void t.Fo.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield rf(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),uf(t.remoteStore,r.targetId),Kl(t,r.targetId)}).catch(zl))):(Kl(t,r.targetId),yield rf(t.localStore,r.targetId,!0))}),Jp.apply(this,arguments)}function Wl(){return Wl=(0,pe.Z)(function*(n,e,t){const r=Gv(n);try{const i=yield function(a,d){const p=Ge(a),y=ti.now(),E=d.reduce((x,L)=>x.add(L.key),yn());let S;return p.persistence.runTransaction("Locally write mutations","readwrite",x=>p.Wn.vn(x,E).next(L=>{S=L;const B=[];for(const W of d){const he=pT(W,S.get(W.key));null!=he&&B.push(new bi(W.key,he,iT(he.value.mapValue),Ar.exists(!0)))}return p.An.addMutationBatch(x,y,B,d)})).then(x=>(x.applyToLocalDocumentSet(S),{batchId:x.batchId,changes:S}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,d,p){let y=a.Ko[a.currentUser.toKey()];y||(y=new Hr(Zt)),y=y.insert(d,p),a.Ko[a.currentUser.toKey()]=y}(r,i.batchId,t),yield Qc(r,i.changes),yield Yc(r.remoteStore)}catch(i){const a=Cd(i,"Failed to persist write");t.reject(a)}}),Wl.apply(this,arguments)}function rE(n,e){return Fv.apply(this,arguments)}function Fv(){return Fv=(0,pe.Z)(function*(n,e){const t=Ge(n);try{const r=yield Hp(t.localStore,e);e.targetChanges.forEach((i,a)=>{const d=t.Uo.get(a);d&&(At(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?d.$o=!0:i.modifiedDocuments.size>0?At(d.$o):i.removedDocuments.size>0&&(At(d.$o),d.$o=!1))}),yield Qc(t,r,e)}catch(r){yield zl(r)}}),Fv.apply(this,arguments)}function Td(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Fo.forEach((a,d)=>{const p=d.view.ro(e);p.snapshot&&i.push(p.snapshot)}),function(a,d){const p=Ge(a);p.onlineState=d;let y=!1;p.queries.forEach((E,S)=>{for(const x of S.listeners)x.ro(d)&&(y=!0)}),y&&Ov(p)}(r.eventManager,e),i.length&&r.Oo.br(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function OM(n,e,t){return Xp.apply(this,arguments)}function Xp(){return Xp=(0,pe.Z)(function*(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Uo.get(e),a=i&&i.key;if(a){let d=new Hr(ct.comparator);d=d.insert(a,er.newNoDocument(a,Ot.min()));const p=yn().add(a),y=new Kh(Ot.min(),new Map,new ur(Zt),d,p);yield rE(r,y),r.Bo=r.Bo.remove(a),r.Uo.delete(e),Wn(r)}else yield rf(r.localStore,e,!1).then(()=>Kl(r,e,t)).catch(zl)}),Xp.apply(this,arguments)}function RM(n,e){return t_.apply(this,arguments)}function t_(){return t_=(0,pe.Z)(function*(n,e){const t=Ge(n),r=e.batch.batchId;try{const i=yield FT(t.localStore,e);Uv(t,r,null),Vv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Qc(t,i)}catch(i){yield zl(i)}}),t_.apply(this,arguments)}function iE(n,e,t){return sE.apply(this,arguments)}function sE(){return sE=(0,pe.Z)(function*(n,e,t){const r=Ge(n);try{const i=yield function(a,d){const p=Ge(a);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let E;return p.An.lookupMutationBatch(y,d).next(S=>(At(null!==S),E=S.keys(),p.An.removeMutationBatch(y,S))).next(()=>p.An.performConsistencyCheck(y)).next(()=>p.Wn.vn(y,E))})}(r.localStore,e);Uv(r,e,t),Vv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Qc(r,i)}catch(i){yield zl(i)}}),sE.apply(this,arguments)}function Lv(){return Lv=(0,pe.Z)(function*(n,e){const t=Ge(n);Kc(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const d=Ge(a);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>d.An.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.jo.get(r)||[];i.push(e),t.jo.set(r,i)}catch(r){const i=Cd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),Lv.apply(this,arguments)}function Vv(n,e){(n.jo.get(e)||[]).forEach(t=>{t.resolve()}),n.jo.delete(e)}function Uv(n,e,t){const r=Ge(n);let i=r.Ko[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Ko[r.currentUser.toKey()]=i}}function Kl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Mo.get(e))n.Fo.delete(r),t&&n.Oo.zo(r,t);n.Mo.delete(e),n.isPrimaryClient&&n.qo.us(e).forEach(r=>{n.qo.containsKey(r)||oE(n,r)})}function oE(n,e){n.Lo.delete(e.path.canonicalString());const t=n.Bo.get(e);null!==t&&(uf(n.remoteStore,t),n.Bo=n.Bo.remove(e),n.Uo.delete(t),Wn(n))}function ff(n,e,t){for(const r of t)r instanceof Yw?(n.qo.addReference(r.key,e),n_(n,r)):r instanceof Qw?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.qo.removeReference(r.key,e),n.qo.containsKey(r.key)||oE(n,r.key)):lt()}function n_(n,e){const t=e.key,r=t.path.canonicalString();n.Bo.get(t)||n.Lo.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.Lo.add(r),Wn(n))}function Wn(n){for(;n.Lo.size>0&&n.Bo.size<n.maxConcurrentLimboResolutions;){const e=n.Lo.values().next().value;n.Lo.delete(e);const t=new ct(un.fromString(e)),r=n.Qo.next();n.Uo.set(r,new Xw(t)),n.Bo=n.Bo.insert(t,r),Gm(n.remoteStore,new Na(Os(jo(t.path)),r,2,ws.I))}}function Qc(n,e,t){return r_.apply(this,arguments)}function r_(){return r_=(0,pe.Z)(function*(n,e,t){const r=Ge(n),i=[],a=[],d=[];var p;r.Fo.isEmpty()||(r.Fo.forEach((p,y)=>{d.push(r.Go(y,e,t).then(E=>{if(E){r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,E.fromCache?"not-current":"current"),i.push(E);const S=lv.$n(y.targetId,E);a.push(S)}}))}),yield Promise.all(d),r.Oo.br(i),yield(p=(0,pe.Z)(function*(y,E){const S=Ge(y);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>ke.forEach(E,L=>ke.forEach(L.kn,B=>S.persistence.referenceDelegate.addReference(x,L.targetId,B)).next(()=>ke.forEach(L.xn,B=>S.persistence.referenceDelegate.removeReference(x,L.targetId,B)))))}catch(x){if(!gd(x))throw x;Ve("LocalStore","Failed to update sequence numbers: "+x)}for(const x of E){const L=x.targetId;if(!x.fromCache){const B=S.qn.get(L),he=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);S.qn=S.qn.insert(L,he)}}}),function(y,E){return p.apply(this,arguments)})(r.localStore,a))}),r_.apply(this,arguments)}function XT(n,e){return Bv.apply(this,arguments)}function Bv(){return Bv=(0,pe.Z)(function*(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=yield NT(t.localStore,e);t.currentUser=e,(i=t).jo.forEach(d=>{d.forEach(p=>{p.reject(new Pe(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.jo.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Qc(t,r.Gn)}var i}),Bv.apply(this,arguments)}function aE(n,e){const t=Ge(n),r=t.Uo.get(e);if(r&&r.$o)return yn().add(r.key);{let i=yn();const a=t.Mo.get(e);if(!a)return i;for(const d of a){const p=t.Fo.get(d);i=i.unionWith(p.view.bo)}return i}}function lE(n,e){return i_.apply(this,arguments)}function i_(){return i_=(0,pe.Z)(function*(n,e){const t=Ge(n),r=yield sf(t.localStore,e.query,!0),i=e.view.ko(r);return t.isPrimaryClient&&ff(t,e.targetId,i.Co),i}),i_.apply(this,arguments)}function cE(n){return jv.apply(this,arguments)}function jv(){return jv=(0,pe.Z)(function*(n){const e=Ge(n);return VT(e.localStore).then(t=>Qc(e,t))}),jv.apply(this,arguments)}function eI(n,e,t,r){return Hv.apply(this,arguments)}function Hv(){return Hv=(0,pe.Z)(function*(n,e,t,r){const i=Ge(n),a=yield function(d,p){const y=Ge(d),E=Ge(y.An);return y.persistence.runTransaction("Lookup mutation documents","readonly",S=>E.Zt(S,p).next(x=>x?y.Wn.vn(S,x):ke.resolve(null)))}(i.localStore,e);var p;null!==a?("pending"===t?yield Yc(i.remoteStore):"acknowledged"===t||"rejected"===t?(Uv(i,e,r||null),Vv(i,e),p=e,Ge(Ge(i.localStore).An).ee(p)):lt(),yield Qc(i,a)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),Hv.apply(this,arguments)}function qv(){return qv=(0,pe.Z)(function*(n,e){const t=Ge(n);if(Sd(t),Gv(t),!0===e&&!0!==t.Wo){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield uE(t,r.toArray());t.Wo=!0,yield Qp(t.remoteStore,!0);for(const a of i)Gm(t.remoteStore,a)}else if(!1===e&&!1!==t.Wo){const r=[];let i=Promise.resolve();t.Mo.forEach((a,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):i=i.then(()=>(Kl(t,d),rf(t.localStore,d,!0))),uf(t.remoteStore,d)}),yield i,yield uE(t,r),function(a){const d=Ge(a);d.Uo.forEach((p,y)=>{uf(d.remoteStore,y)}),d.qo.hs(),d.Uo=new Map,d.Bo=new Hr(ct.comparator)}(t),t.Wo=!1,yield Qp(t.remoteStore,!1)}}),qv.apply(this,arguments)}function uE(n,e,t){return $v.apply(this,arguments)}function $v(){return $v=(0,pe.Z)(function*(n,e,t){const r=Ge(n),i=[],a=[];for(const d of e){let p;const y=r.Mo.get(d);if(y&&0!==y.length){p=yield Wc(r.localStore,Os(y[0]));for(const E of y){const S=r.Fo.get(E),x=yield lE(r,S);x.snapshot&&a.push(x.snapshot)}}else{const E=yield hv(r.localStore,d);p=yield Wc(r.localStore,E),yield Xm(r,tg(E),d,!1)}i.push(p)}return r.Oo.br(a),i}),$v.apply(this,arguments)}function tg(n){return qh(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function dE(n){const e=Ge(n);return Ge(Ge(e.localStore).persistence).Tn()}function hE(n,e,t,r){return s_.apply(this,arguments)}function s_(){return s_=(0,pe.Z)(function*(n,e,t,r){const i=Ge(n);if(i.Wo)Ve("SyncEngine","Ignoring unexpected query state notification.");else if(i.Mo.has(e))switch(t){case"current":case"not-current":{const a=yield VT(i.localStore),d=Kh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Qc(i,a,d);break}case"rejected":yield rf(i.localStore,e,!0),Kl(i,e,r);break;default:lt()}}),s_.apply(this,arguments)}function tI(n,e,t){return Id.apply(this,arguments)}function Id(){return Id=(0,pe.Z)(function*(n,e,t){const r=Sd(n);if(r.Wo){for(const i of e){if(r.Mo.has(i)){Ve("SyncEngine","Adding an already active target "+i);continue}const a=yield hv(r.localStore,i),d=yield Wc(r.localStore,a);yield Xm(r,tg(a),d.targetId,!1),Gm(r.remoteStore,d)}for(const i of t)r.Mo.has(i)&&(yield rf(r.localStore,i,!1).then(()=>{uf(r.remoteStore,i),Kl(r,i)}).catch(zl))}}),Id.apply(this,arguments)}function Sd(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=rE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aE.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=OM.bind(null,e),e.Oo.br=KT.bind(null,e.eventManager),e.Oo.zo=YT.bind(null,e.eventManager),e}function Gv(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iE.bind(null,e),e}class fE{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,pe.Z)(function*(){t.k=nr(e.databaseInfo.databaseId),t.sharedClientState=t.Jo(e),t.persistence=t.Yo(e),yield t.persistence.start(),t.gcScheduler=t.Xo(e),t.localStore=t.Zo(e)})()}Xo(e){return null}Zo(e){return Lm(this.persistence,new cv,e.initialUser,this.k)}Yo(e){return new mv(_v.ks,this.k)}Jo(e){return new bv}terminate(){var e=this;return(0,pe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class zv extends fE{constructor(e,t,r){super(),this.ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e),yield function(n){return $p.apply(this,arguments)}(r.localStore),yield r.ta.initialize(r,e),yield Gv(r.ta.syncEngine),yield Yc(r.ta.remoteStore),yield r.persistence.sn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Zo(e){return Lm(this.persistence,new cv,e.initialUser,this.k)}Xo(e){return new MM(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Yo(e){const t=ov(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ts.withCacheSize(this.cacheSizeBytes):ts.DEFAULT;return new sv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Ev(),Hm(),this.k,this.sharedClientState,!!this.forceOwnership)}Jo(e){return new bv}}class pE extends zv{constructor(e,t){super(e,t,!1),this.ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e);const i=r.ta.syncEngine;r.sharedClientState instanceof jm&&(r.sharedClientState.syncEngine={mi:eI.bind(null,i),gi:hE.bind(null,i),yi:tI.bind(null,i),Tn:dE.bind(null,i),_i:cE.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.sn(function(){var a=(0,pe.Z)(function*(d){yield function(n,e){return qv.apply(this,arguments)}(r.ta.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return a.apply(this,arguments)}}())})()}Jo(e){const t=Ev();if(!jm.Pt(t))throw new Pe(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ov(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new jm(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class o_{initialize(e,t){var r=this;return(0,pe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Td(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=XT.bind(null,r.syncEngine),yield Qp(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new WT}createDatastore(e){const t=nr(e.databaseInfo.databaseId),r=new HT(e.databaseInfo);return new $T(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=p=>Td(this.syncEngine,p,0),d=wv.Pt()?new wv:new Pw,new Vw(t,r,i,a,d);var t,r,i,a,d}createSyncEngine(e,t){return function(r,i,a,d,p,y,E){const S=new eE(r,i,a,d,p,y);return E&&(S.Wo=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,pe.Z)(function*(t){const r=Ge(t);Ve("RemoteStore","RemoteStore shutting down."),r.Gr.add(5),yield cf(r),r.Hr.shutdown(),r.Jr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function gE(n,e=10240){let t=0;return{read:()=>(0,pe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,pe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ng{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ea(this.observer.next,e)}error(e){this.observer.error?this.ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}na(){this.muted=!0}ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class rI{constructor(e,t){this.sa=e,this.k=t,this.metadata=new Sr,this.buffer=new Uint8Array,this.ia=new TextDecoder("utf-8"),this.ra().then(r=>{r&&r._o()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.sa.cancel()}getMetadata(){var e=this;return(0,pe.Z)(function*(){return e.metadata.promise})()}Ho(){var e=this;return(0,pe.Z)(function*(){return yield e.getMetadata(),e.ra()})()}ra(){var e=this;return(0,pe.Z)(function*(){const t=yield e.oa();if(null===t)return null;const r=e.ia.decode(t),i=Number(r);isNaN(i)&&e.aa(`length string (${r}) is not valid number`);const a=yield e.ca(i);return new QT(JSON.parse(a),t.length+i)})()}ua(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}oa(){var e=this;return(0,pe.Z)(function*(){for(;e.ua()<0&&!(yield e.ha()););if(0===e.buffer.length)return null;const t=e.ua();t<0&&e.aa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ca(e){var t=this;return(0,pe.Z)(function*(){for(;t.buffer.length<e;)(yield t.ha())&&t.aa("Reached the end of bundle when more is expected.");const r=t.ia.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}aa(e){throw this.sa.cancel(),new Error(`Invalid bundle format: ${e}`)}ha(){var e=this;return(0,pe.Z)(function*(){const t=yield e.sa.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class iI{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,pe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Pe(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,pe.Z)(function*(a,d){const p=Ge(a),y=Qh(p.k)+"/documents",E={documents:d.map(B=>Rp(p.k,B))},S=yield p.ji("BatchGetDocuments",y,E),x=new Map;S.forEach(B=>{const W=function(n,e){return"found"in e?function(t,r){At(!!r.found);const i=ka(t,r.found.name),a=$r(r.found.updateTime),d=new Ji({mapValue:{fields:r.found.fields}});return er.newFoundDocument(i,a,d)}(n,e):"missing"in e?function(t,r){At(!!r.missing),At(!!r.readTime);const i=ka(t,r.missing),a=$r(r.readTime);return er.newNoDocument(i,a)}(n,e):lt()}(p.k,B);x.set(W.key.toString(),W)});const L=[];return d.forEach(B=>{const W=x.get(B.toString());At(!!W),L.push(W)}),L}),function(a,d){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Em(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,pe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=ct.fromPath(i);e.mutations.push(new Cm(a,e.precondition(a)))}),yield(r=(0,pe.Z)(function*(i,a){const d=Ge(i),p=Qh(d.k)+"/documents",y={writes:a.map(E=>Mm(d.k,E))};yield d.Bi("Commit",p,y)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw lt();t=Ot.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Pe(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ar.updateTime(t):Ar.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ot.min()))throw new Pe(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ar.updateTime(t)}return Ar.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class PM{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.la=5,this.ur=new qm(this.asyncQueue,"transaction_retry")}run(){this.la-=1,this.fa()}fa(){var e=this;this.ur.Zi((0,pe.Z)(function*(){const t=new iI(e.datastore),r=e.da(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.wa(a)}))}).catch(i=>{e.wa(i)})}))}da(e){try{const t=this.updateFunction(e);return!xa(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}wa(e){this.la>0&&this._a(e)?(this.la-=1,this.asyncQueue.enqueueAndForget(()=>(this.fa(),Promise.resolve()))):this.deferred.reject(e)}_a(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Dm(t)}return!1}}class NM{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=lr.UNAUTHENTICATED,this.clientId=j0.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,pe.Z)(function*(p){Ve("FirestoreClient","Received user=",p.uid),yield a.authCredentialListener(p),a.user=p});return function(p){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,()=>Promise.resolve())}getConfiguration(){var e=this;return(0,pe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Cd(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function sI(n,e){return mE.apply(this,arguments)}function mE(){return mE=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,pe.Z)(function*(a){r.isEqual(a)||(yield NT(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),mE.apply(this,arguments)}function Zv(n,e){return pf.apply(this,arguments)}function pf(){return pf=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Wv(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>{return(a=(0,pe.Z)(function*(d,p){const y=Ge(d);y.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const E=Kc(y);y.Gr.add(3),yield cf(y),E&&y.Jr.set("Unknown"),yield y.remoteSyncer.handleCredentialChange(p),y.Gr.delete(3),yield La(y)}),function(d,p){return a.apply(this,arguments)})(e.remoteStore,i);var a}),n.onlineComponents=e}),pf.apply(this,arguments)}function Wv(n){return Kv.apply(this,arguments)}function Kv(){return Kv=(0,pe.Z)(function*(n){return n.offlineComponents||(Ve("FirestoreClient","Using default OfflineComponentProvider"),yield sI(n,new fE)),n.offlineComponents}),Kv.apply(this,arguments)}function rg(n){return Ad.apply(this,arguments)}function Ad(){return Ad=(0,pe.Z)(function*(n){return n.onlineComponents||(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield Zv(n,new o_)),n.onlineComponents}),Ad.apply(this,arguments)}function _E(n){return Wv(n).then(e=>e.persistence)}function Yv(n){return Wv(n).then(e=>e.localStore)}function yE(n){return rg(n).then(e=>e.remoteStore)}function Qv(n){return rg(n).then(e=>e.syncEngine)}function gf(n){return a_.apply(this,arguments)}function a_(){return a_=(0,pe.Z)(function*(n){const e=yield rg(n),t=e.eventManager;return t.onListen=tE.bind(null,e.syncEngine),t.onUnlisten=nE.bind(null,e.syncEngine),t}),a_.apply(this,arguments)}function vE(n,e,t={}){const r=new Sr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(i,a,d,p,y){const E=new ng({next:x=>{a.enqueueAndForget(()=>xv(i,S));const L=x.docs.has(d);!L&&x.fromCache?y.reject(new Pe(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&x.fromCache&&p&&"server"===p.source?y.reject(new Pe(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(x)},error:x=>y.reject(x)}),S=new Rv(jo(d.path),E,{includeMetadataChanges:!0,wo:!0});return Av(i,S)}(yield gf(n),n.asyncQueue,e,t,r)})),r.promise}function wE(n,e,t={}){const r=new Sr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(i,a,d,p,y){const E=new ng({next:x=>{a.enqueueAndForget(()=>xv(i,S)),x.fromCache&&"server"===p.source?y.reject(new Pe(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(x)},error:x=>y.reject(x)}),S=new Rv(d,E,{includeMetadataChanges:!0,wo:!0});return Av(i,S)}(yield gf(n),n.asyncQueue,e,t,r)})),r.promise}class Jv{constructor(e,t,r,i,a,d,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.useFetchStreams=y}}class _f{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof _f&&e.projectId===this.projectId&&e.database===this.database}}const Xv=new Map;function l_(n,e,t){if(!t)throw new Pe(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function DE(n,e,t,r){if(!0===e&&!0===r)throw new Pe(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function TE(n){if(!ct.isDocumentKey(n))throw new Pe(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function IE(n){if(ct.isDocumentKey(n))throw new Pe(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function yf(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":lt()}function Xt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=yf(n);throw new Pe(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function eb(n,e){if(e<=0)throw new Pe(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class SE{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,DE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ig{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new SE({}),this._settingsFrozen=!1,e instanceof _f?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Pe(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _f(i.options.projectId)}(e))}get app(){if(!this._app)throw new Pe(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new SE(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new EM;switch(t.type){case"gapi":const r=t.client;return At(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new tT(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Pe(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Xv.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),Xv.delete(e),t.terminate())}(this),Promise.resolve()}}class Hn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ua(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Hn(this.firestore,e,this._key)}}class Ni{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ni(this.firestore,e,this._query)}}class Ua extends Ni{constructor(e,t,r){super(e,t,jo(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Hn(this.firestore,null,new ct(e))}withConverter(e){return new Ua(this.firestore,e,this._path)}}function AE(n,e,...t){if(n=(0,Ct.m9)(n),l_("collection","path",e),n instanceof ig){const r=un.fromString(e,...t);return IE(r),new Ua(n,null,r)}{if(!(n instanceof Hn||n instanceof Ua))throw new Pe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(e,...t));return IE(r),new Ua(n.firestore,null,r)}}function sg(n,e,...t){if(n=(0,Ct.m9)(n),1===arguments.length&&(e=j0.A()),l_("doc","path",e),n instanceof ig){const r=un.fromString(e,...t);return TE(r),new Hn(n,null,new ct(r))}{if(!(n instanceof Hn||n instanceof Ua))throw new Pe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(e,...t));return TE(r),new Hn(n.firestore,n instanceof Ua?n.converter:null,new ct(r))}}function tb(n,e){return n=(0,Ct.m9)(n),e=(0,Ct.m9)(e),(n instanceof Hn||n instanceof Ua)&&(e instanceof Hn||e instanceof Ua)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ME(n,e){return n=(0,Ct.m9)(n),e=(0,Ct.m9)(e),n instanceof Ni&&e instanceof Ni&&n.firestore===e.firestore&&od(n._query,e._query)&&n.converter===e.converter}class hI{constructor(){this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new qm(this,"async_queue_retry"),this.Ra=()=>{const t=Hm();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ur.er()};const e=Hm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ra)}get isShuttingDown(){return this.ya}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ba(),this.Pa(e)}enterRestrictedMode(e){if(!this.ya){this.ya=!0,this.Ia=e||!1;const t=Hm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ra)}}enqueue(e){if(this.ba(),this.ya)return new Promise(()=>{});const t=new Sr;return this.Pa(()=>this.ya&&this.Ia?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ga.push(e),this.va()))}va(){var e=this;return(0,pe.Z)(function*(){if(0!==e.ga.length){try{yield e.ga[0](),e.ga.shift(),e.ur.reset()}catch(t){if(!gd(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.ga.length>0&&e.ur.Zi(()=>e.va())}})()}Pa(e){const t=this.ma.then(()=>(this.Ea=!0,e().catch(r=>{throw this.Ta=r,this.Ea=!1,cr("INTERNAL UNHANDLED ERROR: ",function(a){let d=a.message||"";return a.stack&&(d=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),d}(r)),r}).then(r=>(this.Ea=!1,r))));return this.ma=t,t}enqueueAfterDelay(e,t,r){this.ba(),this.Aa.indexOf(e)>-1&&(t=0);const i=Qm.createAndSchedule(this,e,t,r,a=>this.Va(a));return this.pa.push(i),i}ba(){this.Ta&&lt()}verifyOperationInProgress(){}Sa(){var e=this;return(0,pe.Z)(function*(){let t;do{t=e.ma,yield t}while(t!==e.ma)})()}Da(e){for(const t of this.pa)if(t.timerId===e)return!0;return!1}Ca(e){return this.Sa().then(()=>{this.pa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.pa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Sa()})}Na(e){this.Aa.push(e)}Va(e){const t=this.pa.indexOf(e);this.pa.splice(t,1)}}function c_(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class fI{constructor(){this._progressObserver={},this._taskCompletionResolver=new Sr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class rr extends ig{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new hI,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||u_(this),this._firestoreClient.terminate()}}function Or(n){return n._firestoreClient||u_(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function u_(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Jv(n._databaseId,a,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var a,p;n._firestoreClient=new NM(n._authCredentials,n._appCheckCredentials,n._queue,r)}function d_(n,e,t){const r=new Sr;return n.asyncQueue.enqueue((0,pe.Z)(function*(){try{yield sI(n,t),yield Zv(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===fe.FAILED_PRECONDITION||a.code===fe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function NE(n){if(n._initialized||n._terminated)throw new Pe(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Fs{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ns{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ns(yr.fromBase64String(e))}catch(t){throw new Pe(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ns(yr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Wo{constructor(e){this._methodName=e}}class h_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Zt(this._lat,e._lat)||Zt(this._long,e._long)}}const UM=/^__.*__$/;class FE{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new bi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Mp(e,this.data,t,this.fieldTransforms)}}class LE{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new bi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function VE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt()}}class f_{constructor(e,t,r,i,a,d){this.settings=e,this.databaseId=t,this.k=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ka(),this.fieldTransforms=a||[],this.fieldMask=d||[]}get path(){return this.settings.path}get xa(){return this.settings.xa}$a(e){return new f_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Oa(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.$a({path:r,Fa:!1});return i.Ma(e),i}La(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.$a({path:r,Fa:!1});return i.ka(),i}Ba(e){return this.$a({path:void 0,Fa:!0})}Ua(e){return Ql(e,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ka(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ma(this.path.get(e))}Ma(e){if(0===e.length)throw this.Ua("Document fields must not be empty");if(VE(this.xa)&&UM.test(e))throw this.Ua('Document fields cannot begin and end with "__"')}}class vI{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.k=r||nr(e)}ja(e,t,r,i=!1){return new f_({xa:e,methodName:t,Ka:r,path:Mn.emptyPath(),Fa:!1,qa:i},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function Jc(n){const e=n._freezeSettings(),t=nr(n._databaseId);return new vI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function og(n,e,t,r,i,a={}){const d=n.ja(a.merge||a.mergeFields?2:0,e,t,i);ib("Data must be an object, but it was:",d,r);const p=HE(r,d);let y,E;if(a.merge)y=new td(d.fieldMask),E=d.fieldTransforms;else if(a.mergeFields){const S=[];for(const x of a.mergeFields){const L=sb(e,x,t);if(!d.contains(L))throw new Pe(fe.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);EI(S,L)||S.push(L)}y=new td(S),E=d.fieldTransforms.filter(x=>y.covers(x.field))}else y=null,E=d.fieldTransforms;return new FE(new Ji(p),y,E)}class Md extends Wo{_toFieldTransform(e){if(2!==e.xa)throw e.Ua(1===e.xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Md}}function ag(n,e,t){return new f_({xa:3,Ka:e.settings.Ka,methodName:n._methodName,Fa:t},e.databaseId,e.k,e.ignoreUndefinedProperties)}class xd extends Wo{_toFieldTransform(e){return new Wh(e.path,new zh)}isEqual(e){return e instanceof xd}}class bI extends Wo{constructor(e,t){super(e),this.Qa=t}_toFieldTransform(e){const t=ag(this,e,!0),r=this.Qa.map(a=>Yl(a,t)),i=new ad(r);return new Wh(e.path,i)}isEqual(e){return this===e}}class UE extends Wo{constructor(e,t){super(e),this.Qa=t}_toFieldTransform(e){const t=ag(this,e,!0),r=this.Qa.map(a=>Yl(a,t)),i=new Zh(r);return new Wh(e.path,i)}isEqual(e){return this===e}}class BE extends Wo{constructor(e,t){super(e),this.Wa=t}_toFieldTransform(e){const t=new Sp(e.k,K0(e.k,this.Wa));return new Wh(e.path,t)}isEqual(e){return this===e}}function nb(n,e,t,r){const i=n.ja(1,e,t);ib("Data must be an object, but it was:",i,r);const a=[],d=Ji.empty();It(r,(y,E)=>{const S=p_(e,y,t);E=(0,Ct.m9)(E);const x=i.La(S);if(E instanceof Md)a.push(S);else{const L=Yl(E,x);null!=L&&(a.push(S),d.set(S,L))}});const p=new td(a);return new LE(d,p,i.fieldTransforms)}function rb(n,e,t,r,i,a){const d=n.ja(1,e,t),p=[sb(e,r,t)],y=[i];if(a.length%2!=0)throw new Pe(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<a.length;L+=2)p.push(sb(e,a[L])),y.push(a[L+1]);const E=[],S=Ji.empty();for(let L=p.length-1;L>=0;--L)if(!EI(E,p[L])){const B=p[L];let W=y[L];W=(0,Ct.m9)(W);const he=d.La(B);if(W instanceof Md)E.push(B);else{const be=Yl(W,he);null!=be&&(E.push(B),S.set(B,be))}}const x=new td(E);return new LE(S,x,d.fieldTransforms)}function jE(n,e,t,r=!1){return Yl(t,n.ja(r?4:3,e))}function Yl(n,e){if(wI(n=(0,Ct.m9)(n)))return ib("Unsupported field value:",e,n),HE(n,e);if(n instanceof Wo)return function(t,r){if(!VE(r.xa))throw r.Ua(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Ua(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Fa&&4!==e.xa)throw e.Ua("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const d of t){let p=Yl(d,r.Ba(a));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Ct.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return K0(r.k,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=ti.fromDate(t);return{timestampValue:cd(r.k,i)}}if(t instanceof ti){const i=new ti(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:cd(r.k,i)}}if(t instanceof h_)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ns)return{bytesValue:Wy(r.k,t._byteString)};if(t instanceof Hn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.Ua(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ky(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.Ua(`Unsupported field value: ${yf(t)}`)}(n,e)}function HE(n,e){const t={};return Ey(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):It(n,(r,i)=>{const a=Yl(i,e.Oa(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function wI(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ti||n instanceof h_||n instanceof ns||n instanceof Hn||n instanceof Wo)}function ib(n,e,t){if(!wI(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=yf(t);throw e.Ua("an object"===r?n+" a custom object":n+" "+r)}var r}function sb(n,e,t){if((e=(0,Ct.m9)(e))instanceof Fs)return e._internalPath;if("string"==typeof e)return p_(n,e);throw Ql("Field path arguments must be of type string or FieldPath.",n,!1,void 0,t)}const vf=new RegExp("[~\\*/\\[\\]]");function p_(n,e,t){if(e.search(vf)>=0)throw Ql(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Fs(...e.split("."))._internalPath}catch(r){throw Ql(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ql(n,e,t,r,i){const a=r&&!r.isEmpty(),d=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(a||d)&&(y+=" (found",a&&(y+=` in field ${r}`),d&&(y+=` in document ${i}`),y+=")"),new Pe(fe.INVALID_ARGUMENT,p+n+y)}function EI(n,e){return n.some(t=>t.isEqual(e))}class bf{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Hn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new CI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ob("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class CI extends bf{data(){return super.data()}}function ob(n,e){return"string"==typeof e?p_(n,e):e instanceof Fs?e._internalPath:e._delegate._internalPath}class Xc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class eu extends bf{constructor(e,t,r,i,a,d){super(e,t,r,i,d),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ob("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class wf extends eu{data(e={}){return super.data(e)}}class Ba{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Xc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new wf(this._firestore,this._userDataWriter,r.key,r,new Xc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new wf(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Xc(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>i||3!==d.type).map(d=>{const p=new wf(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Xc(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,E=-1;return 0!==d.type&&(y=a.indexOf(d.doc.key),a=a.delete(d.doc.key)),1!==d.type&&(a=a.add(d.doc),E=a.indexOf(d.doc.key)),{type:DI(d.type),doc:p,oldIndex:y,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function DI(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt()}}function ab(n,e){return n instanceof eu&&e instanceof eu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ba&&e instanceof Ba&&n._firestore===e._firestore&&ME(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function lb(n){if(ql(n)&&0===n.explicitOrderBy.length)throw new Pe(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ef{}function tu(n,...e){for(const t of e)n=t._apply(n);return n}class TI extends Ef{constructor(e,t,r){super(),this.Ga=e,this.za=t,this.Ha=r,this.type="where"}_apply(e){const t=Jc(e.firestore),r=function(i,a,d,p,y,E,S){let x;if(y.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new Pe(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on FieldPath.documentId().`);if("in"===E||"not-in"===E){hb(S,E);const B=[];for(const W of S)B.push(WE(p,i,W));x={arrayValue:{values:B}}}else x=WE(p,i,S)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||hb(S,E),x=jE(d,"where",S,"in"===E||"not-in"===E);const L=Es.create(y,E,x);return function(B,W){if(W.V()){const be=jc(B);if(null!==be&&!be.isEqual(W.field))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${be.toString()}' and '${W.field.toString()}'`);const nt=id(B);null!==nt&&KE(0,W.field,nt)}const he=function(be,nt){for(const ot of be.filters)if(nt.indexOf(ot.op)>=0)return ot.op;return null}(B,function(be){switch(be){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(W.op));if(null!==he)throw new Pe(fe.INVALID_ARGUMENT,he===W.op?`Invalid query. You cannot use more than one '${W.op.toString()}' filter.`:`Invalid query. You cannot use '${W.op.toString()}' filters with '${he.toString()}' filters.`)}(i,L),L}(e._query,0,t,e.firestore._databaseId,this.Ga,this.za,this.Ha);return new Ni(e.firestore,e.converter,function(i,a){const d=i.filters.concat([a]);return new Hl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),d,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class SI extends Ef{constructor(e,t){super(),this.Ga=e,this.Ja=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Pe(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Pe(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Bc(i,a);return function(p,y){if(null===id(p)){const E=jc(p);null!==E&&KE(0,E,y.field)}}(r,d),d}(e._query,this.Ga,this.Ja);return new Ni(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Hl(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class qE extends Ef{constructor(e,t,r){super(),this.type=e,this.Ya=t,this.Xa=r}_apply(e){return new Ni(e.firestore,e.converter,ym(e._query,this.Ya,this.Xa))}}class cb extends Ef{constructor(e,t,r){super(),this.type=e,this.Za=t,this.tc=r}_apply(e){const t=db(e,this.type,this.Za,this.tc);return new Ni(e.firestore,e.converter,(i=t,new Hl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class ub extends Ef{constructor(e,t,r){super(),this.type=e,this.Za=t,this.tc=r}_apply(e){const t=db(e,this.type,this.Za,this.tc);return new Ni(e.firestore,e.converter,(i=t,new Hl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function db(n,e,t,r){if(t[0]=(0,Ct.m9)(t[0]),t[0]instanceof bf)return function(i,a,d,p,y){if(!p)throw new Pe(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const E=[];for(const S of sd(i))if(S.field.isKeyField())E.push(Ty(a,p.key));else{const x=p.data.field(S.field);if(q0(x))throw new Pe(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const L=S.field.canonicalString();throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}E.push(x)}return new Hh(E,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Jc(n.firestore);return function(a,d,p,y,E,S){const x=a.explicitOrderBy;if(E.length>x.length)throw new Pe(fe.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let B=0;B<E.length;B++){const W=E[B];if(x[B].field.isKeyField()){if("string"!=typeof W)throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof W}`);if(!Py(a)&&-1!==W.indexOf("/"))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${y}() must be a plain document ID, but '${W}' contains a slash.`);const he=a.path.child(un.fromString(W));if(!ct.isDocumentKey(he))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${y}() must result in a valid document path, but '${he}' is not because it contains an odd number of segments.`);const be=new ct(he);L.push(Ty(d,be))}else{const he=jE(p,y,W);L.push(he)}}return new Hh(L,S)}(n._query,n.firestore._databaseId,i,e,t,r)}}function WE(n,e,t){if("string"==typeof(t=(0,Ct.m9)(t))){if(""===t)throw new Pe(fe.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Py(e)&&-1!==t.indexOf("/"))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(un.fromString(t));if(!ct.isDocumentKey(r))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ty(n,new ct(r))}if(t instanceof Hn)return Ty(n,t._key);throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${yf(t)}.`)}function hb(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Pe(fe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function KE(n,e,t){if(!t.isEqual(e))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class fb{convertValue(e,t="none"){switch(Bl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Lc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw lt()}}convertObject(e,t){const r={};return It(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new h_(vr(e.latitude),vr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Cy(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(dm(e));default:return null}}convertTimestamp(e){const t=Ma(e);return new ti(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=un.fromString(e);At(IT(r));const i=new _f(r.get(1),r.get(3)),a=new ct(r.popFirst(5));return i.isEqual(t)||cr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function nu(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class xI extends fb{constructor(e){super(),this.firestore=e}convertBytes(e){return new ns(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hn(this.firestore,null,t)}}class g_{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Jc(e)}set(e,t,r){this._verifyNotCommitted();const i=Ei(e,this._firestore),a=nu(i.converter,t,r),d=og(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(d.toMutation(i._key,Ar.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Ei(e,this._firestore);let d;return d="string"==typeof(t=(0,Ct.m9)(t))||t instanceof Fs?rb(this._dataReader,"WriteBatch.update",a._key,t,r,i):nb(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(d.toMutation(a._key,Ar.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ei(e,this._firestore);return this._mutations=this._mutations.concat(new Em(t._key,Ar.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ei(n,e){if((n=(0,Ct.m9)(n)).firestore!==e)throw new Pe(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Jl extends fb{constructor(e){super(),this.firestore=e}convertBytes(e){return new ns(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hn(this.firestore,null,t)}}function ug(n,e,t){n=Xt(n,Hn);const r=Xt(n.firestore,rr),i=nu(n.converter,e,t);return kd(r,[og(Jc(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Ar.none())])}function YE(n,e,t,...r){n=Xt(n,Hn);const i=Xt(n.firestore,rr),a=Jc(i);let d;return d="string"==typeof(e=(0,Ct.m9)(e))||e instanceof Fs?rb(a,"updateDoc",n._key,e,t,r):nb(a,"updateDoc",n._key,e),kd(i,[d.toMutation(n._key,Ar.exists(!0))])}function pb(n,...e){var t,r,i;n=(0,Ct.m9)(n);let a={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||c_(e[d])||(a=e[d],d++);const p={includeMetadataChanges:a.includeMetadataChanges};if(c_(e[d])){const x=e[d];e[d]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[d+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[d+2]=null===(i=x.complete)||void 0===i?void 0:i.bind(x)}let y,E,S;if(n instanceof Hn)E=Xt(n.firestore,rr),S=jo(n._key.path),y={next:x=>{e[d]&&e[d](mb(E,n,x))},error:e[d+1],complete:e[d+2]};else{const x=Xt(n,Ni);E=Xt(x.firestore,rr),S=x._query;const L=new Jl(E);y={next:B=>{e[d]&&e[d](new Ba(E,L,x,B))},error:e[d+1],complete:e[d+2]},lb(n._query)}return function(x,L,B,W){const he=new ng(W),be=new Rv(L,he,B);return x.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return Av(yield gf(x),be)})),()=>{he.na(),x.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return xv(yield gf(x),be)}))}}(Or(E),S,p,y)}function kd(n,e){return function(t,r){const i=new Sr;return t.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(n,e,t){return Wl.apply(this,arguments)}(yield Qv(t),r,i)})),i.promise}(Or(n),e)}function mb(n,e,t){const r=t.docs.get(e._key),i=new Jl(n);return new eu(n,i,e._key,r,new Xc(t.hasPendingWrites,t.fromCache),e.converter)}class FI extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Jc(e)}get(e){const t=Ei(e,this._firestore),r=new xI(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return lt();const a=i[0];if(a.isFoundDocument())return new bf(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new bf(this._firestore,r,t._key,null,t.converter);throw lt()})}set(e,t,r){const i=Ei(e,this._firestore),a=nu(i.converter,t,r),d=og(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,d),this}update(e,t,r,...i){const a=Ei(e,this._firestore);let d;return d="string"==typeof(t=(0,Ct.m9)(t))||t instanceof Fs?rb(this._dataReader,"Transaction.update",a._key,t,r,i):nb(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,d),this}delete(e){const t=Ei(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ei(e,this._firestore),r=new Jl(this._firestore);return super.get(e).then(i=>new eu(this._firestore,r,t._key,i._document,new Xc(!1,!1),t.converter))}}function wb(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Eb(){if("undefined"==typeof Uint8Array)throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function __(){if("undefined"==typeof atob)throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Vo=Zi.SDK_VERSION,(0,Zi._registerComponent)(new Gn.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new rr(i,new eT(t.getProvider("auth-internal")),new Bo(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,Zi.registerVersion)(Fh,"3.4.2",n),(0,Zi.registerVersion)(Fh,"3.4.2","esm2017")}();class Cf{constructor(e){this._delegate=e}static fromBase64String(e){return __(),new Cf(ns.fromBase64String(e))}static fromUint8Array(e){return Eb(),new Cf(ns.fromUint8Array(e))}toBase64(){return __(),this._delegate.toBase64()}toUint8Array(){return Eb(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function y_(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class eC{enableIndexedDbPersistence(e,t){return function(n,e){NE(n=Xt(n,rr));const t=Or(n),r=n._freezeSettings(),i=new o_;return d_(t,i,new zv(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){NE(n=Xt(n,rr));const e=Or(n),t=n._freezeSettings(),r=new o_;return d_(e,r,new pE(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Pe(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Sr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{yield(t=(0,pe.Z)(function*(r){if(!Pi.Pt())return Promise.resolve();const i=r+"main";yield Pi.delete(i)}),function(r){return t.apply(this,arguments)})(ov(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class tC{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof _f||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Vh("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var i;const a=(n=Xt(n,ig))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Vh("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,p;if("string"==typeof r.mockUserToken)d=r.mockUserToken,p=lr.MOCK_USER;else{d=(0,Ct.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Pe(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new lr(y)}n._authCredentials=new V0(new by(d,p))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield _E(n),t=yield yE(n);return e.setNetworkEnabled(!0),function(r){const i=Ge(r);return i.Gr.delete(0),La(i)}(t)}))}(Or(n=Xt(n,rr)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield _E(n),t=yield yE(n);return e.setNetworkEnabled(!1),(r=(0,pe.Z)(function*(i){const a=Ge(i);a.Gr.add(0),yield cf(a),a.Jr.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Or(n=Xt(n,rr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,DE("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new Sr;return e.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(n,e){return Lv.apply(this,arguments)}(yield Qv(e),t)})),t.promise}(Or(n=Xt(n,rr)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new ng(e);return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield gf(n),i=t,Ge(r).io.add(i),void i.next();var r,i})),()=>{t.na(),n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield gf(n),i=t,void Ge(r).io.delete(i);var r,i}))}}(Or(n=Xt(n,rr)),c_(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Od(this,AE(this._delegate,e))}catch(t){throw Rr(t,"collection()","Firestore.collection()")}}doc(e){try{return new Nn(this,sg(this._delegate,e))}catch(t){throw Rr(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new rs(this,function(n,e){if(n=Xt(n,ig),l_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ni(n,null,(t=e,new Hl(un.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Rr(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e){return function(n,e){const t=new Sr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){const r=yield(i=n,rg(i).then(a=>a.datastore));var i;new PM(n.asyncQueue,r,e,t).run()})),t.promise}(Or(n=Xt(n,rr)),t=>e(new FI(n,t)))}(this._delegate,t=>e(new rC(this,t)))}batch(){return Or(this._delegate),new Cb(new g_(this._delegate,e=>kd(this._delegate,e)))}loadBundle(e){return function(n,e){const t=Or(n=Xt(n,rr)),r=new fI;return function(n,e,t,r){const i=function(a,d){let p;return p="string"==typeof a?(new TextEncoder).encode(a):a,y=function(y,E){if(y instanceof Uint8Array)return gE(y,E);if(y instanceof ArrayBuffer)return gE(new Uint8Array(y),E);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new rI(y,d);var y}(t,nr(e));n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){!function(n,e,t){const r=Ge(n);var i;(i=(0,pe.Z)(function*(a,d,p){try{const y=yield d.getMetadata();if(yield function(L,B){const W=Ge(L),he=$r(B.createTime);return W.persistence.runTransaction("hasNewerBundle","readonly",be=>W.Ye.getBundleMetadata(be,B.id)).then(be=>!!be&&be.createTime.compareTo(he)>=0)}(a.localStore,y))return yield d.close(),void p._completeWith((L=y,{taskState:"Success",documentsLoaded:L.totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}));p._updateProgress(Kw(y));const E=new JT(y,a.localStore,d.k);let S=yield d.Ho();for(;S;){const L=yield E.yo(S);L&&p._updateProgress(L),S=yield d.Ho()}const x=yield E.complete();yield Qc(a,x.In,void 0),yield function(L,B){const W=Ge(L);return W.persistence.runTransaction("Save bundle","readwrite",he=>W.Ye.saveBundleMetadata(he,B))}(a.localStore,y),p._completeWith(x.progress)}catch(y){Vh("SyncEngine",`Loading bundle failed with ${y}`),p._failWith(y)}var L}),function(a,d,p){return i.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield Qv(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,pe.Z)(function*(){return function(t,r){const i=Ge(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ye.getNamedQuery(a,r))}(yield Yv(n),e)}))}(Or(n=Xt(n,rr)),e).then(t=>t?new Ni(n,null,t.query):null)}(this._delegate,e).then(t=>t?new rs(this,t):null)}}class dg extends fb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cf(new ns(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Nn.forKey(t,this.firestore,null)}}class rC{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new dg(e)}get(e){const t=Rd(e);return this._delegate.get(t).then(r=>new v_(this._firestore,new eu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Rd(e);return r?(wb("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Rd(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Rd(e);return this._delegate.delete(t),this}}class Cb{constructor(e){this._delegate=e}set(e,t,r){const i=Rd(e);return r?(wb("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Rd(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Rd(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ru{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new wf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Xl(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=ru.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new ru(e,new dg(e),t),i.set(t,a)),a}}ru.INSTANCES=new WeakMap;class Nn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new dg(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Nn(t,new Hn(t._delegate,r,new ct(e)))}static forKey(e,t,r){return new Nn(t,new Hn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Od(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Od(this.firestore,AE(this._delegate,e))}catch(t){throw Rr(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ct.m9)(e))instanceof Hn&&tb(this._delegate,e)}set(e,t){t=wb("DocumentReference.set",t);try{return t?ug(this._delegate,e,t):ug(this._delegate,e)}catch(r){throw Rr(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?YE(this._delegate,e):YE(this._delegate,e,t,...r)}catch(i){throw Rr(i,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return kd(Xt(n.firestore,rr),[new Em(n._key,Ar.none())])}(this._delegate)}onSnapshot(...e){const t=iC(e),r=sC(e,i=>new v_(this.firestore,new eu(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return pb(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Xt(n,Hn);const e=Xt(n.firestore,rr),t=Or(e),r=new Jl(e);return function(n,e){const t=new Sr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(i,a,d){try{const p=yield function(y,E){const S=Ge(y);return S.persistence.runTransaction("read document","readonly",x=>S.Wn.Rn(x,E))}(i,a);p.isFoundDocument()?d.resolve(p):p.isNoDocument()?d.resolve(null):d.reject(new Pe(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const y=Cd(p,`Failed to get document '${a} from cache`);d.reject(y)}}),function(i,a,d){return r.apply(this,arguments)})(yield Yv(n),e,t);var r})),t.promise}(t,n._key).then(i=>new eu(e,r,n._key,i,new Xc(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Xt(n,Hn);const e=Xt(n.firestore,rr);return vE(Or(e),n._key,{source:"server"}).then(t=>mb(e,n,t))}(this._delegate):function(n){n=Xt(n,Hn);const e=Xt(n.firestore,rr);return vE(Or(e),n._key).then(t=>mb(e,n,t))}(this._delegate),t.then(r=>new v_(this.firestore,new eu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Nn(this.firestore,this._delegate.withConverter(e?ru.getInstance(this.firestore,e):null))}}function Rr(n,e,t){return n.message=n.message.replace(e,t),n}function iC(n){for(const e of n)if("object"==typeof e&&!y_(e))return e;return{}}function sC(n,e){var t,r;let i;return i=y_(n[0])?n[0]:y_(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class v_{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Nn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ab(this._delegate,e._delegate)}}class Xl extends v_{data(e){const t=this._delegate.data(e);return function(n,e){n||lt()}(void 0!==t),t}}class rs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new dg(e)}where(e,t,r){try{return new rs(this.firestore,tu(this._delegate,function(n,e,t){const r=e,i=ob("where",n);return new TI(i,r,t)}(e,t,r)))}catch(i){throw Rr(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new rs(this.firestore,tu(this._delegate,function(n,e="asc"){const t=e,r=ob("orderBy",n);return new SI(r,t)}(e,t)))}catch(r){throw Rr(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new rs(this.firestore,tu(this._delegate,function(n){return eb("limit",n),new qE("limit",n,"F")}(e)))}catch(t){throw Rr(t,"limit()","Query.limit()")}}limitToLast(e){try{return new rs(this.firestore,tu(this._delegate,function(n){return eb("limitToLast",n),new qE("limitToLast",n,"L")}(e)))}catch(t){throw Rr(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new rs(this.firestore,tu(this._delegate,function(...n){return new cb("startAt",n,!0)}(...e)))}catch(t){throw Rr(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new rs(this.firestore,tu(this._delegate,function(...n){return new cb("startAfter",n,!1)}(...e)))}catch(t){throw Rr(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new rs(this.firestore,tu(this._delegate,function(...n){return new ub("endBefore",n,!0)}(...e)))}catch(t){throw Rr(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new rs(this.firestore,tu(this._delegate,function(...n){return new ub("endAt",n,!1)}(...e)))}catch(t){throw Rr(t,"endAt()","Query.endAt()")}}isEqual(e){return ME(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Xt(n,Ni);const e=Xt(n.firestore,rr),t=Or(e),r=new Jl(e);return function(n,e){const t=new Sr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(i,a,d){try{const p=yield sf(i,a,!0),y=new Pv(a,p.zn),E=y.Po(p.documents),S=y.applyChanges(E,!1);d.resolve(S.snapshot)}catch(p){const y=Cd(p,`Failed to execute query '${a} against cache`);d.reject(y)}}),function(i,a,d){return r.apply(this,arguments)})(yield Yv(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Ba(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Xt(n,Ni);const e=Xt(n.firestore,rr),t=Or(e),r=new Jl(e);return wE(t,n._query,{source:"server"}).then(i=>new Ba(e,r,n,i))}(this._delegate):function(n){n=Xt(n,Ni);const e=Xt(n.firestore,rr),t=Or(e),r=new Jl(e);return lb(n._query),wE(t,n._query).then(i=>new Ba(e,r,n,i))}(this._delegate),t.then(r=>new Tb(this.firestore,new Ba(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=iC(e),r=sC(e,i=>new Tb(this.firestore,new Ba(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return pb(this._delegate,t,r)}withConverter(e){return new rs(this.firestore,this._delegate.withConverter(e?ru.getInstance(this.firestore,e):null))}}class Db{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Xl(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Tb{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new rs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Xl(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Db(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Xl(this._firestore,r))})}isEqual(e){return ab(this._delegate,e._delegate)}}class Od extends rs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Nn(this.firestore,e):null}doc(e){try{return new Nn(this.firestore,void 0===e?sg(this._delegate):sg(this._delegate,e))}catch(t){throw Rr(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=Xt(n.firestore,rr),r=sg(n),i=nu(n.converter,e);return kd(t,[og(Jc(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Ar.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Nn(this.firestore,t))}isEqual(e){return tb(this._delegate,e._delegate)}withConverter(e){return new Od(this.firestore,this._delegate.withConverter(e?ru.getInstance(this.firestore,e):null))}}function Rd(n){return Xt(n,Hn)}class Ib{constructor(...e){this._delegate=new Fs(...e)}static documentId(){return new Ib(Mn.keyField().canonicalString())}isEqual(e){return(e=(0,Ct.m9)(e))instanceof Fs&&this._delegate._internalPath.isEqual(e._internalPath)}}class ec{constructor(e){this._delegate=e}static serverTimestamp(){const e=new xd("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new ec(e)}static delete(){const e=new Md("deleteField");return e._methodName="FieldValue.delete",new ec(e)}static arrayUnion(...e){const t=function(...n){return new bI("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new ec(t)}static arrayRemove(...e){const t=function(...n){return new UE("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new ec(t)}static increment(e){const t=function(n){return new BE("increment",n)}(e);return t._methodName="FieldValue.increment",new ec(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const oC={Firestore:tC,GeoPoint:h_,Timestamp:ti,Blob:Cf,Transaction:rC,WriteBatch:Cb,DocumentReference:Nn,DocumentSnapshot:v_,Query:rs,QueryDocumentSnapshot:Xl,QuerySnapshot:Tb,CollectionReference:Od,FieldPath:Ib,FieldValue:ec,setLogLevel:function(n){!function(n){Uo.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,e){n.INTERNAL.registerComponent(new Gn.wA("firestore-compat",t=>((e,t)=>new tC(e,t,new eC))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},oC)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.11")}(Cl.Z);var w_=P(3719),Sb=P(4763),iu=P(9985);function ii(n,e){return(0,Ir.e)((t,r)=>{let i=null,a=0,d=!1;const p=()=>d&&!i&&r.complete();t.subscribe(new Pn.Q(r,y=>{null==i||i.unsubscribe();let E=0;const S=a++;(0,iu.Xf)(n(y,S)).subscribe(i=new Pn.Q(r,x=>r.next(e?e(y,x,S,E++):x),()=>{i=null,p()}))},()=>{d=!0,p()}))})}var lC=P(1733);class E_ extends Ft.x{constructor(e=1/0,t=1/0,r=lC.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:d}=this;t||(r.push(e),!i&&r.push(a.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let d=0;d<a.length&&!e.closed;d+=r?1:2)e.next(a[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const d=t.now();let p=0;for(let y=1;y<r.length&&r[y]<=d;y+=2)p=y;p&&r.splice(0,p+1)}}}var cC=P(3174);function uC(n,e,t){var r,i;let a,d=!1;return n&&"object"==typeof n?(a=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(i=n.windowTime)&&void 0!==i?i:1/0,d=!!n.refCount,t=n.scheduler):a=null!=n?n:1/0,(0,cC.B)({connector:()=>new E_(a,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:d})}const Df=(0,P(4893).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var su=P(9468);function dC(n){return(0,Ir.e)((e,t)=>{let r=!1;e.subscribe(new Pn.Q(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Mb(n=hC){return(0,Ir.e)((e,t)=>{let r=!1;e.subscribe(new Pn.Q(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function hC(){return new Df}function ou(n,e){const t=arguments.length>=2;return r=>r.pipe(n?pr((i,a)=>n(i,a,r)):gi.y,(0,su.q)(1),t?dC(e):Mb(()=>new Df))}var tc=P(5044);function xb(n,e){return(0,tc.m)(e)?ii(()=>n,e):ii(()=>n)}var C_=P(5222);P(7713);const $I=new Map,$M={activated:!1,tokenObservers:[]},I_={initialized:!1,enabled:!1};function Ci(n){return $I.get(n)||$M}function Ls(n,e){$I.set(n,e)}function nc(){return I_}class _C{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,pe.Z)(function*(){t.stop();try{t.pending=new Ct.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Ct.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const si=new Ct.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ZI(n){if(!Ci(n).activated)throw si.create("use-before-activation",{appName:n.name})}function fg(n,e){return Rb.apply(this,arguments)}function Rb(){return Rb=(0,pe.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});i&&(r["X-Firebase-Client"]=i.getPlatformInfoString());const a={method:"POST",body:JSON.stringify(e),headers:r};let d,p;try{d=yield fetch(n,a)}catch(x){throw si.create("fetch-network-error",{originalErrorMessage:x.message})}if(200!==d.status)throw si.create("fetch-status-error",{httpStatus:d.status});try{p=yield d.json()}catch(x){throw si.create("fetch-parse-error",{originalErrorMessage:x.message})}const y=p.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw si.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const E=1e3*Number(y[1]),S=Date.now();return{token:p.attestationToken,expireTimeMillis:S+E,issuedAtTimeMillis:S}}),Rb.apply(this,arguments)}function Pb(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const pg="firebase-app-check-store";let x_=null;function bC(){return x_||(x_=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(si.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(pg,{keyPath:"compositeKey"})}}catch(t){e(si.create("storage-open",{originalErrorMessage:t.message}))}}),x_)}function k_(){return k_=(0,pe.Z)(function*(n,e){const r=(yield bC()).transaction(pg,"readwrite"),a=r.objectStore(pg).put({compositeKey:n,value:e});return new Promise((d,p)=>{a.onsuccess=y=>{d()},r.onerror=y=>{var E;p(si.create("storage-set",{originalErrorMessage:null===(E=y.target.error)||void 0===E?void 0:E.message}))}})}),k_.apply(this,arguments)}const is=new Yr.Yd("@firebase/app-check");function DC(n,e){return(0,Ct.hl)()?function(n,e){return function(n,e){return k_.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{is.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function IC(){return nc().enabled}function Bb(){return jb.apply(this,arguments)}function jb(){return jb=(0,pe.Z)(function*(){const n=nc();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),jb.apply(this,arguments)}const SC={error:"UNKNOWN_ERROR"};function AC(n){return Ct.US.encodeString(JSON.stringify(n),!1)}function R_(n){return Hb.apply(this,arguments)}function Hb(){return Hb=(0,pe.Z)(function*(n,e=!1){const t=n.app;ZI(t);const r=Ci(t);let a,i=r.token;if(!i){const y=yield r.cachedTokenPromise;y&&gg(y)&&(i=y)}if(!e&&i&&gg(i))return{token:i.token};let p,d=!1;if(IC()){r.exchangeTokenPromise||(r.exchangeTokenPromise=fg(Pb(t,yield Bb()),n.platformLoggerProvider).then(E=>(r.exchangeTokenPromise=void 0,E)),d=!0);const y=yield r.exchangeTokenPromise;return yield DC(t,y),Ls(t,Object.assign(Object.assign({},r),{token:y})),{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(y=>(r.exchangeTokenPromise=void 0,y)),d=!0),i=yield r.exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?is.warn(y.message):is.error(y),a=y}return i?(p={token:i.token},Ls(t,Object.assign(Object.assign({},r),{token:i})),yield DC(t,i)):p=kC(a),d&&xC(t,p),p}),Hb.apply(this,arguments)}function Pd(n,e){const t=Ci(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ls(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function N_(n){const{app:e}=n,t=Ci(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new _C((0,pe.Z)(function*(){let r;if(r=Ci(e).token?yield R_(n,!0):yield R_(n),r.error)throw r.error}),()=>!0,()=>{const t=Ci(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ls(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function xC(n,e){const t=Ci(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function gg(n){return n.expireTimeMillis-Date.now()>0}function kC(n){return{token:AC(SC),error:n}}class JI{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=Ci(this.app);for(const t of e)Pd(this.app,t.next);return Promise.resolve()}}const cS="app-check-internal";(0,Zi._registerComponent)(new Gn.wA("app-check",n=>function(n,e){return new JI(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(cS).initialize()})),(0,Zi._registerComponent)(new Gn.wA(cS,n=>function(n){return{getToken:e=>R_(n,e),addTokenListener:e=>function(n,e,t,r){const{app:i}=n,a=Ci(i),d={next:t,error:r,type:e};if(Ls(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,d]})),a.token&&gg(a.token)){const p=a.token;Promise.resolve().then(()=>{t({token:p.token}),N_(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>N_(n))}(n,"INTERNAL",e),removeTokenListener:e=>Pd(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Zi.registerVersion)("@firebase/app-check","0.5.3");class zb{constructor(){return(0,dn.vb)("app-check")}}"undefined"!=typeof window&&window;const BC=new c.OlP("angularfire2.auth.use-emulator"),jC=new c.OlP("angularfire2.auth.settings"),HC=new c.OlP("angularfire2.auth.tenant-id"),qC=new c.OlP("angularfire2.auth.langugage-code"),yS=new c.OlP("angularfire2.auth.use-device-language"),$C=new c.OlP("angularfire.auth.persistence"),GC=(n,e,t,r,i,a,d,p)=>(0,gr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,a&&y.useDeviceLanguage(),d)for(const[E,S]of Object.entries(d))y.settings[E]=S;return p&&y.setPersistence(p),y},[t,r,i,a,d,p]);let Wb=(()=>{class n{constructor(t,r,i,a,d,p,y,E,S,x,L,B){const W=new Ft.x,he=dt(void 0).pipe((0,Sb.Q)(d.outsideAngular),ii(()=>a.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,4891)))),(0,at.U)(()=>(0,gr.on)(t,a,r)),(0,at.U)(be=>GC(be,a,p,E,S,x,y,L)),uC({bufferSize:1,refCount:!1}));if(Vr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=dt(null);else{he.pipe(ou()).subscribe();const nt=he.pipe(ii(Ze=>Ze.getRedirectResult().then(Gt=>Gt,()=>null)),dn.iC,uC({bufferSize:1,refCount:!1})),ot=he.pipe(ii(Ze=>new Rn.y(Gt=>({unsubscribe:a.runOutsideAngular(()=>Ze.onAuthStateChanged(xn=>Gt.next(xn),xn=>Gt.error(xn),()=>Gt.complete()))})))),ft=he.pipe(ii(Ze=>new Rn.y(Gt=>({unsubscribe:a.runOutsideAngular(()=>Ze.onIdTokenChanged(xn=>Gt.next(xn),xn=>Gt.error(xn),()=>Gt.complete()))}))));this.authState=nt.pipe(xb(ot),(0,C_.R)(d.outsideAngular),(0,Sb.Q)(d.insideAngular)),this.user=nt.pipe(xb(ft),(0,C_.R)(d.outsideAngular),(0,Sb.Q)(d.insideAngular)),this.idToken=this.user.pipe(ii(Ze=>Ze?(0,wn.D)(Ze.getIdToken()):dt(null))),this.idTokenResult=this.user.pipe(ii(Ze=>Ze?(0,wn.D)(Ze.getIdTokenResult()):dt(null))),this.credential=(0,w_.T)(nt,W,this.authState.pipe(pr(Ze=>!Ze))).pipe((0,at.U)(Ze=>(null==Ze?void 0:Ze.user)?Ze:null),(0,C_.R)(d.outsideAngular),(0,Sb.Q)(d.insideAngular))}return(0,gr.pX)(this,he,a,{spy:{apply:(be,nt,ot)=>{(be.startsWith("signIn")||be.startsWith("createUser"))&&ot.then(ft=>W.next(ft))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(gr.Dh),c.LFG(gr.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(dn.HU),c.LFG(BC,8),c.LFG(jC,8),c.LFG(HC,8),c.LFG(qC,8),c.LFG(yS,8),c.LFG($C,8),c.LFG(zb,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function zC(n,e){return function(n,e=Ec.z){return new Rn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function Kb(n,e){return zC(n,e).pipe((0,at.U)(t=>({payload:t,type:"query"})))}function Yb(n,e){return Kb(n,e).pipe(El(void 0),Io(),(0,at.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,p)=>{const y=i.find(S=>S.doc.ref.isEqual(d.ref)),E=null==t?void 0:t.payload.docs.find(S=>S.ref.isEqual(d.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(d.metadata)||!y&&E&&JSON.stringify(E.metadata)===JSON.stringify(d.metadata)||a.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:d}})}),a}))}function wS(n,e,t){return Yb(n,t).pipe(Xs((r,i)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return ZC(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return ZC(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ZC(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),Nu(),(0,at.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function ZC(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function WC(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class ES{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Yb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,at.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(El(void 0),Io(),pr(([r,i])=>i.length>0||!r),(0,at.U)(([r,i])=>i),dn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Xs((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=WC(e);return wS(this.query,t,this.afs.schedulers.outsideAngular).pipe(dn.iC)}valueChanges(e={}){return Kb(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),dn.iC)}get(e){return(0,wn.D)(this.query.get(e)).pipe(dn.iC)}add(e){return this.ref.add(e)}doc(e){return new CS(this.ref.doc(e),this.afs)}}class CS{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=u(r,t);return new ES(i,a,this.afs)}snapshotChanges(){return function(n,e){return zC(n,e).pipe(El(void 0),Io(),(0,at.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(dn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,at.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,wn.D)(this.ref.get(e)).pipe(dn.iC)}}class ax{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Yb(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),pr(t=>t.length>0),dn.iC):Yb(this.query,this.afs.schedulers.outsideAngular).pipe(dn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Xs((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=WC(e);return wS(this.query,t,this.afs.schedulers.outsideAngular).pipe(dn.iC)}valueChanges(e={}){return Kb(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),dn.iC)}get(e){return(0,wn.D)(this.query.get(e)).pipe(dn.iC)}}const lx=new c.OlP("angularfire2.enableFirestorePersistence"),s=new c.OlP("angularfire2.firestore.persistenceSettings"),o=new c.OlP("angularfire2.firestore.settings"),l=new c.OlP("angularfire2.firestore.use-emulator");function u(n,e=(t=>t)){return{query:e(n),ref:n}}let h=(()=>{class n{constructor(t,r,i,a,d,p,y,E,S,x,L,B,W,he,be,nt,ot){this.schedulers=y;const ft=(0,gr.on)(t,p,r),Ze=S;x&&GC(ft,p,L,W,he,be,B,nt),[this.firestore,this.persistenceEnabled$]=(0,gr.cc)(`${ft.name}.firestore`,"AngularFirestore",ft.name,()=>{const Gt=p.runOutsideAngular(()=>ft.firestore());if(a&&Gt.settings(a),Ze&&Gt.useEmulator(...Ze),i&&!Vr(d)){const xn=()=>{try{return(0,wn.D)(Gt.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(dr){return"undefined"!=typeof console&&console.warn(dr),dt(!1)}};return[Gt,p.runOutsideAngular(xn)]}return[Gt,dt(!1)]},[a,Ze,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:d}=u(i,r),p=this.schedulers.ngZone.run(()=>a);return new ES(p,d,this)}collectionGroup(t,r){const i=r||(d=>d),a=this.firestore.collectionGroup(t);return new ax(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new CS(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(gr.Dh),c.LFG(gr.xv,8),c.LFG(lx,8),c.LFG(o,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(dn.HU),c.LFG(s,8),c.LFG(l,8),c.LFG(Wb,8),c.LFG(BC,8),c.LFG(jC,8),c.LFG(HC,8),c.LFG(qC,8),c.LFG(yS,8),c.LFG($C,8),c.LFG(zb,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();const{isArray:v}=Array,{getPrototypeOf:w,prototype:C,keys:M}=Object;function O(n){if(1===n.length){const e=n[0];if(v(e))return{args:e,keys:null};if(function(n){return n&&"object"==typeof n&&w(n)===C}(e)){const t=M(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:$}=Array;function _e(n){return(0,at.U)(e=>function(n,e){return $(e)?n(...e):n(e)}(n,e))}function Le(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var qe=P(8395);function _t(n,e,t){n?(0,qe.f)(t,n,e):e()}function qt(n){return new Rn.y(e=>{(0,iu.Xf)(n()).subscribe(e)})}var Yt=P(5583),oi=P(7908);function lu(){return(0,Ir.e)((n,e)=>{let t=null;n._refCount++;const r=new Pn.Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Qb extends Rn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Ir.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new oi.w0;const t=this.getSubject();e.add(this.source.subscribe(new Pn.Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=oi.w0.EMPTY)}return e}refCount(){return lu()(this)}}function ja(n){return(0,Ir.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe(new Pn.Q(t,void 0,void 0,d=>{a=(0,iu.Xf)(n(d,ja(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var Gr=P(5724);function Nd(n,e){return(0,tc.m)(e)?(0,Gr.z)(n,e,1):(0,Gr.z)(n,1)}function mg(n){return n<=0?()=>Yt.E:(0,Ir.e)((e,t)=>{let r=[];e.subscribe(new Pn.Q(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}var ss=P(7384);class Ko{constructor(e,t){this.id=e,this.url=t}}class DS extends Ko{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class e0 extends Ko{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class cx extends Ko{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class sP extends Ko{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class oP extends Ko{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aP extends Ko{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lP extends Ko{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class cP extends Ko{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uP extends Ko{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ux{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class dx{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class dP{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hP{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fP{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pP{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hx{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Wt="primary";class gP{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function j_(n){return new gP(n)}const fx="ngNavigationCancelingError";function TS(n){const e=Error("NavigationCancelingError: "+n);return e[fx]=!0,e}function _P(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const d=r[a],p=n[a];if(d.startsWith(":"))i[d.substring(1)]=p;else if(d!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function cu(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!px(n[i],e[i]))return!1;return!0}function px(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function gx(n){return Array.prototype.concat.apply([],n)}function mx(n){return n.length>0?n[n.length-1]:null}function os(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function uu(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,wn.D)(Promise.resolve(n)):dt(n)}const bP={exact:function vx(n,e,t){if(!yg(n.segments,e.segments)||!KC(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!vx(n.children[r],e.children[r],t))return!1;return!0},subset:bx},_x={exact:function(n,e){return cu(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>px(n[t],e[t]))},ignored:()=>!0};function yx(n,e,t){return bP[t.paths](n.root,e.root,t.matrixParams)&&_x[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function bx(n,e,t){return wx(n,e,e.segments,t)}function wx(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!yg(i,t)||e.hasChildren()||!KC(i,t,r))}if(n.segments.length===t.length){if(!yg(n.segments,t)||!KC(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!bx(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(yg(n.segments,i)&&KC(n.segments,i,r)&&n.children[Wt])&&wx(n.children[Wt],e,a,r)}}function KC(n,e,t){return e.every((r,i)=>_x[t](n[i].parameters,r.parameters))}class _g{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=j_(this.queryParams)),this._queryParamMap}toString(){return TP.serialize(this)}}class en{constructor(e,t){this.segments=e,this.children=t,this.parent=null,os(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return YC(this)}}class t0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=j_(this.parameters)),this._parameterMap}toString(){return Ix(this)}}function yg(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Ex{}class Cx{parse(e){const t=new PP(e);return new _g(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${n0(e.root,!0)}`,r=function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${QC(t)}=${QC(i)}`).join("&"):`${QC(t)}=${QC(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const TP=new Cx;function YC(n){return n.segments.map(e=>Ix(e)).join("/")}function n0(n,e){if(!n.hasChildren())return YC(n);if(e){const t=n.children[Wt]?n0(n.children[Wt],!1):"",r=[];return os(n.children,(i,a)=>{a!==Wt&&r.push(`${a}:${n0(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return os(n.children,(r,i)=>{i===Wt&&(t=t.concat(e(r,i)))}),os(n.children,(r,i)=>{i!==Wt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Wt?[n0(n.children[Wt],!1)]:[`${i}:${n0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Wt]?`${YC(n)}/${t[0]}`:`${YC(n)}/(${t.join("//")})`}}function Dx(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function QC(n){return Dx(n).replace(/%3B/gi,";")}function IS(n){return Dx(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function JC(n){return decodeURIComponent(n)}function Tx(n){return JC(n.replace(/\+/g,"%20"))}function Ix(n){return`${IS(n.path)}${function(n){return Object.keys(n).map(e=>`;${IS(e)}=${IS(n[e])}`).join("")}(n.parameters)}`}const MP=/^[^\/()?;=#]+/;function XC(n){const e=n.match(MP);return e?e[0]:""}const xP=/^[^=?&#]+/,OP=/^[^&#]+/;class PP{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new en([],{}):new en([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Wt]=new en(e,t)),r}parseSegment(){const e=XC(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new t0(JC(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=XC(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=XC(this.remaining);i&&(r=i,this.capture(r))}e[JC(t)]=JC(r)}parseQueryParam(e){const t=function(n){const e=n.match(xP);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function(n){const e=n.match(OP);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const i=Tx(t),a=Tx(r);if(e.hasOwnProperty(i)){let d=e[i];Array.isArray(d)||(d=[d],e[i]=d),d.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=XC(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Wt);const d=this.parseChildren();t[a]=1===Object.keys(d).length?d[Wt]:new en([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Sx{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=SS(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=SS(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=AS(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return AS(e,this._root).map(t=>t.value)}}function SS(n,e){if(n===e.value)return e;for(const t of e.children){const r=SS(n,t);if(r)return r}return null}function AS(n,e){if(n===e.value)return[e];for(const t of e.children){const r=AS(n,t);if(r.length)return r.unshift(e),r}return[]}class Fd{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function H_(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Ax extends Sx{constructor(e,t){super(e),this.snapshot=t,MS(this,e)}toString(){return this.snapshot.toString()}}function Mx(n,e){const t=function(n,e){const d=new eD([],{},{},"",{},Wt,e,null,n.root,-1,{});return new kx("",new Fd(d,[]))}(n,e),r=new bn([new t0("",{})]),i=new bn({}),a=new bn({}),d=new bn({}),p=new bn(""),y=new Tf(r,i,d,p,a,Wt,e,t.root);return y.snapshot=t.root,new Ax(new Fd(y,[]),t)}class Tf{constructor(e,t,r,i,a,d,p,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=d,this.component=p,this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,at.U)(e=>j_(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,at.U)(e=>j_(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xx(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:We(We({},e.params),t.params),data:We(We({},e.data),t.data),resolve:We(We({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class eD{constructor(e,t,r,i,a,d,p,y,E,S,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=d,this.component=p,this.routeConfig=y,this._urlSegment=E,this._lastPathIndex=S,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=j_(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=j_(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class kx extends Sx{constructor(e,t){super(t),this.url=e,MS(this,t)}toString(){return Ox(this._root)}}function MS(n,e){e.value._routerState=n,e.children.forEach(t=>MS(n,t))}function Ox(n){const e=n.children.length>0?` { ${n.children.map(Ox).join(", ")} } `:"";return`${n.value}${e}`}function xS(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,cu(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),cu(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!cu(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),cu(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function kS(n,e){const t=cu(n.params,e.params)&&function(n,e){return yg(n,e)&&n.every((t,r)=>cu(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||kS(n.parent,e.parent))}function r0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return r0(n,r,i);return r0(n,r)})}(n,e,t);return new Fd(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const d=a.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(p=>r0(n,p)),d}}const r=function(n){return new Tf(new bn(n.url),new bn(n.params),new bn(n.queryParams),new bn(n.fragment),new bn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>r0(n,a));return new Fd(r,i)}}function tD(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function s0(n){return"object"==typeof n&&null!=n&&n.outlets}function OS(n,e,t,r,i){let a={};return r&&os(r,(d,p)=>{a[p]=Array.isArray(d)?d.map(y=>`${y}`):`${d}`}),new _g(t.root===n?e:Rx(t.root,n,e),a,i)}function Rx(n,e,t){const r={};return os(n.children,(i,a)=>{r[a]=i===e?t:Rx(i,e,t)}),new en(n.segments,r)}class Px{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&tD(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(s0);if(i&&i!==mx(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class RS{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Nx(n,e,t){if(n||(n=new en([],{})),0===n.segments.length&&n.hasChildren())return nD(n,e,t);const r=function(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const d=n.segments[i],p=t[r];if(s0(p))break;const y=`${p}`,E=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&E&&"object"==typeof E&&void 0===E.outlets){if(!Lx(y,E,d))return a;r+=2}else{if(!Lx(y,{},d))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new en(n.segments.slice(0,r.pathIndex),{});return a.children[Wt]=new en(n.segments.slice(r.pathIndex),n.children),nD(a,0,i)}return r.match&&0===i.length?new en(n.segments,{}):r.match&&!n.hasChildren()?PS(n,e,t):r.match?nD(n,0,i):PS(n,e,t)}function nD(n,e,t){if(0===t.length)return new en(n.segments,{});{const r=function(n){return s0(n[0])?n[0].outlets:{[Wt]:n}}(t),i={};return os(r,(a,d)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[d]=Nx(n.children[d],e,a))}),os(n.children,(a,d)=>{void 0===r[d]&&(i[d]=a)}),new en(n.segments,i)}}function PS(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(s0(a)){const y=zP(a.outlets);return new en(r,y)}if(0===i&&tD(t[0])){r.push(new t0(n.segments[e].path,Fx(t[0]))),i++;continue}const d=s0(a)?a.outlets[Wt]:`${a}`,p=i<t.length-1?t[i+1]:null;d&&p&&tD(p)?(r.push(new t0(d,Fx(p))),i+=2):(r.push(new t0(d,{})),i++)}return new en(r,{})}function zP(n){const e={};return os(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=PS(new en([],{}),0,t))}),e}function Fx(n){const e={};return os(n,(t,r)=>e[r]=`${t}`),e}function Lx(n,e,t){return n==t.path&&cu(e,t.parameters)}class WP{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),xS(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=H_(t);e.children.forEach(a=>{const d=a.value.outlet;this.deactivateRoutes(a,i[d],r),delete i[d]}),os(i,(a,d)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const d=r.getContext(i.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=H_(e);for(const d of Object.keys(a))this.deactivateRouteAndItsChildren(a[d],i);if(r&&r.outlet){const d=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=H_(e);for(const d of Object.keys(a))this.deactivateRouteAndItsChildren(a[d],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=H_(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new pP(a.value.snapshot))}),e.children.length&&this.forwardEvent(new hP(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(xS(i),i===a)if(i.component){const d=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const d=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),d.children.onOutletReAttached(p.contexts),d.attachRef=p.componentRef,d.route=p.route.value,d.outlet&&d.outlet.attach(p.componentRef,p.route.value),xS(p.route.value),this.activateChildRoutes(e,null,d.children)}else{const p=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),y=p?p.module.componentFactoryResolver:null;d.attachRef=null,d.route=i,d.resolver=y,d.outlet&&d.outlet.activateWith(i,y),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class NS{constructor(e,t){this.routes=e,this.module=t}}function If(n){return"function"==typeof n}function vg(n){return n instanceof _g}const o0=Symbol("INITIAL_VALUE");function a0(){return ii(n=>function(...n){const e=(0,gs.yG)(n),t=(0,gs.jO)(n),{args:r,keys:i}=O(n);if(0===r.length)return(0,wn.D)([],e);const a=new Rn.y(function(n,e,t=gi.y){return r=>{_t(e,()=>{const{length:i}=n,a=new Array(i);let d=i,p=i;for(let y=0;y<i;y++)_t(e,()=>{const E=(0,wn.D)(n[y],e);let S=!1;E.subscribe(new Pn.Q(r,x=>{a[y]=x,S||(S=!0,p--),p||r.next(t(a.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,i?d=>Le(i,d):gi.y));return t?a.pipe(_e(t)):a}(n.map(e=>e.pipe((0,su.q)(1),El(o0)))).pipe(Xs((e,t)=>{let r=!1;return t.reduce((i,a,d)=>i!==o0?i:(a===o0&&(r=!0),r||!1!==a&&d!==t.length-1&&!vg(a)?i:a),e)},o0),pr(e=>e!==o0),(0,at.U)(e=>vg(e)?e:!0===e),(0,su.q)(1)))}class tN{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new l0,this.attachRef=null}}class l0{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new tN,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let FS=(()=>{class n{constructor(t,r,i,a,d){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.name=a||Wt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,y=new nN(t,p,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,y),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(l0),c.Y36(c.s_b),c.Y36(c._Vd),c.$8M("name"),c.Y36(c.sBO))},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class nN{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Tf?this.route:e===l0?this.childContexts:this.parent.get(e,t)}}let Vx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},directives:[FS],encapsulation:2}),n})();function Ux(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];rN(r,iN(e,r))}}function rN(n,e){n.children&&Ux(n.children,e)}function iN(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function LS(n){const e=n.children&&n.children.map(LS),t=e?Di(We({},n),{children:e}):We({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Wt&&(t.component=Vx),t}function Ha(n){return n.outlet||Wt}function Bx(n,e){const t=n.filter(r=>Ha(r)===e);return t.push(...n.filter(r=>Ha(r)!==e)),t}const jx={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function rD(n,e,t){var p;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?We({},jx):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||_P)(t,n,e);if(!i)return We({},jx);const a={};os(i.posParams,(y,E)=>{a[E]=y.path});const d=i.consumed.length>0?We(We({},a),i.consumed[i.consumed.length-1].parameters):a;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:d,positionalParamSegments:null!=(p=i.posParams)?p:{}}}function iD(n,e,t,r,i="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>sD(n,e,r)&&Ha(r)!==Wt)}(n,t,r)){const d=new en(e,function(n,e,t,r){const i={};i[Wt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Ha(a)!==Wt){const d=new en([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,i[Ha(a)]=d}return i}(n,e,r,new en(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>sD(n,e,r))}(n,t,r)){const d=new en(n.segments,function(n,e,t,r,i,a){const d={};for(const p of r)if(sD(n,t,p)&&!i[Ha(p)]){const y=new en([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===a?n.segments.length:e.length,d[Ha(p)]=y}return We(We({},i),d)}(n,e,t,r,n.children,i));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const a=new en(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function sD(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Hx(n,e,t,r){return!!(Ha(n)===r||r!==Wt&&sD(e,t,n))&&("**"===n.path||rD(e,n,t).matched)}function qx(n,e,t){return 0===e.length&&!n.children[t]}class c0{constructor(e){this.segmentGroup=e||null}}class $x{constructor(e){this.urlTree=e}}function oD(n){return new Rn.y(e=>e.error(new c0(n)))}function Gx(n){return new Rn.y(e=>e.error(new $x(n)))}function cN(n){return new Rn.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class hN{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(c.h0i)}apply(){const e=iD(this.urlTree.root,[],[],this.config).segmentGroup,t=new en(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Wt).pipe((0,at.U)(a=>this.createUrlTree(VS(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ja(a=>{if(a instanceof $x)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof c0?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Wt).pipe((0,at.U)(i=>this.createUrlTree(VS(i),e.queryParams,e.fragment))).pipe(ja(i=>{throw i instanceof c0?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new en([],{[Wt]:e}):e;return new _g(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,at.U)(a=>new en([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,wn.D)(i).pipe(Nd(a=>{const d=r.children[a],p=Bx(t,a);return this.expandSegmentGroup(e,p,d,a).pipe((0,at.U)(y=>({segment:y,outlet:a})))}),Xs((a,d)=>(a[d.outlet]=d.segment,a),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?pr((i,a)=>n(i,a,r)):gi.y,mg(1),t?dC(e):Mb(()=>new Df))}())}expandSegment(e,t,r,i,a,d){return(0,wn.D)(r).pipe(Nd(p=>this.expandSegmentAgainstRoute(e,t,r,p,i,a,d).pipe(ja(E=>{if(E instanceof c0)return dt(null);throw E}))),ou(p=>!!p),ja((p,y)=>{if(p instanceof Df||"EmptyError"===p.name){if(qx(t,i,a))return dt(new en([],{}));throw new c0(t)}throw p}))}expandSegmentAgainstRoute(e,t,r,i,a,d,p){return Hx(i,t,a,d)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,d):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,d):oD(t):oD(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,d){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Gx(a):this.lineralizeSegments(r,a).pipe((0,Gr.z)(d=>{const p=new en(d,{});return this.expandSegment(e,p,t,d,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,d){const{matched:p,consumedSegments:y,lastChild:E,positionalParamSegments:S}=rD(t,i,a);if(!p)return oD(t);const x=this.applyRedirectCommands(y,i.redirectTo,S);return i.redirectTo.startsWith("/")?Gx(x):this.lineralizeSegments(i,x).pipe((0,Gr.z)(L=>this.expandSegment(e,t,r,L.concat(a.slice(E)),d,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?dt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,at.U)(L=>(r._loadedConfig=L,new en(i,{})))):dt(new en(i,{}));const{matched:d,consumedSegments:p,lastChild:y}=rD(t,r,i);if(!d)return oD(t);const E=i.slice(y);return this.getChildConfig(e,r,i).pipe((0,Gr.z)(x=>{const L=x.module,B=x.routes,{segmentGroup:W,slicedSegments:he}=iD(t,p,E,B),be=new en(W.segments,W.children);if(0===he.length&&be.hasChildren())return this.expandChildren(L,B,be).pipe((0,at.U)(Ze=>new en(p,Ze)));if(0===B.length&&0===he.length)return dt(new en(p,{}));const nt=Ha(r)===a;return this.expandSegment(L,be,B,he,nt?Wt:a,!0).pipe((0,at.U)(ft=>new en(p.concat(ft.segments),ft.children)))}))}getChildConfig(e,t,r){return t.children?dt(new NS(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?dt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Gr.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,at.U)(a=>(t._loadedConfig=a,a))):function(n){return new Rn.y(e=>e.error(TS(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):dt(new NS([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;if(!i||0===i.length)return dt(!0);const a=i.map(d=>{const p=e.get(d);let y;if(function(n){return n&&If(n.canLoad)}(p))y=p.canLoad(t,r);else{if(!If(p))throw new Error("Invalid CanLoad guard");y=p(t,r)}return uu(y)});return dt(a).pipe(a0(),(0,ss.b)(d=>{if(!vg(d))return;const p=TS(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw p.url=d,p}),(0,at.U)(d=>!0===d))}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return dt(r);if(i.numberOfChildren>1||!i.children[Wt])return cN(e.redirectTo);i=i.children[Wt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new _g(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return os(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[a]=t[p]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let d={};return os(t.children,(p,y)=>{d[y]=this.createSegmentGroup(e,p,r,i)}),new en(a,d)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function VS(n){const e={};for(const r of Object.keys(n.children)){const a=VS(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function(n){if(1===n.numberOfChildren&&n.children[Wt]){const e=n.children[Wt];return new en(n.segments.concat(e.segments),e.children)}return n}(new en(n.segments,e))}class zx{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class aD{constructor(e,t){this.component=e,this.route=t}}function gN(n,e,t){const r=n._root;return u0(r,e?e._root:null,t,[r.value])}function lD(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function u0(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=H_(e);return n.children.forEach(d=>{(function(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,d=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(d&&a.routeConfig===d.routeConfig){const y=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!yg(n.url,e.url);case"pathParamsOrQueryParamsChange":return!yg(n.url,e.url)||!cu(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kS(n,e)||!cu(n.queryParams,e.queryParams);default:return!kS(n,e)}}(d,a,a.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new zx(r)):(a.data=d.data,a._resolvedData=d._resolvedData),u0(n,e,a.component?p?p.children:null:t,r,i),y&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new aD(p.outlet.component,d))}else d&&d0(e,p,i),i.canActivateChecks.push(new zx(r)),u0(n,null,a.component?p?p.children:null:t,r,i)})(d,a[d.value.outlet],t,r.concat([d.value]),i),delete a[d.value.outlet]}),os(a,(d,p)=>d0(d,t.getContext(p),i)),i}function d0(n,e,t){const r=H_(n),i=n.value;os(r,(a,d)=>{d0(a,i.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new aD(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class AN{}function Zx(n){return new Rn.y(e=>e.error(n))}class xN{constructor(e,t,r,i,a,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=d}recognize(){const e=iD(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Wt);if(null===t)return null;const r=new eD([],Object.freeze({}),Object.freeze(We({},this.urlTree.queryParams)),this.urlTree.fragment,{},Wt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Fd(r,t),a=new kx(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=xx(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const d=t.children[a],p=Bx(e,a),y=this.processSegmentGroup(p,d,a);if(null===y)return null;r.push(...y)}const i=Wx(r);return function(n){n.sort((e,t)=>e.value.outlet===Wt?-1:t.value.outlet===Wt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const d=this.processSegmentAgainstRoute(a,t,r,i);if(null!==d)return d}return qx(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Hx(e,t,r,i))return null;let a,d=[],p=[];if("**"===e.path){const B=r.length>0?mx(r).parameters:{};a=new eD(r,B,Object.freeze(We({},this.urlTree.queryParams)),this.urlTree.fragment,Qx(e),Ha(e),e.component,e,Kx(t),Yx(t)+r.length,Jx(e))}else{const B=rD(t,e,r);if(!B.matched)return null;d=B.consumedSegments,p=r.slice(B.lastChild),a=new eD(d,B.parameters,Object.freeze(We({},this.urlTree.queryParams)),this.urlTree.fragment,Qx(e),Ha(e),e.component,e,Kx(t),Yx(t)+d.length,Jx(e))}const y=function(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:E,slicedSegments:S}=iD(t,d,p,y.filter(B=>void 0===B.redirectTo),this.relativeLinkResolution);if(0===S.length&&E.hasChildren()){const B=this.processChildren(y,E);return null===B?null:[new Fd(a,B)]}if(0===y.length&&0===S.length)return[new Fd(a,[])];const x=Ha(e)===i,L=this.processSegment(y,E,S,x?Wt:i);return null===L?null:[new Fd(a,L)]}}function RN(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Wx(n){const e=[],t=new Set;for(const r of n){if(!RN(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Wx(r.children);e.push(new Fd(r.value,i))}return e.filter(r=>!t.has(r))}function Kx(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Yx(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Qx(n){return n.data||{}}function Jx(n){return n.resolve||{}}function US(n){return ii(e=>{const t=n(e);return t?(0,wn.D)(t).pipe((0,at.U)(()=>e)):dt(e)})}class jN extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const BS=new c.OlP("ROUTES");class Xx{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,at.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=a.create(e);return new NS(gx(d.injector.get(BS,void 0,c.XFs.Self|c.XFs.Optional)).map(LS),d)}),ja(a=>{throw t._loader$=void 0,a}));return t._loader$=new Qb(i,()=>new Ft.x).pipe(lu()),t._loader$}loadModuleFactory(e){return uu(e()).pipe((0,Gr.z)(t=>t instanceof c.YKP?dt(t):(0,wn.D)(this.compiler.compileModuleAsync(t))))}}class qN{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function $N(n){throw n}function GN(n,e,t){return e.parse("/")}function ek(n,e){return dt(null)}const zN={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ZN={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Pr=(()=>{class n{constructor(t,r,i,a,d,p,y){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=y,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ft.x,this.errorHandler=$N,this.malformedUriErrorHandler=GN,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ek,afterPreactivation:ek},this.urlHandlingStrategy=new qN,this.routeReuseStrategy=new jN,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(c.h0i),this.console=d.get(c.c2e);const x=d.get(c.R0b);this.isNgZoneEnabled=x instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(y),this.currentUrlTree=new _g(new en([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Xx(d,p,L=>this.triggerEvent(new ux(L)),L=>this.triggerEvent(new dx(L))),this.routerState=Mx(this.currentUrlTree,this.rootComponentType),this.transitions=new bn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null==(t=this.location.getState())?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(pr(i=>0!==i.id),(0,at.U)(i=>Di(We({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),ii(i=>{let a=!1,d=!1;return dt(i).pipe((0,ss.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Di(We({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ii(p=>{const y=this.browserUrlTree.toString(),E=!this.navigated||p.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||E)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return cD(p.source)&&(this.browserUrlTree=p.extractedUrl),dt(p).pipe(ii(x=>{const L=this.transitions.getValue();return r.next(new DS(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),L!==this.transitions.getValue()?Yt.E:Promise.resolve(x)}),function(n,e,t,r){return ii(i=>function(n,e,t,r,i){return new hN(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,at.U)(a=>Di(We({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ss.b)(x=>{this.currentNavigation=Di(We({},this.currentNavigation),{finalUrl:x.urlAfterRedirects})}),function(n,e,t,r,i){return(0,Gr.z)(a=>function(n,e,t,r,i="emptyOnly",a="legacy"){try{const d=new xN(n,e,t,r,i,a).recognize();return null===d?Zx(new AN):dt(d)}catch(d){return Zx(d)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,at.U)(d=>Di(We({},a),{targetSnapshot:d}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ss.b)(x=>{if("eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const B=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(B,x)}this.browserUrlTree=x.urlAfterRedirects}const L=new oP(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(L)}));if(E&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:L,extractedUrl:B,source:W,restoredState:he,extras:be}=p,nt=new DS(L,this.serializeUrl(B),W,he);r.next(nt);const ot=Mx(B,this.rootComponentType).snapshot;return dt(Di(We({},p),{targetSnapshot:ot,urlAfterRedirects:B,extras:Di(We({},be),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,p.resolve(null),Yt.E}),US(p=>{const{targetSnapshot:y,id:E,extractedUrl:S,rawUrl:x,extras:{skipLocationChange:L,replaceUrl:B}}=p;return this.hooks.beforePreactivation(y,{navigationId:E,appliedUrlTree:S,rawUrlTree:x,skipLocationChange:!!L,replaceUrl:!!B})}),(0,ss.b)(p=>{const y=new aP(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),(0,at.U)(p=>Di(We({},p),{guards:gN(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function(n,e){return(0,Gr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:d}}=t;return 0===d.length&&0===a.length?dt(Di(We({},t),{guardsResult:!0})):function(n,e,t,r){return(0,wn.D)(n).pipe((0,Gr.z)(i=>function(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?dt(a.map(p=>{const y=lD(p,e,i);let E;if(function(n){return n&&If(n.canDeactivate)}(y))E=uu(y.canDeactivate(n,e,t,r));else{if(!If(y))throw new Error("Invalid CanDeactivate guard");E=uu(y(n,e,t,r))}return E.pipe(ou())})).pipe(a0()):dt(!0)}(i.component,i.route,t,e,r)),ou(i=>!0!==i,!0))}(d,r,i,n).pipe((0,Gr.z)(p=>p&&function(n){return"boolean"==typeof n}(p)?function(n,e,t,r){return(0,wn.D)(e).pipe(Nd(i=>ua(function(n,e){return null!==n&&e&&e(new dP(n)),dt(!0)}(i.route.parent,r),function(n,e){return null!==n&&e&&e(new fP(n)),dt(!0)}(i.route,r),function(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(d=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>qt(()=>dt(d.guards.map(y=>{const E=lD(y,d.node,t);let S;if(function(n){return n&&If(n.canActivateChild)}(E))S=uu(E.canActivateChild(r,n));else{if(!If(E))throw new Error("Invalid CanActivateChild guard");S=uu(E(r,n))}return S.pipe(ou())})).pipe(a0())));return dt(a).pipe(a0())}(n,i.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return dt(!0);const i=r.map(a=>qt(()=>{const d=lD(a,e,t);let p;if(function(n){return n&&If(n.canActivate)}(d))p=uu(d.canActivate(e,n));else{if(!If(d))throw new Error("Invalid CanActivate guard");p=uu(d(e,n))}return p.pipe(ou())}));return dt(i).pipe(a0())}(n,i.route,t))),ou(i=>!0!==i,!0))}(r,a,n,e):dt(p)),(0,at.U)(p=>Di(We({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,ss.b)(p=>{if(vg(p.guardsResult)){const E=TS(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw E.url=p.guardsResult,E}const y=new lP(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(y)}),pr(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),US(p=>{if(p.guards.canActivateChecks.length)return dt(p).pipe((0,ss.b)(y=>{const E=new cP(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(E)}),ii(y=>{let E=!1;return dt(y).pipe(function(n,e){return(0,Gr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return dt(t);let a=0;return(0,wn.D)(i).pipe(Nd(d=>function(n,e,t,r){return function(n,e,t,r){const i=Object.keys(n);if(0===i.length)return dt({});const a={};return(0,wn.D)(i).pipe((0,Gr.z)(d=>function(n,e,t,r){const i=lD(n,e,r);return uu(i.resolve?i.resolve(e,t):i(e,t))}(n[d],e,t,r).pipe((0,ss.b)(p=>{a[d]=p}))),mg(1),(0,Gr.z)(()=>Object.keys(a).length===i.length?dt(a):Yt.E))}(n._resolve,n,e,r).pipe((0,at.U)(a=>(n._resolvedData=a,n.data=We(We({},n.data),xx(n,t).resolve),null)))}(d.route,r,n,e)),(0,ss.b)(()=>a++),mg(1),(0,Gr.z)(d=>a===i.length?dt(t):Yt.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ss.b)({next:()=>E=!0,complete:()=>{E||(this.restoreHistory(y),this.cancelNavigationTransition(y,"At least one route resolver didn't emit any value."))}}))}),(0,ss.b)(y=>{const E=new uP(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(E)}))}),US(p=>{const{targetSnapshot:y,id:E,extractedUrl:S,rawUrl:x,extras:{skipLocationChange:L,replaceUrl:B}}=p;return this.hooks.afterPreactivation(y,{navigationId:E,appliedUrlTree:S,rawUrlTree:x,skipLocationChange:!!L,replaceUrl:!!B})}),(0,at.U)(p=>{const y=function(n,e,t){const r=r0(n,e._root,t?t._root:void 0);return new Ax(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Di(We({},p),{targetRouterState:y})}),(0,ss.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,at.U)(r=>(new WP(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,ss.b)({next(){a=!0},complete(){a=!0}}),function(n){return(0,Ir.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var p;a||d||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null==(p=this.currentNavigation)?void 0:p.id)===i.id&&(this.currentNavigation=null)}),ja(p=>{if(d=!0,function(n){return n&&n[fx]}(p)){const y=vg(p.url);y||(this.navigated=!0,this.restoreHistory(i,!0));const E=new cx(i.id,this.serializeUrl(i.extractedUrl),p.message);r.next(E),y?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),x={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||cD(i.source)};this.scheduleNavigation(S,"imperative",null,x,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const y=new sP(i.id,this.serializeUrl(i.extractedUrl),p);r.next(y);try{i.resolve(this.errorHandler(p))}catch(E){i.reject(E)}}return Yt.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(We(We({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var p;const i={replaceUrl:!0},a=(null==(p=t.state)?void 0:p.navigationId)?t.state:null;if(a){const y=We({},a);delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(i.state=y)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Ux(t),this.config=t.map(LS),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:d,queryParamsHandling:p,preserveFragment:y}=r,E=i||this.routerState.root,S=y?this.currentUrlTree.fragment:d;let x=null;switch(p){case"merge":x=We(We({},this.currentUrlTree.queryParams),a);break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=a||null}return null!==x&&(x=this.removeEmptyProps(x)),function(n,e,t,r,i){if(0===t.length)return OS(e.root,e.root,e,r,i);const a=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Px(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,d)=>{if("object"==typeof a&&null!=a){if(a.outlets){const p={};return os(a.outlets,(y,E)=>{p[E]="string"==typeof y?y.split("/"):y}),[...i,{outlets:p}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===d?(a.split("/").forEach((p,y)=>{0==y&&"."===p||(0==y&&""===p?t=!0:".."===p?e++:""!=p&&i.push(p))}),i):[...i,a]},[]);return new Px(t,e,r)}(t);if(a.toRoot())return OS(e.root,new en([],{}),e,r,i);const d=function(n,e,t){if(n.isAbsolute)return new RS(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new RS(a,a===e.root,0)}const r=tD(n.commands[0])?0:1;return function(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new RS(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),p=d.processChildren?nD(d.segmentGroup,d.index,a.commands):Nx(d.segmentGroup,d.index,a.commands);return OS(d.segmentGroup,p,e,r,i)}(E,this.currentUrlTree,t,x,null!=S?S:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=vg(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?We({},zN):!1===r?We({},ZN):r,vg(t))return yx(this.currentUrlTree,t,i);const a=this.parseUrl(t);return yx(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new e0(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,d){var nt,ot,ft;if(this.disposed)return Promise.resolve(!1);const p=this.transitions.value,y=cD(r)&&p&&!cD(p.source),E=p.rawUrl.toString()===t.toString(),S=p.id===(null==(nt=this.currentNavigation)?void 0:nt.id);if(y&&E&&S)return Promise.resolve(!0);let L,B,W;d?(L=d.resolve,B=d.reject,W=d.promise):W=new Promise((Ze,Gt)=>{L=Ze,B=Gt});const he=++this.navigationId;let be;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),be=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!=(ot=this.browserPageId)?ot:0:(null!=(ft=this.browserPageId)?ft:0)+1):be=0,this.setTransition({id:he,targetPageId:be,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:L,reject:B,promise:W,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),W.catch(Ze=>Promise.reject(Ze))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=We(We({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null==(i=this.currentNavigation)?void 0:i.finalUrl)||0===d?this.currentUrlTree===(null==(a=this.currentNavigation)?void 0:a.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new cx(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function cD(n){return"imperative"!==n}let Sf=(()=>{class n{constructor(t,r,i,a,d){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=d,this.commands=null,this.onChanges=new Ft.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:q_(this.skipLocationChange),replaceUrl:q_(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:q_(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Pr),c.Y36(Tf),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&c.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),n})(),uD=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new Ft.x,this.subscription=t.events.subscribe(a=>{a instanceof e0&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,d){if(0!==t||r||i||a||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const p={skipLocationChange:q_(this.skipLocationChange),replaceUrl:q_(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,p),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:q_(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Pr),c.Y36(Tf),c.Y36(ae))},n.\u0275dir=c.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&c.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&c.uIk("target",r.target)("href",r.href,c.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),n})();function q_(n){return""===n||!!n}class tk{}class nk{preload(e,t){return dt(null)}}let rk=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new Xx(i,r,y=>t.triggerEvent(new ux(y)),y=>t.triggerEvent(new dx(y)))}setUpPreloading(){this.subscription=this.router.events.pipe(pr(t=>t instanceof e0),Nd(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(c.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const d=a._loadedConfig;i.push(this.processRoutes(d.module,d.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,wn.D)(i).pipe((0,zi.J)(),(0,at.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?dt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Gr.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Pr),c.LFG(c.Sil),c.LFG(c.zs3),c.LFG(tk))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),jS=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof DS?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof e0&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof hx&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new hx(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const bg=new c.OlP("ROUTER_CONFIGURATION"),ik=new c.OlP("ROUTER_FORROOT_GUARD"),JN=[$e,{provide:Ex,useClass:Cx},{provide:Pr,useFactory:function(n,e,t,r,i,a,d={},p,y){const E=new Pr(null,n,e,t,r,i,gx(a));return p&&(E.urlHandlingStrategy=p),y&&(E.routeReuseStrategy=y),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,E),d.enableTracing&&E.events.subscribe(S=>{var x,L;null==(x=console.group)||x.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null==(L=console.groupEnd)||L.call(console)}),E},deps:[Ex,l0,$e,c.zs3,c.Sil,BS,bg,[class{},new c.FiY],[class{},new c.FiY]]},l0,{provide:Tf,useFactory:function(n){return n.routerState.root},deps:[Pr]},rk,nk,class{preload(e,t){return t().pipe(ja(()=>dt(null)))}},{provide:bg,useValue:{enableTracing:!1}}];function XN(){return new c.PXZ("Router",Pr)}let sk=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[JN,ok(t),{provide:ik,useFactory:nF,deps:[[Pr,new c.FiY,new c.tp0]]},{provide:bg,useValue:r||{}},{provide:ae,useFactory:tF,deps:[oe,[new c.tBr(le),new c.FiY],bg]},{provide:jS,useFactory:eF,deps:[Pr,Hf,bg]},{provide:tk,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:nk},{provide:c.PXZ,multi:!0,useFactory:XN},[HS,{provide:c.ip1,multi:!0,useFactory:oF,deps:[HS]},{provide:ak,useFactory:aF,deps:[HS]},{provide:c.tb,multi:!0,useExisting:ak}]]}}static forChild(t){return{ngModule:n,providers:[ok(t)]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ik,8),c.LFG(Pr,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function eF(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new jS(n,e,t)}function tF(n,e,t={}){return t.useHash?new ve(n,e):new De(n,e)}function nF(n){return"guarded"}function ok(n){return[{provide:c.deG,multi:!0,useValue:n},{provide:BS,multi:!0,useValue:n}]}let HS=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ft.x}appInitializer(){return this.injector.get(q,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(p=>r=p),a=this.injector.get(Pr),d=this.injector.get(bg);return"disabled"===d.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?dt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(bg),i=this.injector.get(rk),a=this.injector.get(jS),d=this.injector.get(Pr),p=this.injector.get(c.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),i.setUpPreloading(),a.init(),d.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.zs3))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function oF(n){return n.appInitializer.bind(n)}function aF(n){return n.bootstrapListener.bind(n)}const ak=new c.OlP("Router Initializer");let qS=(()=>{class n{constructor(t){this.db=t,this.userRef=t.collection("users")}save(t,r){this.userRef.doc(r).set({key:r,email:t,admin:!1,manager:!1,ban:!1})}readUser(t){return this.userRef.doc(t).valueChanges()}getUsers(){return this.userRef.snapshotChanges()}ban(t){return this.userRef.doc(t.key).set({ban:!0,email:t.email,manager:t.manager,admin:t.admin})}unban(t){return this.userRef.doc(t.key).set({manager:t.manager,ban:!1,email:t.email,admin:t.admin})}makeManager(t){return this.userRef.doc(t.key).set({manager:!0,ban:t.ban,email:t.email,admin:t.admin})}unmakeManager(t){return this.userRef.doc(t.key).set({manager:!1,ban:t.ban,email:t.email,admin:t.admin})}makeAdmin(t){return this.userRef.doc(t.key).set({manager:t.manager,ban:t.ban,email:t.email,admin:!0})}unmakeAdmin(t){return this.userRef.doc(t.key).set({manager:t.manager,ban:t.ban,email:t.email,admin:!1})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(h))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qa=(()=>{class n{constructor(t,r,i){this.afAuth=t,this.router=r,this.userService=i,this.admin=!1,this.ban=!1,this.manager=!1,this.logged=!1,this.persistence="local",this.user$=t.authState,this.refreshUser$()}refreshUser$(){this.user$.subscribe(t=>{null===t?(this.currentUser=null,this.logged=!1):(this.logged=!0,this.currentUser=t,this.isAdmin(),this.isManager())})}login(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(()=>{console.log("You are logged in!"),this.router.navigate([""]),this.logged=!0,this.refreshUser$()}).catch(i=>{console.log("Something went wrong: ",i.message)})}logout(){this.afAuth.signOut(),console.log("logout"),this.logged=!1,this.admin=!1,this.manager=!1}signUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.userService.save(i.user.email,i.user.uid),console.log("You are signed up!"),this.refreshUser$()}).catch(i=>{console.log("Something is wrong: ",i.message)})}get appUser$(){return this.user$.pipe(ii(t=>this.userService.readUser(t.uid)))}isLogged(){return this.logged}isAdmin(){return this.appUser$.pipe((0,at.U)(t=>t.admin)).subscribe(t=>this.admin=t)}isBanned(){return this.appUser$.pipe((0,at.U)(t=>t.ban)).subscribe(t=>this.ban=t)}isManager(){return this.appUser$.pipe((0,at.U)(t=>t.manager||t.admin)).subscribe(t=>this.manager=t)}setPersistence(t){return"local"==t?(this.persistence=t,this.afAuth.setPersistence(ps.Z.auth.Auth.Persistence.LOCAL)):"session"==t?(this.persistence=t,this.afAuth.setPersistence(ps.Z.auth.Auth.Persistence.SESSION)):"none"==t?(this.persistence=t,this.afAuth.setPersistence(ps.Z.auth.Auth.Persistence.NONE)):(console.log("Error in setting persistence, persistence has been set to local"),this.persistence=t,this.afAuth.setPersistence(ps.Z.auth.Auth.Persistence.LOCAL))}getPersistence(){return this.persistence}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Wb),c.LFG(Pr),c.LFG(qS))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$a=(()=>{class n{constructor(t){this.db=t,this.path="dishes_final",this.currentDishOpinions=[],this.dishesRef=t.collection(this.path),this.getDishesArray()}getCurrentOpinions(){return this.currentDishOpinions}updatecurrentDish(t){this.currentDish=t}getDishesArray(){return this.getDishesList().snapshotChanges().pipe((0,at.U)(t=>t.map(r=>Object.assign({key:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.dishes=t}),this.dishes}getDishesList(){return this.dishesRef}getDishes(){return this.db.collection(this.path)}createDish(t){this.dishesRef.add(Object.assign({},t))}updateDish(t,r){return this.dishesRef.doc(t).set(r)}deleteDish(t){this.dishesRef.doc(this.currentDish.key).delete()}minusOrdersLimit(t){this.dishesRef.doc(t).get().pipe((0,at.U)(r=>r.exists)).subscribe(r=>{r?this.dishesRef.doc(t).update({ordersLimit:ps.Z.firestore.FieldValue.increment(1)}):console.log("error in dish-list service, changeOrdersLimit")})}plusOrdersLimit(t){this.dishesRef.doc(t).get().pipe((0,at.U)(r=>r.exists)).subscribe(r=>{r?this.dishesRef.doc(t).update({ordersLimit:ps.Z.firestore.FieldValue.increment(-1)}):console.log("error in dish-list service, changeOrdersLimit")})}getPrice(t){let r=0;return this.dishes.forEach(i=>{t==i.key&&(r=i.price)}),r}getNumberOfDishes(){let t=0;return this.dishes.forEach(()=>{t+=1}),t}modifyDish(t,r){this.dishesRef.doc(r).set({name:t.name,cuisine:t.cuisine,type:t.type,category:t.category,ingredients:t.ingredients,ordersLimit:t.ordersLimit,price:t.price,caption:t.caption,photo:t.photo,maxLimit:t.maxLimit,rating:t.rating,rating_amount:t.rating_amount})}rateDish(t){this.currentDish.rating=(this.currentDish.rating*this.currentDish.rating_amount+t)/(this.currentDish.rating_amount+1),this.currentDish.rating_amount+=1,this.modifyDish(this.currentDish,this.currentDish.key)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(h))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ld=(()=>{class n{constructor(t,r,i){this.db=t,this.auth=r,this.dishList=i,this.order=[],this.totalQuantity=0,this.totalPrice=0,this.totalPriceSource=new bn(0),this.currentTotalPrice=this.totalPriceSource.asObservable(),this.totalQuantitySource=new bn(0),this.currentTotalQuantity=this.totalQuantitySource.asObservable(),this.isInCartSource=new bn(!1),this.currentIsInCart=this.isInCartSource.asObservable(),this.cartsRef=this.db.collection("carts")}ngOnInit(){this.updateCart()}calculateNumber(t){this.totalQuantity=0,this.totalPrice=0,t.forEach(r=>{this.totalQuantity+=r.quantity,this.totalPrice+=this.dishList.getPrice(r.key)*r.quantity}),this.totalPriceSource.next(this.totalPrice),this.totalQuantitySource.next(this.totalQuantity)}isInCartInner(t,r){let i=!1;r.forEach(a=>{a.key==t&&(i=!0)}),this.isInCartSource.next(i)}isInCart(t){this.subscription=this.getOrder().snapshotChanges().pipe((0,at.U)(r=>r.map(i=>Object.assign({key:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.order=r,this.isInCartInner(t,this.order)})}createCart(){this.cartsRef.doc(this.auth.currentUser.uid).set({})}updateCart(){this.subscription=this.getOrder().snapshotChanges().pipe((0,at.U)(t=>t.map(r=>Object.assign({key:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.order=t,this.calculateNumber(this.order)})}addToCart(t,r){const i=this.db.collection("carts").doc(this.auth.currentUser.uid).collection("dishes");i.doc(t).get().pipe((0,at.U)(a=>a.exists)).subscribe(a=>{a?i.doc(t).update({dish:r,quantity:ps.Z.firestore.FieldValue.increment(1)}):i.doc(t).set({dish:r,quantity:1})}),this.updateCart()}removeFromCart(t){const r=this.db.collection("carts").doc(this.auth.currentUser.uid).collection("dishes");r.doc(t).get().pipe((0,at.U)(i=>i.data())).subscribe(i=>{i?1==i.quantity?r.doc(t).delete():r.doc(t).update({quantity:ps.Z.firestore.FieldValue.increment(-1)}):console.log("there is no dish with this id")}),this.updateCart()}getOrder(){return this.db.collection("carts").doc(this.auth.currentUser.uid).collection("dishes")}getTotalQuantity(){return this.totalQuantity}getTotalPrice(){return this.totalPrice}checkout(){const t=this.db.collection("carts").doc(this.auth.currentUser.uid).collection("dishes");this.order.forEach(r=>{t.doc(r.key).delete()})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(h),c.LFG(qa),c.LFG($a))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lk=(()=>{class n{constructor(t){this.auth=t}canActivate(t,r){return this.auth.appUser$.pipe((0,at.U)(i=>i.manager||i.admin))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(qa))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$S=(()=>{class n{constructor(t){this.auth=t}canActivate(t,r){return this.auth.appUser$.pipe((0,at.U)(i=>i.admin))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(qa))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$_=(()=>{class n{constructor(t,r){this.auth=t,this.router=r}canActivate(t,r){return this.auth.user$.pipe((0,at.U)(i=>null!=i||(this.router.navigate(["/login"],{queryParams:{returnUrl:r.url}}),!1)))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(qa),c.LFG(Pr))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ck_firebase={apiKey:"AIzaSyDuSIIvwEw11GTvCTSwnDoNsEvEv3BfaLI",authDomain:"dishes-firestore.firebaseapp.com",projectId:"dishes-firestore",storageBucket:"dishes-firestore.appspot.com",messagingSenderId:"472718527795",appId:"1:472718527795:web:f4fad1e8fbf3765343c246",measurementId:"G-R3RNPV00NZ"};let cF=(()=>{class n{constructor(){this.title="Restaurant"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},directives:[FS],styles:[""]}),n})();class uk{}const Vd="*";function dD(n,e){return{type:7,name:n,definitions:e,options:{}}}function h0(n,e=null){return{type:4,styles:e,timings:n}}function dk(n,e=null){return{type:2,steps:n,options:e}}function Ga(n){return{type:6,styles:n,offset:null}}function G_(n,e,t){return{type:0,name:n,styles:e,options:t}}function z_(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function hk(n){Promise.resolve(null).then(n)}class Z_{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){hk(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class fk{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const a=this.players.length;0==a?hk(()=>this._onFinish()):this.players.forEach(d=>{d.onDone(()=>{++t==a&&this._onFinish()}),d.onDestroy(()=>{++r==a&&this._onDestroy()}),d.onStart(()=>{++i==a&&this._onStart()})}),this.totalTime=this.players.reduce((d,p)=>Math.max(d,p.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function pk(){return"undefined"!=typeof window&&void 0!==window.document}function zS(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Af(n){switch(n.length){case 0:return new Z_;case 1:return n[0];default:return new fk(n)}}function gk(n,e,t,r,i={},a={}){const d=[],p=[];let y=-1,E=null;if(r.forEach(S=>{const x=S.offset,L=x==y,B=L&&E||{};Object.keys(S).forEach(W=>{let he=W,be=S[W];if("offset"!==W)switch(he=e.normalizePropertyName(he,d),be){case"!":be=i[W];break;case Vd:be=a[W];break;default:be=e.normalizeStyleValue(W,he,be,d)}B[he]=be}),L||p.push(B),E=B,y=x}),d.length){const S="\n - ";throw new Error(`Unable to animate due to the following errors:${S}${d.join(S)}`)}return p}function ZS(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&WS(t,"start",n)));break;case"done":n.onDone(()=>r(t&&WS(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&WS(t,"destroy",n)))}}function WS(n,e,t){const r=t.totalTime,a=KS(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),d=n._data;return null!=d&&(a._data=d),a}function KS(n,e,t,r,i="",a=0,d){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:a,disabled:!!d}}function Yo(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function mk(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let YS=(n,e)=>!1,QS=(n,e)=>!1,_k=(n,e,t)=>[];const yk=zS();(yk||"undefined"!=typeof Element)&&(YS=pk()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),QS=(()=>{if(yk||Element.prototype.matches)return(n,e)=>n.matches(e);{const n=Element.prototype,e=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;return e?(t,r)=>e.apply(t,[r]):QS}})(),_k=(n,e,t)=>{let r=[];if(t){const i=n.querySelectorAll(e);for(let a=0;a<i.length;a++)r.push(i[a])}else{const i=n.querySelector(e);i&&r.push(i)}return r});let wg=null,vk=!1;function JS(n){wg||(wg=("undefined"!=typeof document?document.body:null)||{},vk=!!wg.style&&"WebkitAppearance"in wg.style);let e=!0;return wg.style&&!function(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in wg.style,!e&&vk&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in wg.style)),e}const XS=QS,eA=YS,tA=_k;function bk(n){const e={};return Object.keys(n).forEach(t=>{const r=t.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=n[t]}),e}let wk=(()=>{class n{validateStyleProperty(t){return JS(t)}matchesElement(t,r){return XS(t,r)}containsElement(t,r){return eA(t,r)}query(t,r,i){return tA(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,a,d,p=[],y){return new Z_(i,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),nA=(()=>{class n{}return n.NOOP=new wk,n})();const rA="ng-enter",hD="ng-leave",fD="ng-trigger",pD=".ng-trigger",Ck="ng-animating",iA=".ng-animating";function Eg(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:sA(parseFloat(e[1]),e[2])}function sA(n,e){return"s"===e?1e3*n:n}function gD(n,e,t){return n.hasOwnProperty("duration")?n:function(n,e,t){let i,a=0,d="";if("string"==typeof n){const p=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===p)return e.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};i=sA(parseFloat(p[1]),p[2]);const y=p[3];null!=y&&(a=sA(parseFloat(y),p[4]));const E=p[5];E&&(d=E)}else i=n;if(!t){let p=!1,y=e.length;i<0&&(e.push("Duration values below 0 are not allowed for this animation step."),p=!0),a<0&&(e.push("Delay values below 0 are not allowed for this animation step."),p=!0),p&&e.splice(y,0,`The provided timing value "${n}" is invalid.`)}return{duration:i,delay:a,easing:d}}(n,e,t)}function W_(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Mf(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else W_(n,t);return t}function Tk(n,e,t){return t?e+":"+t+";":""}function Ik(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=Tk(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=Tk(0,bF(t),n.style[t]));n.setAttribute("style",e)}function du(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=aA(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),zS()&&Ik(n))}function Cg(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=aA(t);n.style[r]=""}),zS()&&Ik(n))}function f0(n){return Array.isArray(n)?1==n.length?n[0]:dk(n):n}const oA=new RegExp("{{\\s*(.+?)\\s*}}","g");function Sk(n){let e=[];if("string"==typeof n){let t;for(;t=oA.exec(n);)e.push(t[1]);oA.lastIndex=0}return e}function mD(n,e,t){const r=n.toString(),i=r.replace(oA,(a,d)=>{let p=e[d];return e.hasOwnProperty(d)||(t.push(`Please provide a value for the animation param ${d}`),p=""),p.toString()});return i==r?n:i}function _D(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const vF=/-+([a-z0-9])/g;function aA(n){return n.replace(vF,(...e)=>e[1].toUpperCase())}function bF(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ak(n,e){return 0===n||0===e}function Mk(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let a=e[0],d=[];if(r.forEach(p=>{a.hasOwnProperty(p)||d.push(p),a[p]=t[p]}),d.length)for(var i=1;i<e.length;i++){let p=e[i];d.forEach(function(y){p[y]=lA(n,y)})}}return e}function Qo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function lA(n,e){return window.getComputedStyle(n)[e]}function wF(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function(n,e,t){if(":"==n[0]){const y=function(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,t);if("function"==typeof y)return void e.push(y);n=y}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(`The provided transition expression "${n}" is not supported`),e;const i=r[1],a=r[2],d=r[3];e.push(xk(i,d));"<"==a[0]&&!("*"==i&&"*"==d)&&e.push(xk(d,i))}(r,t,e)):t.push(n),t}const vD=new Set(["true","1"]),bD=new Set(["false","0"]);function xk(n,e){const t=vD.has(n)||bD.has(n),r=vD.has(e)||bD.has(e);return(i,a)=>{let d="*"==n||n==i,p="*"==e||e==a;return!d&&t&&"boolean"==typeof i&&(d=i?vD.has(n):bD.has(n)),!p&&r&&"boolean"==typeof a&&(p=a?vD.has(e):bD.has(e)),d&&p}}const DF=new RegExp("s*:selfs*,?","g");function cA(n,e,t){return new TF(n).build(e,t)}class TF{constructor(e){this._driver=e}build(e,t){const r=new AF(t);return this._resetContextStyleTimingState(r),Qo(this,f0(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const a=[],d=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(p=>{if(this._resetContextStyleTimingState(t),0==p.type){const y=p,E=y.name;E.toString().split(/\s*,\s*/).forEach(S=>{y.name=S,a.push(this.visitState(y,t))}),y.name=E}else if(1==p.type){const y=this.visitTransition(p,t);r+=y.queryCount,i+=y.depCount,d.push(y)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:a,transitions:d,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const a=new Set,d=i||{};if(r.styles.forEach(p=>{if(wD(p)){const y=p;Object.keys(y).forEach(E=>{Sk(y[E]).forEach(S=>{d.hasOwnProperty(S)||a.add(S)})})}}),a.size){const p=_D(a.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${p.join(", ")}`)}}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Qo(this,f0(e.animation),t);return{type:1,matchers:wF(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Dg(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Qo(this,r,t)),options:Dg(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const a=e.steps.map(d=>{t.currentTime=r;const p=Qo(this,d,t);return i=Math.max(i,t.currentTime),p});return t.currentTime=i,{type:3,steps:a,options:Dg(e.options)}}visitAnimate(e,t){const r=function(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return uA(gD(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=uA(0,0,"");return a.dynamic=!0,a.strValue=r,a}return t=t||gD(r,e),uA(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,a=e.styles?e.styles:Ga({});if(5==a.type)i=this.visitKeyframes(a,t);else{let d=e.styles,p=!1;if(!d){p=!0;const E={};r.easing&&(E.easing=r.easing),d=Ga(E)}t.currentTime+=r.duration+r.delay;const y=this.visitStyle(d,t);y.isEmptyStep=p,i=y}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(d=>{"string"==typeof d?d==Vd?r.push(d):t.errors.push(`The provided style string value ${d} is not allowed.`):r.push(d)}):r.push(e.styles);let i=!1,a=null;return r.forEach(d=>{if(wD(d)){const p=d,y=p.easing;if(y&&(a=y,delete p.easing),!i)for(let E in p)if(p[E].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:a,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),e.styles.forEach(d=>{"string"!=typeof d&&Object.keys(d).forEach(p=>{if(!this._driver.validateStyleProperty(p))return void t.errors.push(`The provided animation property "${p}" is not a supported CSS property for animations`);const y=t.collectedStyles[t.currentQuerySelector],E=y[p];let S=!0;E&&(a!=i&&a>=E.startTime&&i<=E.endTime&&(t.errors.push(`The CSS property "${p}" that exists between the times of "${E.startTime}ms" and "${E.endTime}ms" is also being animated in a parallel animation between the times of "${a}ms" and "${i}ms"`),S=!1),a=E.startTime),S&&(y[p]={startTime:a,endTime:i}),t.options&&function(n,e,t){const r=e.params||{},i=Sk(n);i.length&&i.forEach(a=>{r.hasOwnProperty(a)||t.push(`Unable to resolve the local animation param ${a} in the given list of values`)})}(d[p],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),r;let a=0;const d=[];let p=!1,y=!1,E=0;const S=e.steps.map(nt=>{const ot=this._makeStyleAst(nt,t);let ft=null!=ot.offset?ot.offset:function(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(wD(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(wD(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(ot.styles),Ze=0;return null!=ft&&(a++,Ze=ot.offset=ft),y=y||Ze<0||Ze>1,p=p||Ze<E,E=Ze,d.push(Ze),ot});y&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),p&&t.errors.push("Please ensure that all keyframe offsets are in order");const x=e.steps.length;let L=0;a>0&&a<x?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==a&&(L=1/(x-1));const B=x-1,W=t.currentTime,he=t.currentAnimateTimings,be=he.duration;return S.forEach((nt,ot)=>{const ft=L>0?ot==B?1:L*ot:d[ot],Ze=ft*be;t.currentTime=W+he.delay+Ze,he.duration=Ze,this._validateStyleAst(nt,t),nt.offset=ft,r.styles.push(nt)}),r}visitReference(e,t){return{type:8,animation:Qo(this,f0(e.animation),t),options:Dg(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Dg(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Dg(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[a,d]=function(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(DF,"")),n=n.replace(/@\*/g,pD).replace(/@\w+/g,t=>pD+"-"+t.substr(1)).replace(/:animating/g,iA),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+a:a,Yo(t.collectedStyles,t.currentQuerySelector,{});const p=Qo(this,f0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:d,animation:p,originalSelector:e.selector,options:Dg(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:gD(e.timings,t.errors,!0);return{type:12,animation:Qo(this,f0(e.animation),t),timings:r,options:null}}}class AF{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function wD(n){return!Array.isArray(n)&&"object"==typeof n}function Dg(n){return n?(n=W_(n)).params&&(n.params=function(n){return n?W_(n):null}(n.params)):n={},n}function uA(n,e,t){return{duration:n,delay:e,easing:t}}function dA(n,e,t,r,i,a,d=null,p=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:d,subTimeline:p}}class ED{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const RF=new RegExp(":enter","g"),NF=new RegExp(":leave","g");function hA(n,e,t,r,i,a={},d={},p,y,E=[]){return(new FF).buildKeyframes(n,e,t,r,i,a,d,p,y,E)}class FF{buildKeyframes(e,t,r,i,a,d,p,y,E,S=[]){E=E||new ED;const x=new fA(e,t,E,i,a,S,[]);x.options=y,x.currentTimeline.setStyles([d],null,x.errors,y),Qo(this,r,x);const L=x.timelines.filter(B=>B.containsAnimation());if(L.length&&Object.keys(p).length){const B=L[L.length-1];B.allowOnlyTimelineStyles()||B.setStyles([p],null,x.errors,y)}return L.length?L.map(B=>B.buildKeyframes()):[dA(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.consume(t.element);if(r){const i=t.createSubContext(e.options),a=t.currentTimeline.currentTime,d=this._visitSubInstructions(r,i,i.options);a!=d&&t.transformIntoNewTimeline(d)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let a=t.currentTimeline.currentTime;const d=null!=r.duration?Eg(r.duration):null,p=null!=r.delay?Eg(r.delay):null;return 0!==d&&e.forEach(y=>{const E=t.appendInstructionToTimeline(y,d,p);a=Math.max(a,E.duration+E.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),Qo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const a=e.options;if(a&&(a.params||a.delay)&&(i=t.createSubContext(a),i.transformIntoNewTimeline(),null!=a.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=CD);const d=Eg(a.delay);i.delayNextStep(d)}e.steps.length&&(e.steps.forEach(d=>Qo(this,d,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?Eg(e.options.delay):0;e.steps.forEach(d=>{const p=t.createSubContext(e.options);a&&p.delayNextStep(a),Qo(this,d,p),i=Math.max(i,p.currentTimeline.currentTime),r.push(p.currentTimeline)}),r.forEach(d=>t.currentTimeline.mergeTimelineCollectedStyles(d)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return gD(t.params?mD(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(r.duration),this.visitStyle(a,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const a=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(a):r.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,a=r.duration,p=t.createSubContext().currentTimeline;p.easing=r.easing,e.styles.forEach(y=>{p.forwardTime((y.offset||0)*a),p.setStyles(y.styles,y.easing,t.errors,t.options),p.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(p),t.transformIntoNewTimeline(i+a),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},a=i.delay?Eg(i.delay):0;a&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=CD);let d=r;const p=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=p.length;let y=null;p.forEach((E,S)=>{t.currentQueryIndex=S;const x=t.createSubContext(e.options,E);a&&x.delayNextStep(a),E===t.element&&(y=x.currentTimeline),Qo(this,e.animation,x),x.currentTimeline.applyStylesToKeyframe(),d=Math.max(d,x.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(d),y&&(t.currentTimeline.mergeTimelineCollectedStyles(y),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,a=e.timings,d=Math.abs(a.duration),p=d*(t.currentQueryTotal-1);let y=d*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":y=p-y;break;case"full":y=r.currentStaggerTime}const S=t.currentTimeline;y&&S.delayNextStep(y);const x=S.currentTime;Qo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-x+(i.startTime-r.currentTimeline.startTime)}}const CD={};class fA{constructor(e,t,r,i,a,d,p,y){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=a,this.errors=d,this.timelines=p,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=CD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=y||new DD(this._driver,t,0),p.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Eg(r.duration)),null!=r.delay&&(i.delay=Eg(r.delay));const a=r.params;if(a){let d=i.params;d||(d=this.options.params={}),Object.keys(a).forEach(p=>{(!t||!d.hasOwnProperty(p))&&(d[p]=mD(a[p],d,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,a=new fA(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=CD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},a=new LF(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(a),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,a,d){let p=[];if(i&&p.push(this.element),e.length>0){e=(e=e.replace(RF,"."+this._enterClassName)).replace(NF,"."+this._leaveClassName);let E=this._driver.query(this.element,e,1!=r);0!==r&&(E=r<0?E.slice(E.length+r,E.length):E.slice(0,r)),p.push(...E)}return!a&&0==p.length&&d.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),p}}class DD{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new DD(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Vd,this._currentKeyframe[t]=Vd}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const a=i&&i.params||{},d=function(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(a=>{t[a]=Vd})):Mf(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(d).forEach(p=>{const y=mD(d[p],a,r);this._pendingStyles[p]=y,this._localTimelineStyles.hasOwnProperty(p)||(this._backFill[p]=this._globalTimelineStyles.hasOwnProperty(p)?this._globalTimelineStyles[p]:Vd),this._updateStyle(p,y)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((p,y)=>{const E=Mf(p,!0);Object.keys(E).forEach(S=>{const x=E[S];"!"==x?e.add(S):x==Vd&&t.add(S)}),r||(E.offset=y/this.duration),i.push(E)});const a=e.size?_D(e.values()):[],d=t.size?_D(t.values()):[];if(r){const p=i[0],y=W_(p);p.offset=0,y.offset=1,i=[p,y]}return dA(this.element,i,a,d,this.duration,this.startTime,this.easing,!1)}}class LF extends DD{constructor(e,t,r,i,a,d,p=!1){super(e,t,d.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=a,this._stretchStartingKeyframe=p,this.timings={duration:d.duration,delay:d.delay,easing:d.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],d=r+t,p=t/d,y=Mf(e[0],!1);y.offset=0,a.push(y);const E=Mf(e[0],!1);E.offset=Rk(p),a.push(E);const S=e.length-1;for(let x=1;x<=S;x++){let L=Mf(e[x],!1);L.offset=Rk((t+L.offset*r)/d),a.push(L)}r=d,t=0,i="",e=a}return dA(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function Rk(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class pA{}class UF extends pA{normalizePropertyName(e,t){return aA(e)}normalizeStyleValue(e,t,r,i){let a="";const d=r.toString().trim();if(BF[t]&&0!==r&&"0"!==r)if("number"==typeof r)a="px";else{const p=r.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&0==p[1].length&&i.push(`Please provide a CSS unit value for ${e}:${r}`)}return d+a}}const BF=(()=>function(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Pk(n,e,t,r,i,a,d,p,y,E,S,x,L){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:a,toState:r,toStyles:d,timelines:p,queriedElements:y,preStyleProps:E,postStyleProps:S,totalTime:x,errors:L}}const gA={};class Nk{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function(n,e,t,r,i){return n.some(a=>a(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],a=this._stateStyles[e],d=i?i.buildStyles(t,r):{};return a?a.buildStyles(t,r):d}build(e,t,r,i,a,d,p,y,E,S){const x=[],L=this.ast.options&&this.ast.options.params||gA,W=this.buildStyles(r,p&&p.params||gA,x),he=y&&y.params||gA,be=this.buildStyles(i,he,x),nt=new Set,ot=new Map,ft=new Map,Ze="void"===i,Gt={params:We(We({},L),he)},xn=S?[]:hA(e,t,this.ast.animation,a,d,W,be,Gt,E,x);let dr=0;if(xn.forEach(Xo=>{dr=Math.max(Xo.duration+Xo.delay,dr)}),x.length)return Pk(t,this._triggerName,r,i,Ze,W,be,[],[],ot,ft,dr,x);xn.forEach(Xo=>{const qd=Xo.element,Z1=Yo(ot,qd,{});Xo.preStyleProps.forEach(kg=>Z1[kg]=!0);const R0=Yo(ft,qd,{});Xo.postStyleProps.forEach(kg=>R0[kg]=!0),qd!==t&&nt.add(qd)});const Hs=_D(nt.values());return Pk(t,this._triggerName,r,i,Ze,W,be,xn,Hs,ot,ft,dr)}}class qF{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=W_(this.defaultParams);return Object.keys(e).forEach(a=>{const d=e[a];null!=d&&(i[a]=d)}),this.styles.styles.forEach(a=>{if("string"!=typeof a){const d=a;Object.keys(d).forEach(p=>{let y=d[p];y.length>1&&(y=mD(y,i,t));const E=this.normalizer.normalizePropertyName(p,t);y=this.normalizer.normalizeStyleValue(p,E,y,t),r[E]=y})}}),r}}class GF{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new qF(i.style,i.options&&i.options.params||{},r)}),Fk(this.states,"true","1"),Fk(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Nk(e,i,this.states))}),this.fallbackTransition=function(n,e,t){return new Nk(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(d,p)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(d=>d.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function Fk(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const ZF=new ED;class WF{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],i=cA(this._driver,t,r);if(r.length)throw new Error(`Unable to build the animation due to the following errors: ${r.join("\n")}`);this._animations[e]=i}_buildPlayer(e,t,r){const i=e.element,a=gk(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],a=this._animations[e];let d;const p=new Map;if(a?(d=hA(this._driver,t,a,rA,hD,{},{},r,ZF,i),d.forEach(S=>{const x=Yo(p,S.element,{});S.postStyleProps.forEach(L=>x[L]=null)})):(i.push("The requested animation doesn't exist or has already been destroyed"),d=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);p.forEach((S,x)=>{Object.keys(S).forEach(L=>{S[L]=this._driver.computeStyle(x,L,Vd)})});const E=Af(d.map(S=>{const x=p.get(S.element);return this._buildPlayer(S,{},x)}));return this._playersById[e]=E,E.onDestroy(()=>this.destroy(e)),this.players.push(E),E}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,r,i){const a=KS(t,"","","");return ZS(this._getPlayer(e),r,a,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const a=this._getPlayer(e);switch(r){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const Lk="ng-animate-queued",Vk="ng-animate-disabled",Uk=".ng-animate-disabled",JF=[],Bk={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},XF={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},za="__ng_removed";class mA{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function(n){return null!=n?n:null}(r?e.value:e),r){const a=W_(e);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const p0="void",_A=new mA(p0);class eL{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Za(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${r}" because the animation trigger "${t}" doesn't exist!`);if(null==r||0==r.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if(!function(n){return"start"==n||"done"==n}(r))throw new Error(`The provided animation trigger event "${r}" for the animation trigger "${t}" is not supported!`);const a=Yo(this._elementListeners,e,[]),d={name:t,phase:r,callback:i};a.push(d);const p=Yo(this._engine.statesByElement,e,{});return p.hasOwnProperty(t)||(Za(e,fD),Za(e,fD+"-"+t),p[t]=_A),()=>{this._engine.afterFlush(()=>{const y=a.indexOf(d);y>=0&&a.splice(y,1),this._triggers[t]||delete p[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,r,i=!0){const a=this._getTrigger(t),d=new yA(this.id,t,e);let p=this._engine.statesByElement.get(e);p||(Za(e,fD),Za(e,fD+"-"+t),this._engine.statesByElement.set(e,p={}));let y=p[t];const E=new mA(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&y&&E.absorbOptions(y.options),p[t]=E,y||(y=_A),E.value!==p0&&y.value===E.value){if(!function(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const a=t[i];if(!e.hasOwnProperty(a)||n[a]!==e[a])return!1}return!0}(y.params,E.params)){const he=[],be=a.matchStyles(y.value,y.params,he),nt=a.matchStyles(E.value,E.params,he);he.length?this._engine.reportError(he):this._engine.afterFlush(()=>{Cg(e,be),du(e,nt)})}return}const L=Yo(this._engine.playersByElement,e,[]);L.forEach(he=>{he.namespaceId==this.id&&he.triggerName==t&&he.queued&&he.destroy()});let B=a.matchTransition(y.value,E.value,e,E.params),W=!1;if(!B){if(!i)return;B=a.fallbackTransition,W=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:B,fromState:y,toState:E,player:d,isFallbackTransition:W}),W||(Za(e,Lk),d.onStart(()=>{K_(e,Lk)})),d.onDone(()=>{let he=this.players.indexOf(d);he>=0&&this.players.splice(he,1);const be=this._engine.playersByElement.get(e);if(be){let nt=be.indexOf(d);nt>=0&&be.splice(nt,1)}}),this.players.push(d),L.push(d),d}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,pD,!0);r.forEach(i=>{if(i[za])return;const a=this._engine.fetchNamespacesByElement(i);a.size?a.forEach(d=>d.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const a=this._engine.statesByElement.get(e);if(a){const d=[];if(Object.keys(a).forEach(p=>{if(this._triggers[p]){const y=this.trigger(e,p,p0,i);y&&d.push(y)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),r&&Af(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(a=>{const d=a.name;if(i.has(d))return;i.add(d);const y=this._triggers[d].fallbackTransition,E=r[d]||_A,S=new mA(p0),x=new yA(this.id,d,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:d,transition:y,fromState:E,toState:S,player:x,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const a=r.players.length?r.playersByQueriedElement.get(e):[];if(a&&a.length)i=!0;else{let d=e;for(;d=d.parentNode;)if(r.statesByElement.get(d)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const a=e[za];(!a||a===Bk)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Za(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const a=r.element,d=this._elementListeners.get(a);d&&d.forEach(p=>{if(p.name==r.triggerName){const y=KS(a,r.triggerName,r.fromState.value,r.toState.value);y._data=e,ZS(r.player,p.phase,y,p.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const a=r.transition.ast.depCount,d=i.transition.ast.depCount;return 0==a||0==d?a-d:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class tL{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,a)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new eL(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList.length-1;if(r>=0){let i=!1;for(let a=r;a>=0;a--)if(this.driver.containsElement(this._namespaceList[a].hostElement,t)){this._namespaceList.splice(a+1,0,e),i=!0;break}i||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let a=0;a<i.length;a++){const d=r[i[a]].namespaceId;if(d){const p=this._fetchNamespace(d);p&&t.add(p)}}}return t}trigger(e,t,r,i){if(TD(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!TD(t))return;const a=t[za];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const d=this.collectedLeaveElements.indexOf(t);d>=0&&this.collectedLeaveElements.splice(d,1)}if(e){const d=this._fetchNamespace(e);d&&d.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Za(e,Vk)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),K_(e,Vk))}removeNode(e,t,r,i){if(TD(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const d=this.namespacesByHostElement.get(t);d&&d.id!==e&&d.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i){this.collectedLeaveElements.push(t),t[za]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1}}listen(e,t,r,i,a){return TD(t)?this._fetchNamespace(e).listen(t,r,i,a):()=>{}}_buildInstruction(e,t,r,i,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,pD,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,iA,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Af(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[za];if(t&&t.setForRemoval){if(e[za]=Bk,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,Uk)&&this.markElementAsDisabled(e,!1),this.driver.query(e,Uk,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Za(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Af(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const r=new ED,i=[],a=new Map,d=[],p=new Map,y=new Map,E=new Map,S=new Set;this.disabledNodes.forEach(ut=>{S.add(ut);const Dt=this.driver.query(ut,".ng-animate-queued",!0);for(let Nt=0;Nt<Dt.length;Nt++)S.add(Dt[Nt])});const x=this.bodyNode,L=Array.from(this.statesByElement.keys()),B=qk(L,this.collectedEnterElements),W=new Map;let he=0;B.forEach((ut,Dt)=>{const Nt=rA+he++;W.set(Dt,Nt),ut.forEach(fn=>Za(fn,Nt))});const be=[],nt=new Set,ot=new Set;for(let ut=0;ut<this.collectedLeaveElements.length;ut++){const Dt=this.collectedLeaveElements[ut],Nt=Dt[za];Nt&&Nt.setForRemoval&&(be.push(Dt),nt.add(Dt),Nt.hasAnimation?this.driver.query(Dt,".ng-star-inserted",!0).forEach(fn=>nt.add(fn)):ot.add(Dt))}const ft=new Map,Ze=qk(L,Array.from(nt));Ze.forEach((ut,Dt)=>{const Nt=hD+he++;ft.set(Dt,Nt),ut.forEach(fn=>Za(fn,Nt))}),e.push(()=>{B.forEach((ut,Dt)=>{const Nt=W.get(Dt);ut.forEach(fn=>K_(fn,Nt))}),Ze.forEach((ut,Dt)=>{const Nt=ft.get(Dt);ut.forEach(fn=>K_(fn,Nt))}),be.forEach(ut=>{this.processLeaveNode(ut)})});const Gt=[],xn=[];for(let ut=this._namespaceList.length-1;ut>=0;ut--)this._namespaceList[ut].drainQueuedTransitions(t).forEach(Nt=>{const fn=Nt.player,Fi=Nt.element;if(Gt.push(fn),this.collectedEnterElements.length){const _u=Fi[za];if(_u&&_u.setForMove)return void fn.destroy()}const mu=!x||!this.driver.containsElement(x,Fi),ea=ft.get(Fi),Lf=W.get(Fi),Fr=this._buildInstruction(Nt,r,Lf,ea,mu);if(Fr.errors&&Fr.errors.length)xn.push(Fr);else{if(mu)return fn.onStart(()=>Cg(Fi,Fr.fromStyles)),fn.onDestroy(()=>du(Fi,Fr.toStyles)),void i.push(fn);if(Nt.isFallbackTransition)return fn.onStart(()=>Cg(Fi,Fr.fromStyles)),fn.onDestroy(()=>du(Fi,Fr.toStyles)),void i.push(fn);Fr.timelines.forEach(_u=>_u.stretchStartingKeyframe=!0),r.append(Fi,Fr.timelines),d.push({instruction:Fr,player:fn,element:Fi}),Fr.queriedElements.forEach(_u=>Yo(p,_u,[]).push(fn)),Fr.preStyleProps.forEach((_u,P0)=>{const XD=Object.keys(_u);if(XD.length){let Og=y.get(P0);Og||y.set(P0,Og=new Set),XD.forEach(wM=>Og.add(wM))}}),Fr.postStyleProps.forEach((_u,P0)=>{const XD=Object.keys(_u);let Og=E.get(P0);Og||E.set(P0,Og=new Set),XD.forEach(wM=>Og.add(wM))})}});if(xn.length){const ut=[];xn.forEach(Dt=>{ut.push(`@${Dt.triggerName} has failed due to:\n`),Dt.errors.forEach(Nt=>ut.push(`- ${Nt}\n`))}),Gt.forEach(Dt=>Dt.destroy()),this.reportError(ut)}const dr=new Map,Hs=new Map;d.forEach(ut=>{const Dt=ut.element;r.has(Dt)&&(Hs.set(Dt,Dt),this._beforeAnimationBuild(ut.player.namespaceId,ut.instruction,dr))}),i.forEach(ut=>{const Dt=ut.element;this._getPreviousPlayers(Dt,!1,ut.namespaceId,ut.triggerName,null).forEach(fn=>{Yo(dr,Dt,[]).push(fn),fn.destroy()})});const Xo=be.filter(ut=>Gk(ut,y,E)),qd=new Map;Hk(qd,this.driver,ot,E,Vd).forEach(ut=>{Gk(ut,y,E)&&Xo.push(ut)});const R0=new Map;B.forEach((ut,Dt)=>{Hk(R0,this.driver,new Set(ut),y,"!")}),Xo.forEach(ut=>{const Dt=qd.get(ut),Nt=R0.get(ut);qd.set(ut,We(We({},Dt),Nt))});const kg=[],W1=[],K1={};d.forEach(ut=>{const{element:Dt,player:Nt,instruction:fn}=ut;if(r.has(Dt)){if(S.has(Dt))return Nt.onDestroy(()=>du(Dt,fn.toStyles)),Nt.disabled=!0,Nt.overrideTotalTime(fn.totalTime),void i.push(Nt);let Fi=K1;if(Hs.size>1){let ea=Dt;const Lf=[];for(;ea=ea.parentNode;){const Fr=Hs.get(ea);if(Fr){Fi=Fr;break}Lf.push(ea)}Lf.forEach(Fr=>Hs.set(Fr,Fi))}const mu=this._buildAnimation(Nt.namespaceId,fn,dr,a,R0,qd);if(Nt.setRealPlayer(mu),Fi===K1)kg.push(Nt);else{const ea=this.playersByElement.get(Fi);ea&&ea.length&&(Nt.parentPlayer=Af(ea)),i.push(Nt)}}else Cg(Dt,fn.fromStyles),Nt.onDestroy(()=>du(Dt,fn.toStyles)),W1.push(Nt),S.has(Dt)&&i.push(Nt)}),W1.forEach(ut=>{const Dt=a.get(ut.element);if(Dt&&Dt.length){const Nt=Af(Dt);ut.setRealPlayer(Nt)}}),i.forEach(ut=>{ut.parentPlayer?ut.syncPlayerEvents(ut.parentPlayer):ut.destroy()});for(let ut=0;ut<be.length;ut++){const Dt=be[ut],Nt=Dt[za];if(K_(Dt,hD),Nt&&Nt.hasAnimation)continue;let fn=[];if(p.size){let mu=p.get(Dt);mu&&mu.length&&fn.push(...mu);let ea=this.driver.query(Dt,iA,!0);for(let Lf=0;Lf<ea.length;Lf++){let Fr=p.get(ea[Lf]);Fr&&Fr.length&&fn.push(...Fr)}}const Fi=fn.filter(mu=>!mu.destroyed);Fi.length?sL(this,Dt,Fi):this.processLeaveNode(Dt)}return be.length=0,kg.forEach(ut=>{this.players.push(ut),ut.onDone(()=>{ut.destroy();const Dt=this.players.indexOf(ut);this.players.splice(Dt,1)}),ut.play()}),kg}elementContainsData(e,t){let r=!1;const i=t[za];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,a){let d=[];if(t){const p=this.playersByQueriedElement.get(e);p&&(d=p)}else{const p=this.playersByElement.get(e);if(p){const y=!a||a==p0;p.forEach(E=>{E.queued||!y&&E.triggerName!=i||d.push(E)})}}return(r||i)&&(d=d.filter(p=>!(r&&r!=p.namespaceId||i&&i!=p.triggerName))),d}_beforeAnimationBuild(e,t,r){const a=t.element,d=t.isRemovalTransition?void 0:e,p=t.isRemovalTransition?void 0:t.triggerName;for(const y of t.timelines){const E=y.element,S=E!==a,x=Yo(r,E,[]);this._getPreviousPlayers(E,S,d,p,t.toState).forEach(B=>{const W=B.getRealPlayer();W.beforeDestroy&&W.beforeDestroy(),B.destroy(),x.push(B)})}Cg(a,t.fromStyles)}_buildAnimation(e,t,r,i,a,d){const p=t.triggerName,y=t.element,E=[],S=new Set,x=new Set,L=t.timelines.map(W=>{const he=W.element;S.add(he);const be=he[za];if(be&&be.removedBeforeQueried)return new Z_(W.duration,W.delay);const nt=he!==y,ot=function(n){const e=[];return $k(n,e),e}((r.get(he)||JF).map(dr=>dr.getRealPlayer())).filter(dr=>!!dr.element&&dr.element===he),ft=a.get(he),Ze=d.get(he),Gt=gk(0,this._normalizer,0,W.keyframes,ft,Ze),xn=this._buildPlayer(W,Gt,ot);if(W.subTimeline&&i&&x.add(he),nt){const dr=new yA(e,p,he);dr.setRealPlayer(xn),E.push(dr)}return xn});E.forEach(W=>{Yo(this.playersByQueriedElement,W.element,[]).push(W),W.onDone(()=>function(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,W.element,W))}),S.forEach(W=>Za(W,Ck));const B=Af(L);return B.onDestroy(()=>{S.forEach(W=>K_(W,Ck)),du(y,t.toStyles)}),x.forEach(W=>{Yo(i,W,[]).push(B)}),B}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Z_(e.duration,e.delay)}}class yA{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Z_,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>ZS(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Yo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function TD(n){return n&&1===n.nodeType}function jk(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function Hk(n,e,t,r,i){const a=[];t.forEach(y=>a.push(jk(y)));const d=[];r.forEach((y,E)=>{const S={};y.forEach(x=>{const L=S[x]=e.computeStyle(E,x,i);(!L||0==L.length)&&(E[za]=XF,d.push(E))}),n.set(E,S)});let p=0;return t.forEach(y=>jk(y,a[p++])),d}function qk(n,e){const t=new Map;if(n.forEach(p=>t.set(p,[])),0==e.length)return t;const i=new Set(e),a=new Map;function d(p){if(!p)return 1;let y=a.get(p);if(y)return y;const E=p.parentNode;return y=t.has(E)?E:i.has(E)?1:d(E),a.set(p,y),y}return e.forEach(p=>{const y=d(p);1!==y&&t.get(y).push(p)}),t}const ID="$$classes";function Za(n,e){if(n.classList)n.classList.add(e);else{let t=n[ID];t||(t=n[ID]={}),t[e]=!0}}function K_(n,e){if(n.classList)n.classList.remove(e);else{let t=n[ID];t&&delete t[e]}}function sL(n,e,t){Af(t).onDone(()=>n.processLeaveNode(e))}function $k(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof fk?$k(r.players,e):e.push(r)}}function Gk(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(a=>i.add(a)):e.set(n,r),t.delete(n),!0}class SD{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,a)=>{},this._transitionEngine=new tL(e,t,r),this._timelineEngine=new WF(e,t,r),this._transitionEngine.onRemovalComplete=(i,a)=>this.onRemovalComplete(i,a)}registerTrigger(e,t,r,i,a){const d=e+"-"+i;let p=this._triggerCache[d];if(!p){const y=[],E=cA(this._driver,a,y);if(y.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${y.join("\n - ")}`);p=function(n,e,t){return new GF(n,e,t)}(i,E,this._normalizer),this._triggerCache[d]=p}this._transitionEngine.registerTrigger(t,i,p)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[a,d]=mk(r);this._timelineEngine.command(a,t,d,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,a){if("@"==r.charAt(0)){const[d,p]=mk(r);return this._timelineEngine.listen(d,t,p,a)}return this._transitionEngine.listen(e,t,r,i,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function zk(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=vA(e[0]),e.length>1&&(r=vA(e[e.length-1]))):e&&(t=vA(e)),t||r?new lL(n,t,r):null}let lL=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let a=n.initialStylesByElement.get(t);a||n.initialStylesByElement.set(t,a={}),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&du(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(du(this._element,this._initialStyles),this._endStyles&&(du(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Cg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Cg(this._element,this._endStyles),this._endStyles=null),du(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function vA(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];cL(i)&&(e=e||{},e[i]=n[i])}return e}function cL(n){return"display"===n||"position"===n}const Zk="animation",Wk="animationend";class hL{constructor(e,t,r,i,a,d,p){this._element=e,this._name=t,this._duration=r,this._delay=i,this._easing=a,this._fillMode=d,this._onDoneFn=p,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=y=>this._handleCallback(y)}apply(){(function(n,e){const t=wA(n,"").trim();let r=0;t.length&&(function(n,e){let t=0;for(let r=0;r<n.length;r++)","===n.charAt(r)&&t++;return t}(t)+1,e=`${t}, ${e}`),AD(n,"",e)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Qk(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Kk(this._element,this._name,"paused")}resume(){Kk(this._element,this._name,"running")}setPosition(e){const t=Yk(this._element,this._name);this._position=e*this._duration,AD(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),r=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&r>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Qk(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(n,e){const r=wA(n,"").split(","),i=bA(r,e);i>=0&&(r.splice(i,1),AD(n,"",r.join(",")))}(this._element,this._name))}}function Kk(n,e,t){AD(n,"PlayState",t,Yk(n,e))}function Yk(n,e){const t=wA(n,"");return t.indexOf(",")>0?bA(t.split(","),e):bA([t],e)}function bA(n,e){for(let t=0;t<n.length;t++)if(n[t].indexOf(e)>=0)return t;return-1}function Qk(n,e,t){t?n.removeEventListener(Wk,e):n.addEventListener(Wk,e)}function AD(n,e,t,r){const i=Zk+e;if(null!=r){const a=n.style[i];if(a.length){const d=a.split(",");d[r]=t,t=d.join(",")}}n.style[i]=t}function wA(n,e){return n.style[Zk+e]||""}class Jk{constructor(e,t,r,i,a,d,p,y){this.element=e,this.keyframes=t,this.animationName=r,this._duration=i,this._delay=a,this._finalStyles=p,this._specialStyles=y,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=d||"linear",this.totalTime=i+a,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new hL(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(r=>{"offset"!=r&&(e[r]=t?this._finalStyles[r]:lA(this.element,r))})}this.currentSnapshot=e}}class yL extends Z_{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=bk(t)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class eO{constructor(){this._count=0}validateStyleProperty(e){return JS(e)}matchesElement(e,t){return XS(e,t)}containsElement(e,t){return eA(e,t)}query(e,t,r){return tA(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,r){r=r.map(p=>bk(p));let i=`@keyframes ${t} {\n`,a="";r.forEach(p=>{a=" ";const y=parseFloat(p.offset);i+=`${a}${100*y}% {\n`,a+=" ",Object.keys(p).forEach(E=>{const S=p[E];switch(E){case"offset":return;case"easing":return void(S&&(i+=`${a}animation-timing-function: ${S};\n`));default:return void(i+=`${a}${E}: ${S};\n`)}}),i+=`${a}}\n`}),i+="}\n";const d=document.createElement("style");return d.textContent=i,d}animate(e,t,r,i,a,d=[],p){const y=d.filter(be=>be instanceof Jk),E={};Ak(r,i)&&y.forEach(be=>{let nt=be.currentSnapshot;Object.keys(nt).forEach(ot=>E[ot]=nt[ot])});const S=function(n){let e={};return n&&(Array.isArray(n)?n:[n]).forEach(r=>{Object.keys(r).forEach(i=>{"offset"==i||"easing"==i||(e[i]=r[i])})}),e}(t=Mk(e,t,E));if(0==r)return new yL(e,S);const x="gen_css_kf_"+this._count++,L=this.buildKeyframeElement(e,x,t);(function(n){var t;const e=null==(t=n.getRootNode)?void 0:t.call(n);return"undefined"!=typeof ShadowRoot&&e instanceof ShadowRoot?e:document.head})(e).appendChild(L);const W=zk(e,t),he=new Jk(e,t,x,r,i,a,S,W);return he.onDestroy(()=>function(n){n.parentNode.removeChild(n)}(L)),he}}class nO{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:lA(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class CL{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(rO().toString()),this._cssKeyframesDriver=new eO}validateStyleProperty(e){return JS(e)}matchesElement(e,t){return XS(e,t)}containsElement(e,t){return eA(e,t)}query(e,t,r){return tA(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,r,i,a,d=[],p){if(!p&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,r,i,a,d);const S={duration:r,delay:i,fill:0==i?"both":"forwards"};a&&(S.easing=a);const x={},L=d.filter(W=>W instanceof nO);Ak(r,i)&&L.forEach(W=>{let he=W.currentSnapshot;Object.keys(he).forEach(be=>x[be]=he[be])});const B=zk(e,t=Mk(e,t=t.map(W=>Mf(W,!1)),x));return new nO(e,t,S,B)}}function rO(){return pk()&&Element.prototype.animate||{}}let TL=(()=>{class n extends uk{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:c.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?dk(t):t;return iO(this._renderer,null,r,"register",[i]),new IL(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.FYo),c.LFG(te))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class IL extends class{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new SL(this._id,e,t||{},this._renderer)}}class SL{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return iO(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!=(t=null==(e=this._renderer.engine.players[+this.id])?void 0:e.getPosition())?t:0}}function iO(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const sO="@.disabled";let AL=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(a,d)=>{const p=null==d?void 0:d.parentNode(a);p&&d.removeChild(p,a)}}createRenderer(t,r){const a=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let S=this._rendererCache.get(a);return S||(S=new oO("",a,this.engine),this._rendererCache.set(a,S)),S}const d=r.id,p=r.id+"-"+this._currentId;this._currentId++,this.engine.register(p,t);const y=S=>{Array.isArray(S)?S.forEach(y):this.engine.registerTrigger(d,p,t,S.name,S)};return r.data.animation.forEach(y),new ML(this,p,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[d,p]=a;d(p)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.FYo),c.LFG(SD),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class oO{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==sO?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class ML extends oO{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==sO?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let a=t.substr(1),d="";return"@"!=a.charAt(0)&&([a,d]=function(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(a)),this.engine.listen(this.namespaceId,i,a,d,p=>{this.factory.scheduleListenerCallback(p._data||-1,r,p)})}return this.delegate.listen(e,t,r)}}let OL=(()=>{class n extends SD{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(te),c.LFG(nA),c.LFG(pA))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Y_=new c.OlP("AnimationModuleType"),aO=[{provide:uk,useClass:TL},{provide:pA,useFactory:function(){return new UF}},{provide:SD,useClass:OL},{provide:c.FYo,useFactory:function(n,e,t){return new AL(n,e,t)},deps:[xs,SD,c.R0b]}],lO=[{provide:nA,useFactory:function(){return"function"==typeof rO()?new CL:new eO}},{provide:Y_,useValue:"BrowserAnimations"},...aO],FL=[{provide:nA,useClass:wk},{provide:Y_,useValue:"NoopAnimations"},...aO];let LL=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?FL:lO}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:lO,imports:[aa]}),n})();function g0(n){return null!=n&&"false"!=`${n}`}function cO(n,e=0){return function(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function uO(n){return Array.isArray(n)?n:[n]}function ai(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Tg(n){return n instanceof c.SBq?n.nativeElement:n}function dO(n,e=Ec.z){return(0,Ir.e)((t,r)=>{let i=null,a=null,d=null;const p=()=>{if(i){i.unsubscribe(),i=null;const E=a;a=null,r.next(E)}};function y(){const E=d+n,S=e.now();if(S<E)return i=this.schedule(void 0,E-S),void r.add(i);p()}t.subscribe(new Pn.Q(r,E=>{a=E,d=e.now(),i||(i=e.schedule(y,n),r.add(i))},()=>{p(),r.complete()},void 0,()=>{a=i=null}))})}let hO=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),UL=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){const r=Tg(t);return new Rn.y(i=>{const d=this._observeElement(r).subscribe(i);return()=>{d.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const r=new Ft.x,i=this._mutationObserverFactory.create(a=>r.next(a));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(hO))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),BL=(()=>{class n{constructor(t,r,i){this._contentObserver=t,this._elementRef=r,this._ngZone=i,this.event=new c.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=g0(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=cO(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(dO(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null==(t=this._currentSubscription)||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(UL),c.Y36(c.SBq),c.Y36(c.R0b))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),fO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[hO]}),n})();var KL=P(6921);function pO(n){return(0,Ir.e)((e,t)=>{(0,iu.Xf)(n).subscribe(new Pn.Q(t,()=>t.complete(),KL.Z)),!t.closed&&e.subscribe(t)})}let EA;try{EA="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){EA=!1}let m0,Ig,DA,hu=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function(n){return n===Yd}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!EA)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.Lbi))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),gO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function CA(n){return function(){if(null==m0&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>m0=!0}))}finally{m0=m0||!1}return m0}()?n:!!n.capture}function QL(){if(null==Ig){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Ig=!1,Ig;if("scrollBehavior"in document.documentElement.style)Ig=!0;else{const n=Element.prototype.scrollTo;Ig=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Ig}function TA(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function Sg(n){return n.composedPath?n.composedPath()[0]:n.target}function IA(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}let vO=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function(n){try{return n.frameElement}catch(e){return null}}(function(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===wO(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),a=wO(t);return t.hasAttribute("contenteditable")?-1!==a:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==a:"video"===i?-1!==a&&(null!==a||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function(n){return!function(n){return function(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function(n){return function(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||bO(n))}(t)&&!this.isDisabled(t)&&((null==r?void 0:r.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(hu))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function bO(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function wO(n){if(!bO(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class hV{constructor(e,t,r,i,a=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,a||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return null==r||r.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe((0,su.q)(1)).subscribe(e)}}let fV=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new hV(t,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(vO),c.LFG(c.R0b),c.LFG(te))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function EO(n){return 0===n.offsetX&&0===n.offsetY}function CO(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const pV=new c.OlP("cdk-input-modality-detector-options"),gV={ignoreKeys:[18,17,224,91,16]},J_=CA({passive:!0,capture:!0});let mV=(()=>{class n{constructor(t,r,i,a){this._platform=t,this._mostRecentTarget=null,this._modality=new bn(null),this._lastTouchMs=0,this._onKeydown=d=>{var p,y;(null==(y=null==(p=this._options)?void 0:p.ignoreKeys)?void 0:y.some(E=>E===d.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Sg(d))},this._onMousedown=d=>{Date.now()-this._lastTouchMs<650||(this._modality.next(EO(d)?"keyboard":"mouse"),this._mostRecentTarget=Sg(d))},this._onTouchstart=d=>{CO(d)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Sg(d))},this._options=We(We({},gV),a),this.modalityDetected=this._modality.pipe(pr((e,t)=>1<=t)),this.modalityChanged=this.modalityDetected.pipe(Nu()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,J_),i.addEventListener("mousedown",this._onMousedown,J_),i.addEventListener("touchstart",this._onTouchstart,J_)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,J_),document.removeEventListener("mousedown",this._onMousedown,J_),document.removeEventListener("touchstart",this._onTouchstart,J_))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(hu),c.LFG(c.R0b),c.LFG(te),c.LFG(pV,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const yV=new c.OlP("cdk-focus-monitor-default-options"),kD=CA({passive:!0,capture:!0});let SA=(()=>{class n{constructor(t,r,i,a,d){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Ft.x,this._rootNodeFocusAndBlurListener=p=>{const y=Sg(p),E="focus"===p.type?this._onFocus:this._onBlur;for(let S=y;S;S=S.parentElement)E.call(this,p,S)},this._document=a,this._detectionMode=(null==d?void 0:d.detectionMode)||0}monitor(t,r=!1){const i=Tg(t);if(!this._platform.isBrowser||1!==i.nodeType)return dt(null);const a=function(n){if(function(){if(null==DA){const n="undefined"!=typeof document?document.head:null;DA=!(!n||!n.createShadowRoot&&!n.attachShadow)}return DA}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),d=this._elementInfo.get(i);if(d)return r&&(d.checkChildren=!0),d.subject;const p={checkChildren:r,subject:new Ft.x,rootNode:a};return this._elementInfo.set(i,p),this._registerGlobalListeners(p),p.subject}stopMonitoring(t){const r=Tg(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const a=Tg(t);a===this._getDocument().activeElement?this._getClosestElementsInfo(a).forEach(([p,y])=>this._originChanged(p,r,y)):(this._setOrigin(r),"function"==typeof a.focus&&a.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),a=Sg(t);!i||!i.checkChildren&&r!==a||this._originChanged(r,this._getFocusOrigin(a),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i.subject,null))}_emitOrigin(t,r){this._ngZone.run(()=>t.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,kD),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,kD)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(pO(this._stopInputModalityDetector)).subscribe(a=>{this._setOrigin(a,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,kD),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,kD),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,a)=>{(a===t||i.checkChildren&&a.contains(t))&&r.push([a,i])}),r}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.R0b),c.LFG(hu),c.LFG(mV),c.LFG(te,8),c.LFG(yV,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const TO="cdk-high-contrast-black-on-white",IO="cdk-high-contrast-white-on-black",AA="cdk-high-contrast-active";let vV=(()=>{class n{constructor(t,r){this._platform=t,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,a=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),a){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(AA),t.remove(TO),t.remove(IO),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(t.add(AA),t.add(TO)):2===r&&(t.add(AA),t.add(IO))}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(hu),c.LFG(te))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const bV=new c.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,c.f3M)(te)}}),EV=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let MA=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new c.vpe,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?EV.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(bV,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const TV=new c.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let fo=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!IA()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(vV),c.LFG(TV,8),c.LFG(te))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[_0],_0]}),n})();function MO(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=g0(e)}}}function xO(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function kO(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=g0(e)}}}function IV(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?cO(t):this.defaultTabIndex}}}class AV{constructor(e,t,r){this._renderer=e,this.element=t,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const OO={enterDuration:225,exitDuration:150},xA=CA({passive:!0}),RO=["mousedown","touchstart"],PO=["mouseup","mouseleave","touchend","touchcancel"];class xV{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Tg(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),a=We(We({},OO),r.animation);r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const d=r.radius||function(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),p=e-i.left,y=t-i.top,E=a.enterDuration,S=document.createElement("div");S.classList.add("mat-ripple-element"),S.style.left=p-d+"px",S.style.top=y-d+"px",S.style.height=2*d+"px",S.style.width=2*d+"px",null!=r.color&&(S.style.backgroundColor=r.color),S.style.transitionDuration=`${E}ms`,this._containerElement.appendChild(S),function(n){window.getComputedStyle(n).getPropertyValue("opacity")}(S),S.style.transform="scale(1)";const x=new AV(this,S,r);return x.state=0,this._activeRipples.add(x),r.persistent||(this._mostRecentTransientRipple=x),this._runTimeoutOutsideZone(()=>{const L=x===this._mostRecentTransientRipple;x.state=1,!r.persistent&&(!L||!this._isPointerDown)&&x.fadeOut()},E),x}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const r=e.element,i=We(We({},OO),e.config.animation);r.style.transitionDuration=`${i.exitDuration}ms`,r.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,r.remove()},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Tg(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(RO))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(PO),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=EO(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!CO(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,xA)})})}_removeTriggerEvents(){this._triggerElement&&(RO.forEach(e=>{this._triggerElement.removeEventListener(e,this,xA)}),this._pointerUpEventsRegistered&&PO.forEach(e=>{this._triggerElement.removeEventListener(e,this,xA)}))}}const RV=new c.OlP("mat-ripple-global-options");let kA=(()=>{class n{constructor(t,r,i,a,d){this._elementRef=t,this._animationMode=d,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=a||{},this._rippleRenderer=new xV(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:We(We(We({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,We(We({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,We(We({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.R0b),c.Y36(hu),c.Y36(RV,8),c.Y36(Y_,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&c.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),OA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[fo,gO],fo]}),n})(),PV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[fo]]}),n})(),NO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[OA,ia,fo,PV]]}),n})(),FO=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),Ag=(()=>{class n extends FO{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const rc=new c.OlP("NgValueAccessor"),LV={provide:rc,useExisting:(0,c.Gpc)(()=>Ud),multi:!0},UV=new c.OlP("CompositionEventMode");let Ud=(()=>{class n extends FO{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(UV,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[c._Bn([LV]),c.qOj]}),n})();function xf(n){return null==n||0===n.length}function VO(n){return null!=n&&"number"==typeof n.length}const as=new c.OlP("NgValidators"),kf=new c.OlP("NgAsyncValidators"),BV=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Pt{static min(e){return function(n){return e=>{if(xf(e.value)||xf(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function(n){return e=>{if(xf(e.value)||xf(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return jO(e)}static requiredTrue(e){return function(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function(n){return xf(n.value)||BV.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function(n){return e=>xf(e.value)||!VO(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function(n){return e=>VO(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function(n){if(!n)return v0;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(xf(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return JO(e)}static composeAsync(e){return XO(e)}}function jO(n){return xf(n.value)?{required:!0}:null}function v0(n){return null}function ZO(n){return null!=n}function WO(n){const e=(0,c.QGY)(n)?(0,wn.D)(n):n;return(0,c.CqO)(e),e}function KO(n){let e={};return n.forEach(t=>{e=null!=t?We(We({},e),t):e}),0===Object.keys(e).length?null:e}function YO(n,e){return e.map(t=>t(n))}function QO(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function JO(n){if(!n)return null;const e=n.filter(ZO);return 0==e.length?null:function(t){return KO(YO(t,e))}}function RA(n){return null!=n?JO(QO(n)):null}function XO(n){if(!n)return null;const e=n.filter(ZO);return 0==e.length?null:function(t){return function(...n){const e=(0,gs.jO)(n),{args:t,keys:r}=O(n),i=new Rn.y(a=>{const{length:d}=t;if(!d)return void a.complete();const p=new Array(d);let y=d,E=d;for(let S=0;S<d;S++){let x=!1;(0,iu.Xf)(t[S]).subscribe(new Pn.Q(a,L=>{x||(x=!0,E--),p[S]=L},()=>y--,void 0,()=>{(!y||!x)&&(E||a.next(r?Le(r,p):p),a.complete())}))}});return e?i.pipe(_e(e)):i}(YO(t,e).map(WO)).pipe((0,at.U)(KO))}}function PA(n){return null!=n?XO(QO(n)):null}function eR(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function tR(n){return n._rawValidators}function nR(n){return n._rawAsyncValidators}function NA(n){return n?Array.isArray(n)?n:[n]:[]}function OD(n,e){return Array.isArray(n)?n.includes(e):n===e}function rR(n,e){const t=NA(e);return NA(n).forEach(i=>{OD(t,i)||t.push(i)}),t}function iR(n,e){return NA(e).filter(t=>!OD(n,t))}class sR{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=RA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=PA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Us extends sR{get formDirective(){return null}get path(){return null}}class Of extends sR{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class oR{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null==(t=this._cd)?void 0:t.submitted):!!(null==(i=null==(r=this._cd)?void 0:r.control)?void 0:i[e])}}let Rf=(()=>{class n extends oR{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Of,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[c.qOj]}),n})(),X_=(()=>{class n extends oR{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Us,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[c.qOj]}),n})();function PD(n,e){return[...e.path,n]}function b0(n,e){VA(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&aR(n,e)})}(n,e),function(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&aR(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ND(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),LD(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function FD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function VA(n,e){const t=tR(n);null!==e.validator?n.setValidators(eR(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=nR(n);null!==e.asyncValidator?n.setAsyncValidators(eR(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();FD(e._rawValidators,i),FD(e._rawAsyncValidators,i)}function LD(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=tR(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(d=>d!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=nR(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(d=>d!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return FD(e._rawValidators,r),FD(e._rawAsyncValidators,r),t}function aR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function lR(n,e){VA(n,e)}function UA(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function cR(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function BA(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===Ud?t=a:function(n){return Object.getPrototypeOf(n.constructor)===Ag}(a)?r=a:i=a}),i||r||t||null}function VD(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const w0="VALID",UD="INVALID",ey="PENDING",E0="DISABLED";function jA(n){return(qA(n)?n.validators:n)||null}function uR(n){return Array.isArray(n)?RA(n):n||null}function HA(n,e){return(qA(e)?e.asyncValidators:n)||null}function dR(n){return Array.isArray(n)?PA(n):n||null}function qA(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class $A{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=uR(this._rawValidators),this._composedAsyncValidatorFn=dR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===w0}get invalid(){return this.status===UD}get pending(){return this.status==ey}get disabled(){return this.status===E0}get enabled(){return this.status!==E0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=uR(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=dR(e)}addValidators(e){this.setValidators(rR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(rR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(iR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(iR(e,this._rawAsyncValidators))}hasValidator(e){return OD(this._rawValidators,e)}hasAsyncValidator(e){return OD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ey,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=E0,this.errors=null,this._forEachChild(r=>{r.disable(Di(We({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Di(We({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=w0,this._forEachChild(r=>{r.enable(Di(We({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Di(We({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===w0||this.status===ey)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?E0:w0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ey,this._hasOwnPendingAsyncValidator=!0;const t=WO(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=r instanceof Pf?r.controls.hasOwnProperty(i)?r.controls[i]:null:r instanceof GA&&r.at(i)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?E0:this.errors?UD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ey)?ey:this._anyControlsHaveStatus(UD)?UD:w0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){qA(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Kn extends $A{constructor(e=null,t,r){super(jA(t),HA(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){VD(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){VD(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Pf extends $A{constructor(e,t,r){super(jA(t),HA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof Kn?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class GA extends $A{constructor(e,t,r){super(jA(t),HA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof Kn?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const XV={provide:Us,useExisting:(0,c.Gpc)(()=>D0)},C0=(()=>Promise.resolve(null))();let D0=(()=>{class n extends Us{constructor(t,r){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new c.vpe,this.form=new Pf({},RA(t),PA(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){C0.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),b0(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){C0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),VD(this._directives,t)})}addFormGroup(t){C0.then(()=>{const r=this._findContainer(t.path),i=new Pf({});lR(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){C0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){C0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,cR(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(as,10),c.Y36(kf,10))},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([XV]),c.qOj]}),n})();const tU={provide:Of,useExisting:(0,c.Gpc)(()=>ty)},pR=(()=>Promise.resolve(null))();let ty=(()=>{class n extends Of{constructor(t,r,i,a){super(),this.control=new Kn,this._registered=!1,this.update=new c.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=BA(0,a)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),UA(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?PD(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){b0(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){pR.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;pR.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Us,9),c.Y36(as,10),c.Y36(kf,10),c.Y36(rc,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[c._Bn([tU]),c.qOj,c.TTD]}),n})(),ny=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const nU={provide:rc,useExisting:(0,c.Gpc)(()=>BD),multi:!0};let BD=(()=>{class n extends Ag{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},features:[c._Bn([nU]),c.qOj]}),n})();const rU={provide:rc,useExisting:(0,c.Gpc)(()=>zA),multi:!0};let gR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),iU=(()=>{class n{constructor(){this._accessors=[]}add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t)return void this._accessors.splice(r,1)}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return!!t[0].control&&t[0]._parent===r._control._parent&&t[1].name===r.name}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:gR}),n})(),zA=(()=>{class n extends Ag{constructor(t,r,i,a){super(t,r),this._registry=i,this._injector=a,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(Of),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(iU),c.Y36(c.zs3))},n.\u0275dir=c.lG2({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,r){1&t&&c.NdJ("change",function(){return r.onChange()})("blur",function(){return r.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[c._Bn([rU]),c.qOj]}),n})();const ZA=new c.OlP("NgModelWithFormControlWarning"),aU={provide:Us,useExisting:(0,c.Gpc)(()=>ry)};let ry=(()=>{class n extends Us{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(LD(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return b0(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ND(t.control||null,t,!1),VD(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,cR(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(ND(r||null,t),i instanceof Kn&&(b0(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);lR(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function(n,e){return LD(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){VA(this.form,this),this._oldForm&&LD(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(as,10),c.Y36(kf,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([aU]),c.qOj,c.TTD]}),n})();const uU={provide:Of,useExisting:(0,c.Gpc)(()=>T0)};let T0=(()=>{class n extends Of{constructor(t,r,i,a,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new c.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=BA(0,a)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),UA(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return PD(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(c.Y36(Us,13),c.Y36(as,10),c.Y36(kf,10),c.Y36(rc,10),c.Y36(ZA,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[c._Bn([uU]),c.qOj,c.TTD]}),n})();const dU={provide:rc,useExisting:(0,c.Gpc)(()=>jD),multi:!0};function vR(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let jD=(()=>{class n extends Ag{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const r=this._getOptionId(t);null==r&&this.setProperty("selectedIndex",-1);const i=vR(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&c.NdJ("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[c._Bn([dU]),c.qOj]}),n})(),bR=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(vR(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(jD,9))},n.\u0275dir=c.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const fU={provide:rc,useExisting:(0,c.Gpc)(()=>YA),multi:!0};function wR(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let YA=(()=>{class n extends Ag{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(a=>this._getOptionId(a));r=(a,d)=>{a._setSelected(i.indexOf(d.toString())>-1)}}else r=(i,a)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],a=r.selectedOptions;if(void 0!==a){const d=a;for(let p=0;p<d.length;p++){const E=this._getOptionValue(d[p].value);i.push(E)}}else{const d=r.options;for(let p=0;p<d.length;p++){const y=d[p];if(y.selected){const E=this._getOptionValue(y.value);i.push(E)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&c.NdJ("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[c._Bn([fU]),c.qOj]}),n})(),ER=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(wR(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(wR(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(YA,9))},n.\u0275dir=c.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const _U={provide:as,useExisting:(0,c.Gpc)(()=>I0),multi:!0};let I0=(()=>{class n{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?jO(t):null}registerOnValidatorChange(t){this._onChange=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("required",r.required?"":null)},inputs:{required:"required"},features:[c._Bn([_U])]}),n})(),kR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[gR]]}),n})(),CU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[kR]}),n})(),OR=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ZA,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[kR]}),n})(),RR=(()=>{class n{group(t,r=null){const i=this._reduceControls(t);let p,a=null,d=null;return null!=r&&(function(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(a=null!=r.validators?r.validators:null,d=null!=r.asyncValidators?r.asyncValidators:null,p=null!=r.updateOn?r.updateOn:void 0):(a=null!=r.validator?r.validator:null,d=null!=r.asyncValidator?r.asyncValidator:null)),new Pf(i,{asyncValidators:d,updateOn:p,validators:a})}control(t,r,i){return new Kn(t,r,i)}array(t,r,i){const a=t.map(d=>this._createControl(d));return new GA(a,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof Kn||t instanceof Pf||t instanceof GA?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:OR}),n})();const TU=["thumbContainer"],IU=["toggleBar"],SU=["input"],AU=function(n){return{enterDuration:n}},MU=["*"],xU=new c.OlP("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let kU=0;const OU={provide:rc,useExisting:(0,c.Gpc)(()=>PR),multi:!0};class RU{constructor(e,t){this.source=e,this.checked=t}}const PU=IV(xO(kO(MO(class{constructor(n){this._elementRef=n}}))));let PR=(()=>{class n extends PU{constructor(t,r,i,a,d,p){super(t),this._focusMonitor=r,this._changeDetectorRef=i,this.defaults=d,this._onChange=y=>{},this._onTouched=()=>{},this._uniqueId="mat-slide-toggle-"+ ++kU,this._required=!1,this._checked=!1,this.name=null,this.id=this._uniqueId,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new c.vpe,this.toggleChange=new c.vpe,this.tabIndex=parseInt(a)||0,this.color=this.defaultColor=d.color||"accent",this._noopAnimations="NoopAnimations"===p}get required(){return this._required}set required(t){this._required=g0(t)}get checked(){return this._checked}set checked(t){this._checked=g0(t),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{t||Promise.resolve().then(()=>this._onTouched())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onChangeEvent(t){t.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(t){t.stopPropagation()}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}focus(t,r){r?this._focusMonitor.focusVia(this._inputElement,r,t):this._inputElement.nativeElement.focus(t)}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(new RU(this,this.checked))}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(SA),c.Y36(c.sBO),c.$8M("tabindex"),c.Y36(xU),c.Y36(Y_,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(t,r){if(1&t&&(c.Gf(TU,5),c.Gf(IU,5),c.Gf(SU,5)),2&t){let i;c.iGM(i=c.CRH())&&(r._thumbEl=i.first),c.iGM(i=c.CRH())&&(r._thumbBarEl=i.first),c.iGM(i=c.CRH())&&(r._inputElement=i.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:12,hostBindings:function(t,r){2&t&&(c.Ikx("id",r.id),c.uIk("tabindex",null)("aria-label",null)("aria-labelledby",null),c.ekj("mat-checked",r.checked)("mat-disabled",r.disabled)("mat-slide-toggle-label-before","before"==r.labelPosition)("_mat-animation-noopable",r._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[c._Bn([OU]),c.qOj],ngContentSelectors:MU,decls:16,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["toggleBar",""],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],["thumbContainer",""],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(t,r){if(1&t&&(c.F$t(),c.TgZ(0,"label",0,1),c.TgZ(2,"div",2,3),c.TgZ(4,"input",4,5),c.NdJ("change",function(a){return r._onChangeEvent(a)})("click",function(a){return r._onInputClick(a)}),c.qZA(),c.TgZ(6,"div",6,7),c._UZ(8,"div",8),c.TgZ(9,"div",9),c._UZ(10,"div",10),c.qZA(),c.qZA(),c.qZA(),c.TgZ(11,"span",11,12),c.NdJ("cdkObserveContent",function(){return r._onLabelTextChange()}),c.TgZ(13,"span",13),c._uU(14,"\xa0"),c.qZA(),c.Hsn(15),c.qZA(),c.qZA()),2&t){const i=c.MAs(1),a=c.MAs(12);c.uIk("for",r.inputId),c.xp6(2),c.ekj("mat-slide-toggle-bar-no-side-margin",!a.textContent||!a.textContent.trim()),c.xp6(2),c.Q6J("id",r.inputId)("required",r.required)("tabIndex",r.tabIndex)("checked",r.checked)("disabled",r.disabled),c.uIk("name",r.name)("aria-checked",r.checked.toString())("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby)("aria-describedby",r.ariaDescribedby),c.xp6(5),c.Q6J("matRippleTrigger",i)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",c.VKq(18,AU,r._noopAnimations?0:150))}},directives:[kA,BL],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;-moz-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}\n"],encapsulation:2,changeDetection:0}),n})(),NR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),LU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[NR,OA,fo,fO],NR,fo]}),n})();const VU=["mat-button",""],UU=["*"],jU=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],HU=xO(MO(kO(class{constructor(n){this._elementRef=n}})));let FR=(()=>{class n extends HU{constructor(t,r,i){super(t),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const a of jU)this._hasHostAttributes(a)&&this._getHostElement().classList.add(a);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(SA),c.Y36(Y_,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&c.Gf(kA,5),2&t){let i;c.iGM(i=c.CRH())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(c.uIk("disabled",r.disabled||null),c.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[c.qOj],attrs:VU,ngContentSelectors:UU,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(c.F$t(),c.TgZ(0,"span",0),c.Hsn(1),c.qZA(),c._UZ(2,"span",1),c._UZ(3,"span",2)),2&t&&(c.xp6(2),c.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),c.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[kA],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),qU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[OA,fo],fo]}),n})();var $U=P(1537);const GU=["addListener","removeListener"],zU=["addEventListener","removeEventListener"],ZU=["on","off"];function JA(n,e,t,r){if((0,tc.m)(t)&&(r=t,t=void 0),r)return JA(n,e,t).pipe(_e(r));const[i,a]=function(n){return(0,tc.m)(n.addEventListener)&&(0,tc.m)(n.removeEventListener)}(n)?zU.map(d=>p=>n[d](e,p,t)):function(n){return(0,tc.m)(n.addListener)&&(0,tc.m)(n.removeListener)}(n)?GU.map(LR(n,e)):function(n){return(0,tc.m)(n.on)&&(0,tc.m)(n.off)}(n)?ZU.map(LR(n,e)):[];if(!i&&(0,$U.z)(n))return(0,Gr.z)(d=>JA(d,e,t))((0,iu.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Rn.y(d=>{const p=(...y)=>d.next(1<y.length?y:y[0]);return i(p),()=>a(p)})}function LR(n,e){return t=>r=>n[t](e,r)}var VR=P(2869);const S0={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=S0;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(a=>{t=void 0,n(a)});return new oi.w0(()=>null==t?void 0:t(i))},requestAnimationFrame(...n){const{delegate:e}=S0;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=S0;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var UR=P(8843);new class extends UR.v{flush(e){this._active=!0,this._scheduled=void 0;const{actions:t}=this;let r,i=-1;e=e||t.shift();const a=t.length;do{if(r=e.execute(e.state,e.delay))break}while(++i<a&&(e=t.shift()));if(this._active=!1,r){for(;++i<a&&(e=t.shift());)e.unsubscribe();throw r}}}(class extends VR.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=S0.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);0===e.actions.length&&(S0.cancelAnimationFrame(t),e._scheduled=void 0)}});let XA,e2=1;const qD={};function BR(n){return n in qD&&(delete qD[n],!0)}const t2={setImmediate(n){const e=e2++;return qD[e]=!0,XA||(XA=Promise.resolve()),XA.then(()=>BR(e)&&n()),e},clearImmediate(n){BR(n)}},{setImmediate:n2,clearImmediate:r2}=t2,$D={setImmediate(...n){const{delegate:e}=$D;return((null==e?void 0:e.setImmediate)||n2)(...n)},clearImmediate(n){const{delegate:e}=$D;return((null==e?void 0:e.clearImmediate)||r2)(n)},delegate:void 0};new class extends UR.v{flush(e){this._active=!0,this._scheduled=void 0;const{actions:t}=this;let r,i=-1;e=e||t.shift();const a=t.length;do{if(r=e.execute(e.state,e.delay))break}while(++i<a&&(e=t.shift()));if(this._active=!1,r){for(;++i<a&&(e=t.shift());)e.unsubscribe();throw r}}}(class extends VR.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=$D.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);0===e.actions.length&&($D.clearImmediate(t),e._scheduled=void 0)}});var c2=P(7398);function jR(n,e=Ec.P){return function(n){return(0,Ir.e)((e,t)=>{let r=!1,i=null,a=null,d=!1;const p=()=>{if(null==a||a.unsubscribe(),a=null,r){r=!1;const E=i;i=null,t.next(E)}d&&t.complete()},y=()=>{a=null,d&&t.complete()};e.subscribe(new Pn.Q(t,E=>{r=!0,i=E,a||(0,iu.Xf)(n()).subscribe(a=new Pn.Q(t,p,y))},()=>{d=!0,(!r||!a||a.closed)&&t.complete()}))})}(()=>function(n=0,e,t=Ec.P){let r=-1;return null!=e&&((0,c2.K)(e)?t=e:r=e),new Rn.y(i=>{let a=function(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let d=0;return t.schedule(function(){i.closed||(i.next(d++),0<=r?this.schedule(void 0,r):i.complete())},a)})}(n,e))}let f2=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new Ft.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Rn.y(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(jR(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):dt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(pr(a=>!a||i.indexOf(a)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,a)=>{this._scrollableContainsElement(a,t)&&r.push(a)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=Tg(r),a=t.getElementRef().nativeElement;do{if(i==a)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>JA(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.R0b),c.LFG(hu),c.LFG(te,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),HR=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new Ft.x,this._changeListener=a=>{this._change.next(a)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const a=this._getWindow();a.addEventListener("resize",this._changeListener),a.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,a=i.getBoundingClientRect();return{top:-a.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-a.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(jR(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(hu),c.LFG(c.R0b),c.LFG(te,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),eM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),qR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[_0,gO,eM],_0,eM]}),n})();class tM{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class nM extends tM{constructor(e,t,r,i){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i}}class $R extends tM{constructor(e,t,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class g2 extends tM{constructor(e){super(),this.element=e instanceof c.SBq?e.nativeElement:e}}class rM{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof nM?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof $R?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof g2?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class m2 extends rM{constructor(e,t,r,i,a){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=d=>{const p=d.element,y=this._document.createComment("dom-portal");p.parentNode.insertBefore(y,p),this.outletElement.appendChild(p),this._attachedPortal=d,super.setDisposeFn(()=>{y.parentNode&&y.parentNode.replaceChild(p,y)})},this._document=a}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context);return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let GR=(()=>{class n extends rM{constructor(t,r,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new c.vpe,this.attachDomPortal=a=>{const d=a.element,p=this._document.createComment("dom-portal");a.setAttachedHost(this),d.parentNode.insertBefore(p,d),this._getRootNode().appendChild(d),this._attachedPortal=a,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(d,p)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,a=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),d=r.createComponent(a,r.length,t.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(d.hostView.rootNodes[0]),super.setDisposeFn(()=>d.destroy()),this._attachedPortal=t,this._attachedRef=d,this.attached.emit(d),d}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c._Vd),c.Y36(c.s_b),c.Y36(te))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[c.qOj]}),n})(),zR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const ZR=QL();class _2{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=ai(-this._previousScrollPosition.left),e.style.top=ai(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,a=r.scrollBehavior||"",d=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),ZR&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),ZR&&(r.scrollBehavior=a,i.scrollBehavior=d)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class y2{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class WR{enable(){}disable(){}attach(){}}function iM(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function KR(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class v2{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();iM(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let b2=(()=>{class n{constructor(t,r,i,a){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new WR,this.close=d=>new y2(this._scrollDispatcher,this._ngZone,this._viewportRuler,d),this.block=()=>new _2(this._viewportRuler,this._document),this.reposition=d=>new v2(this._scrollDispatcher,this._viewportRuler,this._ngZone,d),this._document=a}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(f2),c.LFG(HR),c.LFG(c.R0b),c.LFG(te))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class YR{constructor(e){if(this.scrollStrategy=new WR,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class w2{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let QR=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(te))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),E2=(()=>{class n extends QR{constructor(t){super(t),this._keydownListener=r=>{const i=this._attachedOverlays;for(let a=i.length-1;a>-1;a--)if(i[a]._keydownEvents.observers.length>0){i[a]._keydownEvents.next(r);break}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(te))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),C2=(()=>{class n extends QR{constructor(t,r){super(t),this._platform=r,this._cursorStyleIsSet=!1,this._pointerDownListener=i=>{this._pointerDownEventTarget=Sg(i)},this._clickListener=i=>{const a=Sg(i),d="click"===i.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let y=p.length-1;y>-1;y--){const E=p[y];if(!(E._outsidePointerEvents.observers.length<1)&&E.hasAttached()){if(E.overlayElement.contains(a)||E.overlayElement.contains(d))break;E._outsidePointerEvents.next(i)}}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;r.addEventListener("pointerdown",this._pointerDownListener,!0),r.addEventListener("click",this._clickListener,!0),r.addEventListener("auxclick",this._clickListener,!0),r.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(te),c.LFG(hu))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sM=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){var t;null==(t=this._containerElement)||t.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||IA()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let a=0;a<i.length;a++)i[a].remove()}const r=this._document.createElement("div");r.classList.add(t),IA()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(te),c.LFG(hu))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class D2{constructor(e,t,r,i,a,d,p,y,E){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=a,this._keyboardDispatcher=d,this._document=p,this._location=y,this._outsideClickDispatcher=E,this._backdropElement=null,this._backdropClick=new Ft.x,this._attachments=new Ft.x,this._detachments=new Ft.x,this._locationChanges=oi.w0.EMPTY,this._backdropClickHandler=S=>this._backdropClick.next(S),this._keydownEvents=new Ft.x,this._outsidePointerEvents=new Ft.x,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){let t=this._portalOutlet.attach(e);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,su.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){var t;const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null==(t=this._host)||t.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=We(We({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Di(We({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=ai(this._config.width),e.height=ai(this._config.height),e.minWidth=ai(this._config.minWidth),e.minHeight=ai(this._config.minHeight),e.maxWidth=ai(this._config.maxWidth),e.maxHeight=ai(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(!e)return;let t;const r=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",r),this._disposeBackdrop(e)),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",r)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(r,500))}_toggleClasses(e,t,r){const i=uO(t||[]).filter(a=>!!a);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(pO((0,w_.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.remove(),this._backdropElement===e&&(this._backdropElement=null))}}const JR="cdk-overlay-connected-position-bounding-box",T2=/([A-Za-z%]+)$/;class I2{constructor(e,t,r,i,a){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=a,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Ft.x,this._resizeSubscription=oi.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(JR),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=[];let a;for(let d of this._preferredPositions){let p=this._getOriginPoint(e,d),y=this._getOverlayPoint(p,t,d),E=this._getOverlayFit(y,t,r,d);if(E.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(d,p);this._canFitWithFlexibleDimensions(E,y,r)?i.push({position:d,origin:p,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(p,d)}):(!a||a.overlayFit.visibleArea<E.visibleArea)&&(a={overlayFit:E,overlayPoint:y,originPoint:p,position:d,overlayRect:t})}if(i.length){let d=null,p=-1;for(const y of i){const E=y.boundingBoxRect.width*y.boundingBoxRect.height*(y.position.weight||1);E>p&&(p=E,d=y)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(a.position,a.originPoint);this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Mg(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(JR),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const e=this._lastPosition||this._preferredPositions[0],t=this._getOriginPoint(this._originRect,e);this._applyPosition(e,t)}}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t){let r,i;if("center"==t.originX)r=e.left+e.width/2;else{const a=this._isRtl()?e.right:e.left,d=this._isRtl()?e.left:e.right;r="start"==t.originX?a:d}return i="center"==t.originY?e.top+e.height/2:"top"==t.originY?e.top:e.bottom,{x:r,y:i}}_getOverlayPoint(e,t,r){let i,a;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,a="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+a}}_getOverlayFit(e,t,r,i){const a=e1(t);let{x:d,y:p}=e,y=this._getOffset(i,"x"),E=this._getOffset(i,"y");y&&(d+=y),E&&(p+=E);let L=0-p,B=p+a.height-r.height,W=this._subtractOverflows(a.width,0-d,d+a.width-r.width),he=this._subtractOverflows(a.height,L,B),be=W*he;return{visibleArea:be,isCompletelyWithinViewport:a.width*a.height===be,fitsInViewportVertically:he===a.height,fitsInViewportHorizontally:W==a.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,a=r.right-t.x,d=XR(this._overlayRef.getConfig().minHeight),p=XR(this._overlayRef.getConfig().minWidth),E=e.fitsInViewportHorizontally||null!=p&&p<=a;return(e.fitsInViewportVertically||null!=d&&d<=i)&&E}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=e1(t),a=this._viewportRect,d=Math.max(e.x+i.width-a.width,0),p=Math.max(e.y+i.height-a.height,0),y=Math.max(a.top-r.top-e.y,0),E=Math.max(a.left-r.left-e.x,0);let S=0,x=0;return S=i.width<=a.width?E||-d:e.x<this._viewportMargin?a.left-r.left-e.x:0,x=i.height<=a.height?y||-p:e.y<this._viewportMargin?a.top-r.top-e.y:0,this._previousPushAmount={x:S,y:x},{x:e.x+S,y:e.y+x}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new w2(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let a=0;a<t.length;a++)t[a].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let a,d,p,S,x,L;if("top"===t.overlayY)d=e.y,a=r.height-d+this._viewportMargin;else if("bottom"===t.overlayY)p=r.height-e.y+2*this._viewportMargin,a=r.height-p+this._viewportMargin;else{const B=Math.min(r.bottom-e.y+r.top,e.y),W=this._lastBoundingBoxSize.height;a=2*B,d=e.y-B,a>W&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.y-W/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)L=r.width-e.x+this._viewportMargin,S=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)x=e.x,S=r.right-e.x;else{const B=Math.min(r.right-e.x+r.left,e.x),W=this._lastBoundingBoxSize.width;S=2*B,x=e.x-B,S>W&&!this._isInitialRender&&!this._growAfterOpen&&(x=e.x-W/2)}return{top:d,left:x,bottom:p,right:L,width:S,height:a}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const a=this._overlayRef.getConfig().maxHeight,d=this._overlayRef.getConfig().maxWidth;i.height=ai(r.height),i.top=ai(r.top),i.bottom=ai(r.bottom),i.width=ai(r.width),i.left=ai(r.left),i.right=ai(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",a&&(i.maxHeight=ai(a)),d&&(i.maxWidth=ai(d))}this._lastBoundingBoxSize=r,Mg(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Mg(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Mg(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),a=this._hasFlexibleDimensions,d=this._overlayRef.getConfig();if(i){const S=this._viewportRuler.getViewportScrollPosition();Mg(r,this._getExactOverlayY(t,e,S)),Mg(r,this._getExactOverlayX(t,e,S))}else r.position="static";let p="",y=this._getOffset(t,"x"),E=this._getOffset(t,"y");y&&(p+=`translateX(${y}px) `),E&&(p+=`translateY(${E}px)`),r.transform=p.trim(),d.maxHeight&&(i?r.maxHeight=ai(d.maxHeight):a&&(r.maxHeight="")),d.maxWidth&&(i?r.maxWidth=ai(d.maxWidth):a&&(r.maxWidth="")),Mg(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},a=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(a=this._pushOverlayOnScreen(a,this._overlayRect,r));let d=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return a.y-=d,"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(a.y+this._overlayRect.height)+"px":i.top=ai(a.y),i}_getExactOverlayX(e,t,r){let d,i={left:"",right:""},a=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(a=this._pushOverlayOnScreen(a,this._overlayRect,r)),d=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===d?i.right=this._document.documentElement.clientWidth-(a.x+this._overlayRect.width)+"px":i.left=ai(a.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:KR(e,r),isOriginOutsideView:iM(e,r),isOverlayClipped:KR(t,r),isOverlayOutsideView:iM(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&uO(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof c.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function Mg(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function XR(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(T2);return t&&"px"!==t?null:parseFloat(e)}return n||null}function e1(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const t1="cdk-global-overlay-wrapper";class S2{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(t1),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:a,maxWidth:d,maxHeight:p}=r,y=!("100%"!==i&&"100vw"!==i||d&&"100%"!==d&&"100vw"!==d),E=!("100%"!==a&&"100vh"!==a||p&&"100%"!==p&&"100vh"!==p);e.position=this._cssPosition,e.marginLeft=y?"0":this._leftOffset,e.marginTop=E?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,y?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=E?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(t1),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let A2=(()=>{class n{constructor(t,r,i,a){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=a}global(){return new S2}flexibleConnectedTo(t){return new I2(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(HR),c.LFG(te),c.LFG(hu),c.LFG(sM))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),M2=0,A0=(()=>{class n{constructor(t,r,i,a,d,p,y,E,S,x,L){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=a,this._keyboardDispatcher=d,this._injector=p,this._ngZone=y,this._document=E,this._directionality=S,this._location=x,this._outsideClickDispatcher=L}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),a=this._createPortalOutlet(i),d=new YR(t);return d.direction=d.direction||this._directionality.value,new D2(a,r,i,d,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+M2++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(c.z2F)),new m2(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(b2),c.LFG(sM),c.LFG(c._Vd),c.LFG(A2),c.LFG(E2),c.LFG(c.zs3),c.LFG(c.R0b),c.LFG(te),c.LFG(MA),c.LFG($e),c.LFG(C2))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const O2={provide:new c.OlP("cdk-connected-overlay-scroll-strategy"),deps:[A0],useFactory:function(n){return()=>n.scrollStrategies.reposition()}};let n1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[A0,O2],imports:[[_0,zR,qR],qR]}),n})();function R2(n,e){}class GD{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0}}const P2={dialogContainer:dD("dialogContainer",[G_("void, exit",Ga({opacity:0,transform:"scale(0.7)"})),G_("enter",Ga({transform:"none"})),z_("* => enter",h0("150ms cubic-bezier(0, 0, 0.2, 1)",Ga({transform:"none",opacity:1}))),z_("* => void, * => exit",h0("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",Ga({opacity:0})))])};let N2=(()=>{class n extends rM{constructor(t,r,i,a,d,p,y,E){super(),this._elementRef=t,this._focusTrapFactory=r,this._changeDetectorRef=i,this._config=d,this._interactivityChecker=p,this._ngZone=y,this._focusMonitor=E,this._animationStateChanged=new c.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=S=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(S)),this._ariaLabelledBy=d.ariaLabelledBy||null,this._document=a}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement()}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{t.addEventListener("blur",()=>t.removeAttribute("tabindex")),t.addEventListener("mousedown",()=>t.removeAttribute("tabindex"))})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const r=TA(),i=this._elementRef.nativeElement;(!r||r===this._document.body||r===i||i.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=TA())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,r=TA();return t===r||t.contains(r)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(fV),c.Y36(c.sBO),c.Y36(te,8),c.Y36(GD),c.Y36(vO),c.Y36(c.R0b),c.Y36(SA))},n.\u0275dir=c.lG2({type:n,viewQuery:function(t,r){if(1&t&&c.Gf(GR,7),2&t){let i;c.iGM(i=c.CRH())&&(r._portalOutlet=i.first)}},features:[c.qOj]}),n})(),F2=(()=>{class n extends N2{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:r}){"enter"===t?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:r})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:r}))}_onAnimationStart({toState:t,totalTime:r}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:r}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:r})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,r){1&t&&c.WFA("@dialogContainer.start",function(a){return r._onAnimationStart(a)})("@dialogContainer.done",function(a){return r._onAnimationDone(a)}),2&t&&(c.Ikx("id",r._id),c.uIk("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledBy)("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),c.d8E("@dialogContainer",r._state))},features:[c.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,r){1&t&&c.YNc(0,R2,0,0,"ng-template",0)},directives:[GR],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[P2.dialogContainer]}}),n})(),L2=0;class r1{constructor(e,t,r="mat-dialog-"+L2++){this._overlayRef=e,this._containerInstance=t,this.id=r,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new Ft.x,this._afterClosed=new Ft.x,this._beforeClosed=new Ft.x,this._state=0,t._id=r,t._animationStateChanged.pipe(pr(i=>"opened"===i.state),(0,su.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(pr(i=>"closed"===i.state),(0,su.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),e.keydownEvents().pipe(pr(i=>27===i.keyCode&&!this.disableClose&&!function(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}(i))).subscribe(i=>{i.preventDefault(),oM(this,"keyboard")}),e.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():oM(this,"mouse")})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(pr(t=>"closing"===t.state),(0,su.q)(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(e){let t=this._getPositionStrategy();return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(e="",t=""){return this._overlayRef.updateSize({width:e,height:t}),this._overlayRef.updatePosition(),this}addPanelClass(e){return this._overlayRef.addPanelClass(e),this}removePanelClass(e){return this._overlayRef.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function oM(n,e,t){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=e),n.close(t)}const s1=new c.OlP("MatDialogData"),V2=new c.OlP("mat-dialog-default-options"),o1=new c.OlP("mat-dialog-scroll-strategy"),B2={provide:o1,deps:[A0],useFactory:function(n){return()=>n.scrollStrategies.block()}};let j2=(()=>{class n{constructor(t,r,i,a,d,p,y,E,S,x){this._overlay=t,this._injector=r,this._defaultOptions=i,this._parentDialog=a,this._overlayContainer=d,this._dialogRefConstructor=y,this._dialogContainerType=E,this._dialogDataToken=S,this._animationMode=x,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Ft.x,this._afterOpenedAtThisLevel=new Ft.x,this._ariaHiddenElements=new Map,this._dialogAnimatingOpen=!1,this.afterAllClosed=qt(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(El(void 0))),this._scrollStrategy=p}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,r){if(r=function(n,e){return We(We({},e),n)}(r,this._defaultOptions||new GD),r.id&&this.getDialogById(r.id),this._dialogAnimatingOpen)return this._lastDialogRef;const i=this._createOverlay(r),a=this._attachDialogContainer(i,r);if("NoopAnimations"!==this._animationMode){const p=a._animationStateChanged.subscribe(y=>{"opening"===y.state&&(this._dialogAnimatingOpen=!0),"opened"===y.state&&(this._dialogAnimatingOpen=!1,p.unsubscribe())});this._animationStateSubscriptions||(this._animationStateSubscriptions=new oi.w0),this._animationStateSubscriptions.add(p)}const d=this._attachDialogContent(t,a,i,r);return this._lastDialogRef=d,this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(d),d.afterClosed().subscribe(()=>this._removeOpenDialog(d)),this.afterOpened.next(d),a._initializeWithAttachedContent(),d}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._animationStateSubscriptions&&this._animationStateSubscriptions.unsubscribe()}_createOverlay(t){const r=this._getOverlayConfig(t);return this._overlay.create(r)}_getOverlayConfig(t){const r=new YR({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachDialogContainer(t,r){const a=c.zs3.create({parent:r&&r.viewContainerRef&&r.viewContainerRef.injector||this._injector,providers:[{provide:GD,useValue:r}]}),d=new nM(this._dialogContainerType,r.viewContainerRef,a,r.componentFactoryResolver);return t.attach(d).instance}_attachDialogContent(t,r,i,a){const d=new this._dialogRefConstructor(i,r,a.id);if(t instanceof c.Rgc)r.attachTemplatePortal(new $R(t,null,{$implicit:a.data,dialogRef:d}));else{const p=this._createInjector(a,d,r),y=r.attachComponentPortal(new nM(t,a.viewContainerRef,p));d.componentInstance=y.instance}return d.updateSize(a.width,a.height).updatePosition(a.position),d}_createInjector(t,r,i){const a=t&&t.viewContainerRef&&t.viewContainerRef.injector,d=[{provide:this._dialogContainerType,useValue:i},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:r}];return t.direction&&(!a||!a.get(MA,null,c.XFs.Optional))&&d.push({provide:MA,useValue:{value:t.direction,change:dt()}}),c.zs3.create({parent:a||this._injector,providers:d})}_removeOpenDialog(t){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((i,a)=>{i?a.setAttribute("aria-hidden",i):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const r=t.parentElement.children;for(let i=r.length-1;i>-1;i--){let a=r[i];a!==t&&"SCRIPT"!==a.nodeName&&"STYLE"!==a.nodeName&&!a.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(a,a.getAttribute("aria-hidden")),a.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let r=t.length;for(;r--;)t[r].close()}}return n.\u0275fac=function(t){c.$Z()},n.\u0275dir=c.lG2({type:n}),n})(),aM=(()=>{class n extends j2{constructor(t,r,i,a,d,p,y,E){super(t,r,a,p,y,d,r1,F2,s1,E)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(A0),c.LFG(c.zs3),c.LFG($e,8),c.LFG(V2,8),c.LFG(o1),c.LFG(n,12),c.LFG(sM),c.LFG(Y_,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),q2=(()=>{class n{constructor(t,r,i){this.dialogRef=t,this._elementRef=r,this._dialog=i,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=function(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-dialog-container");)t=t.parentElement;return t?e.find(r=>r.id===t.id):null}(this._elementRef,this._dialog.openDialogs))}ngOnChanges(t){const r=t._matDialogClose||t._matDialogCloseResult;r&&(this.dialogResult=r.currentValue)}_onButtonClick(t){oM(this.dialogRef,0===t.screenX&&0===t.screenY?"keyboard":"mouse",this.dialogResult)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(r1,8),c.Y36(c.SBq),c.Y36(aM))},n.\u0275dir=c.lG2({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(t,r){1&t&&c.NdJ("click",function(a){return r._onButtonClick(a)}),2&t&&c.uIk("aria-label",r.ariaLabel||null)("type",r.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[c.TTD]}),n})(),G2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[aM,B2],imports:[[n1,zR,fo],fo]}),n})(),a1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[ia,fo,fO],fo]}),n})();const eB={provide:new c.OlP("mat-select-scroll-strategy"),deps:[A0],useFactory:function(n){return()=>n.scrollStrategies.reposition()}};let tB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[eB],imports:[[ia,n1,NO,fo],eM,a1,NO,fo]}),n})(),Bd=(()=>{class n{constructor(t,r){this.service=t,this.cartService=r,this.cartSource=new bn(0),this.currencySource=new bn("\u20ac"),this.converterSource=new bn(1),this.dishSource=new bn({}),this.currentCurrency=this.currencySource.asObservable(),this.currentCart=this.cartSource.asObservable(),this.currentConverter=this.converterSource.asObservable(),this.currentDish=this.dishSource.asObservable()}ngOnInit(){this.getOrder()}changeCurrency(t,r){this.currencySource.next(t),this.converterSource.next(r)}cartUpdate(t){this.cartService.getOrder(),this.cartSource.next(t)}getOrder(){this.cartService.getOrder().snapshotChanges().pipe((0,at.U)(t=>t.map(r=>Object.assign({key:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.order=t})}getDish(t){let r;return this.dishes.forEach(i=>{i.key==t&&(r=i)}),r}getDishes(){return this.dishes}}return n.\u0275fac=function(t){return new(t||n)(c.LFG($a),c.LFG(Ld))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const nB=function(n){return{"cart-change":n}};let rB=(()=>{class n{constructor(t,r){this.data=t,this.cartService=r}ngOnInit(){this.data.currentCart.subscribe(t=>this.cart=t),this.cartService.updateCart()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Bd),c.Y36(Ld))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-cart-status"]],decls:2,vars:4,consts:[[1,"cart","text-nowrap",3,"ngClass"]],template:function(t,r){1&t&&(c.TgZ(0,"button",0),c._uU(1),c.qZA()),2&t&&(c.Q6J("ngClass",c.VKq(2,nB,r.cartService.getTotalQuantity()>10)),c.xp6(1),c.hij(" Cart: ",r.cartService.getTotalQuantity(),"\n"))},directives:[sr],styles:[".cart[_ngcontent-%COMP%]{border-radius:15px;height:50%;color:#fff;background-color:#db9a20}.cart-change[_ngcontent-%COMP%]{background-color:#f87564}"]}),n})();function iB(n,e){1&n&&c._UZ(0,"app-cart-status",16)}function sB(n,e){1&n&&(c.TgZ(0,"a",17),c._uU(1,"Manager"),c.qZA())}function oB(n,e){1&n&&(c.TgZ(0,"a",18),c._uU(1,"Admin"),c.qZA())}function aB(n,e){1&n&&(c.TgZ(0,"a",19),c._uU(1,"Log In"),c.qZA(),c.TgZ(2,"a",20),c._uU(3,"Sign Up"),c.qZA())}function lB(n,e){if(1&n){const t=c.EpF();c.ynx(0),c.TgZ(1,"p",21),c._uU(2),c.qZA(),c.TgZ(3,"a",22),c.NdJ("click",function(){return c.CHM(t),c.oxw().logout()}),c._uU(4,"Log Out"),c.qZA(),c.BQk()}if(2&n){const t=c.oxw();c.xp6(2),c.Oqu(t.auth.currentUser.email)}}let Nf=(()=>{class n{constructor(t,r){this.data=t,this.auth=r,this.math=Math,this.menu=this.data.getDishes()}ngOnInit(){this.data.currentConverter.subscribe(t=>this.converter=t),this.data.currentCurrency.subscribe(t=>this.currency=t)}onChange(){"\u20ac"!=this.currency?this.data.changeCurrency("\u20ac",1):this.data.changeCurrency("$",.89)}isChecked(){return"$"==this.currency}logout(){this.auth.logout()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Bd),c.Y36(qa))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-nav-bar"]],decls:21,vars:7,consts:[[1,"logo"],["routerLink","/cart",4,"ngIf"],["routerLink","",1,"nav-link"],["routerLink","/dishes/1",1,"nav-link"],["type","checkbox","id","menu-button","name","menu-buttton",1,"menu-button"],["for","menu-button",1,"menu-icon"],[1,"nav-icon","xleft"],[1,"nav-icon","middle"],[1,"nav-icon","xright"],[1,"spacer"],[1,"links"],["routerLink","/manager-view","class","nav-link text-nowrap",4,"ngIf"],["routerLink","/admin-view","class","nav-link text-nowrap",4,"ngIf"],["anonymousUser",""],[4,"ngIf","ngIfElse"],[1,"white-txt",3,"checked","change"],["routerLink","/cart"],["routerLink","/manager-view",1,"nav-link","text-nowrap"],["routerLink","/admin-view",1,"nav-link","text-nowrap"],["routerLink","/login",1,"nav-link","text-nowrap"],["routerLink","/sign-up",1,"nav-link","text-nowrap"],[1,"email"],["routerLink","",1,"nav-link","text-nowrap",3,"click"]],template:function(t,r){if(1&t&&(c.TgZ(0,"header"),c.TgZ(1,"div",0),c.YNc(2,iB,1,0,"app-cart-status",1),c.TgZ(3,"a",2),c._uU(4,"Home"),c.qZA(),c.TgZ(5,"a",3),c._uU(6,"Menu"),c.qZA(),c.qZA(),c._UZ(7,"input",4),c.TgZ(8,"label",5),c._UZ(9,"span",6),c._UZ(10,"span",7),c._UZ(11,"span",8),c.qZA(),c._UZ(12,"div",9),c.TgZ(13,"nav",10),c.YNc(14,sB,2,0,"a",11),c.YNc(15,oB,2,0,"a",12),c.YNc(16,aB,4,0,"ng-template",null,13,c.W1O),c.YNc(18,lB,5,1,"ng-container",14),c.TgZ(19,"mat-slide-toggle",15),c.NdJ("change",function(){return r.onChange()}),c._uU(20),c.qZA(),c.qZA(),c.qZA()),2&t){const i=c.MAs(17);c.xp6(2),c.Q6J("ngIf",r.auth.isLogged()),c.xp6(12),c.Q6J("ngIf",r.auth.manager),c.xp6(1),c.Q6J("ngIf",r.auth.admin),c.xp6(3),c.Q6J("ngIf",r.auth.isLogged())("ngIfElse",i),c.xp6(1),c.Q6J("checked",r.isChecked()),c.xp6(1),c.hij("",r.currency," ")}},directives:[Cr,uD,PR,rB,Sf],styles:['header[_ngcontent-%COMP%]{width:100vw;background-color:#234da8;padding:7px 20px;border:1px solid grey;display:flex;flex-wrap:nowrap;justify-content:space-between;align-items:center}.white-txt[_ngcontent-%COMP%]{color:#fff}.spacer[_ngcontent-%COMP%]{flex-basis:55%}.links[_ngcontent-%COMP%]{display:flex;flex-basis:30%;justify-content:flex-end;align-items:center}.nav-link[_ngcontent-%COMP%]{margin:0 5px;padding:5px;text-decoration:none;font-weight:bolder;color:#ffffffe0}.nav-link[_ngcontent-%COMP%]:hover{color:#db9a20}#menu-button[_ngcontent-%COMP%]{position:absolute;top:-100%;left:-100%}.email[_ngcontent-%COMP%]{color:#fff;text-align:center;margin:0 5px;padding:5px}.logo[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}@media screen and (max-width: 700px){header[_ngcontent-%COMP%]{display:grid;grid-template-areas:"title   spacer   hamburger" "nav     nav     nav"}.logo[_ngcontent-%COMP%]{grid-area:title}.menu-icon[_ngcontent-%COMP%]{grid-area:hamburger}.nav-icon[_ngcontent-%COMP%]{background:#333;margin:2px 0;display:block;height:2px;width:18px;position:relative}.links[_ngcontent-%COMP%]{grid-area:nav;margin-top:10px;max-height:0;overflow:hidden;transition:max-height .2s ease-out;display:flex;flex-direction:column}.nav-link[_ngcontent-%COMP%]{width:100%;text-align:center;box-sizing:border-box;border-radius:5px;margin:2px}.nav-link[_ngcontent-%COMP%]:hover{background-color:#db9a20;color:#fff;border:1px solid grey}.menu-button[_ngcontent-%COMP%]:checked ~ .links[_ngcontent-%COMP%]{max-height:250px}.menu-button[_ngcontent-%COMP%]:checked ~ .menu-icon[_ngcontent-%COMP%]   .middle[_ngcontent-%COMP%]{transform:rotate(360deg);background:transparent}.menu-button[_ngcontent-%COMP%]:checked ~ .menu-icon[_ngcontent-%COMP%]   .xleft[_ngcontent-%COMP%]{transform:rotate(-135deg)}.menu-button[_ngcontent-%COMP%]:checked ~ .menu-icon[_ngcontent-%COMP%]   .xright[_ngcontent-%COMP%]{transform:rotate(135deg)}.menu-button[_ngcontent-%COMP%]:checked ~ .menu-icon[_ngcontent-%COMP%]   .xleft[_ngcontent-%COMP%]{top:8px}.middle[_ngcontent-%COMP%], .xleft[_ngcontent-%COMP%], .xright[_ngcontent-%COMP%]{transition:all .5s ease-out}.links[_ngcontent-%COMP%]{transition:all .8s ease-out}}']}),n})();const cB=function(n,e){return{"btn-cstm":n,disabled:e}},uB=function(n){return{disabled:n}};let lM=(()=>{class n{constructor(t,r,i){this.data=t,this.dishList=r,this.cartService=i}ngOnInit(){this.data.currentCart.subscribe(t=>this.cart=t),this.dishes=this.dishList.getDishesArray(),this.dishes.forEach(t=>{this.dishID==t.key&&(this.dish=t)})}plus(){this.dish.ordersLimit>0&&(this.dish.ordersLimit-=1,this.data.cartUpdate(this.cart+1),this.cartService.addToCart(this.dish.key,this.dish.name),this.dishList.plusOrdersLimit(this.dishID))}minus(){this.dish.ordersLimit<this.dish.maxLimit&&(this.dish.ordersLimit+=1,this.data.cartUpdate(this.cart-1),this.cartService.removeFromCart(this.dish.key),this.dishList.minusOrdersLimit(this.dishID))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Bd),c.Y36($a),c.Y36(Ld))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-quantity-buttons"]],inputs:{dishID:"dishID"},decls:4,vars:7,consts:[["type","submit",1,"btn","btn-warning","waves","order-btn",3,"ngClass","click"],["type","submit",1,"btn","btn-danger","waves","order-btn",3,"ngClass","click"]],template:function(t,r){1&t&&(c.TgZ(0,"button",0),c.NdJ("click",function(){return r.plus()}),c._uU(1,"+"),c.qZA(),c.TgZ(2,"button",1),c.NdJ("click",function(){return r.minus()}),c._uU(3,"-"),c.qZA()),2&t&&(c.Q6J("ngClass",c.WLB(2,cB,r.dish.ordersLimit>=4,0==r.dish.ordersLimit)),c.xp6(2),c.Q6J("ngClass",c.VKq(5,uB,r.dish.ordersLimit==r.dish.maxLimit)))},directives:[sr],styles:[".order-btn[_ngcontent-%COMP%]{height:40px}.btn-cstm[_ngcontent-%COMP%]{background-color:#67be5f;color:#fff;border:0px}"]}),n})();function dB(n,e){if(1&n&&(c.TgZ(0,"tbody"),c.TgZ(1,"tr"),c.TgZ(2,"td"),c._uU(3),c.qZA(),c.TgZ(4,"td"),c._uU(5),c.qZA(),c.TgZ(6,"td"),c._UZ(7,"app-quantity-buttons",7),c.qZA(),c.qZA(),c.qZA()),2&n){const t=e.$implicit;c.xp6(3),c.Oqu(t.dish),c.xp6(2),c.Oqu(t.quantity),c.xp6(2),c.Q6J("dishID",t.key)}}let hB=(()=>{class n{constructor(t,r){this.cartService=t,this.data=r,this.order=[],this.math=Math}ngOnInit(){this.cartService.currentTotalPrice.subscribe(t=>this.totalPrice=t),this.cartService.currentTotalQuantity.subscribe(t=>this.totalQuantity=t),this.data.currentConverter.subscribe(t=>this.converter=t),this.data.currentCurrency.subscribe(t=>this.currency=t),this.getOrder()}createCart(){this.cartService.createCart()}getOrder(){this.cartService.getOrder().snapshotChanges().pipe((0,at.U)(t=>t.map(r=>Object.assign({key:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.order=t})}checkout(){this.cartService.checkout()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ld),c.Y36(Bd))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-cart"]],decls:20,vars:4,consts:[[1,"centered"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[1,"summary"],[1,"bold"],[1,"btn","btn-success",3,"click"],[3,"dishID"]],template:function(t,r){1&t&&(c._UZ(0,"app-nav-bar"),c.TgZ(1,"section",0),c.TgZ(2,"table",1),c.TgZ(3,"thead"),c.TgZ(4,"tr"),c.TgZ(5,"th",2),c._uU(6,"Dish"),c.qZA(),c.TgZ(7,"th",2),c._uU(8,"Quantity"),c.qZA(),c._UZ(9,"th",2),c.qZA(),c.qZA(),c.YNc(10,dB,8,3,"tbody",3),c.TgZ(11,"thead",4),c.TgZ(12,"th",5),c._uU(13,"Summary"),c.qZA(),c.TgZ(14,"th",5),c._uU(15),c.qZA(),c.TgZ(16,"th",5),c._uU(17),c.qZA(),c.qZA(),c.qZA(),c.TgZ(18,"button",6),c.NdJ("click",function(){return r.checkout()}),c._uU(19,"Checkout"),c.qZA(),c.qZA()),2&t&&(c.xp6(10),c.Q6J("ngForOf",r.order),c.xp6(5),c.hij("Quantity: ",r.totalQuantity,""),c.xp6(2),c.AsE("Total: ",r.math.round(r.totalPrice*r.converter*100)/100,"",r.currency,""))},directives:[Nf,cs,lM],styles:["*[_ngcontent-%COMP%]{text-align:center}.centered[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.table[_ngcontent-%COMP%]{border-radius:5px;margin-top:1rem;width:80%;box-shadow:#00000040 0 54px 55px,#0000001f 0 -12px 30px,#0000001f 0 4px 6px,#0000002b 0 12px 13px,#00000017 0 -3px 5px}.bold[_ngcontent-%COMP%]{width:33%;color:#fff;padding-top:.6rem;padding-bottom:.6rem}.summary[_ngcontent-%COMP%]{background-color:#a9a9a9}@media screen and (max-width: 700px){.table[_ngcontent-%COMP%]{width:95%}}"]}),n})();function fB(n,e){1&n&&(c.TgZ(0,"div",25),c._uU(1,"Invalid form input"),c.qZA())}function pB(n,e){1&n&&(c.TgZ(0,"div",25),c._uU(1,"Invalid form input"),c.qZA())}function gB(n,e){1&n&&(c.TgZ(0,"div",25),c._uU(1,"Invalid form input"),c.qZA())}function mB(n,e){1&n&&(c.TgZ(0,"div",25),c._uU(1,"Invalid form input"),c.qZA())}function _B(n,e){1&n&&(c.TgZ(0,"div",25),c._uU(1,"Invalid form input"),c.qZA())}function yB(n,e){1&n&&(c.TgZ(0,"div",25),c._uU(1,"Invalid form input"),c.qZA())}function vB(n,e){1&n&&(c.TgZ(0,"div",25),c._uU(1,"Invalid form input"),c.qZA())}function bB(n,e){1&n&&(c.TgZ(0,"div",25),c._uU(1,"Invalid form input"),c.qZA())}function wB(n,e){1&n&&(c.TgZ(0,"div",25),c._uU(1,"Invalid form input"),c.qZA())}let EB=(()=>{class n{constructor(t,r){this.data=t,this.dishListService=r,this.form=new Pf({name:new Kn("",[Pt.required,Pt.minLength(1)]),cuisine:new Kn("",[Pt.required,Pt.minLength(1)]),type:new Kn("",[Pt.required,Pt.minLength(1)]),category:new Kn("",[Pt.required,Pt.minLength(1)]),ingridients:new Kn("",[Pt.required,Pt.minLength(1)]),ordersLimit:new Kn("",[Pt.required,Pt.min(1)]),price:new Kn("",[Pt.required,Pt.min(1)]),caption:new Kn("",[Pt.required,Pt.minLength(1)]),photo:new Kn("",[Pt.required,Pt.minLength(1)])}),this.dish=t.dish}addDish(){this.form.setErrors({invalidDish:!0})}ngOnInit(){}submit(t){let r=t.value;r.rating=this.dish.rating,r.rating_amount=this.dish.rating_amount,r.maxLimit=Math.max(r.ordersLimit,this.dish.maxLimit),this.dishListService.modifyDish(r,this.dish.key)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(s1),c.Y36($a))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-modify-dish"]],decls:45,vars:21,consts:[[1,"dish-form",3,"ngSubmit"],["f","ngForm"],[1,"form-group","form-content"],["ngModel","","name","name","placeholder","Dish name","type","text","value","john","required","",3,"ngModel"],["name","ngModel"],["class","alert alert-danger",4,"ngIf"],["ngModel","","name","cuisine","placeholder","Cusine","type","text","required","",3,"ngModel"],["cuisine","ngModel"],["ngModel","","name","type","placeholder","Type","type","text","required","",3,"ngModel"],["type","ngModel"],["ngModel","","name","category","placeholder","Category","type","text","required","",3,"ngModel"],["category","ngModel"],["ngModel","","name","ingredients","placeholder","ingredients","type","text","required","",3,"ngModel"],["ingredients","ngModel"],["ngModel","","name","ordersLimit","placeholder","ordersLimit","type","number","required","",3,"ngModel"],["ordersLimit","ngModel"],["ngModel","","name","price","placeholder","Price","type","number","required","",3,"ngModel"],["price","ngModel"],["ngModel","","name","caption","placeholder","Caption","type","text","required","",3,"ngModel"],["caption","ngModel"],["ngModel","","name","photo","placeholder","Photo url","type","text","required","",3,"ngModel"],["photo","ngModel"],[1,"buttons"],["mat-dialog-close","true",1,"btn","btn-danger"],[1,"btn","btn-success",3,"mat-dialog-close","disabled","click"],[1,"alert","alert-danger"]],template:function(t,r){if(1&t){const i=c.EpF();c.TgZ(0,"form",0,1),c.NdJ("ngSubmit",function(){c.CHM(i);const d=c.MAs(1);return r.submit(d)}),c.TgZ(2,"h3"),c._uU(3),c.qZA(),c.TgZ(4,"div",2),c._UZ(5,"input",3,4),c.YNc(7,fB,2,0,"div",5),c.qZA(),c.TgZ(8,"div",2),c._UZ(9,"input",6,7),c.YNc(11,pB,2,0,"div",5),c.qZA(),c.TgZ(12,"div",2),c._UZ(13,"input",8,9),c.YNc(15,gB,2,0,"div",5),c.qZA(),c.TgZ(16,"div",2),c._UZ(17,"input",10,11),c.YNc(19,mB,2,0,"div",5),c.qZA(),c.TgZ(20,"div",2),c._UZ(21,"input",12,13),c.YNc(23,_B,2,0,"div",5),c.qZA(),c.TgZ(24,"div",2),c._UZ(25,"input",14,15),c.YNc(27,yB,2,0,"div",5),c.qZA(),c.TgZ(28,"div",2),c._UZ(29,"input",16,17),c.YNc(31,vB,2,0,"div",5),c.qZA(),c.TgZ(32,"div",2),c._UZ(33,"input",18,19),c.YNc(35,bB,2,0,"div",5),c.qZA(),c.TgZ(36,"div",2),c._UZ(37,"input",20,21),c.YNc(39,wB,2,0,"div",5),c.qZA(),c.TgZ(40,"div",22),c.TgZ(41,"button",23),c._uU(42,"Close"),c.qZA(),c.TgZ(43,"button",24),c.NdJ("click",function(){c.CHM(i);const d=c.MAs(1);return r.submit(d)}),c._uU(44,"Submit"),c.qZA(),c.qZA(),c.qZA()}if(2&t){const i=c.MAs(1),a=c.MAs(6),d=c.MAs(10),p=c.MAs(14),y=c.MAs(18),E=c.MAs(22),S=c.MAs(26),x=c.MAs(30),L=c.MAs(34),B=c.MAs(38);c.xp6(3),c.hij("Modify ",r.dish.name,""),c.xp6(2),c.Q6J("ngModel",r.dish.name),c.xp6(2),c.Q6J("ngIf",a.touched&&!a.valid),c.xp6(2),c.Q6J("ngModel",r.dish.cuisine),c.xp6(2),c.Q6J("ngIf",d.touched&&!d.valid),c.xp6(2),c.Q6J("ngModel",r.dish.type),c.xp6(2),c.Q6J("ngIf",p.touched&&!p.valid),c.xp6(2),c.Q6J("ngModel",r.dish.category),c.xp6(2),c.Q6J("ngIf",y.touched&&!y.valid),c.xp6(2),c.Q6J("ngModel",r.dish.ingredients),c.xp6(2),c.Q6J("ngIf",E.touched&&!E.valid),c.xp6(2),c.Q6J("ngModel",r.dish.ordersLimit),c.xp6(2),c.Q6J("ngIf",S.touched&&!S.valid),c.xp6(2),c.Q6J("ngModel",r.dish.price),c.xp6(2),c.Q6J("ngIf",x.touched&&!x.valid),c.xp6(2),c.Q6J("ngModel",r.dish.caption),c.xp6(2),c.Q6J("ngIf",L.touched&&!L.valid),c.xp6(2),c.Q6J("ngModel",r.dish.photo),c.xp6(2),c.Q6J("ngIf",B.touched&&!B.valid),c.xp6(4),c.Q6J("mat-dialog-close",!0)("disabled",!i.valid)}},directives:[ny,X_,D0,Ud,Rf,ty,I0,Cr,BD,q2],styles:[".dish-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:40vw;justify-content:space-between;align-items:center}.form-content[_ngcontent-%COMP%]{margin-bottom:2vh;border:solid black 1px}.btn-home[_ngcontent-%COMP%]{margin-top:1rem;margin-left:2rem}.buttons[_ngcontent-%COMP%]{display:flex;padding:5px;justify-content:space-between}.btn[_ngcontent-%COMP%]{margin:5px}"]}),n})(),CB=(()=>{class n{constructor(t,r,i){this.data=t,this.dishesService=r,this.router=i}ngOnInit(){this.data.currentCart.subscribe(t=>this.cart=t)}onClick(){this.data.cartUpdate(this.cart-(this.dish.maxLimit-this.dish.ordersLimit)),this.dishesService.deleteDish(this.dish.key),this.router.navigate(["/dishes/1"])}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Bd),c.Y36($a),c.Y36(Pr))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-remove-btn"]],inputs:{dish:"dish"},decls:3,vars:0,consts:[[3,"dish"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.NdJ("dish",function(){return r.dish}),c.TgZ(1,"button",1),c.NdJ("click",function(){return r.onClick()}),c._uU(2,"Delete"),c.qZA(),c.qZA())},directives:[FR],styles:[""]}),n})();function DB(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"section",2),c.TgZ(1,"div",4),c.TgZ(2,"p",5),c._uU(3),c.qZA(),c.TgZ(4,"p",6),c._uU(5),c.qZA(),c.TgZ(6,"div",7),c.TgZ(7,"button",8),c.NdJ("click",function(){const a=c.CHM(t).$implicit;return c.oxw().openDialog(a)}),c._uU(8,"Modify"),c.qZA(),c._UZ(9,"app-remove-btn",9),c.qZA(),c.qZA(),c.qZA()}if(2&n){const t=e.$implicit;c.xp6(3),c.Oqu(t.name),c.xp6(2),c.hij("left: ",t.ordersLimit,""),c.xp6(4),c.Q6J("dish",t)}}let TB=(()=>{class n{constructor(t,r){this.dishListService=t,this.dialog=r,this.dishes=[],this.getDishesList()}ngOnInit(){}getDishesList(){this.dishListService.getDishesList().snapshotChanges().pipe((0,at.U)(t=>t.map(r=>Object.assign({key:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.dishes=t})}openDialog(t){const r=new GD;r.autoFocus=!0,r.data={dish:t},this.dialog.open(EB,r)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36($a),c.Y36(aM))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-manager-view"]],decls:6,vars:1,consts:[[1,"centered"],["class","dishFrame",4,"ngFor","ngForOf"],[1,"dishFrame"],["routerLink","/dishes/create",1,"btn","btn-success","create"],[1,"details"],[1,"name","field"],[1,"limit","field"],[1,"buttons"],["mat-raised-button","",1,"modifier",3,"click"],[3,"dish"]],template:function(t,r){1&t&&(c._UZ(0,"app-nav-bar"),c.TgZ(1,"section",0),c.YNc(2,DB,10,3,"section",1),c.TgZ(3,"div",2),c.TgZ(4,"button",3),c._uU(5,"Create new dish"),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(2),c.Q6J("ngForOf",r.dishes))},directives:[Nf,cs,Sf,FR,CB],styles:[".name[_ngcontent-%COMP%], .limit[_ngcontent-%COMP%]{color:#fff;text-align:center;margin-top:10px}.details[_ngcontent-%COMP%]{padding:5px 2vw;margin:.8rem;background-color:#a9a9a9;display:flex;justify-content:space-between;align-items:baseline;border-radius:10px;box-shadow:#32325d40 0 50px 100px -20px,#0000004d 0 30px 60px -30px,#0a254059 0 -2px 6px inset;width:100%}.modifier[_ngcontent-%COMP%]{color:#fff;background-color:#d1d13b;margin-right:4px}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:33%;text-align:center}.dishFrame[_ngcontent-%COMP%]{width:60vw;display:flex;flex-grow:1}.create[_ngcontent-%COMP%]{margin:.8rem}.centered[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.field[_ngcontent-%COMP%]{width:33%}@media screen and (max-width: 840px){.dishFrame[_ngcontent-%COMP%]{width:95vw;align-items:baseline}.field[_ngcontent-%COMP%]{width:auto}.buttons[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;align-items:center}}"]}),n})(),IB=(()=>{class n{constructor(t){this.auth=t,this.persistenceRadio=""}ngOnInit(){}changePersistence(){this.auth.setPersistence(this.persistenceRadio)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(qa))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-persistence"]],decls:13,vars:3,consts:[[1,"persistence-form"],[1,"persistence"],[1,"inline","form-check"],["type","radio","name","options-outlined","id","local-outlined","value","local",1,"btn-check",3,"ngModel","ngModelChange","change"],["for","local-outlined",1,"btn","btn-outline-secondary"],["type","radio","name","options-outlined","id","success-outlined","value","session",1,"btn-check",3,"ngModel","ngModelChange","change"],["for","success-outlined",1,"btn","btn-outline-secondary"],["type","radio","name","options-outlined","id","none-outlined","value","none",1,"btn-check",3,"ngModel","ngModelChange","change"],["for","none-outlined",1,"btn","btn-outline-secondary"]],template:function(t,r){1&t&&(c.TgZ(0,"section",0),c.TgZ(1,"h4",1),c._uU(2,"Choose persistence"),c.qZA(),c.TgZ(3,"div",2),c.TgZ(4,"input",3),c.NdJ("ngModelChange",function(a){return r.persistenceRadio=a})("change",function(){return r.changePersistence()}),c.qZA(),c.TgZ(5,"label",4),c._uU(6,"Local"),c.qZA(),c.TgZ(7,"input",5),c.NdJ("ngModelChange",function(a){return r.persistenceRadio=a})("change",function(){return r.changePersistence()}),c.qZA(),c.TgZ(8,"label",6),c._uU(9,"Session"),c.qZA(),c.TgZ(10,"input",7),c.NdJ("ngModelChange",function(a){return r.persistenceRadio=a})("change",function(){return r.changePersistence()}),c.qZA(),c.TgZ(11,"label",8),c._uU(12,"None"),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(4),c.Q6J("ngModel",r.persistenceRadio),c.xp6(3),c.Q6J("ngModel",r.persistenceRadio),c.xp6(3),c.Q6J("ngModel",r.persistenceRadio))},directives:[zA,Ud,Rf,ty],styles:[".inline[_ngcontent-%COMP%]{display:flex}.persistence[_ngcontent-%COMP%]{color:#000}.persistence-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}"]}),n})();function SB(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",6),c.NdJ("click",function(){c.CHM(t);const i=c.oxw().$implicit;return c.oxw().unban(i)}),c._uU(1,"Unban"),c.qZA()}}function AB(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",6),c.NdJ("click",function(){c.CHM(t);const i=c.oxw().$implicit;return c.oxw().ban(i)}),c._uU(1,"Ban"),c.qZA()}}function MB(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",6),c.NdJ("click",function(){c.CHM(t);const i=c.oxw().$implicit;return c.oxw().makeManager(i)}),c._uU(1,"Give"),c.qZA()}}function xB(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",6),c.NdJ("click",function(){c.CHM(t);const i=c.oxw().$implicit;return c.oxw().unmakeManager(i)}),c._uU(1,"Remove"),c.qZA()}}function kB(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",6),c.NdJ("click",function(){c.CHM(t);const i=c.oxw().$implicit;return c.oxw().makeAdmin(i)}),c._uU(1,"Give"),c.qZA()}}function OB(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",6),c.NdJ("click",function(){c.CHM(t);const i=c.oxw().$implicit;return c.oxw().unmakeAdmin(i)}),c._uU(1,"Remove"),c.qZA()}}const RB=function(n,e){return{admin:n,manager:e}};function PB(n,e){if(1&n&&(c.TgZ(0,"tbody"),c.TgZ(1,"tr",4),c.TgZ(2,"td"),c._uU(3),c.qZA(),c.TgZ(4,"td"),c.YNc(5,SB,2,0,"button",5),c.YNc(6,AB,2,0,"button",5),c.qZA(),c.TgZ(7,"td"),c.YNc(8,MB,2,0,"button",5),c.YNc(9,xB,2,0,"button",5),c.qZA(),c.TgZ(10,"td"),c.YNc(11,kB,2,0,"button",5),c.YNc(12,OB,2,0,"button",5),c.qZA(),c.qZA(),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.Q6J("ngClass",c.WLB(8,RB,t.admin,t.manager)),c.xp6(2),c.Oqu(t.email),c.xp6(2),c.Q6J("ngIf",t.ban),c.xp6(1),c.Q6J("ngIf",!t.ban),c.xp6(2),c.Q6J("ngIf",!t.manager),c.xp6(1),c.Q6J("ngIf",t.manager),c.xp6(2),c.Q6J("ngIf",!t.admin),c.xp6(1),c.Q6J("ngIf",t.admin)}}let NB=(()=>{class n{constructor(t){this.userService=t,this.users=[]}ngOnInit(){this.getUsers()}getUsers(){this.userService.getUsers().pipe((0,at.U)(t=>t.map(r=>Object.assign({key:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.users=t})}ban(t){this.userService.ban(t)}unban(t){this.userService.unban(t)}makeManager(t){this.userService.makeManager(t)}unmakeManager(t){this.userService.unmakeManager(t)}makeAdmin(t){this.userService.makeAdmin(t)}unmakeAdmin(t){this.userService.unmakeAdmin(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(qS))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-admin-view"]],decls:15,vars:1,consts:[[1,"centered"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[3,"ngClass"],["class","modfier",3,"click",4,"ngIf"],[1,"modfier",3,"click"]],template:function(t,r){1&t&&(c._UZ(0,"app-nav-bar"),c._UZ(1,"app-persistence"),c.TgZ(2,"section",0),c.TgZ(3,"table",1),c.TgZ(4,"thead"),c.TgZ(5,"tr"),c.TgZ(6,"th",2),c._uU(7,"User"),c.qZA(),c.TgZ(8,"th",2),c._uU(9,"Ban"),c.qZA(),c.TgZ(10,"th",2),c._uU(11,"Manager"),c.qZA(),c.TgZ(12,"th",2),c._uU(13,"Admin"),c.qZA(),c.qZA(),c.qZA(),c.YNc(14,PB,13,11,"tbody",3),c.qZA(),c.qZA()),2&t&&(c.xp6(14),c.Q6J("ngForOf",r.users))},directives:[Nf,IB,cs,sr,Cr],styles:["p[_ngcontent-%COMP%]{padding:10px;text-align:center}.modfier[_ngcontent-%COMP%]{background-color:#ec5353;color:#fff;border-radius:5px}.centered[_ngcontent-%COMP%]{display:flex;align-content:center;justify-content:center}.table[_ngcontent-%COMP%]{border:1px solid black;border-radius:20px;margin-top:3rem;width:96vw}.admin[_ngcontent-%COMP%]{color:#fff;background-color:gray}.manager[_ngcontent-%COMP%]{background-color:#d1d1d1}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center}"]}),n})();function FB(n,e){1&n&&(c.TgZ(0,"div",9),c._uU(1," Please insert your email "),c.qZA())}function LB(n,e){1&n&&(c.TgZ(0,"div",9),c._uU(1," Pleease insert valid email "),c.qZA())}function VB(n,e){1&n&&(c.TgZ(0,"div",9),c._uU(1," Please insert password "),c.qZA())}let UB=(()=>{class n{constructor(t,r,i,a){this.formBuilder=t,this.auth=r,this.router=i,this.cartService=a,this.email="",this.password=""}ngOnInit(){this.form=this.formBuilder.group({email:["",[Pt.required,Pt.email]],password:["",Pt.required]})}onSubmit(){var t,r;this.auth.signUp(null===(t=this.form.get("email"))||void 0===t?void 0:t.value,null===(r=this.form.get("password"))||void 0===r?void 0:r.value).then(()=>{var i,a;this.router.navigate([""]),this.auth.login(null===(i=this.form.get("email"))||void 0===i?void 0:i.value,null===(a=this.form.get("password"))||void 0===a?void 0:a.value).then(()=>{this.cartService.createCart()})}).catch(i=>console.log(i.message))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(RR),c.Y36(qa),c.Y36(Pr),c.Y36(Ld))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-sign-up"]],decls:16,vars:5,consts:[["routerLink","",1,"btn","btn-warning","btn-home"],[1,"container"],[1,"form-container"],["id","login-form",3,"formGroup","ngSubmit"],[1,"form-group"],["type","email","formControlName","email","placeholder","Email",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["type","password","formControlName","password","placeholder","Password",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"alert","alert-danger"]],template:function(t,r){1&t&&(c.TgZ(0,"button",0),c._uU(1,"Home"),c.qZA(),c.TgZ(2,"div",1),c.TgZ(3,"section",2),c.TgZ(4,"h4"),c._uU(5,"Sign up"),c.qZA(),c.TgZ(6,"form",3),c.NdJ("ngSubmit",function(){return r.onSubmit()}),c.TgZ(7,"div",4),c._UZ(8,"input",5),c.YNc(9,FB,2,0,"div",6),c.YNc(10,LB,2,0,"div",6),c.qZA(),c.TgZ(11,"div",4),c._UZ(12,"input",7),c.YNc(13,VB,2,0,"div",6),c.qZA(),c.TgZ(14,"button",8),c._uU(15,"Sign up"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(6),c.Q6J("formGroup",r.form),c.xp6(3),c.Q6J("ngIf",r.form.controls.email.hasError("required")&&r.form.controls.email.touched),c.xp6(1),c.Q6J("ngIf",r.form.controls.email.hasError("email")&&r.form.controls.email.touched),c.xp6(3),c.Q6J("ngIf",r.form.controls.password.hasError("required")&&r.form.controls.password.touched),c.xp6(1),c.Q6J("disabled",!r.form.valid))},directives:[Sf,ny,X_,ry,Ud,Rf,T0,Cr],styles:[".container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100vw;height:100vh}.form-group[_ngcontent-%COMP%]{margin:1rem 0}.btn-home[_ngcontent-%COMP%]{margin-top:1rem;margin-left:2rem}"]}),n})();function BB(n,e){1&n&&(c.TgZ(0,"div",11),c._uU(1," Please insert your email "),c.qZA())}function jB(n,e){1&n&&(c.TgZ(0,"div",11),c._uU(1," Pleease insert valid email "),c.qZA())}function HB(n,e){1&n&&(c.TgZ(0,"div",11),c._uU(1," Please insert password "),c.qZA())}let qB=(()=>{class n{constructor(t,r,i){this.formBuilder=t,this.auth=r,this.cartService=i,this.email="",this.password=""}ngOnInit(){this.form=this.formBuilder.group({email:["",[Pt.required,Pt.email]],password:["",Pt.required]})}onSubmit(){var t,r;this.auth.login(null===(t=this.form.get("email"))||void 0===t?void 0:t.value,null===(r=this.form.get("password"))||void 0===r?void 0:r.value),this.cartService.updateCart()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(RR),c.Y36(qa),c.Y36(Ld))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-login"]],decls:19,vars:5,consts:[["routerLink","",1,"btn","btn-warning","btn-home"],[1,"container"],[1,"form-container"],["id","login-form",3,"formGroup","ngSubmit"],[1,"form-group"],["type","email","formControlName","email","placeholder","Email",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["type","password","formControlName","password","placeholder","Password",1,"form-control"],[1,"logsub-buttons"],["type","submit",1,"btn","btn-primary",3,"disabled"],["routerLink","/sign-up",1,"btn","btn-danger","text-nowrap","su-btn"],[1,"alert","alert-danger"]],template:function(t,r){1&t&&(c.TgZ(0,"button",0),c._uU(1,"Home"),c.qZA(),c.TgZ(2,"div",1),c.TgZ(3,"section",2),c.TgZ(4,"h4"),c._uU(5,"Log in"),c.qZA(),c.TgZ(6,"form",3),c.NdJ("ngSubmit",function(){return r.onSubmit()}),c.TgZ(7,"div",4),c._UZ(8,"input",5),c.YNc(9,BB,2,0,"div",6),c.YNc(10,jB,2,0,"div",6),c.qZA(),c.TgZ(11,"div",4),c._UZ(12,"input",7),c.YNc(13,HB,2,0,"div",6),c.qZA(),c.TgZ(14,"div",8),c.TgZ(15,"button",9),c._uU(16,"Log in"),c.qZA(),c.TgZ(17,"button",10),c._uU(18,"Sign Up"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(6),c.Q6J("formGroup",r.form),c.xp6(3),c.Q6J("ngIf",r.form.controls.email.hasError("required")&&r.form.controls.email.touched),c.xp6(1),c.Q6J("ngIf",r.form.controls.email.hasError("email")&&r.form.controls.email.touched),c.xp6(3),c.Q6J("ngIf",r.form.controls.password.hasError("required")&&r.form.controls.password.touched),c.xp6(2),c.Q6J("disabled",!r.form.valid))},directives:[Sf,ny,X_,ry,Ud,Rf,T0,Cr],styles:[".container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100vw;height:100vh}.form-group[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:1rem}.btn-home[_ngcontent-%COMP%]{margin-top:1rem;margin-left:2rem}.logsub-buttons[_ngcontent-%COMP%]{display:flex}.su-btn[_ngcontent-%COMP%]{margin-left:1rem}"]}),n})(),$B=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-not-found"]],decls:2,vars:0,template:function(t,r){1&t&&(c.TgZ(0,"h1"),c._uU(1,"Page Not Found!"),c.qZA())},styles:[""]}),n})(),c1=(()=>{class n{constructor(t,r){this.service=t,this.dishesService=r,this.numberOfElements=9,this.numberOfPages=1,this.numberOfElementsSource=new bn(9),this.currentNumberOfElements=this.numberOfElementsSource.asObservable(),this.pageSource=new bn(1),this.currentPage=this.pageSource.asObservable(),this.numberOfPagesSource=new bn(1),this.currentNumberOfPages=this.numberOfPagesSource.asObservable(),this.pagesArraySource=new bn([1]),this.currentPagesArray=this.pagesArraySource.asObservable(),this.calculatePages()}changeNumberOfElements(t){this.numberOfElementsSource.next(t),this.numberOfElements=t,this.calculatePages()}calculatePages(){let t=Math.ceil(this.getNumberOfDishes()/this.numberOfElements);this.numberOfPagesSource.next(t),this.numberOfPages=t,this.updatePagesArray()}updatePagesArray(){let t=[];for(let r=1;r<=this.numberOfPages;r++)t.push(r);this.pagesArraySource.next(t)}changePage(t){this.pageSource.next(t)}getNumberOfDishes(){return this.dishesService.getNumberOfDishes()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Bd),c.LFG($a))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function GB(n,e){if(1&n&&(c.TgZ(0,"h3"),c._uU(1),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.AsE("Rating: ",t.dish.rating," (rates: ",t.dish.rating_amount,")")}}function zB(n,e){if(1&n&&(c.TgZ(0,"div",9),c._uU(1),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.hij(" ",t," ")}}let ZB=(()=>{class n{constructor(t,r,i,a,d,p){this.service=t,this.route=r,this.router=i,this.paginator=a,this.dishesService=d,this.auth=p,this.math=Math,this.stars=[1,2,3,4,5],this.rating=1,this.isRated=!1,this.hoverState=0,this.dish=this.dishesService.currentDish}ngOnInit(){this.initialOrdersLimit=this.dish.ordersLimit,this.service.currentConverter.subscribe(t=>this.converter=t),this.service.currentCurrency.subscribe(t=>this.currency=t),this.service.currentCart.subscribe(t=>this.cart=t),this.paginator.currentPage.subscribe(t=>this.page=t),null==this.dish&&this.router.navigate(["/dishes/1"])}plus(){this.dish.ordersLimit>0&&(this.dish.ordersLimit-=1,this.service.cartUpdate(this.cart+1))}minus(){this.dish.ordersLimit<this.dish.maxLimit&&(this.dish.ordersLimit+=1,this.service.cartUpdate(this.cart-1))}onStarEnter(t){this.hoverState=t}onStarLeave(){this.hoverState=0}onStarClicked(t){this.isRated||(this.rating=t,this.isRated=!0,this.dishesService.rateDish(this.rating))}addOpinion(){this.router.navigate(["/dishes/dish/feedback"])}goBack(){this.router.navigate(["/dishes",this.page])}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Bd),c.Y36(Tf),c.Y36(Pr),c.Y36(c1),c.Y36($a),c.Y36(qa))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-dish"]],decls:23,vars:19,consts:[[1,"btn","btn-primary","back",3,"click"],[1,"position"],[1,"frame"],["alt","dish-photo",3,"src"],[1,"title"],[4,"ngIf"],[3,"dishID"],[1,"opinion-btn","btn-primary",3,"click"],["class","opinions",4,"ngFor","ngForOf"],[1,"opinions"]],template:function(t,r){1&t&&(c._UZ(0,"app-nav-bar"),c.TgZ(1,"button",0),c.NdJ("click",function(){return r.goBack()}),c._uU(2,"BACK"),c.qZA(),c.TgZ(3,"section",1),c.TgZ(4,"div",2),c._UZ(5,"img",3),c.qZA(),c.TgZ(6,"h2",4),c._uU(7),c.ALo(8,"uppercase"),c.qZA(),c.YNc(9,GB,2,2,"h3",5),c.TgZ(10,"p"),c._uU(11),c.ALo(12,"uppercase"),c.ALo(13,"uppercase"),c.ALo(14,"uppercase"),c.qZA(),c.TgZ(15,"p"),c._uU(16),c.qZA(),c.TgZ(17,"p"),c._uU(18),c.qZA(),c._UZ(19,"app-quantity-buttons",6),c.TgZ(20,"button",7),c.NdJ("click",function(){return r.addOpinion()}),c._uU(21,"Reviews"),c.qZA(),c.YNc(22,zB,2,1,"div",8),c.qZA()),2&t&&(c.xp6(5),c.s9C("src",r.dish.photo,c.LSH),c.xp6(2),c.Oqu(c.lcZ(8,11,r.dish.name)),c.xp6(2),c.Q6J("ngIf",r.dish.rating_amount>0),c.xp6(2),c.lnq("",c.lcZ(12,13,r.dish.type),", ",c.lcZ(13,15,r.dish.category),", ",c.lcZ(14,17,r.dish.cuisine),""),c.xp6(5),c.AsE("Dish Price: ",r.math.round(r.dish.price*r.converter*100)/100,"",r.currency,""),c.xp6(2),c.Oqu(r.dish.caption),c.xp6(1),c.Q6J("dishID",r.dish.key),c.xp6(3),c.Q6J("ngForOf",r.filteredOpinions))},directives:[Nf,Cr,lM,cs],pipes:[lc],styles:[".position[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:1rem;margin:2rem;box-shadow:#0000004d 0 19px 38px,#00000038 0 15px 12px;background-color:#dde9f3b4}.back[_ngcontent-%COMP%]{margin-left:1rem;margin-top:10px;box-shadow:#00000040 0 14px 28px,#00000038 0 10px 10px}.title[_ngcontent-%COMP%]{margin-top:2rem}.frame[_ngcontent-%COMP%]{width:70%;max-height:90%;border:solid black 1px;border-radius:20px;box-shadow:#11111a1a 0 4px 16px,#11111a0d 0 8px 32px}.frame[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:100%;border-radius:20px}.opinion-btn[_ngcontent-%COMP%]{margin:2rem 0;color:#fff;border-radius:5px;box-shadow:#00000040 0 14px 28px,#00000038 0 10px 10px;min-width:10rem;padding:.5rem}.btn-cstm[_ngcontent-%COMP%]{background-color:#67be5f;color:#fff;border:0px}"]}),n})();function WB(n,e){1&n&&(c.TgZ(0,"h3",7),c._uU(1,"Sold"),c.qZA())}function KB(n,e){if(1&n&&(c.TgZ(0,"p",8),c._uU(1),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.hij("Positions left for today: ",t.dish.ordersLimit,"")}}function YB(n,e){if(1&n&&(c.TgZ(0,"div"),c._UZ(1,"app-quantity-buttons",9),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.Q6J("dishID",t.dishID)}}const QB=function(n,e,t){return{"position-sold":n,"min-price":e,"max-price":t}};let JB=(()=>{class n{constructor(t,r,i,a,d){this.data=t,this.router=r,this.dishesService=i,this.auth=a,this.cartService=d,this.isActivePlus=!1,this.isActiveMinus=!1,this.nearToEnd=!1,this.math=Math,this.dishes=[]}ngOnInit(){this.data.currentConverter.subscribe(t=>this.converter=t),this.data.currentCurrency.subscribe(t=>this.currency=t),this.data.currentCart.subscribe(t=>this.cart=t),this.dishID=this.dish.key}seeDetails(){this.dishesService.updatecurrentDish(this.dish),this.cartService.isInCart(this.dish.key),this.router.navigate(["/dishes/dish"])}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Bd),c.Y36(Pr),c.Y36($a),c.Y36(qa),c.Y36(Ld))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-dish-details"]],inputs:{dish:"dish",isActivePlus:"isActivePlus",isActiveMinus:"isActiveMinus",nearToEnd:"nearToEnd",isMax:"isMax",isMin:"isMin"},decls:16,vars:23,consts:[[1,"position",3,"ngClass"],[1,"fake-photo"],[1,"fake-photo-img",3,"src","click"],["id","dish-name"],["class","out-off-supply ",4,"ngIf"],["class","text-center",4,"ngIf"],[4,"ngIf"],[1,"out-off-supply"],[1,"text-center"],[3,"dishID"]],template:function(t,r){1&t&&(c.TgZ(0,"section",0),c.TgZ(1,"div",1),c.TgZ(2,"img",2),c.NdJ("click",function(){return r.seeDetails()}),c.qZA(),c.qZA(),c.TgZ(3,"p"),c._uU(4),c.ALo(5,"uppercase"),c.ALo(6,"uppercase"),c.ALo(7,"uppercase"),c.qZA(),c.TgZ(8,"p",3),c._uU(9),c.ALo(10,"uppercase"),c.qZA(),c.TgZ(11,"p"),c._uU(12),c.qZA(),c.YNc(13,WB,2,0,"h3",4),c.YNc(14,KB,2,1,"p",5),c.YNc(15,YB,2,1,"div",6),c.qZA()),2&t&&(c.Q6J("ngClass",c.kEZ(19,QB,0==r.dish.ordersLimit,r.dish.price==r.isMin,r.dish.price==r.isMax)),c.xp6(2),c.s9C("src",r.dish.photo,c.LSH),c.xp6(2),c.lnq("",c.lcZ(5,11,r.dish.type),", ",c.lcZ(6,13,r.dish.category),", ",c.lcZ(7,15,r.dish.cuisine),""),c.xp6(5),c.hij("Dish Name: ",c.lcZ(10,17,r.dish.name),""),c.xp6(3),c.AsE("Dish Price: ",r.math.round(r.dish.price*r.converter*100)/100,"",r.currency,""),c.xp6(1),c.Q6J("ngIf",0==r.dish.ordersLimit),c.xp6(1),c.Q6J("ngIf",r.dish.ordersLimit>0),c.xp6(1),c.Q6J("ngIf",r.auth.isLogged()))},directives:[sr,Cr,lM],pipes:[lc],styles:['.position[_ngcontent-%COMP%]{width:100%;height:550px;grid-column:span 1;display:flex;flex-direction:column;justify-content:space-evenly;align-items:center;border:solid black 1px;padding:.4rem;background-image:linear-gradient(to right,rgba(187,169,70,.918),rgba(236,157,55,.911));border-radius:10px;box-shadow:10px 5px 5px gray}.position-sold[_ngcontent-%COMP%]{background-image:linear-gradient(to right,rgb(204,200,179),rgb(228,194,180))}p[_ngcontent-%COMP%]{margin:3px;text-align:left;padding:.4rem;font-family:"Courier",Courier,monospace;color:#fff}.fake-photo[_ngcontent-%COMP%]{max-height:290px;max-width:324px;border:solid black 1px;width:17vw;height:15vw;border-radius:45%;background-color:#e0ffff}.fake-photo-img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:45%}#dish-name[_ngcontent-%COMP%]{font-weight:bold}.order-btn[_ngcontent-%COMP%]{height:40px}.photo-link[_ngcontent-%COMP%]{word-wrap:initial;max-width:100%}.btn-cstm[_ngcontent-%COMP%]{background-color:#67be5f;color:#fff;border:0px}.out-off-supply[_ngcontent-%COMP%]{margin-right:.5rem}.additionals[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end}.max-price[_ngcontent-%COMP%]{border:8px solid greenyellow}.min-price[_ngcontent-%COMP%]{border:8px solid red}@media (max-width: 1000px){.position[_ngcontent-%COMP%]{width:auto}}@media (max-width: 768px){.position[_ngcontent-%COMP%]{width:auto}.fake-photo[_ngcontent-%COMP%]{width:51vw;height:45vw}}']}),n})();function XB(n,e){if(1&n&&(c.TgZ(0,"div"),c._UZ(1,"app-dish-details",20),c.qZA()),2&n){const t=e.$implicit,r=c.oxw();c.xp6(1),c.Q6J("isMax",r.isMax)("isMin",r.isMin)("dish",t)}}const ej=function(n){return{darker:n}};function tj(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",21),c.NdJ("click",function(){const a=c.CHM(t).$implicit;return c.oxw().changePage(a)}),c._uU(1),c.qZA()}if(2&n){const t=e.$implicit,r=c.oxw();c.Q6J("ngClass",c.VKq(2,ej,r.isActive(t))),c.xp6(1),c.Oqu(r.pagesArray[t-1])}}let nj=(()=>{class n{constructor(t,r,i,a,d){this.data=t,this.paginator=r,this.route=i,this.router=a,this.dishesService=d,this.number=this.numberOfElements,this.dishes=[],this.getDishesList(),this.filteredDishes=this.dishes,this.paginator.currentNumberOfElements.subscribe(p=>this.numberOfElements=p),this.paginator.currentNumberOfPages.subscribe(p=>this.numberOfPages=p),this.paginator.currentPagesArray.subscribe(p=>this.pagesArray=p),this.paginator.currentPage.subscribe(p=>this.page=p)}ngOnInit(){this.route.paramMap.subscribe(t=>{if(null!=t.get("page")){let r=+t.get("page");this.paginator.changePage(r)}})}getDishesList(){this.dishesService.getDishesList().snapshotChanges().pipe((0,at.U)(t=>t.map(r=>Object.assign({key:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.filteredDishes=t,this.dishes=t,this.isMin=this.getMinPrice(this.dishes),this.isMax=this.getMaxPrice(this.dishes)})}getMaxPrice(t){return t.sort((r,i)=>r.price-i.price)[0].price}getMinPrice(t){return t.sort((r,i)=>r.price-i.price)[this.dishes.length-1].price}filter(t){this.filteredDishes=t?this.filteredDishes.filter(r=>r.name.toLowerCase().includes(t.toLowerCase())||r.category.toLowerCase().includes(t.toLowerCase())||r.ingredients.toLowerCase().includes(t.toLowerCase())||r.type.toLowerCase().includes(t.toLowerCase())||r.cuisine.toLowerCase().includes(t.toLowerCase())):this.dishes}updatePages(){this.paginator.changeNumberOfElements(+this.number),this.paginator.calculatePages()}changePage(t){t>=1&&t<=this.numberOfPages&&(t!=this.page&&this.router.navigate(["dishes",t]),this.paginator.changePage(t))}isActive(t){return t==this.page}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Bd),c.Y36(c1),c.Y36(Tf),c.Y36(Pr),c.Y36($a))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-dishes"]],decls:34,vars:8,consts:[[1,"section-bckg"],[1,"search-box"],["type","text","placeholder","Search...",1,"searcher",3,"keyup"],["query",""],[1,"page"],[1,"container"],[4,"ngFor","ngForOf"],["id","elements",1,"paginator"],[1,"one-row"],[1,"page-link",3,"click"],["class","page-link",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"form-select","width-medium",3,"ngModel","ngModelChange","change"],["value","undefined","disabled",""],["value","3"],["value","6"],["value","9"],["value","18"],["value","24"],["value","48"],["value","96"],[1,"position",3,"isMax","isMin","dish"],[1,"page-link",3,"ngClass","click"]],template:function(t,r){if(1&t){const i=c.EpF();c.TgZ(0,"section",0),c._UZ(1,"app-nav-bar"),c.TgZ(2,"div",1),c.TgZ(3,"input",2,3),c.NdJ("keyup",function(){c.CHM(i);const d=c.MAs(4);return r.filter(d.value)}),c.qZA(),c.qZA(),c.TgZ(5,"h4",4),c._uU(6),c.qZA(),c.TgZ(7,"div",5),c.YNc(8,XB,2,3,"div",6),c.ALo(9,"slice"),c.qZA(),c.TgZ(10,"div",7),c.TgZ(11,"div",8),c.TgZ(12,"button",9),c.NdJ("click",function(){return r.changePage(r.page-1)}),c._uU(13,"Previous"),c.qZA(),c.YNc(14,tj,2,4,"button",10),c.TgZ(15,"button",9),c.NdJ("click",function(){return r.changePage(r.page+1)}),c._uU(16,"Next"),c.qZA(),c.qZA(),c.TgZ(17,"select",11),c.NdJ("ngModelChange",function(d){return r.number=d})("change",function(){return r.updatePages()}),c.TgZ(18,"option",12),c._uU(19,"Dishes on page"),c.qZA(),c.TgZ(20,"option",13),c._uU(21,"3"),c.qZA(),c.TgZ(22,"option",14),c._uU(23,"6"),c.qZA(),c.TgZ(24,"option",15),c._uU(25,"9"),c.qZA(),c.TgZ(26,"option",16),c._uU(27,"18"),c.qZA(),c.TgZ(28,"option",17),c._uU(29,"24"),c.qZA(),c.TgZ(30,"option",18),c._uU(31,"48"),c.qZA(),c.TgZ(32,"option",19),c._uU(33,"96"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}2&t&&(c.xp6(6),c.hij("Page: ",r.page,""),c.xp6(2),c.Q6J("ngForOf",c.Dn7(9,4,r.filteredDishes,(r.page-1)*r.numberOfElements,(r.page-1)*r.numberOfElements+r.numberOfElements)),c.xp6(6),c.Q6J("ngForOf",r.pagesArray),c.xp6(3),c.Q6J("ngModel",r.number))},directives:[Nf,cs,jD,Rf,ty,bR,ER,JB,sr],pipes:[_o],styles:[".menu-position[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-top:1vh}.searcher[_ngcontent-%COMP%]{border:1px solid black;border-radius:20px;width:40vw;text-align:center;padding:1vh}.position[_ngcontent-%COMP%]{grid-column:span 1}.container[_ngcontent-%COMP%]{margin-top:1rem;display:grid;grid-template-columns:1fr 1fr 1fr;grid-gap:2rem;gap:2rem}.section-bckg[_ngcontent-%COMP%]{background-color:#ffffffcb}.paginator[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:10rem;display:flex;flex-direction:column;align-items:center;justify-content:center}.one-row[_ngcontent-%COMP%]{margin-bottom:10px;display:flex}.darker[_ngcontent-%COMP%]{color:#fff;background-color:#234da8}.width-medium[_ngcontent-%COMP%]{width:300px}.page[_ngcontent-%COMP%]{padding-top:.5rem;text-align:center}@media (max-width: 1000px){.container[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}.width-medium[_ngcontent-%COMP%]{width:50vw}}@media (max-width: 768px){.container[_ngcontent-%COMP%]{grid-template-columns:1fr}.width-medium[_ngcontent-%COMP%]{width:70vw}}"]}),n})();function rj(n,e){1&n&&(c.TgZ(0,"div",24),c._uU(1,"Invalid form input"),c.qZA())}function ij(n,e){1&n&&(c.TgZ(0,"div",24),c._uU(1,"Invalid form input"),c.qZA())}function sj(n,e){1&n&&(c.TgZ(0,"div",24),c._uU(1,"Invalid form input"),c.qZA())}function oj(n,e){1&n&&(c.TgZ(0,"div",24),c._uU(1,"Invalid form input"),c.qZA())}function aj(n,e){1&n&&(c.TgZ(0,"div",24),c._uU(1,"Invalid form input"),c.qZA())}function lj(n,e){1&n&&(c.TgZ(0,"div",24),c._uU(1,"Invalid form input"),c.qZA())}function cj(n,e){1&n&&(c.TgZ(0,"div",24),c._uU(1,"Invalid form input"),c.qZA())}function uj(n,e){1&n&&(c.TgZ(0,"div",24),c._uU(1,"Invalid form input"),c.qZA())}function dj(n,e){1&n&&(c.TgZ(0,"div",24),c._uU(1,"Invalid form input"),c.qZA())}let hj=(()=>{class n{constructor(t,r){this.dishes=t,this.router=r,this.form=new Pf({name:new Kn("",[Pt.required,Pt.minLength(1)]),cuisine:new Kn("",[Pt.required,Pt.minLength(1)]),type:new Kn("",[Pt.required,Pt.minLength(1)]),category:new Kn("",[Pt.required,Pt.minLength(1)]),ingridients:new Kn("",[Pt.required,Pt.minLength(1)]),ordersLimit:new Kn("",[Pt.required,Pt.min(1)]),price:new Kn("",[Pt.required,Pt.min(1)]),caption:new Kn("",[Pt.required,Pt.minLength(1)]),photo:new Kn("",[Pt.required,Pt.minLength(1)])})}addDish(){this.form.setErrors({invalidDish:!0})}ngOnInit(){}submit(t){let r=t.value;r.rating=0,r.rating_amount=0,r.maxLimit=r.ordersLimit,this.dishes.createDish(r),this.router.navigate(["/manager-view"])}}return n.\u0275fac=function(t){return new(t||n)(c.Y36($a),c.Y36(Pr))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-add-form"]],decls:45,vars:10,consts:[["routerLink","/manager-view",1,"btn","btn-warning"],[1,"dish-form",3,"ngSubmit"],["f","ngForm"],[1,"form-group","form-content"],["ngModel","","name","name","placeholder","Dish name","type","text","required",""],["name","ngModel"],["class","alert alert-danger",4,"ngIf"],["ngModel","","name","cuisine","placeholder","Cusine","type","text","required",""],["cuisine","ngModel"],["ngModel","","name","type","placeholder","Type","type","text","required",""],["type","ngModel"],["ngModel","","name","category","placeholder","Category","type","text","required",""],["category","ngModel"],["ngModel","","name","ingredients","placeholder","ingredients","type","text","required",""],["ingredients","ngModel"],["ngModel","","name","ordersLimit","placeholder","ordersLimit","type","number","required",""],["ordersLimit","ngModel"],["ngModel","","name","price","placeholder","Price","type","number","required",""],["price","ngModel"],["ngModel","","name","caption","placeholder","Caption","type","text","required",""],["caption","ngModel"],["ngModel","","name","photo","placeholder","Photo url","type","text","required",""],["photo","ngModel"],[1,"btn","btn-success",3,"disabled"],[1,"alert","alert-danger"]],template:function(t,r){if(1&t){const i=c.EpF();c._UZ(0,"app-nav-bar"),c.TgZ(1,"button",0),c._uU(2,"Go back"),c.qZA(),c.TgZ(3,"form",1,2),c.NdJ("ngSubmit",function(){c.CHM(i);const d=c.MAs(4);return r.submit(d)}),c.TgZ(5,"h3"),c._uU(6,"Add your dish"),c.qZA(),c.TgZ(7,"div",3),c._UZ(8,"input",4,5),c.YNc(10,rj,2,0,"div",6),c.qZA(),c.TgZ(11,"div",3),c._UZ(12,"input",7,8),c.YNc(14,ij,2,0,"div",6),c.qZA(),c.TgZ(15,"div",3),c._UZ(16,"input",9,10),c.YNc(18,sj,2,0,"div",6),c.qZA(),c.TgZ(19,"div",3),c._UZ(20,"input",11,12),c.YNc(22,oj,2,0,"div",6),c.qZA(),c.TgZ(23,"div",3),c._UZ(24,"input",13,14),c.YNc(26,aj,2,0,"div",6),c.qZA(),c.TgZ(27,"div",3),c._UZ(28,"input",15,16),c.YNc(30,lj,2,0,"div",6),c.qZA(),c.TgZ(31,"div",3),c._UZ(32,"input",17,18),c.YNc(34,cj,2,0,"div",6),c.qZA(),c.TgZ(35,"div",3),c._UZ(36,"input",19,20),c.YNc(38,uj,2,0,"div",6),c.qZA(),c.TgZ(39,"div",3),c._UZ(40,"input",21,22),c.YNc(42,dj,2,0,"div",6),c.qZA(),c.TgZ(43,"button",23),c._uU(44,"Submit"),c.qZA(),c.qZA()}if(2&t){const i=c.MAs(4),a=c.MAs(9),d=c.MAs(13),p=c.MAs(17),y=c.MAs(21),E=c.MAs(25),S=c.MAs(29),x=c.MAs(33),L=c.MAs(37),B=c.MAs(41);c.xp6(10),c.Q6J("ngIf",a.touched&&!a.valid),c.xp6(4),c.Q6J("ngIf",d.touched&&!d.valid),c.xp6(4),c.Q6J("ngIf",p.touched&&!p.valid),c.xp6(4),c.Q6J("ngIf",y.touched&&!y.valid),c.xp6(4),c.Q6J("ngIf",E.touched&&!E.valid),c.xp6(4),c.Q6J("ngIf",S.touched&&!S.valid),c.xp6(4),c.Q6J("ngIf",x.touched&&!x.valid),c.xp6(4),c.Q6J("ngIf",L.touched&&!L.valid),c.xp6(4),c.Q6J("ngIf",B.touched&&!B.valid),c.xp6(1),c.Q6J("disabled",!i.valid)}},directives:[Nf,Sf,ny,X_,D0,Ud,Rf,ty,I0,Cr,BD],styles:[".dish-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:40vw;justify-content:space-between;align-items:center}.form-content[_ngcontent-%COMP%]{margin-bottom:2vh;border:solid black 1px}.btn-home[_ngcontent-%COMP%]{margin-top:1rem;margin-left:2rem}"]}),n})(),fj=(()=>{class n{constructor(t){this.db=t,this.opinions=[],this.opinionsRef=t.collection("opinions")}getOpinionsRef(t){return this.db.collection("opinions").doc(t)}addOpinion(t,r,i,a){const d=this.db.collection("opinions").doc(t).collection("dish_opinion");d.doc(t).get().pipe((0,at.U)(p=>p.exists)).subscribe(()=>{d.doc().set({email:a,opinion:r,date:i,dishKey:t})})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(h))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const pj=function(n,e){return{full:n,empty:e}};let gj=(()=>{class n{constructor(){this.starEnter=new c.vpe,this.starLeave=new c.vpe,this.starClicked=new c.vpe}ngOnInit(){}onStarEnter(){this.starEnter.emit(this.starID)}onStarLeave(){this.starLeave.emit()}starred(){console.log(this.starID),this.starClicked.emit(this.starID)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-star"]],inputs:{starID:"starID",rating:"rating"},outputs:{starEnter:"starEnter",starLeave:"starLeave",starClicked:"starClicked"},decls:2,vars:4,consts:[["viewBox","0 0 23 24","width","25","height","25",3,"ngClass","mouseenter","mouseleave","click"],["stroke-width","0","points","9.9, 1.1, 3.3, 21.78, 19.8, 8.58, 0, 8.58, 16.5, 21.78"]],template:function(t,r){1&t&&(c.O4$(),c.TgZ(0,"svg",0),c.NdJ("mouseenter",function(){return r.onStarEnter()})("mouseleave",function(){return r.onStarLeave()})("click",function(){return r.starred()}),c._UZ(1,"polygon",1),c.qZA()),2&t&&c.Q6J("ngClass",c.WLB(1,pj,r.rating>=r.starID,!(r.rating>=r.starID)))},directives:[sr],styles:[".full[_ngcontent-%COMP%]{fill:#daa520}.empty[_ngcontent-%COMP%]{fill:#d3d3d3}"]}),n})();function mj(n,e){1&n&&(c.TgZ(0,"div",16),c._uU(1," Invalid text "),c.qZA())}function _j(n,e){1&n&&(c.TgZ(0,"div",16),c._uU(1," To short text "),c.qZA())}function yj(n,e){1&n&&(c.TgZ(0,"div",16),c._uU(1," To long text "),c.qZA())}function vj(n,e){1&n&&(c.TgZ(0,"h4"),c._uU(1,"You have rated this dish"),c.qZA())}function bj(n,e){if(1&n){const t=c.EpF();c.ynx(0),c.TgZ(1,"app-star",17),c.NdJ("starEnter",function(i){return c.CHM(t),c.oxw(2).onStarEnter(i)})("starLeave",function(){return c.CHM(t),c.oxw(2).onStarLeave()})("starClicked",function(i){return c.CHM(t),c.oxw(2).onStarClicked(i)}),c.qZA(),c.BQk()}if(2&n){const t=e.$implicit,r=c.oxw(2);c.xp6(1),c.Q6J("starID",t)("rating",r.hoverState||r.rating)}}function wj(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"section",4),c.TgZ(1,"h3",5),c._uU(2,"Add Review"),c.qZA(),c.TgZ(3,"form",6),c.NdJ("ngSubmit",function(){return c.CHM(t),c.oxw().submit()}),c.TgZ(4,"div",7),c._UZ(5,"textarea",8),c.YNc(6,mj,2,0,"div",9),c.YNc(7,_j,2,0,"div",9),c.YNc(8,yj,2,0,"div",9),c.qZA(),c.TgZ(9,"div",10),c.TgZ(10,"label"),c._uU(11," Date "),c._UZ(12,"input",11),c.qZA(),c.qZA(),c.TgZ(13,"div",12),c.TgZ(14,"button",13),c._uU(15,"Submit"),c.qZA(),c.qZA(),c.qZA(),c.YNc(16,vj,2,0,"h4",14),c.TgZ(17,"div"),c.YNc(18,bj,2,2,"ng-container",15),c.qZA(),c.qZA()}if(2&n){const t=c.oxw();c.xp6(3),c.Q6J("formGroup",t.form),c.xp6(3),c.Q6J("ngIf",t.form.controls.text.hasError("required")&&t.form.controls.text.touched),c.xp6(1),c.Q6J("ngIf",t.form.controls.text.hasError("minlength")&&t.form.controls.text.touched),c.xp6(1),c.Q6J("ngIf",t.form.controls.text.hasError("maxlength")&&t.form.controls.text.touched),c.xp6(6),c.Q6J("disabled",!t.form.valid),c.xp6(2),c.Q6J("ngIf",t.isRated),c.xp6(2),c.Q6J("ngForOf",t.stars)}}function Ej(n,e){1&n&&(c.TgZ(0,"div",5),c.TgZ(1,"h3"),c._uU(2,"Manager can't leave reviews"),c.qZA(),c.qZA())}function Cj(n,e){1&n&&(c.TgZ(0,"div",5),c.TgZ(1,"h3"),c._uU(2,"To place a review have to add this item to your cart first"),c.qZA(),c.qZA())}function Dj(n,e){if(1&n&&(c.TgZ(0,"section",18),c.TgZ(1,"div",19),c.TgZ(2,"p",20),c._uU(3),c.qZA(),c.TgZ(4,"p",21),c._uU(5),c.qZA(),c.TgZ(6,"p",22),c._uU(7),c.qZA(),c.qZA(),c.qZA()),2&n){const t=e.$implicit;c.xp6(3),c.Oqu(t.email),c.xp6(2),c.Oqu(t.opinion),c.xp6(2),c.Oqu(t.date)}}let Tj=(()=>{class n{constructor(t,r,i,a,d){this.dishesService=t,this.router=r,this.opinonsService=i,this.auth=a,this.cartService=d,this.counter=1,this.form=new Pf({text:new Kn("",[Pt.required,Pt.minLength(50),Pt.maxLength(500)]),date:new Kn}),this.opinions=[],this.isInCart=!1,this.stars=[1,2,3,4,5],this.rating=1,this.isRated=!1,this.hoverState=0,this.dish=this.dishesService.currentDish,this.opinions=this.dishesService.getCurrentOpinions()}ngOnInit(){this.opinonsService.getOpinionsRef(this.dish.key).collection("dish_opinion").snapshotChanges().pipe((0,at.U)(t=>t.map(r=>Object.assign({key:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.opinions=t}),this.cartService.currentIsInCart.subscribe(t=>this.isInCart=t)}submit(){let t;t=null!=this.form.value.date?this.form.value.date:null,this.opinonsService.addOpinion(this.dish.key,this.form.value.text,t,this.auth.currentUser.email),this.form.reset()}onStarEnter(t){this.hoverState=t}onStarLeave(){this.hoverState=0}onStarClicked(t){this.isRated||(this.rating=t,this.isRated=!0,this.dishesService.rateDish(this.rating))}seeDetails(){this.router.navigate(["/dishes/dish"])}}return n.\u0275fac=function(t){return new(t||n)(c.Y36($a),c.Y36(Pr),c.Y36(fj),c.Y36(qa),c.Y36(Ld))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-opinion-form"]],decls:7,vars:4,consts:[[1,"btn","btn-primary","back",3,"click"],["class","form-container opinion-form",4,"ngIf"],["class","title",4,"ngIf"],["class","opinions",4,"ngFor","ngForOf"],[1,"form-container","opinion-form"],[1,"title"],["id","reviewform",3,"formGroup","ngSubmit"],[1,"form-group"],["form","reviewform","formControlName","text","placeholder","Your opinion","rows","7",1,"form-control","form-content"],["class","alert alert-danger",4,"ngIf"],[1,"form-group","opinion-form"],["type","date","formControlName","date","placeholder","Date",1,"form-control","form-content"],[1,"opinion-form"],["type","submit",1,"btn","btn-success",3,"disabled"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"alert","alert-danger"],[3,"starID","rating","starEnter","starLeave","starClicked"],[1,"opinions"],[1,"single"],[1,"oemail"],[1,"oopinion"],[1,"odate"]],template:function(t,r){1&t&&(c._UZ(0,"app-nav-bar"),c.TgZ(1,"button",0),c.NdJ("click",function(){return r.seeDetails()}),c._uU(2,"BACK"),c.qZA(),c.YNc(3,wj,19,7,"section",1),c.YNc(4,Ej,3,0,"div",2),c.YNc(5,Cj,3,0,"div",2),c.YNc(6,Dj,8,3,"section",3)),2&t&&(c.xp6(3),c.Q6J("ngIf",!r.auth.manager&&r.isInCart),c.xp6(1),c.Q6J("ngIf",r.auth.manager),c.xp6(1),c.Q6J("ngIf",!r.auth.manager&&!r.isInCart),c.xp6(1),c.Q6J("ngForOf",r.opinions))},directives:[Nf,Cr,cs,ny,X_,ry,Ud,Rf,T0,gj],styles:[".opinion-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:40vw;justify-content:center;align-items:center}.form-content[_ngcontent-%COMP%]{margin-bottom:2vh;border:solid black 1px;align-self:center;justify-self:center}.btn-home[_ngcontent-%COMP%]{margin-top:1rem;margin-left:2rem}.opinions[_ngcontent-%COMP%]{padding:13px;display:flex;align-items:center;justify-content:center;flex-direction:column}.single[_ngcontent-%COMP%]{padding:1rem;width:50%;background-color:#a9a9a9;border-radius:15px}.single[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:#fff}.oeamail[_ngcontent-%COMP%]{font-weight:bold}.title[_ngcontent-%COMP%]{margin-top:1rem;display:flex;align-items:center;justify-content:center}.back[_ngcontent-%COMP%]{margin-left:1rem;margin-top:10px;box-shadow:#00000040 0 14px 28px,#00000038 0 10px 10px}"]}),n})(),Ij=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-contact"]],decls:11,vars:0,consts:[[1,"footer"],[1,"contact"],[1,"map-frame"],["src","https://www.google.com/maps/d/u/0/thumbnail?mid=1wKrDyeGxobwelB0-0N-fjiD_7t0&hl=en","alt","map"]],template:function(t,r){1&t&&(c.TgZ(0,"section",0),c.TgZ(1,"div",1),c._uU(2," Phone: 1234567890"),c._UZ(3,"br"),c._uU(4," e-mail: angular@wp.pl"),c._UZ(5,"br"),c._uU(6," Address: Kowalskiego 5 "),c._UZ(7,"br"),c._uU(8," Cracov Poland "),c.qZA(),c.TgZ(9,"div",2),c._UZ(10,"img",3),c.qZA(),c.qZA())},styles:[".footer[_ngcontent-%COMP%]{position:absolute;top:20vh;left:0;z-index:0;width:100vw;height:80vh;display:flex;justify-content:space-between;align-items:flex-end;background-color:#f7e9f06b;-webkit-clip-path:polygon(0 65%,100% 0,100% 100%,0% 100%);clip-path:polygon(0 65%,100% 0,100% 100%,0% 100%);background-size:100%}.map-frame[_ngcontent-%COMP%]{margin-bottom:1rem;margin-right:1rem;height:40vh;width:40vw;border:1px solid grey;border-radius:10px;background-color:#000}.map-frame[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{border-radius:10px;width:100%;height:100%;object-fit:cover;opacity:.9}.contact[_ngcontent-%COMP%]{background-color:#234da8;padding:.5rem;color:#fff;border-radius:10px;margin:1rem;font-size:2.5vh}"]}),n})();const Sj=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-home"]],decls:5,vars:0,consts:[["id","main"],[1,"brand"]],template:function(t,r){1&t&&(c.TgZ(0,"section",0),c._UZ(1,"app-nav-bar"),c.TgZ(2,"h3",1),c._uU(3,"LORENTUM"),c.qZA(),c._UZ(4,"app-contact"),c.qZA())},directives:[Nf,Ij],styles:['section[_ngcontent-%COMP%]{background:url(https://www.cypressgreen.in/blog/wp-content/uploads/2021/03/food.jpg);background-size:cover;height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:space-between}.brand[_ngcontent-%COMP%]{color:#fff;text-align:center;z-index:0;font-family:"Trebuchet MS","Lucida Sans Unicode","Lucida Grande","Lucida Sans",Arial,sans-serif;font-weight:bold;font-size:16vw;text-shadow:14px 5px 8px rgb(2,2,2);position:relative;top:-23vh}']}),n})()},{path:"dishes/dish/feedback",component:Tj,canActivate:[$_]},{path:"dishes/dish",component:ZB},{path:"admin-view",component:NB,canActivate:[$_,$S]},{path:"manager-view",component:TB,canActivate:[$_,lk]},{path:"dishes/create",component:hj,canActivate:[$_,$S]},{path:"dishes/:page",component:nj},{path:"cart",component:hB,canActivate:[$_]},{path:"login",component:qB},{path:"sign-up",component:UB},{path:"**",component:$B}];let Aj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[sk.forRoot(Sj)],sk]}),n})();const u1="firebasestorage.googleapis.com",d1="storageBucket";class Nr extends Ct.ZR{constructor(e,t){super(cM(e),`Firebase Storage: ${t} (${cM(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Nr.prototype)}_codeEquals(e){return cM(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function cM(n){return"storage/"+n}function uM(){return new Nr("unknown","An unknown error occurred, please check the error payload for server response.")}function h1(){return new Nr("canceled","User canceled the upload/download.")}function f1(){return new Nr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function iy(n){return new Nr("invalid-argument",n)}function p1(){return new Nr("app-deleted","The Firebase app was deleted.")}function g1(n){return new Nr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function M0(n,e){return new Nr("invalid-format","String does not match format '"+n+"': "+e)}function x0(n){throw new Nr("internal-error","Internal error: "+n)}class Ts{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ts.makeFromUrl(e,t)}catch(i){return new Ts(e,"")}if(""===r.path)return r;throw function(n){return new Nr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",p=new RegExp("^gs://"+i+"(/(.*))?$","i");function E(Ze){Ze.path_=decodeURIComponent(Ze.path)}const x=t.replace(/[.]/g,"\\."),ft=[{regex:p,indices:{bucket:1,path:3},postModify:function(Ze){"/"===Ze.path.charAt(Ze.path.length-1)&&(Ze.path_=Ze.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${x}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:E},{regex:new RegExp(`^https?://${t===u1?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:E}];for(let Ze=0;Ze<ft.length;Ze++){const Gt=ft[Ze],xn=Gt.regex.exec(e);if(xn){let Hs=xn[Gt.indices.path];Hs||(Hs=""),r=new Ts(xn[Gt.indices.bucket],Hs),Gt.postModify(r);break}}if(null==r)throw function(n){return new Nr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class Hj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function zD(n){return"string"==typeof n||n instanceof String}function m1(n){return dM()&&n instanceof Blob}function dM(){return"undefined"!=typeof Blob}function hM(n,e,t,r){if(r<e)throw iy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw iy(`Invalid value for '${n}'. Expected ${t} or less.`)}function jd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function _1(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Ff=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Ff||(Ff={})),Ff))();class Wj{constructor(e,t,r,i,a,d,p,y,E,S,x){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=d,this.callback_=p,this.errorCallback_=y,this.timeout_=E,this.progressCallback_=S,this.connectionFactory_=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((L,B)=>{this.resolve_=L,this.reject_=B,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,d=this.reject_,p=i.connection;if(i.wasSuccessCode)try{const y=this.callback_(p,p.getResponse());!function(n){return void 0!==n}(y)?a():a(y)}catch(y){d(y)}else if(null!==p){const y=uM();y.serverResponse=p.getErrorText(),d(this.errorCallback_?this.errorCallback_(p,y):y)}else d(i.canceled?this.appDelete_?p1():h1():new Nr("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?t(0,new ZD(!1,null,!0)):this.backoffId_=function(n,e,t){let r=1,i=null,a=null,d=!1,p=0;function y(){return 2===p}let E=!1;function S(...be){E||(E=!0,e.apply(null,be))}function x(be){i=setTimeout(()=>{i=null,n(B,y())},be)}function L(){a&&clearTimeout(a)}function B(be,...nt){if(E)return void L();if(be)return L(),void S.call(null,be,...nt);if(y()||d)return L(),void S.call(null,be,...nt);let ft;r<64&&(r*=2),1===p?(p=2,ft=0):ft=1e3*(r+Math.random()),x(ft)}let W=!1;function he(be){W||(W=!0,L(),!E&&(null!==i?(be||(p=2),clearTimeout(i),x(0)):be||(p=1)))}return x(0),a=setTimeout(()=>{d=!0,he(!0)},t),he}((r,i)=>{if(i)return void r(!1,new ZD(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const d=p=>{null!==this.progressCallback_&&this.progressCallback_(p.loaded,p.lengthComputable?p.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(d),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(d),this.pendingConnection_=null;const p=a.getErrorCode()===Ff.NO_ERROR,y=a.getStatus();if(!p||this.isRetryStatusCode_(y)){const S=a.getErrorCode()===Ff.ABORT;return void r(!1,new ZD(!1,null,S))}const E=-1!==this.successCodes_.indexOf(y);r(!0,new ZD(E,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class ZD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function t3(...n){const e="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(dM())return new Blob(n);throw new Nr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Jo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class fM{constructor(e,t){this.data=e,this.contentType=t||null}}function pM(n,e){switch(n){case Jo.RAW:return new fM(y1(e));case Jo.BASE64:case Jo.BASE64URL:return new fM(v1(n,e));case Jo.DATA_URL:return new fM(function(n){const e=new b1(n);return e.base64?v1(Jo.BASE64,e.rest):function(n){let e;try{e=decodeURIComponent(n)}catch(t){throw M0(Jo.DATA_URL,"Malformed data URL.")}return y1(e)}(e.rest)}(e),function(n){return new b1(n).contentType}(e))}throw uM()}function y1(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function v1(n,e){switch(n){case Jo.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw M0(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Jo.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw M0(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function(n){return atob(n)}(e)}catch(i){throw M0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class b1{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw M0(Jo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=e.substring(e.indexOf(",")+1)}}class fu{constructor(e,t){let r=0,i="";m1(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(m1(this.data_)){const i=function(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new fu(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new fu(r,!0)}}static getBlob(...e){if(dM()){const t=e.map(r=>r instanceof fu?r.data_:r);return new fu(t3.apply(null,t))}{const t=e.map(d=>zD(d)?pM(Jo.RAW,d).data:d.data_);let r=0;t.forEach(d=>{r+=d.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(d=>{for(let p=0;p<d.length;p++)i[a++]=d[p]}),new fu(i,!0)}}uploadData(){return this.data_}}function gM(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function w1(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function d3(n,e){return e}class Bs{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||d3}}let WD=null;function k0(){if(WD)return WD;const n=[];n.push(new Bs("bucket")),n.push(new Bs("generation")),n.push(new Bs("metageneration")),n.push(new Bs("name","fullPath",!0));const t=new Bs("name");t.xform=function(a,d){return function(n){return!zD(n)||n.length<2?n:w1(n)}(d)},n.push(t);const i=new Bs("size");return i.xform=function(a,d){return void 0!==d?Number(d):d},n.push(i),n.push(new Bs("timeCreated")),n.push(new Bs("updated")),n.push(new Bs("md5Hash",null,!0)),n.push(new Bs("cacheControl",null,!0)),n.push(new Bs("contentDisposition",null,!0)),n.push(new Bs("contentEncoding",null,!0)),n.push(new Bs("contentLanguage",null,!0)),n.push(new Bs("contentType",null,!0)),n.push(new Bs("metadata","customMetadata",!0)),WD=n,WD}function E1(n,e,t){const r=gM(e);return null===r?null:function(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const d=t[a];r[d.local]=d.xform(r,e[d.server])}return function(n,e){Object.defineProperty(n,"ref",{get:function(){const a=new Ts(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function mM(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const C1="prefixes";class pu{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function gu(n){if(!n)throw uM()}function KD(n,e){return function(r,i){const a=E1(n,i,e);return gu(null!==a),a}}function sy(n){return function(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?new Nr("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Nr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?function(n){return new Nr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function(n){return new Nr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function O0(n){const e=sy(n);return function(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function(n){return new Nr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function T1(n,e,t){const i=jd(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,p=new pu(i,"GET",KD(n,t),d);return p.errorHandler=O0(e),p}function b3(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const p=jd(e.bucketOnlyServerUrl(),n.host,n._protocol),E=n.maxOperationRetryTime,S=new pu(p,"GET",function(n,e){return function(r,i){const a=function(n,e,t){const r=gM(t);return null===r?null:function(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[C1])for(const i of t[C1]){const a=i.replace(/\/$/,""),d=n._makeStorageReference(new Ts(e,a));r.prefixes.push(d)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new Ts(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return gu(null!==a),a}}(n,e.bucket),E);return S.urlParams=a,S.errorHandler=sy(e),S}function S1(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function(n,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}class YD{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function _M(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){gu(!1)}return gu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const A3={STATE_CHANGED:"state_changed"},js={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function yM(n){switch(n){case"running":case"pausing":case"canceling":return js.RUNNING;case"paused":return js.PAUSED;case"success":return js.SUCCESS;case"canceled":return js.CANCELED;default:return js.ERROR}}class M3{constructor(e,t,r){if(function(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function oy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class k3 extends class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ff.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ff.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ff.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw x0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw x0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw x0("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw x0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw x0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function ic(){return new k3}class k1{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=k0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),d=S1(e,r,i),p={name:d.fullPath},y=jd(a,n.host,n._protocol),S={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":d.contentType,"Content-Type":"application/json; charset=utf-8"},x=mM(d,t),W=new pu(y,"POST",function(he){let be;_M(he);try{be=he.getResponseHeader("X-Goog-Upload-URL")}catch(nt){gu(!1)}return gu(zD(be)),be},n.maxUploadRetryTime);return W.urlParams=p,W.headers=S,W.body=x,W.errorHandler=sy(e),W}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ic,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function(n,e,t,r){const y=new pu(t,"POST",function(E){const S=_M(E,["active","final"]);let x=null;try{x=E.getResponseHeader("X-Goog-Upload-Size-Received")}catch(B){gu(!1)}x||gu(!1);const L=Number(x);return gu(!isNaN(L)),new YD(L,r.size(),"final"===S)},n.maxUploadRetryTime);return y.headers={"X-Goog-Upload-Command":"query"},y.errorHandler=sy(e),y}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,ic,t,r);this._request=a,a.getPromise().then(d=>{d=d,this._request=void 0,this._updateProgress(d.current),this._needToFetchStatus=!1,d.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new YD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let d;try{d=function(n,e,t,r,i,a,d,p){const y=new YD(0,0);if(d?(y.current=d.current,y.total=d.total):(y.current=0,y.total=r.size()),r.size()!==y.total)throw new Nr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const E=y.total-y.current;let S=E;i>0&&(S=Math.min(S,i));const x=y.current,W={"X-Goog-Upload-Command":S===E?"upload, finalize":"upload","X-Goog-Upload-Offset":`${y.current}`},he=r.slice(x,x+S);if(null===he)throw f1();const ft=new pu(t,"POST",function(Ze,Gt){const xn=_M(Ze,["active","final"]),dr=y.current+S,Hs=r.size();let Xo;return Xo="final"===xn?KD(e,a)(Ze,Gt):null,new YD(dr,Hs,"final"===xn,Xo)},e.maxUploadRetryTime);return ft.headers=W,ft.body=he.uploadData(),ft.progressCallback=p||null,ft.errorHandler=sy(n),ft}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(y){return this._error=y,void this._transition("error")}const p=this._ref.storage._makeRequest(d,ic,i,a);this._request=p,p.getPromise().then(y=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(y.current),y.finalized?(this._metadata=y.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=T1(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,ic,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"},y=function(){let ft="";for(let Ze=0;Ze<2;Ze++)ft+=Math.random().toString().slice(2);return ft}();d["Content-Type"]="multipart/related; boundary="+y;const E=S1(e,r,i),S=mM(E,t),B=fu.getBlob("--"+y+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+S+"\r\n--"+y+"\r\nContent-Type: "+E.contentType+"\r\n\r\n",r,"\r\n--"+y+"--");if(null===B)throw f1();const W={name:E.fullPath},he=jd(a,n.host,n._protocol),nt=n.maxUploadRetryTime,ot=new pu(he,"POST",KD(n,t),nt);return ot.urlParams=W,ot.headers=d,ot.body=B.uploadData(),ot.errorHandler=sy(e),ot}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ic,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=h1(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=yM(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new M3(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(yM(this._state)){case js.SUCCESS:oy(this._resolve.bind(null,this.snapshot))();break;case js.CANCELED:case js.ERROR:oy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(yM(this._state)){case js.RUNNING:case js.PAUSED:e.next&&oy(e.next.bind(e,this.snapshot))();break;case js.SUCCESS:e.complete&&oy(e.complete.bind(e))();break;default:e.error&&oy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class xg{constructor(e,t){this._service=e,this._location=t instanceof Ts?t:Ts.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new xg(e,t)}get root(){const e=new Ts(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return w1(this._location.path)}get storage(){return this._service}get parent(){const e=function(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ts(this._location.bucket,e);return new xg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw g1(e)}}function R1(n,e,t){return vM.apply(this,arguments)}function vM(){return vM=(0,pe.Z)(function*(n,e,t){const i=yield P1(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield R1(n,e,i.nextPageToken))}),vM.apply(this,arguments)}function P1(n,e){null!=e&&"number"==typeof e.maxResults&&hM("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=b3(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,ic)}function q3(n){n._throwIfRoot("getDownloadURL");const e=function(n,e,t){const i=jd(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,p=new pu(i,"GET",function(n,e){return function(r,i){const a=E1(n,i,e);return gu(null!==a),function(n,e,t,r){const i=gM(e);if(null===i||!zD(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const d=encodeURIComponent;return a.split(",").map(E=>{const x=n.fullPath;return jd("/b/"+d(n.bucket)+"/o/"+d(x),t,r)+_1({alt:"media",token:E})})[0]}(a,i,n.host,n._protocol)}}(n,t),d);return p.errorHandler=O0(e),p}(n.storage,n._location,k0());return n.storage.makeRequestWithTokens(e,ic).then(t=>{if(null===t)throw new Nr("no-download-url","The given file does not have any download URLs.");return t})}function N1(n,e){const t=function(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Ts(n._location.bucket,t);return new xg(n.storage,r)}function F1(n,e){if(n instanceof bM){const t=n;if(null==t._bucket)throw new Nr("no-default-bucket","No default bucket found. Did you set the '"+d1+"' property when initializing the app?");const r=new xg(t,t._bucket);return null!=e?F1(r,e):r}return void 0!==e?N1(n,e):n}function Z3(n,e){if(e&&function(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof bM)return function(n,e){return new xg(n,e)}(n,e);throw iy("To use ref(service, url), the first argument must be a Storage instance.")}return F1(n,e)}function L1(n,e){const t=null==e?void 0:e[d1];return null==t?null:Ts.makeFromBucketSpec(t,n)}class bM{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=u1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Ts.makeFromBucketSpec(i,this._host):L1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ts.makeFromBucketSpec(this._url,e):L1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){hM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){hM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,pe.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,pe.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xg(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new Hj(p1());{const a=function(n,e,t,r,i,a){const d=_1(n.urlParams),p=n.url+d,y=Object.assign({},n.headers);return function(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(y,a),function(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,r),new Wj(p,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,pe.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const V1="@firebase/storage";function j1(n,e){return Z3(n=(0,Ct.m9)(n),e)}(0,Zi._registerComponent)(new Gn.wA("storage",function(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new bM(t,r,i,e,Zi.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,Zi.registerVersion)(V1,"0.9.1",""),(0,Zi.registerVersion)(V1,"0.9.1","esm2017");class QD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class H1{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new QD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new QD(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?d=>t(new QD(d,this,this._ref)):{next:t.next?d=>t.next(new QD(d,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class q1{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Hd(e,this._service))}get items(){return this._delegate.items.map(e=>new Hd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Hd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(n,e){return N1(n,e)}(this._delegate,e);return new Hd(t,this.storage)}get root(){return new Hd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Hd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new H1(function(n,e,t){return function(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new k1(n,new fu(e),t)}(n=(0,Ct.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Jo.RAW,r){this._throwIfRoot("putString");const i=pM(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new H1(new k1(this._delegate,new fu(i.data,!0),a),this)}listAll(){return function(n){return function(n){const e={prefixes:[],items:[]};return R1(n,e).then(()=>e)}(n=(0,Ct.m9)(n))}(this._delegate).then(e=>new q1(e,this.storage))}list(e){return function(n,e){return P1(n=(0,Ct.m9)(n),e)}(this._delegate,e||void 0).then(t=>new q1(t,this.storage))}getMetadata(){return function(n){return function(n){n._throwIfRoot("getMetadata");const e=T1(n.storage,n._location,k0());return n.storage.makeRequestWithTokens(e,ic)}(n=(0,Ct.m9)(n))}(this._delegate)}updateMetadata(e){return function(n,e){return function(n,e){n._throwIfRoot("updateMetadata");const t=function(n,e,t,r){const a=jd(e.fullServerUrl(),n.host,n._protocol),p=mM(t,r),E=n.maxOperationRetryTime,S=new pu(a,"PATCH",KD(n,r),E);return S.headers={"Content-Type":"application/json; charset=utf-8"},S.body=p,S.errorHandler=O0(e),S}(n.storage,n._location,e,k0());return n.storage.makeRequestWithTokens(t,ic)}(n=(0,Ct.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function(n){return q3(n=(0,Ct.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(n){return function(n){n._throwIfRoot("deleteObject");const e=function(n,e){const r=jd(e.fullServerUrl(),n.host,n._protocol),p=new pu(r,"DELETE",function(y,E){},n.maxOperationRetryTime);return p.successCodes=[200,204],p.errorHandler=O0(e),p}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ic)}(n=(0,Ct.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw g1(e)}}class $1{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(G1(e))throw iy("ref() expected a child path but got a URL, use refFromURL instead.");return new Hd(j1(this._delegate,e),this)}refFromURL(e){if(!G1(e))throw iy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ts.makeFromUrl(e,this._delegate.host)}catch(t){throw iy("refFromUrl() expected a valid full URL but got an invalid one.")}return new Hd(j1(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function(n,e,t,r={}){!function(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,Ct.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function G1(n){return/^[A-Za-z]+:\/\//.test(n)}function cH(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new $1(t,r)}function z1(n){const e=function(n){return new Rn.y(e=>{const t=d=>e.next(d);t(n.snapshot);const a=n.on("state_changed",t);return n.then(d=>{t(d),e.complete()},d=>{t(n.snapshot),(d=>{e.error(d)})(d)}),function(){a()}}).pipe(dO(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,at.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function JD(n){return{getDownloadURL:()=>dt(void 0).pipe(dn.fc,ii(()=>n.getDownloadURL()),dn.iC),getMetadata:()=>dt(void 0).pipe(dn.fc,ii(()=>n.getMetadata()),dn.iC),delete:()=>(0,wn.D)(n.delete()),child:e=>JD(n.child(e)),updateMetadata:e=>(0,wn.D)(n.updateMetadata(e)),put:(e,t)=>z1(n.put(e,t)),putString:(e,t,r)=>z1(n.putString(e,t,r)),list:e=>(0,wn.D)(n.list(e)),listAll:()=>(0,wn.D)(n.listAll())}}!function(n){const e={TaskState:js,TaskEvent:A3,StringFormat:Jo,Storage:$1,Reference:Hd};n.INTERNAL.registerComponent(new Gn.wA("storage-compat",cH,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.9")}(Cl.Z);const hH=new c.OlP("angularfire2.storageBucket"),fH=new c.OlP("angularfire2.storage.maxUploadRetryTime"),pH=new c.OlP("angularfire2.storage.maxOperationRetryTime"),gH=new c.OlP("angularfire2.storage.use-emulator");let mH=(()=>{class n{constructor(t,r,i,a,d,p,y,E,S,x){const L=(0,gr.on)(t,d,r);this.storage=(0,gr.cc)(`${L.name}.storage.${i}`,"AngularFireStorage",L.name,()=>{const B=d.runOutsideAngular(()=>L.storage(i||void 0)),W=S;return W&&B.useEmulator(...W),y&&B.setMaxUploadRetryTime(y),E&&B.setMaxOperationRetryTime(E),B},[y,E])}ref(t){return JD(this.storage.ref(t))}refFromURL(t){return JD(this.storage.refFromURL(t))}upload(t,r,i){return JD(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(gr.Dh),c.LFG(gr.xv,8),c.LFG(hH,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(dn.HU),c.LFG(fH,8),c.LFG(pH,8),c.LFG(gH,8),c.LFG(zb,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),_H=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),yH=(()=>{class n{constructor(){ps.Z.registerVersion("angularfire",dn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[mH],imports:[_H]}),n})(),vH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[cF]}),n.\u0275inj=c.cJS({providers:[qa,$_,qS,$S,lk,Ld],imports:[[CU,aa,LL,LU,qU,G2,a1,tB,OR,Aj,gr.hO.initializeApp(ck_firebase),yH]]}),n})();(0,c.G48)(),oa().bootstrapModule(vH).catch(n=>console.error(n))},9162:(Ke,ye,P)=>{"use strict";function oe(ne,de,we,Ce){return new(we||(we=Promise))(function(ge,Mt){function Kt(Tt){try{xt(Ce.next(Tt))}catch(Rt){Mt(Rt)}}function ir(Tt){try{xt(Ce.throw(Tt))}catch(Rt){Mt(Rt)}}function xt(Tt){Tt.done?ge(Tt.value):function(ge){return ge instanceof we?ge:new we(function(Mt){Mt(ge)})}(Tt.value).then(Kt,ir)}xt((Ce=Ce.apply(ne,de||[])).next())})}function ae(ne){return this instanceof ae?(this.v=ne,this):new ae(ne)}function K(ne,de,we){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ne,Ce=we.apply(ne,de||[]),ge=[];return Ne={},Mt("next"),Mt("throw"),Mt("return"),Ne[Symbol.asyncIterator]=function(){return this},Ne;function Mt(pn){Ce[pn]&&(Ne[pn]=function(zr){return new Promise(function(li,gn){ge.push([pn,zr,li,gn])>1||Kt(pn,zr)})})}function Kt(pn,zr){try{!function(pn){pn.value instanceof ae?Promise.resolve(pn.value.v).then(xt,Tt):Rt(ge[0][2],pn)}(Ce[pn](zr))}catch(li){Rt(ge[0][3],li)}}function xt(pn){Kt("next",pn)}function Tt(pn){Kt("throw",pn)}function Rt(pn,zr){pn(zr),ge.shift(),ge.length&&Kt(ge[0][0],ge[0][1])}}function De(ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var we,de=ne[Symbol.asyncIterator];return de?de.call(ne):(ne=function(ne){var de="function"==typeof Symbol&&Symbol.iterator,we=de&&ne[de],Ce=0;if(we)return we.call(ne);if(ne&&"number"==typeof ne.length)return{next:function(){return ne&&Ce>=ne.length&&(ne=void 0),{value:ne&&ne[Ce++],done:!ne}}};throw new TypeError(de?"Object is not iterable.":"Symbol.iterator is not defined.")}(ne),we={},Ce("next"),Ce("throw"),Ce("return"),we[Symbol.asyncIterator]=function(){return this},we);function Ce(ge){we[ge]=ne[ge]&&function(Mt){return new Promise(function(Kt,ir){!function(ge,Mt,Kt,ir){Promise.resolve(ir).then(function(xt){ge({value:xt,done:Kt})},Mt)}(Kt,ir,(Mt=ne[ge](Mt)).done,Mt.value)})}}}P.d(ye,{mG:()=>oe,qq:()=>ae,FC:()=>K,KL:()=>De})},3668:(Ke,ye,P)=>{"use strict";P.d(ye,{deG:()=>Jn,tb:()=>_C,AFp:()=>S_,ip1:()=>Ls,CZH:()=>nc,hGG:()=>Kb,z2F:()=>Pd,sBO:()=>eS,Sil:()=>fg,_Vd:()=>Fs,EJc:()=>hg,SBq:()=>Wo,qLn:()=>Fo,vpe:()=>Ei,tBr:()=>Bn,XFs:()=>yt,OlP:()=>cn,zs3:()=>co,ZZ4:()=>Zb,aQg:()=>B_,soG:()=>si,YKP:()=>p_,h0i:()=>vf,PXZ:()=>Ub,R0b:()=>Vs,FiY:()=>Jr,Lbi:()=>mC,g9A:()=>Ob,Qsj:()=>LE,FYo:()=>FE,JOm:()=>bs,tp0:()=>ki,Rgc:()=>cg,dDg:()=>Fb,q4F:()=>og,GfV:()=>Jc,s_b:()=>ug,ifc:()=>Qe,eFA:()=>Bb,G48:()=>XI,Gpc:()=>H,f3M:()=>et,X6Q:()=>JI,_c5:()=>$C,VLi:()=>Lb,c2e:()=>yC,zSh:()=>Zy,wAp:()=>Et,vHH:()=>je,cg1:()=>Xp,kL8:()=>t_,dqk:()=>St,sIi:()=>$l,CqO:()=>Vm,QGY:()=>Gp,F4k:()=>xw,RDi:()=>Hf,AaK:()=>oe,qOj:()=>es,TTD:()=>Zs,_Bn:()=>OE,xp6:()=>Ey,uIk:()=>Na,ekj:()=>Wp,Suo:()=>XE,Xpm:()=>On,lG2:()=>go,Yz7:()=>gn,cJS:()=>Fn,oAB:()=>Ka,Yjl:()=>bu,Y36:()=>Hp,_UZ:()=>hv,BQk:()=>fv,ynx:()=>$p,qZA:()=>sf,TgZ:()=>qp,EpF:()=>Mw,n5z:()=>ha,Ikx:()=>Jp,LFG:()=>ie,$8M:()=>eo,$Z:()=>uv,NdJ:()=>kr,CRH:()=>eC,O4$:()=>la,oxw:()=>Rw,ALo:()=>ZE,lcZ:()=>db,Dn7:()=>hb,Hsn:()=>vv,F$t:()=>yv,Q6J:()=>dv,s9C:()=>zp,VKq:()=>ab,WLB:()=>lb,kEZ:()=>Ef,iGM:()=>Cf,MAs:()=>Np,CHM:()=>Ms,LSH:()=>wh,WFA:()=>gv,d8E:()=>Nv,YNc:()=>ts,W1O:()=>ru,_uU:()=>zw,Oqu:()=>Kp,hij:()=>Km,AsE:()=>Yp,lnq:()=>Qp,Gf:()=>y_});var c=P(273),J=P(7908),N=P(8305),ce=P(3719),se=P(3174);function me(s){for(let o in s)if(s[o]===me)return o;throw Error("Could not find renamed property on target object.")}function te(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function oe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(oe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function ue(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const q=me({__forward_ref__:me});function H(s){return s.__forward_ref__=H,s.toString=function(){return oe(this())},s}function X(s){return Be(s)?s():s}function Be(s){return"function"==typeof s&&s.hasOwnProperty(q)&&s.__forward_ref__===H}class je extends Error{constructor(o,l){super(function(s,o){return`${s?`NG0${s}: `:""}${o}`}(o,l)),this.code=o}}function K(s){return"string"==typeof s?s:null==s?"":String(s)}function le(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():K(s)}function Oe(s,o){const l=o?` in ${o}`:"";throw new je("201",`No provider for ${le(s)} found${l}`)}function Tt(s,o){null==s&&function(s,o,l,u){throw new Error(`ASSERTION ERROR: ${s}`+(null==u?"":` [Expected=> ${l} ${u} ${o} <=Actual]`))}(o,s,null,"!=")}function gn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Fn(s){return{providers:s.providers||[],imports:s.imports||[]}}function Li(s){return $t(s,ls)||$t(s,hr)}function $t(s,o){return s.hasOwnProperty(o)?s[o]:null}function Vi(s){return s&&(s.hasOwnProperty(Ae)||s.hasOwnProperty(Yn))?s[Ae]:null}const ls=me({\u0275prov:me}),Ae=me({\u0275inj:me}),hr=me({ngInjectableDef:me}),Yn=me({ngInjectorDef:me});var yt=(()=>((yt=yt||{})[yt.Default=0]="Default",yt[yt.Host=1]="Host",yt[yt.Self=2]="Self",yt[yt.SkipSelf=4]="SkipSelf",yt[yt.Optional=8]="Optional",yt))();let zt;function ci(s){const o=zt;return zt=s,o}function pt(s,o,l){const u=Li(s);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:l&yt.Optional?null:void 0!==o?o:void Oe(oe(s),"Injector")}function Vt(s){return{toString:s}.toString()}var Ut=(()=>((Ut=Ut||{})[Ut.OnPush=0]="OnPush",Ut[Ut.Default=1]="Default",Ut))(),Qe=(()=>{return(s=Qe||(Qe={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Qe;var s})();const ht="undefined"!=typeof globalThis&&globalThis,yu="undefined"!=typeof window&&window,qs="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,St=ht||"undefined"!=typeof global&&global||yu||qs,G={},U=[],z=me({\u0275cmp:me}),Ee=me({\u0275dir:me}),re=me({\u0275pipe:me}),Xe=me({\u0275mod:me}),mt=me({\u0275fac:me}),nn=me({__NG_ELEMENT_ID__:me});let br=0;function On(s){return Vt(()=>{const l={},u={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Ut.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||U,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Qe.Emulated,id:"c",styles:s.styles||U,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,m=s.features,v=s.pipes;return u.id+=br++,u.inputs=sc(s.inputs,l),u.outputs=sc(s.outputs),m&&m.forEach(w=>w(u)),u.directiveDefs=h?()=>("function"==typeof h?h():h).map(jt):null,u.pipeDefs=v?()=>("function"==typeof v?v():v).map(wr):null,u})}function jt(s){return mn(s)||function(s){return s[Ee]||null}(s)}function wr(s){return function(s){return s[re]||null}(s)}const po={};function Ka(s){return Vt(()=>{const o={type:s.type,bootstrap:s.bootstrap||U,declarations:s.declarations||U,imports:s.imports||U,exports:s.exports||U,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(po[s.id]=s.type),o})}function sc(s,o){if(null==s)return G;const l={};for(const u in s)if(s.hasOwnProperty(u)){let h=s[u],m=h;Array.isArray(h)&&(m=h[1],h=h[0]),l[h]=u,o&&(o[h]=m)}return l}const go=On;function bu(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function mn(s){return s[z]||null}function Er(s,o){const l=s[Xe]||null;if(!l&&!0===o)throw new Error(`Type ${oe(s)} does not have '\u0275mod' property.`);return l}function us(s){return Array.isArray(s)&&"object"==typeof s[1]}function ds(s){return Array.isArray(s)&&!0===s[1]}function or(s){return 0!=(8&s.flags)}function Is(s){return 2==(2&s.flags)}function wu(s){return 1==(1&s.flags)}function Ai(s){return null!==s.template}function Vf(s){return 0!=(512&s[2])}function hs(s,o){return s.hasOwnProperty(mt)?s[mt]:null}class Du{constructor(o,l,u){this.previousValue=o,this.currentValue=l,this.firstChange=u}isFirstChange(){return this.firstChange}}function Zs(){return _o}function _o(s){return s.type.prototype.ngOnChanges&&(s.setInput=ia),Ws}function Ws(){const s=Dr(this),o=null==s?void 0:s.current;if(o){const l=s.previous;if(l===G)s.previous=o;else for(let u in o)l[u]=o[u];s.current=null,this.ngOnChanges(o)}}function ia(s,o,l,u){const h=Dr(s)||function(s,o){return s[Yd]=o}(s,{previous:G,current:null}),m=h.current||(h.current={}),v=h.previous,w=this.declaredInputs[l],C=v[w];m[w]=new Du(C&&C.currentValue,o,v===G),s[u]=o}Zs.ngInherit=!0;const Yd="__ngSimpleChanges__";function Dr(s){return s[Yd]||null}const Qd="http://www.w3.org/2000/svg";let uc;function Hf(s){uc=s}function ln(s){return!!s.listen}const Su={createRenderer:(s,o)=>void 0!==uc?uc:"undefined"!=typeof document?document:void 0};function qn(s){for(;Array.isArray(s);)s=s[0];return s}function $i(s,o){return qn(o[s])}function $n(s,o){return qn(o[s.index])}function wo(s,o){return s.data[o]}function Eo(s,o){return s[o]}function rn(s,o){const l=o[s];return us(l)?l:l[0]}function As(s){return 4==(4&s[2])}function il(s){return 128==(128&s[2])}function Kr(s,o){return null==o?null:s[o]}function sl(s){s[18]=0}function Ks(s,o){s[5]+=o;let l=s,u=s[3];for(;null!==u&&(1===o&&1===l[5]||-1===o&&0===l[5]);)u[5]+=o,l=u,u=u[3]}const rt={lFrame:xu(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function fc(){return rt.bindingsEnabled}function Ie(){return rt.lFrame.lView}function Bt(){return rt.lFrame.tView}function Ms(s){return rt.lFrame.contextLView=s,s[8]}function Dn(){let s=ll();for(;null!==s&&64===s.type;)s=s.parent;return s}function ll(){return rt.lFrame.currentTNode}function Tr(s,o){const l=rt.lFrame;l.currentTNode=s,l.isParent=o}function gc(){return rt.lFrame.isParent}function Do(){rt.lFrame.isParent=!1}function cl(){return rt.isInCheckNoChangesMode}function To(s){rt.isInCheckNoChangesMode=s}function fr(){const s=rt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Gi(){return rt.lFrame.bindingIndex}function Ys(){return rt.lFrame.bindingIndex++}function fs(s){const o=rt.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}function fl(s,o){const l=rt.lFrame;l.bindingIndex=l.bindingRootIndex=s,pl(o)}function pl(s){rt.lFrame.currentDirectiveIndex=s}function oa(s){const o=rt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}function _c(){return rt.lFrame.currentQueryIndex}function aa(s){rt.lFrame.currentQueryIndex=s}function Xd(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function yc(s,o,l){if(l&yt.SkipSelf){let h=o,m=s;for(;!(h=h.parent,null!==h||l&yt.Host||(h=Xd(m),null===h||(m=m[15],10&h.type))););if(null===h)return!1;o=h,s=m}const u=rt.lFrame=gl();return u.currentTNode=o,u.lView=s,!0}function vc(s){const o=gl(),l=s[1];rt.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function gl(){const s=rt.lFrame,o=null===s?null:s.child;return null===o?xu(s):o}function xu(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function ml(){const s=rt.lFrame;return rt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const eh=ml;function _l(){const s=ml();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function _n(){return rt.lFrame.selectedIndex}function Qs(s){rt.lFrame.selectedIndex=s}function Tn(){const s=rt.lFrame;return wo(s.tView,s.selectedIndex)}function la(){rt.lFrame.currentNamespace=Qd}function Js(s,o){for(let l=o.directiveStart,u=o.directiveEnd;l<u;l++){const m=s.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:C,ngAfterViewChecked:M,ngOnDestroy:O}=m;v&&(s.contentHooks||(s.contentHooks=[])).push(-l,v),w&&((s.contentHooks||(s.contentHooks=[])).push(l,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,w)),C&&(s.viewHooks||(s.viewHooks=[])).push(-l,C),M&&((s.viewHooks||(s.viewHooks=[])).push(l,M),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,M)),null!=O&&(s.destroyHooks||(s.destroyHooks=[])).push(l,O)}}function bc(s,o,l){Ou(s,o,3,l)}function yl(s,o,l,u){(3&s[2])===l&&Ou(s,o,l,u)}function nh(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function Ou(s,o,l,u){const m=null!=u?u:-1,v=o.length-1;let w=0;for(let C=void 0!==u?65535&s[18]:0;C<v;C++)if("number"==typeof o[C+1]){if(w=o[C],null!=u&&w>=u)break}else o[C]<0&&(s[18]+=65536),(w<m||-1==m)&&(rh(s,l,o,C),s[18]=(4294901760&s[18])+C+2),C++}function rh(s,o,l,u){const h=l[u]<0,m=l[u+1],w=s[h?-l[u]:l[u]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{m.call(w)}finally{}}}else try{m.call(w)}finally{}}class vl{constructor(o,l,u){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=u}}function Pu(s,o,l){const u=ln(s);let h=0;for(;h<l.length;){const m=l[h];if("number"==typeof m){if(0!==m)break;h++;const v=l[h++],w=l[h++],C=l[h++];u?s.setAttribute(o,w,C,v):o.setAttributeNS(v,w,C)}else{const v=m,w=l[++h];Ft(v)?u&&s.setProperty(o,v,w):u?s.setAttribute(o,v,w):o.setAttribute(v,w),h++}}return h}function ps(s){return 3===s||4===s||6===s}function Ft(s){return 64===s.charCodeAt(0)}function bn(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let u=0;u<o.length;u++){const h=o[u];"number"==typeof h?l=h:0===l||at(s,l,h,null,-1===l||2===l?o[++u]:null)}}return s}function at(s,o,l,u,h){let m=0,v=s.length;if(-1===o)v=-1;else for(;m<s.length;){const w=s[m++];if("number"==typeof w){if(w===o){v=-1;break}if(w>o){v=m-1;break}}}for(;m<s.length;){const w=s[m];if("number"==typeof w)break;if(w===l){if(null===u)return void(null!==h&&(s[m+1]=h));if(u===s[m+1])return void(s[m+2]=h)}m++,null!==u&&m++,null!==h&&m++}-1!==v&&(s.splice(v,0,o),m=v+1),s.splice(m++,0,l),null!==u&&s.splice(m++,0,u),null!==h&&s.splice(m++,0,h)}function Ec(s){return-1!==s}function Rn(s){return 32767&s}function gs(s,o){let l=function(s){return s>>16}(s),u=o;for(;l>0;)u=u[15],l--;return u}let dt=!0;function dn(s){const o=dt;return dt=s,o}let Ir=0;function Pn(s,o){const l=So(s,o);if(-1!==l)return l;const u=o[1];u.firstCreatePass&&(s.injectorIndex=o.length,Io(u.data,s),Io(o,null),Io(u.blueprint,null));const h=Xs(s,o),m=s.injectorIndex;if(Ec(h)){const v=Rn(h),w=gs(h,o),C=w[1].data;for(let M=0;M<8;M++)o[m+M]=w[v+M]|C[v+M]}return o[m+8]=h,m}function Io(s,o){s.push(0,0,0,0,0,0,0,0,o)}function So(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Xs(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,u=null,h=o;for(;null!==h;){const m=h[1],v=m.type;if(u=2===v?m.declTNode:1===v?h[6]:null,null===u)return-1;if(l++,h=h[15],-1!==u.injectorIndex)return u.injectorIndex|l<<16}return-1}function gi(s,o,l){!function(s,o,l){let u;"string"==typeof l?u=l.charCodeAt(0)||0:l.hasOwnProperty(nn)&&(u=l[nn]),null==u&&(u=l[nn]=Ir++);const h=255&u;o.data[s+(h>>5)]|=1<<h}(s,o,l)}function ms(s,o,l){if(l&yt.Optional)return s;Oe(o,"NodeInjector")}function pr(s,o,l,u){if(l&yt.Optional&&void 0===u&&(u=null),0==(l&(yt.Self|yt.Host))){const h=s[9],m=ci(void 0);try{return h?h.get(o,u,l&yt.Optional):pt(o,u,l&yt.Optional)}finally{ci(m)}}return ms(u,o,l)}function gr(s,o,l,u=yt.Default,h){if(null!==s){const m=function(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(nn)?s[nn]:void 0;return"number"==typeof o?o>=0?255&o:pe:o}(l);if("function"==typeof m){if(!yc(o,s,u))return u&yt.Host?ms(h,l,u):pr(o,l,u,h);try{const v=m(u);if(null!=v||u&yt.Optional)return v;Oe(l)}finally{eh()}}else if("number"==typeof m){let v=null,w=So(s,o),C=-1,M=u&yt.Host?o[16][6]:null;for((-1===w||u&yt.SkipSelf)&&(C=-1===w?Xs(s,o):o[w+8],-1!==C&&_s(u,!1)?(v=o[1],w=Rn(C),o=gs(C,o)):w=-1);-1!==w;){const O=o[1];if(da(m,w,O.data)){const F=Zi(w,o,l,v,u,M);if(F!==Cl)return F}C=o[w+8],-1!==C&&_s(u,o[1].data[w+8]===M)&&da(m,w,o)?(v=O,w=Rn(C),o=gs(C,o)):w=-1}}}return pr(o,l,u,h)}const Cl={};function pe(){return new Fe(Dn(),Ie())}function Zi(s,o,l,u,h,m){const v=o[1],w=v.data[s+8],O=Gn(w,v,l,null==u?Is(w)&&dt:u!=v&&0!=(3&w.type),h&yt.Host&&m===w);return null!==O?Yr(o,v,O,w):Cl}function Gn(s,o,l,u,h){const m=s.providerIndexes,v=o.data,w=1048575&m,C=s.directiveStart,O=m>>20,$=h?w+O:s.directiveEnd;for(let Q=u?w:w+O;Q<$;Q++){const _e=v[Q];if(Q<C&&l===_e||Q>=C&&_e.type===l)return Q}if(h){const Q=v[C];if(Q&&Ai(Q)&&Q.type===l)return C}return null}function Yr(s,o,l,u){let h=s[l];const m=o.data;if(function(s){return s instanceof vl}(h)){const v=h;v.resolving&&function(s,o){throw new je("200",`Circular dependency in DI detected for ${s}`)}(le(m[l]));const w=dn(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?ci(v.injectImpl):null;yc(s,u,yt.Default);try{h=s[l]=v.factory(void 0,m,s,u),o.firstCreatePass&&l>=u.directiveStart&&function(s,o,l){const{ngOnChanges:u,ngOnInit:h,ngDoCheck:m}=o.type.prototype;if(u){const v=_o(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,v)}h&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,h),m&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,m),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,m))}(l,m[l],o)}finally{null!==C&&ci(C),dn(w),v.resolving=!1,eh()}}return h}function da(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function _s(s,o){return!(s&yt.Self||s&yt.Host&&o)}class Fe{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,u){return gr(this._tNode,this._lView,o,u,l)}}function ha(s){return Vt(()=>{const o=s.prototype.constructor,l=o[mt]||wt(o),u=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==u;){const m=h[mt]||wt(h);if(m&&m!==l)return m;h=Object.getPrototypeOf(h)}return m=>new m})}function wt(s){return Be(s)?()=>{const o=wt(X(s));return o&&o()}:hs(s)}function eo(s){return function(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const u=l.length;let h=0;for(;h<u;){const m=l[h];if(ps(m))break;if(0===m)h+=2;else if("number"==typeof m)for(h++;h<u&&"string"==typeof l[h];)h++;else{if(m===o)return l[h+1];h+=2}}}return null}(Dn(),s)}const Mi="__parameters__";function Wi(s,o,l){return Vt(()=>{const u=function(s){return function(...l){if(s){const u=s(...l);for(const h in u)this[h]=u[h]}}}(o);function h(...m){if(this instanceof h)return u.apply(this,m),this;const v=new h(...m);return w.annotation=v,w;function w(C,M,O){const F=C.hasOwnProperty(Mi)?C[Mi]:Object.defineProperty(C,Mi,{value:[]})[Mi];for(;F.length<=O;)F.push(null);return(F[O]=F[O]||[]).push(v),C}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class cn{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=gn({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Jn=new cn("AnalyzeForEntryComponents");function Qr(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let u=s[l];Array.isArray(u)?(o===s&&(o=s.slice(0,l)),Qr(u,o)):o!==s&&o.push(u)}return o}function Ki(s,o){s.forEach(l=>Array.isArray(l)?Ki(l,o):o(l))}function Dl(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function Mo(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function pa(s,o){const l=[];for(let u=0;u<s;u++)l.push(o);return l}function mr(s,o,l){let u=Tl(s,o);return u>=0?s[1|u]=l:(u=~u,function(s,o,l,u){let h=s.length;if(h==o)s.push(l,u);else if(1===h)s.push(u,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=l,s[o+1]=u}}(s,u,o,l)),u}function ma(s,o){const l=Tl(s,o);if(l>=0)return s[1|l]}function Tl(s,o){return function(s,o,l){let u=0,h=s.length>>l;for(;h!==u;){const m=u+(h-u>>1),v=s[m<<l];if(o===v)return m<<l;v>o?h=m:u=m+1}return~(h<<l)}(s,o,1)}const zn={},io="__NG_DI_FLAG__",so="ngTempTokenPath",Kf=/\n/gm,D="__source",T=me({provide:String,useValue:me});let R;function V(s){const o=R;return R=s,o}function Y(s,o=yt.Default){if(void 0===R)throw new Error("inject() must be called from an injection context");return null===R?pt(s,void 0,o):R.get(s,o&yt.Optional?null:void 0,o)}function ie(s,o=yt.Default){return(zt||Y)(X(s),o)}const et=ie;function Je(s){const o=[];for(let l=0;l<s.length;l++){const u=X(s[l]);if(Array.isArray(u)){if(0===u.length)throw new Error("Arguments array must have arguments.");let h,m=yt.Default;for(let v=0;v<u.length;v++){const w=u[v],C=sn(w);"number"==typeof C?-1===C?h=w.token:m|=C:h=w}o.push(ie(h,m))}else o.push(ie(u))}return o}function Lt(s,o){return s[io]=o,s.prototype[io]=o,s}function sn(s){return s[io]}const Bn=Lt(Wi("Inject",s=>({token:s})),-1),Jr=Lt(Wi("Optional"),8),ki=Lt(Wi("SkipSelf"),4);class Kg{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Oi(s){return s instanceof Kg?s.changingThisBreaksApplicationSecurity:s}const sp=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,kc=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var jn=(()=>((jn=jn||{})[jn.NONE=0]="NONE",jn[jn.HTML=1]="HTML",jn[jn.STYLE=2]="STYLE",jn[jn.SCRIPT=3]="SCRIPT",jn[jn.URL=4]="URL",jn[jn.RESOURCE_URL=5]="RESOURCE_URL",jn))();function wh(s){const o=function(){const s=Ie();return s&&s[12]}();return o?o.sanitize(jn.URL,s)||"":function(s,o){const l=function(s){return s instanceof Kg&&s.getTypeName()||null}(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}(s,"URL")?Oi(s):function(s){return(s=String(s)).match(sp)||s.match(kc)?s:"unsafe:"+s}(K(s))}const kl="__ngContext__";function An(s,o){s[kl]=o}function Ch(s){const o=function(s){return s[kl]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function mp(s){return s.ngOriginalError}function Sh(s,...o){s.error(...o)}class Fo{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o),u=(s=o)&&s.ngErrorLogger||Sh;var s;u(this._console,"ERROR",o),l&&u(this._console,"ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&mp(o);for(;l&&mp(l);)l=mp(l);return l||null}}const bp=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(St))();function Ri(s){return s instanceof Function?s():s}var bs=(()=>((bs=bs||{})[bs.Important=1]="Important",bs[bs.DashCase=2]="DashCase",bs))();function Yu(s,o){return undefined(s,o)}function Sa(s){const o=s[3];return ds(o)?o[3]:o}function Ll(s){return Vl(s[13])}function Qu(s){return Vl(s[4])}function Vl(s){for(;null!==s&&!ds(s);)s=s[4];return s}function Lo(s,o,l,u,h){if(null!=u){let m,v=!1;ds(u)?m=u:us(u)&&(v=!0,u=u[0]);const w=qn(u);0===s&&null!==l?null==h?Xu(o,l,w):ei(o,l,w,h||null,!0):1===s&&null!==l?ei(o,l,w,h||null,!0):2===s?function(s,o,l){const u=ed(s,o);u&&function(s,o,l,u){ln(s)?s.removeChild(o,l,u):o.removeChild(l)}(s,u,o,l)}(o,w,v):3===s&&o.destroyNode(w),null!=m&&function(s,o,l,u,h){const m=l[7];m!==qn(l)&&Lo(o,s,u,m,h);for(let w=10;w<l.length;w++){const C=l[w];lt(C[1],C,s,o,u,m)}}(o,s,m,l,h)}}function Nc(s,o,l){return ln(s)?s.createElement(o,l):null===l?s.createElement(o):s.createElementNS(l,o)}function j(s,o){const l=s[9],u=l.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,Ks(h,-1)),l.splice(u,1)}function ee(s,o){if(s.length<=10)return;const l=10+o,u=s[l];if(u){const h=u[17];null!==h&&h!==s&&j(h,u),o>0&&(s[l-1][4]=u[4]);const m=Mo(s,10+o);!function(s,o){lt(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(u[1],u);const v=m[19];null!==v&&v.detachView(m[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function xe(s,o){if(!(256&o[2])){const l=o[11];ln(l)&&l.destroyNode&&lt(s,o,l,3,null,null),function(s){let o=s[13];if(!o)return Re(s[1],s);for(;o;){let l=null;if(us(o))l=o[13];else{const u=o[10];u&&(l=u)}if(!l){for(;o&&!o[4]&&o!==s;)us(o)&&Re(o[1],o),o=o[3];null===o&&(o=s),us(o)&&Re(o[1],o),l=o&&o[4]}o=l}}(o)}}function Re(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let u=0;u<l.length;u+=2){const h=o[l[u]];if(!(h instanceof vl)){const m=l[u+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const w=h[m[v]],C=m[v+1];try{C.call(w)}finally{}}else try{m.call(h)}finally{}}}}(s,o),function(s,o){const l=s.cleanup,u=o[7];let h=-1;if(null!==l)for(let m=0;m<l.length-1;m+=2)if("string"==typeof l[m]){const v=l[m+1],w="function"==typeof v?v(o):qn(o[v]),C=u[h=l[m+2]],M=l[m+3];"boolean"==typeof M?w.removeEventListener(l[m],C,M):M>=0?u[h=M]():u[h=-M].unsubscribe(),m+=2}else{const v=u[h=l[m+1]];l[m].call(v)}if(null!==u){for(let m=h+1;m<u.length;m++)u[m]();o[7]=null}}(s,o),1===o[1].type&&ln(o[11])&&o[11].destroy();const l=o[17];if(null!==l&&ds(o[3])){l!==o[3]&&j(l,o);const u=o[19];null!==u&&u.detachView(s)}}}function Ht(s,o,l){return function(s,o,l){let u=o;for(;null!==u&&40&u.type;)u=(o=u).parent;if(null===u)return l[0];if(2&u.flags){const h=s.data[u.directiveStart].encapsulation;if(h===Qe.None||h===Qe.Emulated)return null}return $n(u,l)}(s,o.parent,l)}function ei(s,o,l,u,h){ln(s)?s.insertBefore(o,l,u,h):o.insertBefore(l,u,h)}function Xu(s,o,l){ln(s)?s.appendChild(o,l):o.appendChild(l)}function Nh(s,o,l,u,h){null!==u?ei(s,o,l,u,h):Xu(s,o,l)}function ed(s,o){return ln(s)?s.parentNode(o):o.parentNode}function Ep(s,o,l){return lr(s,o,l)}let lr=function(s,o,l){return 40&s.type?$n(s,l):null};function Aa(s,o,l,u){const h=Ht(s,u,o),m=o[11],w=Ep(u.parent||o[6],u,o);if(null!=h)if(Array.isArray(l))for(let C=0;C<l.length;C++)Nh(m,h,l[C],w,!1);else Nh(m,h,l,w,!1)}function Lh(s,o){if(null!==o){const l=o.type;if(3&l)return $n(o,s);if(4&l)return cr(-1,s[o.index]);if(8&l){const u=o.child;if(null!==u)return Lh(s,u);{const h=s[o.index];return ds(h)?cr(-1,h):qn(h)}}if(32&l)return Yu(o,s)()||qn(s[o.index]);{const u=Ve(s,o);return null!==u?Array.isArray(u)?u[0]:Lh(Sa(s[16]),u):Lh(s,o.next)}}return null}function Ve(s,o){return null!==o?s[16][6].projection[o.projection]:null}function cr(s,o){const l=10+s+1;if(l<o.length){const u=o[l],h=u[1].firstChild;if(null!==h)return Lh(u,h)}return o[7]}function Cp(s,o,l,u,h,m,v){for(;null!=l;){const w=u[l.index],C=l.type;if(v&&0===o&&(w&&An(qn(w),u),l.flags|=4),64!=(64&l.flags))if(8&C)Cp(s,o,l.child,u,h,m,!1),Lo(o,s,h,w,m);else if(32&C){const M=Yu(l,u);let O;for(;O=M();)Lo(o,s,h,O,m);Lo(o,s,h,w,m)}else 16&C?L0(s,o,u,l,h,m):Lo(o,s,h,w,m);l=v?l.projectionNext:l.next}}function lt(s,o,l,u,h,m){Cp(l,u,s.firstChild,o,h,m,!1)}function L0(s,o,l,u,h,m){const v=l[16],C=v[6].projection[u.projection];if(Array.isArray(C))for(let M=0;M<C.length;M++)Lo(o,s,h,C[M],m);else Cp(s,o,C,v[3],h,m,!0)}function Pe(s,o,l){ln(s)?s.setAttribute(o,"style",l):o.style.cssText=l}function Sr(s,o,l){ln(s)?""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l):o.className=l}function by(s,o,l){let u=s.length;for(;;){const h=s.indexOf(o,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const m=o.length;if(h+m===u||s.charCodeAt(h+m)<=32)return h}l=h+1}}const V0="ng-template";function eT(s,o,l){let u=0;for(;u<s.length;){let h=s[u++];if(l&&"class"===h){if(h=s[u],-1!==by(h.toLowerCase(),o,0))return!0}else if(1===h){for(;u<s.length&&"string"==typeof(h=s[u++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function U0(s){return 4===s.type&&s.value!==V0}function tT(s,o,l){return o===(4!==s.type||l?s.value:V0)}function B0(s,o,l){let u=4;const h=s.attrs||[],m=function(s){for(let o=0;o<s.length;o++)if(ps(s[o]))return o;return s.length}(h);let v=!1;for(let w=0;w<o.length;w++){const C=o[w];if("number"!=typeof C){if(!v)if(4&u){if(u=2|1&u,""!==C&&!tT(s,C,l)||""===C&&1===o.length){if(Bo(u))return!1;v=!0}}else{const M=8&u?C:o[++w];if(8&u&&null!==s.attrs){if(!eT(s.attrs,M,l)){if(Bo(u))return!1;v=!0}continue}const F=CM(8&u?"class":C,h,U0(s),l);if(-1===F){if(Bo(u))return!1;v=!0;continue}if(""!==M){let $;$=F>m?"":h[F+1].toLowerCase();const Q=8&u?$:null;if(Q&&-1!==by(Q,M,0)||2&u&&M!==$){if(Bo(u))return!1;v=!0}}}}else{if(!v&&!Bo(u)&&!Bo(C))return!1;if(v&&Bo(C))continue;v=!1,u=C|1&u}}return Bo(u)||v}function Bo(s){return 0==(1&s)}function CM(s,o,l,u){if(null===o)return-1;let h=0;if(u||!l){let m=!1;for(;h<o.length;){const v=o[h];if(v===s)return h;if(3===v||6===v)m=!0;else{if(1===v||2===v){let w=o[++h];for(;"string"==typeof w;)w=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=m?1:2}return-1}return function(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const u=s[l];if("number"==typeof u)return-1;if(u===o)return l;l++}return-1}(o,s)}function ws(s,o,l=!1){for(let u=0;u<o.length;u++)if(B0(s,o[u],l))return!0;return!1}function Uh(s,o){e:for(let l=0;l<o.length;l++){const u=o[l];if(s.length===u.length){for(let h=0;h<s.length;h++)if(s[h]!==u[h])continue e;return!0}}return!1}function wy(s,o){return s?":not("+o.trim()+")":o}function ti(s){let o=s[0],l=1,u=2,h="",m=!1;for(;l<s.length;){let v=s[l];if("string"==typeof v)if(2&u){const w=s[++l];h+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&u?h+="."+v:4&u&&(h+=" "+v);else""!==h&&!Bo(v)&&(o+=wy(m,h),h=""),u=v,m=m||!Bo(u);l++}return""!==h&&(o+=wy(m,h)),o}const It={};function Ey(s){Bh(Bt(),Ie(),_n()+s,cl())}function Bh(s,o,l,u){if(!u)if(3==(3&o[2])){const m=s.preOrderCheckHooks;null!==m&&bc(o,m,l)}else{const m=s.preOrderHooks;null!==m&&yl(o,m,0,l)}Qs(l)}function um(s,o){return s<<17|o<<2}function Mn(s){return s>>17&32767}function yr(s){return 2|s}function Ul(s){return(131068&s)>>2}function Ma(s,o){return-131069&s|o<<2}function Lc(s){return 1|s}function Ry(s,o){const l=s.contentQueries;if(null!==l)for(let u=0;u<l.length;u+=2){const h=l[u],m=l[u+1];if(-1!==m){const v=s.data[m];aa(h),v.contentQueries(2,o[m],m)}}}function qh(s,o,l,u,h,m,v,w,C,M){const O=o.blueprint.slice();return O[0]=h,O[2]=140|u,sl(O),O[3]=O[15]=s,O[8]=l,O[10]=v||s&&s[10],O[11]=w||s&&s[11],O[12]=C||s&&s[12]||null,O[9]=M||s&&s[9]||null,O[6]=m,O[16]=2==o.type?s[16]:O,O}function jo(s,o,l,u,h){let m=s.data[o];if(null===m)m=function(s,o,l,u,h){const m=ll(),v=gc(),C=s.data[o]=function(s,o,l,u,h,m){return{type:l,index:u,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,l,o,u,h);return null===s.firstChild&&(s.firstChild=C),null!==m&&(v?null==m.child&&null!==C.parent&&(m.child=C):null===m.next&&(m.next=C)),C}(s,o,l,u,h),rt.lFrame.inI18n&&(m.flags|=64);else if(64&m.type){m.type=l,m.value=u,m.attrs=h;const v=function(){const s=rt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return Tr(m,!0),m}function ql(s,o,l,u){if(0===l)return-1;const h=o.length;for(let m=0;m<l;m++)o.push(u),s.blueprint.push(u),s.data.push(null);return h}function id(s,o,l){vc(o);try{const u=s.viewQuery;null!==u&&Gy(1,u,l);const h=s.template;null!==h&&sd(s,o,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Ry(s,o),s.staticViewQueries&&Gy(2,s.viewQuery,l);const m=s.components;null!==m&&function(s,o){for(let l=0;l<o.length;l++)ew(s,o[l])}(o,m)}catch(u){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),u}finally{o[2]&=-5,_l()}}function jc(s,o,l,u){const h=o[2];if(256==(256&h))return;vc(o);const m=cl();try{sl(o),function(s){rt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&sd(s,o,l,2,u);const v=3==(3&h);if(!m)if(v){const M=s.preOrderCheckHooks;null!==M&&bc(o,M,null)}else{const M=s.preOrderHooks;null!==M&&yl(o,M,0,null),nh(o,0)}if(function(s){for(let o=Ll(s);null!==o;o=Qu(o)){if(!o[2])continue;const l=o[9];for(let u=0;u<l.length;u++){const h=l[u],m=h[3];0==(1024&h[2])&&Ks(m,1),h[2]|=1024}}}(o),function(s){for(let o=Ll(s);null!==o;o=Qu(o))for(let l=10;l<o.length;l++){const u=o[l],h=u[1];il(u)&&jc(h,u,h.template,u[8])}}(o),null!==s.contentQueries&&Ry(s,o),!m)if(v){const M=s.contentCheckHooks;null!==M&&bc(o,M)}else{const M=s.contentHooks;null!==M&&yl(o,M,1),nh(o,1)}!function(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let u=0;u<l.length;u++){const h=l[u];if(h<0)Qs(~h);else{const m=h,v=l[++u],w=l[++u];fl(v,m),w(2,o[m])}}}finally{Qs(-1)}}(s,o);const w=s.components;null!==w&&function(s,o){for(let l=0;l<o.length;l++)Jt(s,o[l])}(o,w);const C=s.viewQuery;if(null!==C&&Gy(2,C,u),!m)if(v){const M=s.viewCheckHooks;null!==M&&bc(o,M)}else{const M=s.viewHooks;null!==M&&yl(o,M,2),nh(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),m||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Ks(o[3],-1))}finally{_l()}}function Py(s,o,l,u){const h=o[10],m=!cl(),v=As(o);try{m&&!v&&h.begin&&h.begin(),v&&id(s,o,u),jc(s,o,l,u)}finally{m&&!v&&h.end&&h.end()}}function sd(s,o,l,u,h){const m=_n(),v=2&u;try{Qs(-1),v&&o.length>20&&Bh(s,o,20,cl()),l(u,h)}finally{Qs(m)}}function Os(s,o,l){if(or(o)){const h=o.directiveEnd;for(let m=o.directiveStart;m<h;m++){const v=s.data[m];v.contentQueries&&v.contentQueries(1,l[m],m)}}}function ym(s,o,l){!fc()||(function(s,o,l,u){const h=l.directiveStart,m=l.directiveEnd;s.firstCreatePass||Pn(l,o),An(u,o);const v=l.initialInputs;for(let w=h;w<m;w++){const C=s.data[w],M=Ai(C);M&&Mp(o,l,C);const O=Yr(o,s,w,l);An(O,o),null!==v&&J0(0,w-h,O,C,0,v),M&&(rn(l.index,o)[8]=O)}}(s,o,l,$n(l,o)),128==(128&l.flags)&&function(s,o,l){const u=l.directiveStart,h=l.directiveEnd,v=l.index,w=rt.lFrame.currentDirectiveIndex;try{Qs(v);for(let C=u;C<h;C++){const M=s.data[C],O=o[C];pl(C),(null!==M.hostBindings||0!==M.hostVars||null!==M.hostAttrs)&&Ap(M,O)}}finally{Qs(-1),pl(w)}}(s,o,l))}function od(s,o,l=$n){const u=o.localNames;if(null!==u){let h=o.index+1;for(let m=0;m<u.length;m+=2){const v=u[m+1],w=-1===v?l(o,s):s[v];s[h++]=w}}}function Ny(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Gh(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Gh(s,o,l,u,h,m,v,w,C,M){const O=20+u,F=O+h,$=function(s,o){const l=[];for(let u=0;u<o;u++)l.push(u<s?null:It);return l}(O,F),Q="function"==typeof M?M():M;return $[1]={type:s,blueprint:$,template:l,queries:null,viewQuery:w,declTNode:o,data:$.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:Q,incompleteFirstPass:!1}}function Vy(s,o,l,u){const h=yn(o);null===l?h.push(u):(h.push(l),s.firstCreatePass&&tw(s).push(u,h.length-1))}function Ip(s,o,l){for(let u in s)if(s.hasOwnProperty(u)){const h=s[u];(l=null===l?{}:l).hasOwnProperty(u)?l[u].push(o,h):l[u]=[o,h]}return l}function Cs(s,o,l,u,h,m,v,w){const C=$n(o,l);let O,M=o.inputs;!w&&null!=M&&(O=M[u])?(Yh(s,l,O,u,h),Is(o)&&function(s,o){const l=rn(o,s);16&l[2]||(l[2]|=64)}(l,o.index)):3&o.type&&(u=function(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(u),h=null!=v?v(h,o.value||"",u):h,ln(m)?m.setProperty(C,u,h):Ft(u)||(C.setProperty?C.setProperty(u,h):C[u]=h))}function vm(s,o,l,u){let h=!1;if(fc()){const m=function(s,o,l){const u=s.directiveRegistry;let h=null;if(u)for(let m=0;m<u.length;m++){const v=u[m];ws(l,v.selectors,!1)&&(h||(h=[]),gi(Pn(l,o),s,v.type),Ai(v)?(Q0(s,l),h.unshift(v)):h.push(v))}return h}(s,o,l),v=null===u?null:{"":-1};if(null!==m){h=!0,jy(l,s.data.length,m.length);for(let O=0;O<m.length;O++){const F=m[O];F.providersResolver&&F.providersResolver(F)}let w=!1,C=!1,M=ql(s,o,m.length,null);for(let O=0;O<m.length;O++){const F=m[O];l.mergedAttrs=bn(l.mergedAttrs,F.hostAttrs),Hy(s,l,o,M,F),pT(M,F,v),null!==F.contentQueries&&(l.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(l.flags|=128);const $=F.type.prototype;!w&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),w=!0),!C&&($.ngOnChanges||$.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),C=!0),M++}!function(s,o){const u=o.directiveEnd,h=s.data,m=o.attrs,v=[];let w=null,C=null;for(let M=o.directiveStart;M<u;M++){const O=h[M],F=O.inputs,$=null===m||U0(o)?null:X0(F,m);v.push($),w=Ip(F,M,w),C=Ip(O.outputs,M,C)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=w,o.outputs=C}(s,l)}v&&function(s,o,l){if(o){const u=s.localNames=[];for(let h=0;h<o.length;h+=2){const m=l[o[h+1]];if(null==m)throw new je("301",`Export of name '${o[h+1]}' not found!`);u.push(o[h],m)}}}(l,u,v)}return l.mergedAttrs=bn(l.mergedAttrs,l.attrs),h}function Wh(s,o,l,u,h,m){const v=m.hostBindings;if(v){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const C=~o.index;(function(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(w)!=C&&w.push(C),w.push(u,h,v)}}function Ap(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Q0(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function pT(s,o,l){if(l){if(o.exportAs)for(let u=0;u<o.exportAs.length;u++)l[o.exportAs[u]]=s;Ai(o)&&(l[""]=s)}}function jy(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function Hy(s,o,l,u,h){s.data[u]=h;const m=h.factory||(h.factory=hs(h.type)),v=new vl(m,Ai(h),null);s.blueprint[u]=v,l[u]=v,Wh(s,o,0,u,ql(s,l,h.hostVars,It),h)}function Mp(s,o,l){const u=$n(o,s),h=Ny(l),m=s[10],v=ld(s,qh(s,h,null,l.onPush?64:16,u,o,m,m.createRenderer(u,l),null,null));s[o.index]=v}function bi(s,o,l,u,h,m){const v=$n(s,o);!function(s,o,l,u,h,m,v){if(null==m)ln(s)?s.removeAttribute(o,h,l):o.removeAttribute(h);else{const w=null==v?K(m):v(m,u||"",h);ln(s)?s.setAttribute(o,h,w,l):l?o.setAttributeNS(l,h,w):o.setAttribute(h,w)}}(o[11],v,m,s.value,l,u,h)}function J0(s,o,l,u,h,m){const v=m[o];if(null!==v){const w=u.setInput;for(let C=0;C<v.length;){const M=v[C++],O=v[C++],F=v[C++];null!==w?u.setInput(l,F,M,O):l[O]=F}}}function X0(s,o){let l=null,u=0;for(;u<o.length;){const h=o[u];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===l&&(l=[]),l.push(h,s[h],o[u+1])),u+=2}else u+=2;else u+=4}return l}function Cm(s,o,l,u){return new Array(s,!0,!1,o,null,0,u,l,null,null)}function Jt(s,o){const l=rn(o,s);if(il(l)){const u=l[1];80&l[2]?jc(u,l,u.template,l[8]):l[5]>0&&Dm(l)}}function Dm(s){for(let u=Ll(s);null!==u;u=Qu(u))for(let h=10;h<u.length;h++){const m=u[h];if(1024&m[2]){const v=m[1];jc(v,m,v.template,m[8])}else m[5]>0&&Dm(m)}const l=s[1].components;if(null!==l)for(let u=0;u<l.length;u++){const h=rn(l[u],s);il(h)&&h[5]>0&&Dm(h)}}function ew(s,o){const l=rn(o,s),u=l[1];(function(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(u,l),id(u,l,l[8])}function ld(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function qr(s){for(;s;){s[2]|=64;const o=Sa(s);if(Vf(s)&&!o)return s;s=o}return null}function qy(s,o,l){const u=o[10];u.begin&&u.begin();try{jc(s,o,s.template,l)}catch(h){throw Kh(o,h),h}finally{u.end&&u.end()}}function Rs(s){!function(s){for(let o=0;o<s.components.length;o++){const l=s.components[o],u=Ch(l),h=u[1];Py(h,u,h.template,l)}}(s[8])}function Gy(s,o,l){aa(0),o(s,l)}const yT=(()=>Promise.resolve(null))();function yn(s){return s[7]||(s[7]=[])}function tw(s){return s.cleanup||(s.cleanup=[])}function xp(s,o,l){return(null===s||Ai(s))&&(l=function(s){for(;Array.isArray(s);){if("object"==typeof s[1])return s;s=s[0]}return null}(l[o.index])),l[11]}function Kh(s,o){const l=s[9],u=l?l.get(Fo,null):null;u&&u.handleError(o)}function Yh(s,o,l,u,h){for(let m=0;m<l.length;){const v=l[m++],w=l[m++],C=o[v],M=s.data[v];null!==M.setInput?M.setInput(C,h,u,w):C[w]=h}}function lo(s,o,l){const u=$i(o,s);!function(s,o,l){ln(s)?s.setValue(o,l):o.textContent=l}(s[11],u,l)}function kp(s,o,l){let u=l?s.styles:null,h=l?s.classes:null,m=0;if(null!==o)for(let v=0;v<o.length;v++){const w=o[v];"number"==typeof w?m=w:1==m?h=ue(h,w):2==m&&(u=ue(u,w+": "+o[++v]+";"))}l?s.styles=u:s.stylesWithoutHost=u,l?s.classes=h:s.classesWithoutHost=h}const Im=new cn("INJECTOR",-1);class zy{get(o,l=zn){if(l===zn){const u=new Error(`NullInjectorError: No provider for ${oe(o)}!`);throw u.name="NullInjectorError",u}return l}}const Zy=new cn("Set Injector scope."),Op={},vT={};let cd;function Wy(){return void 0===cd&&(cd=new zy),cd}function iw(s,o=null,l=null,u){const h=$r(s,o,l,u);return h._resolveInjectorDefTypes(),h}function $r(s,o=null,l=null,u){return new Ky(s,l,o||Wy(),u)}class Ky{constructor(o,l,u,h=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];l&&Ki(l,w=>this.processProvider(w,o,l)),Ki([o],w=>this.processInjectorType(w,[],m)),this.records.set(Im,ud(void 0,this));const v=this.records.get(Zy);this.scope=null!=v?v.value:null,this.source=h||("object"==typeof o?null:oe(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,l=zn,u=yt.Default){this.assertNotDestroyed();const h=V(this),m=ci(void 0);try{if(!(u&yt.SkipSelf)){let w=this.records.get(o);if(void 0===w){const C=("function"==typeof(s=o)||"object"==typeof s&&s instanceof cn)&&Li(o);w=C&&this.injectableDefInScope(C)?ud(Sm(o),Op):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(u&yt.Self?Wy():this.parent).get(o,l=u&yt.Optional&&l===zn?null:l)}catch(v){if("NullInjectorError"===v.name){if((v[so]=v[so]||[]).unshift(oe(o)),h)throw v;return function(s,o,l,u){const h=s[so];throw o[D]&&h.unshift(o[D]),s.message=function(s,o,l,u=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=oe(o);if(Array.isArray(o))h=o.map(oe).join(" -> ");else if("object"==typeof o){let m=[];for(let v in o)if(o.hasOwnProperty(v)){let w=o[v];m.push(v+":"+("string"==typeof w?JSON.stringify(w):oe(w)))}h=`{${m.join(", ")}}`}return`${l}${u?"("+u+")":""}[${h}]: ${s.replace(Kf,"\n  ")}`}("\n"+s.message,h,l,u),s.ngTokenPath=h,s[so]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{ci(m),V(h)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((u,h)=>o.push(oe(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(o,l,u){if(!(o=X(o)))return!1;let h=Vi(o);const m=null==h&&o.ngModule||void 0,v=void 0===m?o:m,w=-1!==u.indexOf(v);if(void 0!==m&&(h=Vi(m)),null==h)return!1;if(null!=h.imports&&!w){let O;u.push(v);try{Ki(h.imports,F=>{this.processInjectorType(F,l,u)&&(void 0===O&&(O=[]),O.push(F))})}finally{}if(void 0!==O)for(let F=0;F<O.length;F++){const{ngModule:$,providers:Q}=O[F];Ki(Q,_e=>this.processProvider(_e,$,Q||U))}}this.injectorDefTypes.add(v);const C=hs(v)||(()=>new v);this.records.set(v,ud(C,Op));const M=h.providers;if(null!=M&&!w){const O=o;Ki(M,F=>this.processProvider(F,O,M))}return void 0!==m&&void 0!==o.providers}processProvider(o,l,u){let h=dd(o=X(o))?o:X(o&&o.provide);const m=(s=o,Qh(s)?ud(void 0,s.useValue):ud(Am(s),Op));var s;if(dd(o)||!0!==o.multi)this.records.get(h);else{let v=this.records.get(h);v||(v=ud(void 0,Op,!0),v.factory=()=>Je(v.multi),this.records.set(h,v)),h=o,v.multi.push(o)}this.records.set(h,m)}hydrate(o,l){return l.value===Op&&(l.value=vT,l.value=l.factory()),"object"==typeof l.value&&l.value&&null!==(s=l.value)&&"object"==typeof s&&"function"==typeof s.ngOnDestroy&&this.onDestroy.add(l.value),l.value;var s}injectableDefInScope(o){if(!o.providedIn)return!1;const l=X(o.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function Sm(s){const o=Li(s),l=null!==o?o.factory:hs(s);if(null!==l)return l;if(s instanceof cn)throw new Error(`Token ${oe(s)} is missing a \u0275prov definition.`);if(s instanceof Function)return function(s){const o=s.length;if(o>0){const u=pa(o,"?");throw new Error(`Can't resolve all parameters for ${oe(s)}: (${u.join(", ")}).`)}const l=function(s){const o=s&&(s[ls]||s[hr]);if(o){const l=function(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Error("unreachable")}function Am(s,o,l){let u;if(dd(s)){const h=X(s);return hs(h)||Sm(h)}if(Qh(s))u=()=>X(s.useValue);else if(function(s){return!(!s||!s.useFactory)}(s))u=()=>s.useFactory(...Je(s.deps||[]));else if(function(s){return!(!s||!s.useExisting)}(s))u=()=>ie(X(s.useExisting));else{const h=X(s&&(s.useClass||s.provide));if(!function(s){return!!s.deps}(s))return hs(h)||Sm(h);u=()=>new h(...Je(s.deps))}return u}function ud(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function Qh(s){return null!==s&&"object"==typeof s&&T in s}function dd(s){return"function"==typeof s}let co=(()=>{class s{static create(l,u){var h;if(Array.isArray(l))return iw({name:""},u,l,"");{const m=null!=(h=l.name)?h:"";return iw({name:m},l.parent,l.providers,m)}}}return s.THROW_IF_NOT_FOUND=zn,s.NULL=new zy,s.\u0275prov=gn({token:s,providedIn:"any",factory:()=>ie(Im)}),s.__NG_ELEMENT_ID__=-1,s})();function Pa(s,o){Js(Ch(s)[1],Dn())}function es(s){let o=function(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const u=[s];for(;o;){let h;if(Ai(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Error("Directives cannot inherit Components");h=o.\u0275dir}if(h){if(l){u.push(h);const v=s;v.inputs=Ho(s.inputs),v.declaredInputs=Ho(s.declaredInputs),v.outputs=Ho(s.outputs);const w=h.hostBindings;w&&ST(s,w);const C=h.viewQuery,M=h.contentQueries;if(C&&Jh(s,C),M&&Xh(s,M),te(s.inputs,h.inputs),te(s.declaredInputs,h.declaredInputs),te(s.outputs,h.outputs),Ai(h)&&h.data.animation){const O=s.data;O.animation=(O.animation||[]).concat(h.data.animation)}}const m=h.features;if(m)for(let v=0;v<m.length;v++){const w=m[v];w&&w.ngInherit&&w(s),w===es&&(l=!1)}}o=Object.getPrototypeOf(o)}!function(s){let o=0,l=null;for(let u=s.length-1;u>=0;u--){const h=s[u];h.hostVars=o+=h.hostVars,h.hostAttrs=bn(h.hostAttrs,l=bn(l,h.hostAttrs))}}(u)}function Ho(s){return s===G?{}:s===U?[]:s}function Jh(s,o){const l=s.viewQuery;s.viewQuery=l?(u,h)=>{o(u,h),l(u,h)}:o}function Xh(s,o){const l=s.contentQueries;s.contentQueries=l?(u,h,m)=>{o(u,h,m),l(u,h,m)}:o}function ST(s,o){const l=s.hostBindings;s.hostBindings=l?(u,h)=>{o(u,h),l(u,h)}:o}let pd=null;function Pi(){if(!pd){const s=St.Symbol;if(s&&s.iterator)pd=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const u=o[l];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(pd=u)}}}return pd}function $l(s){return!!Gl(s)&&(Array.isArray(s)||!(s instanceof Map)&&Pi()in s)}function Gl(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function qo(s,o,l){return s[o]=l}function wi(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function xr(s,o,l,u){const h=wi(s,o,l);return wi(s,o+1,u)||h}function ef(s,o,l,u,h){const m=xr(s,o,l,u);return wi(s,o+2,h)||m}function Na(s,o,l,u){const h=Ie();return wi(h,Ys(),o)&&(Bt(),bi(Tn(),h,s,o,l,u)),Na}function Hc(s,o,l,u){return wi(s,Ys(),l)?o+K(l)+u:It}function ts(s,o,l,u,h,m,v,w){const C=Ie(),M=Bt(),O=s+20,F=M.firstCreatePass?function(s,o,l,u,h,m,v,w,C){const M=o.consts,O=jo(o,s,4,v||null,Kr(M,w));vm(o,l,O,Kr(M,C)),Js(o,O);const F=O.tViews=Gh(2,O,u,h,m,o.directiveRegistry,o.pipeRegistry,null,o.schemas,M);return null!==o.queries&&(o.queries.template(o,O),F.queries=o.queries.embeddedTView(O)),O}(O,M,C,o,l,u,h,m,v):M.data[O];Tr(F,!1);const $=C[11].createComment("");Aa(M,C,$,F),An($,C),ld(C,C[O]=Cm($,C,$,F)),wu(F)&&ym(M,C,F),null!=v&&od(C,F,w)}function Np(s){return Eo(rt.lFrame.contextLView,20+s)}function Hp(s,o=yt.Default){const l=Ie();return null===l?ie(s,o):gr(Dn(),l,X(s),o)}function uv(){throw new Error("invalid")}function dv(s,o,l){const u=Ie();return wi(u,Ys(),o)&&Cs(Bt(),Tn(),u,s,o,u[11],l,!1),dv}function Wc(s,o,l,u,h){const v=h?"class":"style";Yh(s,l,o.inputs[v],v,u)}function qp(s,o,l,u){const h=Ie(),m=Bt(),v=20+s,w=h[11],C=h[v]=Nc(w,o,rt.lFrame.currentNamespace),M=m.firstCreatePass?function(s,o,l,u,h,m,v){const w=o.consts,M=jo(o,s,2,h,Kr(w,m));return vm(o,l,M,Kr(w,v)),null!==M.attrs&&kp(M,M.attrs,!1),null!==M.mergedAttrs&&kp(M,M.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,M),M}(v,m,h,0,o,l,u):m.data[v];Tr(M,!0);const O=M.mergedAttrs;null!==O&&Pu(w,C,O);const F=M.classes;null!==F&&Sr(w,C,F);const $=M.styles;null!==$&&Pe(w,C,$),64!=(64&M.flags)&&Aa(m,h,C,M),0===rt.lFrame.elementDepthCount&&An(C,h),rt.lFrame.elementDepthCount++,wu(M)&&(ym(m,h,M),Os(m,M,h)),null!==u&&od(h,M)}function sf(){let s=Dn();gc()?Do():(s=s.parent,Tr(s,!1));const o=s;rt.lFrame.elementDepthCount--;const l=Bt();l.firstCreatePass&&(Js(l,s),or(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function(s){return 0!=(16&s.flags)}(o)&&Wc(l,o,Ie(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function(s){return 0!=(32&s.flags)}(o)&&Wc(l,o,Ie(),o.stylesWithoutHost,!1)}function hv(s,o,l,u){qp(s,o,l,u),sf()}function $p(s,o,l){const u=Ie(),h=Bt(),m=s+20,v=h.firstCreatePass?function(s,o,l,u,h){const m=o.consts,v=Kr(m,u),w=jo(o,s,8,"ng-container",v);return null!==v&&kp(w,v,!0),vm(o,l,w,Kr(m,h)),null!==o.queries&&o.queries.elementStart(o,w),w}(m,h,u,o,l):h.data[m];Tr(v,!0);const w=u[m]=u[11].createComment("");Aa(h,u,w,v),An(w,u),wu(v)&&(ym(h,u,v),Os(h,v,u)),null!=l&&od(u,v)}function fv(){let s=Dn();const o=Bt();gc()?Do():(s=s.parent,Tr(s,!1)),o.firstCreatePass&&(Js(o,s),or(s)&&o.queries.elementEnd(s))}function Mw(){return Ie()}function Gp(s){return!!s&&"function"==typeof s.then}function xw(s){return!!s&&"function"==typeof s.subscribe}const Vm=xw;function kr(s,o,l,u){const h=Ie(),m=Bt(),v=Dn();return kw(m,h,h[11],v,s,o,!!l,u),kr}function gv(s,o){const l=Dn(),u=Ie(),h=Bt();return kw(h,u,xp(oa(h.data),l,u),l,s,o,!1),gv}function kw(s,o,l,u,h,m,v,w){const C=wu(u),O=s.firstCreatePass&&tw(s),F=o[8],$=yn(o);let Q=!0;if(3&u.type||w){const qe=$n(u,o),it=w?w(qe):qe,Se=$.length,_t=w?qt=>w(qn(qt[u.index])):u.index;if(ln(l)){let qt=null;if(!w&&C&&(qt=function(s,o,l,u){const h=s.cleanup;if(null!=h)for(let m=0;m<h.length-1;m+=2){const v=h[m];if(v===l&&h[m+1]===u){const w=o[7],C=h[m+2];return w.length>C?w[C]:null}"string"==typeof v&&(m+=2)}return null}(s,o,h,u.index)),null!==qt)(qt.__ngLastListenerFn__||qt).__ngNextListenerFn__=m,qt.__ngLastListenerFn__=m,Q=!1;else{m=mv(u,o,F,m,!1);const Yt=l.listen(it,h,m);$.push(m,Yt),O&&O.push(h,_t,Se,Se+1)}}else m=mv(u,o,F,m,!0),it.addEventListener(h,m,v),$.push(m),O&&O.push(h,_t,Se,v)}else m=mv(u,o,F,m,!1);const _e=u.outputs;let Le;if(Q&&null!==_e&&(Le=_e[h])){const qe=Le.length;if(qe)for(let it=0;it<qe;it+=2){const oi=o[Le[it]][Le[it+1]].subscribe(m),lu=$.length;$.push(m,oi),O&&O.push(h,u.index,lu,-(lu+1))}}}function Ow(s,o,l,u){try{return!1!==l(u)}catch(h){return Kh(s,h),!1}}function mv(s,o,l,u,h){return function m(v){if(v===Function)return u;const w=2&s.flags?rn(s.index,o):o;0==(32&o[2])&&qr(w);let C=Ow(o,0,u,v),M=m.__ngNextListenerFn__;for(;M;)C=Ow(o,0,M,v)&&C,M=M.__ngNextListenerFn__;return h&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function Rw(s=1){return function(s){return(rt.lFrame.contextLView=function(s,o){for(;s>0;)o=o[15],s--;return o}(s,rt.lFrame.contextLView))[8]}(s)}function _v(s,o){let l=null;const u=function(s){const o=s.attrs;if(null!=o){const l=o.indexOf(5);if(0==(1&l))return o[l+1]}return null}(s);for(let h=0;h<o.length;h++){const m=o[h];if("*"!==m){if(null===u?ws(s,m,!0):Uh(u,m))return h}else l=h}return l}function yv(s){const o=Ie()[16][6];if(!o.projection){const u=o.projection=pa(s?s.length:1,null),h=u.slice();let m=o.child;for(;null!==m;){const v=s?_v(m,s):0;null!==v&&(h[v]?h[v].projectionNext=m:u[v]=m,h[v]=m),m=m.next}}}function vv(s,o=0,l){const u=Ie(),h=Bt(),m=jo(h,20+s,16,null,l||null);null===m.projection&&(m.projection=o),Do(),64!=(64&m.flags)&&function(s,o,l){L0(o[11],0,o,l,Ht(s,l,o),Ep(l.parent||o[6],l,o))}(h,u,m)}function zp(s,o,l){return af(s,"",o,"",l),zp}function af(s,o,l,u,h){const m=Ie(),v=Hc(m,o,l,u);return v!==It&&Cs(Bt(),Tn(),m,s,v,m[11],h,!1),af}function Ev(s,o,l,u,h){const m=s[l+1],v=null===o;let w=u?Mn(m):Ul(m),C=!1;for(;0!==w&&(!1===C||v);){const O=s[w+1];Hm(s[w],o)&&(C=!0,s[w+1]=u?Lc(O):yr(O)),w=u?Mn(O):Ul(O)}C&&(s[l+1]=u?yr(m):Lc(m))}function Hm(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Tl(s,o)>=0}function Wp(s,o){return function(s,o,l,u){const h=Ie(),m=Bt(),v=fs(2);m.firstUpdatePass&&function(s,o,l,u){const h=s.data;if(null===h[l+1]){const m=h[_n()],v=function(s,o){return o>=s.expandoStartIndex}(s,l);(function(s,o){return 0!=(s.flags&(o?16:32))})(m,u)&&null===o&&!v&&(o=!1),o=function(s,o,l,u){const h=oa(s);let m=u?o.residualClasses:o.residualStyles;if(null===h)0===(u?o.classBindings:o.styleBindings)&&(l=wd(l=Yc(null,s,o,l,u),o.attrs,u),m=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==h)if(l=Yc(h,s,o,l,u),null===m){let C=function(s,o,l){const u=l?o.classBindings:o.styleBindings;if(0!==Ul(u))return s[Mn(u)]}(s,o,u);void 0!==C&&Array.isArray(C)&&(C=Yc(null,s,o,C[1],u),C=wd(C,o.attrs,u),function(s,o,l,u){s[Mn(l?o.classBindings:o.styleBindings)]=u}(s,o,u,C))}else m=function(s,o,l){let u;const h=o.directiveEnd;for(let m=1+o.directiveStylingLast;m<h;m++)u=wd(u,s[m].hostAttrs,l);return wd(u,o.attrs,l)}(s,o,u)}return void 0!==m&&(u?o.residualClasses=m:o.residualStyles=m),l}(h,m,o,u),function(s,o,l,u,h,m){let v=m?o.classBindings:o.styleBindings,w=Mn(v),C=Ul(v);s[u]=l;let O,M=!1;if(Array.isArray(l)){const F=l;O=F[1],(null===O||Tl(F,O)>0)&&(M=!0)}else O=l;if(h)if(0!==C){const $=Mn(s[w+1]);s[u+1]=um($,w),0!==$&&(s[$+1]=Ma(s[$+1],u)),s[w+1]=function(s,o){return 131071&s|o<<17}(s[w+1],u)}else s[u+1]=um(w,0),0!==w&&(s[w+1]=Ma(s[w+1],u)),w=u;else s[u+1]=um(C,0),0===w?w=u:s[C+1]=Ma(s[C+1],u),C=u;M&&(s[u+1]=yr(s[u+1])),Ev(s,O,u,!0),Ev(s,O,u,!1),function(s,o,l,u,h){const m=h?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof o&&Tl(m,o)>=0&&(l[u+1]=Lc(l[u+1]))}(o,O,s,u,m),v=um(w,C),m?o.classBindings=v:o.styleBindings=v}(h,m,o,l,v,u)}}(m,s,v,u),o!==It&&wi(h,v,o)&&function(s,o,l,u,h,m,v,w){if(!(3&o.type))return;const C=s.data,M=C[w+1];df(function(s){return 1==(1&s)}(M)?Gw(C,o,l,h,Ul(M),v):void 0)||(df(m)||function(s){return 2==(2&s)}(M)&&(m=Gw(C,null,l,h,w,v)),function(s,o,l,u,h){const m=ln(s);if(o)h?m?s.addClass(l,u):l.classList.add(u):m?s.removeClass(l,u):l.classList.remove(u);else{let v=-1===u.indexOf("-")?void 0:bs.DashCase;if(null==h)m?s.removeStyle(l,u,v):l.style.removeProperty(u);else{const w="string"==typeof h&&h.endsWith("!important");w&&(h=h.slice(0,-10),v|=bs.Important),m?s.setStyle(l,u,h,v):l.style.setProperty(u,h,w?"important":"")}}}(u,v,$i(_n(),l),h,m))}(m,m.data[_n()],h,h[11],s,h[v+1]=function(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=oe(Oi(s)))),s}(o,l),u,v)}(s,o,null,!0),Wp}function Yc(s,o,l,u,h){let m=null;const v=l.directiveEnd;let w=l.directiveStylingLast;for(-1===w?w=l.directiveStart:w++;w<v&&(m=o[w],u=wd(u,m.hostAttrs,h),m!==s);)w++;return null!==s&&(l.directiveStylingLast=w),u}function wd(s,o,l){const u=l?1:2;let h=-1;if(null!==o)for(let m=0;m<o.length;m++){const v=o[m];"number"==typeof v?h=v:h===u&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),mr(s,v,!!l||o[++m]))}return void 0===s?null:s}function Gw(s,o,l,u,h,m){const v=null===o;let w;for(;h>0;){const C=s[h],M=Array.isArray(C),O=M?C[1]:C,F=null===O;let $=l[h+1];$===It&&($=F?U:void 0);let Q=F?ma($,u):O===u?$:void 0;if(M&&!df(Q)&&(Q=ma(C,u)),df(Q)&&(w=Q,v))return w;const _e=s[h+1];h=v?Mn(_e):Ul(_e)}if(null!==o){let C=m?o.residualClasses:o.residualStyles;null!=C&&(w=ma(C,u))}return w}function df(s){return void 0!==s}function zw(s,o=""){const l=Ie(),u=Bt(),h=s+20,m=u.firstCreatePass?jo(u,h,1,o,null):u.data[h],v=l[h]=function(s,o){return ln(s)?s.createText(o):s.createTextNode(o)}(l[11],o);Aa(u,l,v,m),Tr(m,!1)}function Kp(s){return Km("",s,""),Kp}function Km(s,o,l){const u=Ie(),h=Hc(u,s,o,l);return h!==It&&lo(u,_n(),h),Km}function Yp(s,o,l,u,h){const m=Ie(),v=function(s,o,l,u,h,m){const w=xr(s,Gi(),l,h);return fs(2),w?o+K(l)+u+K(h)+m:It}(m,s,o,l,u,h);return v!==It&&lo(m,_n(),v),Yp}function Qp(s,o,l,u,h,m,v){const w=Ie(),C=function(s,o,l,u,h,m,v,w){const M=ef(s,Gi(),l,h,v);return fs(3),M?o+K(l)+u+K(h)+m+K(v)+w:It}(w,s,o,l,u,h,m,v);return C!==It&&lo(w,_n(),C),Qp}function Jp(s,o,l){const u=Ie();return wi(u,Ys(),o)&&Cs(Bt(),Tn(),u,s,o,u[11],l,!0),Jp}function Nv(s,o,l){const u=Ie();if(wi(u,Ys(),o)){const m=Bt(),v=Tn();Cs(m,v,u,s,o,xp(oa(m.data),v,u),l,!0)}return Nv}const Wl=void 0;var Fv=["en",[["a","p"],["AM","PM"],Wl],[["AM","PM"],Wl,Wl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Wl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Wl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Wl,"{1} 'at' {0}",Wl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(s){const l=Math.floor(Math.abs(s)),u=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===u?1:5}];let Td={};function Xp(s){const o=function(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=iE(o);if(l)return l;const u=o.split("-")[0];if(l=iE(u),l)return l;if("en"===u)return Fv;throw new Error(`Missing locale data for the locale "${s}".`)}function t_(s){return Xp(s)[Et.PluralCase]}function iE(s){return s in Td||(Td[s]=St.ng&&St.ng.common&&St.ng.common.locales&&St.ng.common.locales[s]),Td[s]}var Et=(()=>((Et=Et||{})[Et.LocaleId=0]="LocaleId",Et[Et.DayPeriodsFormat=1]="DayPeriodsFormat",Et[Et.DayPeriodsStandalone=2]="DayPeriodsStandalone",Et[Et.DaysFormat=3]="DaysFormat",Et[Et.DaysStandalone=4]="DaysStandalone",Et[Et.MonthsFormat=5]="MonthsFormat",Et[Et.MonthsStandalone=6]="MonthsStandalone",Et[Et.Eras=7]="Eras",Et[Et.FirstDayOfWeek=8]="FirstDayOfWeek",Et[Et.WeekendRange=9]="WeekendRange",Et[Et.DateFormat=10]="DateFormat",Et[Et.TimeFormat=11]="TimeFormat",Et[Et.DateTimeFormat=12]="DateTimeFormat",Et[Et.NumberSymbols=13]="NumberSymbols",Et[Et.NumberFormats=14]="NumberFormats",Et[Et.CurrencyCode=15]="CurrencyCode",Et[Et.CurrencySymbol=16]="CurrencySymbol",Et[Et.CurrencyName=17]="CurrencyName",Et[Et.Currencies=18]="Currencies",Et[Et.Directionality=19]="Directionality",Et[Et.PluralCase=20]="PluralCase",Et[Et.ExtraData=21]="ExtraData",Et))();const Kl="en-US";let r_=Kl;function xE(s,o,l,u,h){if(s=X(s),Array.isArray(s))for(let m=0;m<s.length;m++)xE(s[m],o,l,u,h);else{const m=Bt(),v=Ie();let w=dd(s)?s:X(s.provide),C=Am(s);const M=Dn(),O=1048575&M.providerIndexes,F=M.directiveStart,$=M.providerIndexes>>20;if(dd(s)||!s.multi){const Q=new vl(C,h,Hp),_e=u_(w,o,h?O:O+$,F);-1===_e?(gi(Pn(M,v),m,w),kE(m,s,o.length),o.push(w),M.directiveStart++,M.directiveEnd++,h&&(M.providerIndexes+=1048576),l.push(Q),v.push(Q)):(l[_e]=Q,v[_e]=Q)}else{const Q=u_(w,o,O+$,F),_e=u_(w,o,O,O+$),Le=Q>=0&&l[Q],qe=_e>=0&&l[_e];if(h&&!qe||!h&&!Le){gi(Pn(M,v),m,w);const it=function(s,o,l,u,h){const m=new vl(s,l,Hp);return m.multi=[],m.index=o,m.componentProviders=0,Or(m,h,u&&!l),m}(h?mI:gI,l.length,h,u,C);!h&&qe&&(l[_e].providerFactory=it),kE(m,s,o.length,0),o.push(w),M.directiveStart++,M.directiveEnd++,h&&(M.providerIndexes+=1048576),l.push(it),v.push(it)}else kE(m,s,Q>-1?Q:_e,Or(l[h?_e:Q],C,!h&&u));!h&&u&&qe&&l[_e].componentProviders++}}}function kE(s,o,l,u){const h=dd(o),m=function(s){return!!s.useClass}(o);if(h||m){const C=(m?X(o.useClass):o).prototype.ngOnDestroy;if(C){const M=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const O=M.indexOf(l);-1===O?M.push(l,[u,C]):M[O+1].push(u,C)}else M.push(l,C)}}}function Or(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function u_(s,o,l,u){for(let h=l;h<u;h++)if(o[h]===s)return h;return-1}function gI(s,o,l,u){return d_(this.multi,[])}function mI(s,o,l,u){const h=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=Yr(l,l[1],this.providerFactory.index,u);m=w.slice(0,v),d_(h,m);for(let C=v;C<w.length;C++)m.push(w[C])}else m=[],d_(h,m);return m}function d_(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function OE(s,o=[]){return l=>{l.providersResolver=(u,h)=>function(s,o,l){const u=Bt();if(u.firstCreatePass){const h=Ai(s);xE(l,u.data,u.blueprint,h,!0),xE(o,u.data,u.blueprint,h,!1)}}(u,h?h(s):s,o)}}class RE{}class NE{resolveComponentFactory(o){throw function(s){const o=Error(`No component factory found for ${oe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Fs=(()=>{class s{}return s.NULL=new NE,s})();function VM(){return ns(Dn(),Ie())}function ns(s,o){return new Wo($n(s,o))}let Wo=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=VM,s})();function h_(s){return s instanceof Wo?s.nativeElement:s}class FE{}let LE=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function(){const s=Ie(),l=rn(Dn().index,s);return function(s){return s[11]}(us(l)?l:s)}(),s})(),vI=(()=>{class s{}return s.\u0275prov=gn({token:s,providedIn:"root",factory:()=>null}),s})();class Jc{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const og=new Jc("13.0.3"),Md={};function ag(s,o,l,u,h=!1){for(;null!==l;){const m=o[l.index];if(null!==m&&u.push(qn(m)),ds(m))for(let w=10;w<m.length;w++){const C=m[w],M=C[1].firstChild;null!==M&&ag(C[1],C,M,u)}const v=l.type;if(8&v)ag(s,o,l.child,u);else if(32&v){const w=Yu(l,o);let C;for(;C=w();)u.push(C)}else if(16&v){const w=Ve(o,l);if(Array.isArray(w))u.push(...w);else{const C=Sa(o[16]);ag(C[1],C,w,u,!0)}}l=h?l.projectionNext:l.next}return u}class xd{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return ag(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ds(o)){const l=o[8],u=l?l.indexOf(this):-1;u>-1&&(ee(o,u),Mo(l,u))}this._attachedToViewContainer=!1}xe(this._lView[1],this._lView)}onDestroy(o){Vy(this._lView[1],this._lView,null,o)}markForCheck(){qr(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){qy(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(s,o,l){To(!0);try{qy(s,o,l)}finally{To(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var o;this._appRef=null,lt(this._lView[1],o=this._lView,o[11],2,null,null)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=o}}class bI extends xd{constructor(o){super(o),this._view=o}detectChanges(){Rs(this._view)}checkNoChanges(){!function(s){To(!0);try{Rs(s)}finally{To(!1)}}(this._view)}get context(){return null}}class UE extends Fs{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=mn(o);return new Yl(l,this.ngModule)}}function BE(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}const rb=new cn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>bp});class Yl extends RE{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=o.selectors.map(ti).join(","),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return BE(this.componentDef.inputs)}get outputs(){return BE(this.componentDef.outputs)}create(o,l,u,h){const m=(h=h||this.ngModule)?function(s,o){return{get:(l,u,h)=>{const m=s.get(l,Md,h);return m!==Md||u===Md?m:o.get(l,u,h)}}}(o,h.injector):o,v=m.get(FE,Su),w=m.get(vI,null),C=v.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",O=u?function(s,o,l){if(ln(s))return s.selectRootElement(o,l===Qe.ShadowDom);let u="string"==typeof o?s.querySelector(o):o;return u.textContent="",u}(C,u,this.componentDef.encapsulation):Nc(v.createRenderer(null,this.componentDef),M,function(s){const o=s.toLowerCase();return"svg"===o?Qd:"math"===o?"http://www.w3.org/1998/MathML/":null}(M)),F=this.componentDef.onPush?576:528,$=function(s,o){return{components:[],scheduler:s||bp,clean:yT,playerHandler:o||null,flags:0}}(),Q=Gh(0,null,null,1,0,null,null,null,null,null),_e=qh(null,Q,$,F,null,null,v,C,w,m);let Le,qe;vc(_e);try{const it=function(s,o,l,u,h,m){const v=l[1];l[20]=s;const C=jo(v,20,2,"#host",null),M=C.mergedAttrs=o.hostAttrs;null!==M&&(kp(C,M,!0),null!==s&&(Pu(h,s,M),null!==C.classes&&Sr(h,s,C.classes),null!==C.styles&&Pe(h,s,C.styles)));const O=u.createRenderer(s,o),F=qh(l,Ny(o),null,o.onPush?64:16,l[20],C,u,O,m||null,null);return v.firstCreatePass&&(gi(Pn(C,l),v,o.type),Q0(v,C),jy(C,l.length,1)),ld(l,F),l[20]=F}(O,this.componentDef,_e,v,C);if(O)if(u)Pu(C,O,["ng-version",og.full]);else{const{attrs:Se,classes:_t}=function(s){const o=[],l=[];let u=1,h=2;for(;u<s.length;){let m=s[u];if("string"==typeof m)2===h?""!==m&&o.push(m,s[++u]):8===h&&l.push(m);else{if(!Bo(h))break;h=m}u++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);Se&&Pu(C,O,Se),_t&&_t.length>0&&Sr(C,O,_t.join(" "))}if(qe=wo(Q,20),void 0!==l){const Se=qe.projection=[];for(let _t=0;_t<this.ngContentSelectors.length;_t++){const qt=l[_t];Se.push(null!=qt?Array.from(qt):null)}}Le=function(s,o,l,u,h){const m=l[1],v=function(s,o,l){const u=Dn();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),Hy(s,u,o,ql(s,o,1,null),l));const h=Yr(o,s,u.directiveStart,u);An(h,o);const m=$n(u,o);return m&&An(m,o),h}(m,l,o);if(u.components.push(v),s[8]=v,h&&h.forEach(C=>C(v,o)),o.contentQueries){const C=Dn();o.contentQueries(1,v,C.directiveStart)}const w=Dn();return!m.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Qs(w.index),Wh(l[1],w,0,w.directiveStart,w.directiveEnd,o),Ap(o,v)),v}(it,this.componentDef,_e,$,[Pa]),id(Q,_e,null)}finally{_l()}return new ib(this.componentType,Le,ns(qe,_e),_e,qe)}}class ib extends class{}{constructor(o,l,u,h,m){super(),this.location=u,this._rootLView=h,this._tNode=m,this.instance=l,this.hostView=this.changeDetectorRef=new bI(h),this.componentType=o}get injector(){return new Fe(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class vf{}class p_{}const Ql=new Map;class wf extends vf{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new UE(this);const u=Er(o);this._bootstrapComponents=Ri(u.bootstrap),this._r3Injector=$r(o,l,[{provide:vf,useValue:this},{provide:Fs,useValue:this.componentFactoryResolver}],oe(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,l=co.THROW_IF_NOT_FOUND,u=yt.Default){return o===co||o===vf||o===Im?this:this._r3Injector.get(o,l,u)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Ba extends p_{constructor(o){super(),this.moduleType=o,null!==Er(o)&&function(s){const o=new Set;!function l(u){const h=Er(u,!0),m=h.id;null!==m&&(function(s,o,l){if(o&&o!==l)throw new Error(`Duplicate module registered for ${s} - ${oe(o)} vs ${oe(o.name)}`)}(m,Ql.get(m),u),Ql.set(m,u));const v=Ri(h.imports);for(const w of v)o.has(w)||(o.add(w),l(w))}(s)}(o)}create(o){return new wf(this.moduleType,o)}}function ab(s,o,l,u){return $E(Ie(),fr(),s,o,l,u)}function lb(s,o,l,u,h){return function(s,o,l,u,h,m,v){const w=o+l;return xr(s,w,h,m)?qo(s,w+2,v?u.call(v,h,m):u(h,m)):lg(s,w+2)}(Ie(),fr(),s,o,l,u,h)}function Ef(s,o,l,u,h,m){return GE(Ie(),fr(),s,o,l,u,h,m)}function lg(s,o){const l=s[o];return l===It?void 0:l}function $E(s,o,l,u,h,m){const v=o+l;return wi(s,v,h)?qo(s,v+1,m?u.call(m,h):u(h)):lg(s,v+1)}function GE(s,o,l,u,h,m,v,w){const C=o+l;return ef(s,C,h,m,v)?qo(s,C+3,w?u.call(w,h,m,v):u(h,m,v)):lg(s,C+3)}function ZE(s,o){const l=Bt();let u;const h=s+20;l.firstCreatePass?(u=function(s,o){if(o)for(let l=o.length-1;l>=0;l--){const u=o[l];if(s===u.name)return u}}(o,l.pipeRegistry),l.data[h]=u,u.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(h,u.onDestroy)):u=l.data[h];const m=u.factory||(u.factory=hs(u.type)),v=ci(Hp);try{const w=dn(!1),C=m();return dn(w),function(s,o,l,u){l>=s.data.length&&(s.data[l]=null,s.blueprint[l]=null),o[l]=u}(l,Ie(),h,C),C}finally{ci(v)}}function db(s,o,l){const u=s+20,h=Ie(),m=Eo(h,u);return nu(h,u)?$E(h,fr(),o,m.transform,l,m):m.transform(l)}function hb(s,o,l,u,h){const m=s+20,v=Ie(),w=Eo(v,m);return nu(v,m)?GE(v,fr(),o,w.transform,l,u,h,w):w.transform(l,u,h)}function nu(s,o){return s[1].data[o].pure}function g_(s){return o=>{setTimeout(s,void 0,o)}}const Ei=class extends c.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,u){var C,M,O;let h=o,m=l||(()=>null),v=u;if(o&&"object"==typeof o){const F=o;h=null==(C=F.next)?void 0:C.bind(F),m=null==(M=F.error)?void 0:M.bind(F),v=null==(O=F.complete)?void 0:O.bind(F)}this.__isAsync&&(m=g_(m),h&&(h=g_(h)),v&&(v=g_(v)));const w=super.subscribe({next:h,error:m,complete:v});return o instanceof J.w0&&o.add(w),w}};function kI(){return this._results[Pi()]()}class Jl{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Pi(),u=Jl.prototype;u[l]||(u[l]=kI)}get changes(){return this._changes||(this._changes=new Ei)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const u=this;u.dirty=!1;const h=Qr(o);(this._changesDetected=!function(s,o,l){if(s.length!==o.length)return!1;for(let u=0;u<s.length;u++){let h=s[u],m=o[u];if(l&&(h=l(h),m=l(m)),m!==h)return!1}return!0}(u._results,h,l))&&(u._results=h,u.length=h.length,u.last=h[this.length-1],u.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let cg=(()=>{class s{}return s.__NG_ELEMENT_ID__=PI,s})();const OI=cg,RI=class extends OI{constructor(o,l,u){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=u}createEmbeddedView(o){const l=this._declarationTContainer.tViews,u=qh(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(u[19]=m.createEmbeddedView(l)),id(l,u,o),new xd(u)}};function PI(){return m_(Dn(),Ie())}function m_(s,o){return 4&s.type?new RI(o,s,ns(s,o)):null}let ug=(()=>{class s{}return s.__NG_ELEMENT_ID__=YE,s})();function YE(){return kd(Dn(),Ie())}const NI=ug,QE=class extends NI{constructor(o,l,u){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=u}get element(){return ns(this._hostTNode,this._hostLView)}get injector(){return new Fe(this._hostTNode,this._hostLView)}get parentInjector(){const o=Xs(this._hostTNode,this._hostLView);if(Ec(o)){const l=gs(o,this._hostLView),u=Rn(o);return new Fe(l[1].data[u+8],l)}return new Fe(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=pb(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,u){const h=o.createEmbeddedView(l||{});return this.insert(h,u),h}createComponent(o,l,u,h,m){const v=o&&!("function"==typeof o);let w;if(v)w=l;else{const F=l||{};w=F.index,u=F.injector,h=F.projectableNodes,m=F.ngModuleRef}const C=v?o:new Yl(mn(o)),M=u||this.parentInjector;if(!m&&null==C.ngModule&&M){const F=M.get(vf,null);F&&(m=F)}const O=C.create(M,h,void 0,m);return this.insert(O.hostView,w),O}insert(o,l){const u=o._lView,h=u[1];if(ds(u[3])){const O=this.indexOf(o);if(-1!==O)this.detach(O);else{const F=u[3],$=new QE(F,F[6],F[3]);$.detach($.indexOf(o))}}const m=this._adjustIndex(l),v=this._lContainer;!function(s,o,l,u){const h=10+u,m=l.length;u>0&&(l[h-1][4]=o),u<m-10?(o[4]=l[h],Dl(l,10+u,o)):(l.push(o),o[4]=null),o[3]=l;const v=o[17];null!==v&&l!==v&&function(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(v,o);const w=o[19];null!==w&&w.insertView(s),o[2]|=128}(h,u,v,m);const w=cr(m,v),C=u[11],M=ed(C,v[7]);return null!==M&&function(s,o,l,u,h,m){u[0]=h,u[6]=o,lt(s,u,l,1,h,m)}(h,v[6],C,u,M,w),o.attachToViewContainerRef(),Dl(gb(v),m,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=pb(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),u=ee(this._lContainer,l);u&&(Mo(gb(this._lContainer),l),xe(u[1],u))}detach(o){const l=this._adjustIndex(o,-1),u=ee(this._lContainer,l);return u&&null!=Mo(gb(this._lContainer),l)?new xd(u):null}_adjustIndex(o,l=0){return null==o?this.length+l:o}};function pb(s){return s[8]}function gb(s){return s[8]||(s[8]=[])}function kd(s,o){let l;const u=o[s.index];if(ds(u))l=u;else{let h;if(8&s.type)h=qn(u);else{const m=o[11];h=m.createComment("");const v=$n(s,o);ei(m,ed(m,v),h,function(s,o){return ln(s)?s.nextSibling(o):o.nextSibling}(m,v),!1)}o[s.index]=l=Cm(u,o,h,s),ld(o,l)}return new QE(l,s,o)}class _b{constructor(o){this.queryList=o,this.matches=null}clone(){return new _b(this.queryList)}setDirty(){this.queryList.setDirty()}}class yb{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const u=null!==o.contentQueries?o.contentQueries[0]:l.length,h=[];for(let m=0;m<u;m++){const v=l.getByIndex(m);h.push(this.queries[v.indexInDeclarationView].clone())}return new yb(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==Cb(o,l).matches&&this.queries[l].setDirty()}}class JE{constructor(o,l,u=null){this.predicate=o,this.flags=l,this.read=u}}class vb{constructor(o=[]){this.queries=o}elementStart(o,l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let u=0;u<this.length;u++){const h=null!==l?l.length:0,m=this.getByIndex(u).embeddedTView(o,h);m&&(m.indexInDeclarationView=u,null!==l?l.push(m):l=[m])}return null!==l?new vb(l):null}template(o,l){for(let u=0;u<this.queries.length;u++)this.queries[u].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class bb{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new bb(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let u=o.parent;for(;null!==u&&8&u.type&&u.index!==l;)u=u.parent;return l===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const u=this.metadata.predicate;if(Array.isArray(u))for(let h=0;h<u.length;h++){const m=u[h];this.matchTNodeWithReadOption(o,l,jM(l,m)),this.matchTNodeWithReadOption(o,l,Gn(l,o,m,!1,!1))}else u===cg?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,Gn(l,o,u,!1,!1))}matchTNodeWithReadOption(o,l,u){if(null!==u){const h=this.metadata.read;if(null!==h)if(h===Wo||h===ug||h===cg&&4&l.type)this.addMatch(l.index,-2);else{const m=Gn(l,o,h,!1,!1);null!==m&&this.addMatch(l.index,m)}else this.addMatch(l.index,u)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function jM(s,o){const l=s.localNames;if(null!==l)for(let u=0;u<l.length;u+=2)if(l[u]===o)return l[u+1];return null}function VI(s,o,l,u){return-1===l?function(s,o){return 11&s.type?ns(s,o):4&s.type?m_(s,o):null}(o,s):-2===l?function(s,o,l){return l===Wo?ns(o,s):l===cg?m_(o,s):l===ug?kd(o,s):void 0}(s,o,u):Yr(s,s[1],l,o)}function Eb(s,o,l,u){const h=o[19].queries[u];if(null===h.matches){const m=s.data,v=l.matches,w=[];for(let C=0;C<v.length;C+=2){const M=v[C];w.push(M<0?null:VI(o,m[M],v[C+1],l.metadata.read))}h.matches=w}return h.matches}function __(s,o,l,u){const h=s.queries.getByIndex(l),m=h.matches;if(null!==m){const v=Eb(s,o,h,l);for(let w=0;w<m.length;w+=2){const C=m[w];if(C>0)u.push(v[w/2]);else{const M=m[w+1],O=o[-C];for(let F=10;F<O.length;F++){const $=O[F];$[17]===$[3]&&__($[1],$,M,u)}if(null!==O[9]){const F=O[9];for(let $=0;$<F.length;$++){const Q=F[$];__(Q[1],Q,M,u)}}}}}return u}function Cf(s){const o=Ie(),l=Bt(),u=_c();aa(u+1);const h=Cb(l,u);if(s.dirty&&As(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const m=h.crossesNgTemplate?__(l,o,u,[]):Eb(l,o,h,u);s.reset(m,h_),s.notifyOnChanges()}return!0}return!1}function y_(s,o,l){const u=Bt();u.firstCreatePass&&(nC(u,new JE(s,o,l),-1),2==(2&o)&&(u.staticViewQueries=!0)),dg(u,Ie(),o)}function XE(s,o,l,u){const h=Bt();if(h.firstCreatePass){const m=Dn();nC(h,new JE(o,l,u),m.index),function(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}dg(h,Ie(),l)}function eC(){return s=Ie(),o=_c(),s[19].queries[o].queryList;var s,o}function dg(s,o,l){const u=new Jl(4==(4&l));Vy(s,o,u,u.destroy),null===o[19]&&(o[19]=new yb),o[19].queries.push(new _b(u))}function nC(s,o,l){null===s.queries&&(s.queries=new vb),s.queries.track(new bb(o,l))}function Cb(s,o){return s.queries.getByIndex(o)}function ru(s,o){return m_(s,o)}function I_(...s){}const Ls=new cn("Application Initializer");let nc=(()=>{class s{constructor(l){this.appInits=l,this.resolve=I_,this.reject=I_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,h)=>{this.resolve=u,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const m=this.appInits[h]();if(Gp(m))l.push(m);else if(Vm(m)){const v=new Promise((w,C)=>{m.subscribe({complete:w,error:C})});l.push(v)}}Promise.all(l).then(()=>{u()}).catch(h=>{this.reject(h)}),0===l.length&&u(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(ie(Ls,8))},s.\u0275prov=gn({token:s,factory:s.\u0275fac}),s})();const S_=new cn("AppId"),zI={provide:S_,useFactory:function(){return`${kb()}${kb()}${kb()}`},deps:[]};function kb(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ob=new cn("Platform Initializer"),mC=new cn("Platform ID"),_C=new cn("appBootstrapListener");let yC=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=gn({token:s,factory:s.\u0275fac}),s})();const si=new cn("LocaleId"),hg=new cn("DefaultCurrencyCode");class A_{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let fg=(()=>{class s{compileModuleSync(l){return new Ba(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const u=this.compileModuleSync(l),m=Ri(Er(l).declarations).reduce((v,w)=>{const C=mn(w);return C&&v.push(new Yl(C)),v},[]);return new A_(u,m)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=gn({token:s,factory:s.\u0275fac}),s})();const WI=(()=>Promise.resolve(0))();function Pb(s){"undefined"==typeof Zone?WI.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Vs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ei(!1),this.onMicrotaskEmpty=new Ei(!1),this.onStable=new Ei(!1),this.onError=new Ei(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!u&&l,h.shouldCoalesceRunChangeDetection=u,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function(){let s=St.requestAnimationFrame,o=St.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function(s){const o=()=>{!function(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(St,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Nb(s),s.isCheckStableRunning=!0,M_(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Nb(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,u,h,m,v,w)=>{try{return wC(s),l.invokeTask(h,m,v,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&o(),EC(s)}},onInvoke:(l,u,h,m,v,w,C)=>{try{return wC(s),l.invoke(h,m,v,w,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),EC(s)}},onHasTask:(l,u,h,m)=>{l.hasTask(h,m),u===h&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,Nb(s),M_(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(l,u,h,m)=>(l.handleError(h,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(h)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Vs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Vs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,l,u){return this._inner.run(o,l,u)}runTask(o,l,u,h){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+h,o,pg,I_,I_);try{return m.runTask(v,l,u)}finally{m.cancelTask(v)}}runGuarded(o,l,u){return this._inner.runGuarded(o,l,u)}runOutsideAngular(o){return this._outer.run(o)}}const pg={};function M_(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Nb(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function wC(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function EC(s){s._nesting--,M_(s)}class YI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ei,this.onMicrotaskEmpty=new Ei,this.onStable=new Ei,this.onError=new Ei}run(o,l,u){return o.apply(l,u)}runGuarded(o,l,u){return o.apply(l,u)}runOutsideAngular(o){return o()}runTask(o,l,u,h){return o.apply(l,u)}}let Fb=(()=>{class s{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Vs.assertNotInAngularZone(),Pb(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Pb(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(l)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,u,h){let m=-1;u&&u>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),l(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:l,timeoutId:m,updateCb:h})}whenStable(l,u,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,u,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,u,h){return[]}}return s.\u0275fac=function(l){return new(l||s)(ie(Vs))},s.\u0275prov=gn({token:s,factory:s.\u0275fac}),s})(),k_=(()=>{class s{constructor(){this._applications=new Map,O_.addToWindow(this)}registerApplication(l,u){this._applications.set(l,u)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,u=!0){return O_.findTestabilityInTree(this,l,u)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=gn({token:s,factory:s.\u0275fac}),s})();class CC{addToWindow(o){}findTestabilityInTree(o,l,u){return null}}function Lb(s){O_=s}let is,O_=new CC;const TC=new cn("AllowMultipleToken");class Ub{constructor(o,l){this.name=o,this.token=l}}function Bb(s,o,l=[]){const u=`Platform: ${o}`,h=new cn(u);return(m=[])=>{let v=SC();if(!v||v.injector.get(TC,!1))if(s)s(l.concat(m).concat({provide:h,useValue:!0}));else{const w=l.concat(m).concat({provide:h,useValue:!0},{provide:Zy,useValue:"platform"});!function(s){if(is&&!is.destroyed&&!is.injector.get(TC,!1))throw new je("400","");is=s.get(AC);const o=s.get(Ob,null);o&&o.forEach(l=>l())}(co.create({providers:w,name:u}))}return function(s){const o=SC();if(!o)throw new je("401","");return o}()}}function SC(){return is&&!is.destroyed?is:null}let AC=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,u){const w=function(s,o){let l;return l="noop"===s?new YI:("zone.js"===s?void 0:s)||new Vs({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),l}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),C=[{provide:Vs,useValue:w}];return w.run(()=>{const M=co.create({providers:C,parent:this.injector,name:l.moduleType.name}),O=l.create(M),F=O.injector.get(Fo,null);if(!F)throw new je("402","");return w.runOutsideAngular(()=>{const $=w.onError.subscribe({next:Q=>{F.handleError(Q)}});O.onDestroy(()=>{N_(this._modules,O),$.unsubscribe()})}),function(s,o,l){try{const u=l();return Gp(u)?u.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):u}catch(u){throw o.runOutsideAngular(()=>s.handleError(u)),u}}(F,w,()=>{const $=O.injector.get(nc);return $.runInitializers(),$.donePromise.then(()=>(function(s){Tt(s,"Expected localeId to be defined"),"string"==typeof s&&(r_=s.toLowerCase().replace(/_/g,"-"))}(O.injector.get(si,Kl)||Kl),this._moduleDoBootstrap(O),O))})})}bootstrapModule(l,u=[]){const h=P_({},u);return function(s,o,l){const u=new Ba(l);return Promise.resolve(u)}(0,0,l).then(m=>this.bootstrapModuleFactory(m,h))}_moduleDoBootstrap(l){const u=l.injector.get(Pd);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>u.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new je("403","");l.instance.ngDoBootstrap(u)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new je("404","");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(ie(co))},s.\u0275prov=gn({token:s,factory:s.\u0275fac}),s})();function P_(s,o){return Array.isArray(o)?o.reduce(P_,s):We(We({},s),o)}let Pd=(()=>{class s{constructor(l,u,h,m,v){this._zone=l,this._injector=u,this._exceptionHandler=h,this._componentFactoryResolver=m,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new N.y(M=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{M.next(this._stable),M.complete()})}),C=new N.y(M=>{let O;this._zone.runOutsideAngular(()=>{O=this._zone.onStable.subscribe(()=>{Vs.assertNotInAngularZone(),Pb(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,M.next(!0))})})});const F=this._zone.onUnstable.subscribe(()=>{Vs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{M.next(!1)}))});return()=>{O.unsubscribe(),F.unsubscribe()}});this.isStable=(0,ce.T)(w,C.pipe((0,se.B)()))}bootstrap(l,u){if(!this._initStatus.done)throw new je("405","");let h;h=l instanceof RE?l:this._componentFactoryResolver.resolveComponentFactory(l),this.componentTypes.push(h.componentType);const m=function(s){return s.isBoundToModule}(h)?void 0:this._injector.get(vf),w=h.create(co.NULL,[],u||h.selector,m),C=w.location.nativeElement,M=w.injector.get(Fb,null),O=M&&w.injector.get(k_);return M&&O&&O.registerApplication(C,M),w.onDestroy(()=>{this.detachView(w.hostView),N_(this.components,w),O&&O.unregisterApplication(C)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new je("101","");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const u=l;this._views.push(u),u.attachToAppRef(this)}detachView(l){const u=l;N_(this._views,u),u.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(_C,[]).concat(this._bootstrapListeners).forEach(h=>h(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(l){return new(l||s)(ie(Vs),ie(co),ie(Fo),ie(Fs),ie(nc))},s.\u0275prov=gn({token:s,factory:s.\u0275fac}),s})();function N_(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}let gg=!0,kC=!1;function JI(){return kC=!0,gg}function XI(){if(kC)throw new Error("Cannot enable prod mode after platform setup.");gg=!1}let eS=(()=>{class s{}return s.__NG_ELEMENT_ID__=tS,s})();function tS(s){return function(s,o,l){if(Is(s)&&!l){const u=rn(s.index,o);return new xd(u,u)}return 47&s.type?new xd(o[16],o):null}(Dn(),Ie(),16==(16&s))}class U_{constructor(){}supports(o){return $l(o)}create(o){return new dS(o)}}const ex=(s,o)=>o;class dS{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||ex}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,u=this._removalsHead,h=0,m=null;for(;l||u;){const v=!u||l&&l.currentIndex<fS(u,h,m)?l:u,w=fS(v,h,m),C=v.currentIndex;if(v===u)h--,u=u._nextRemoved;else if(l=l._next,null==v.previousIndex)h++;else{m||(m=[]);const M=w-h,O=C-h;if(M!=O){for(let $=0;$<M;$++){const Q=$<m.length?m[$]:m[$]=0,_e=Q+$;O<=_e&&_e<M&&(m[$]=Q+1)}m[v.previousIndex]=O-M}}w!==C&&o(v,w,C)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!$l(o))throw new Error(`Error trying to diff '${oe(o)}'. Only arrays and iterables are allowed`);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,m,v,l=this._itHead,u=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)m=o[w],v=this._trackByFn(w,m),null!==l&&Object.is(l.trackById,v)?(u&&(l=this._verifyReinsertion(l,m,v,w)),Object.is(l.item,m)||this._addIdentityChange(l,m)):(l=this._mismatch(l,m,v,w),u=!0),l=l._next}else h=0,function(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[Pi()]();let u;for(;!(u=l.next()).done;)o(u.value)}}(o,w=>{v=this._trackByFn(h,w),null!==l&&Object.is(l.trackById,v)?(u&&(l=this._verifyReinsertion(l,w,v,h)),Object.is(l.item,w)||this._addIdentityChange(l,w)):(l=this._mismatch(l,w,v,h),u=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,u,h){let m;return null===o?m=this._itTail:(m=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,m,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(u,h))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,m,h)):o=this._addAfter(new tx(l,u),m,h),o}_verifyReinsertion(o,l,u,h){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==m?o=this._reinsertAfter(m,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,m=o._nextRemoved;return null===h?this._removalsHead=m:h._nextRemoved=m,null===m?this._removalsTail=h:m._prevRemoved=h,this._insertAfter(o,l,u),this._addToMoves(o,u),o}_moveAfter(o,l,u){return this._unlink(o),this._insertAfter(o,l,u),this._addToMoves(o,u),o}_addAfter(o,l,u){return this._insertAfter(o,l,u),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,u){const h=null===l?this._itHead:l._next;return o._next=h,o._prev=l,null===h?this._itTail=o:h._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new UC),this._linkedRecords.put(o),o.currentIndex=u,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,u=o._next;return null===l?this._itHead=u:l._next=u,null===u?this._itTail=l:u._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new UC),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class tx{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class hS{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===l||l<=u.currentIndex)&&Object.is(u.trackById,o))return u;return null}remove(o){const l=o._prevDup,u=o._nextDup;return null===l?this._head=u:l._nextDup=u,null===u?this._tail=l:u._prevDup=l,null===this._head}}class UC{constructor(){this.map=new Map}put(o){const l=o.trackById;let u=this.map.get(l);u||(u=new hS,this.map.set(l,u)),u.add(o)}get(o,l){const h=this.map.get(o);return h?h.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function fS(s,o,l){const u=s.previousIndex;if(null===u)return u;let h=0;return l&&u<l.length&&(h=l[u]),u+o+h}class pS{constructor(){}supports(o){return o instanceof Map||Gl(o)}create(){return new gS}}class gS{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||Gl(o)))throw new Error(`Error trying to diff '${oe(o)}'. Only maps and objects are allowed`)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(u,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,u),this._appendAfter=l,l=l._next;else{const m=this._getOrCreateRecordForKey(h,u);l=this._insertBeforeOrAppend(l,m)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let u=l;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const u=o._prev;return l._next=o,l._prev=u,o._prev=l,u&&(u._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,l);const m=h._prev,v=h._next;return m&&(m._next=v),v&&(v._prev=m),h._next=null,h._prev=null,h}const u=new nx(o);return this._records.set(o,u),u.currentValue=l,this._addToAdditions(u),u}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(u=>l(o[u],u))}}class nx{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function mS(){return new Zb([new U_])}let Zb=(()=>{class s{constructor(l){this.factories=l}static create(l,u){if(null!=u){const h=u.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:u=>s.create(l,u||mS()),deps:[[s,new ki,new Jr]]}}find(l){const u=this.factories.find(h=>h.supports(l));if(null!=u)return u;throw new Error(`Cannot find a differ supporting object '${l}' of type '${function(s){return s.name||typeof s}(l)}'`)}}return s.\u0275prov=gn({token:s,providedIn:"root",factory:mS}),s})();function _S(){return new B_([new pS])}let B_=(()=>{class s{constructor(l){this.factories=l}static create(l,u){if(u){const h=u.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:u=>s.create(l,u||_S()),deps:[[s,new ki,new Jr]]}}find(l){const u=this.factories.find(h=>h.supports(l));if(u)return u;throw new Error(`Cannot find a differ supporting object '${l}'`)}}return s.\u0275prov=gn({token:s,providedIn:"root",factory:_S}),s})();const BC=[new pS],HC=new Zb([new U_]),qC=new B_(BC),$C=Bb(null,"core",[{provide:mC,useValue:"unknown"},{provide:AC,deps:[co]},{provide:k_,deps:[]},{provide:yC,deps:[]}]),zC=[{provide:Pd,useClass:Pd,deps:[Vs,co,Fo,Fs,nc]},{provide:rb,deps:[Vs],useFactory:function(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(l){o.push(l)}}},{provide:nc,useClass:nc,deps:[[new Jr,Ls]]},{provide:fg,useClass:fg,deps:[]},zI,{provide:Zb,useFactory:function(){return HC},deps:[]},{provide:B_,useFactory:function(){return qC},deps:[]},{provide:si,useFactory:function(s){return s||"undefined"!=typeof $localize&&$localize.locale||Kl},deps:[[new Bn(si),new Jr,new ki]]},{provide:hg,useValue:"USD"}];let Kb=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(ie(Pd))},s.\u0275mod=Ka({type:s}),s.\u0275inj=Fn({providers:zC}),s})()},6293:(Ke,ye,P)=>{"use strict";P.d(ye,{Z:()=>je});var c=P(4213),J=P(1177),N=P(1572),ce=P(3855);class se{constructor(ae,K){this._delegate=ae,this.firebase=K,(0,N._addComponent)(ae,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=ae.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ae){this._delegate.automaticDataCollectionEnabled=ae}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ae=>{this._delegate.checkDestroyed(),ae()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(ae,K=N._DEFAULT_ENTRY_NAME){var le;this._delegate.checkDestroyed();const De=this._delegate.container.getProvider(ae);return!De.isInitialized()&&"EXPLICIT"===(null===(le=De.getComponent())||void 0===le?void 0:le.instantiationMode)&&De.initialize(),De.getImmediate({identifier:K})}_removeServiceInstance(ae,K=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ae).clearInstance(K)}_addComponent(ae){(0,N._addComponent)(this._delegate,ae)}_addOrOverwriteComponent(ae){(0,N._addOrOverwriteComponent)(this._delegate,ae)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const te=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),q=function ue(){const Ue=function(Ue){const ae={},K={__esModule:!0,initializeApp:function(Ye,gt={}){const ne=N.initializeApp(Ye,gt);if((0,c.r3)(ae,ne.name))return ae[ne.name];const de=new Ue(ne,K);return ae[ne.name]=de,de},app:De,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function(Ye){const gt=Ye.name,ne=gt.replace("-compat","");if(N._registerComponent(Ye)&&"PUBLIC"===Ye.type){const de=(we=De())=>{if("function"!=typeof we[ne])throw te.create("invalid-app-argument",{appName:gt});return we[ne]()};void 0!==Ye.serviceProps&&(0,c.ZB)(de,Ye.serviceProps),K[ne]=de,Ue.prototype[ne]=function(...we){return this._getService.bind(this,gt).apply(this,Ye.multipleInstances?we:[])}}return"PUBLIC"===Ye.type?K[ne]:null},removeApp:function(Ye){delete ae[Ye]},useAsService:function(Ye,gt){return"serverAuth"===gt?null:gt},modularAPIs:N}};function De(Ye){if(!(0,c.r3)(ae,Ye=Ye||N._DEFAULT_ENTRY_NAME))throw te.create("no-app",{appName:Ye});return ae[Ye]}return K.default=K,Object.defineProperty(K,"apps",{get:function(){return Object.keys(ae).map(Ye=>ae[Ye])}}),De.App=Ue,K}(se);return Ue.INTERNAL=Object.assign(Object.assign({},Ue.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function(K){(0,c.ZB)(Ue,K)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),Ue}(),H=new ce.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ue=self.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const je=q;(0,N.registerVersion)("@firebase/app-compat","0.1.13",undefined)},1572:(Ke,ye,P)=>{"use strict";P.r(ye),P.d(ye,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>ta,_DEFAULT_ENTRY_NAME:()=>ir,_addComponent:()=>pn,_addOrOverwriteComponent:()=>zr,_apps:()=>Tt,_clearComponents:()=>Fn,_components:()=>Rt,_getProvider:()=>gn,_registerComponent:()=>li,_removeServiceInstance:()=>Wa,deleteApp:()=>hr,getApp:()=>ls,getApps:()=>Ae,initializeApp:()=>Vi,onLog:()=>zt,registerVersion:()=>yt,setLogLevel:()=>Ui});var c=P(8239),J=P(1177),N=P(3855),ce=P(4213);class se{constructor(vt){this.container=vt}getPlatformInfoString(){return this.container.getProviders().map(Vt=>{if(function(pt){const vt=pt.getComponent();return"VERSION"===(null==vt?void 0:vt.type)}(Vt)){const Ut=Vt.getImmediate();return`${Ut.library}/${Ut.version}`}return null}).filter(Vt=>Vt).join(" ")}}const te="@firebase/app",ue=new N.Yd("@firebase/app"),ir="[DEFAULT]",xt={[te]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Tt=new Map,Rt=new Map;function pn(pt,vt){try{pt.container.addComponent(vt)}catch(Vt){ue.debug(`Component ${vt.name} failed to register with FirebaseApp ${pt.name}`,Vt)}}function zr(pt,vt){pt.container.addOrOverwriteComponent(vt)}function li(pt){const vt=pt.name;if(Rt.has(vt))return ue.debug(`There were multiple attempts to register component ${vt}.`),!1;Rt.set(vt,pt);for(const Vt of Tt.values())pn(Vt,pt);return!0}function gn(pt,vt){return pt.container.getProvider(vt)}function Wa(pt,vt,Vt=ir){gn(pt,vt).clearInstance(Vt)}function Fn(){Rt.clear()}const $t=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class kn{constructor(vt,Vt,Ut){this._isDeleted=!1,this._options=Object.assign({},vt),this._config=Object.assign({},Vt),this._name=Vt.name,this._automaticDataCollectionEnabled=Vt.automaticDataCollectionEnabled,this._container=Ut,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(vt){this.checkDestroyed(),this._automaticDataCollectionEnabled=vt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(vt){this._isDeleted=vt}checkDestroyed(){if(this.isDeleted)throw $t.create("app-deleted",{appName:this._name})}}const ta="9.6.2";function Vi(pt,vt={}){"object"!=typeof vt&&(vt={name:vt});const Vt=Object.assign({name:ir,automaticDataCollectionEnabled:!1},vt),Ut=Vt.name;if("string"!=typeof Ut||!Ut)throw $t.create("bad-app-name",{appName:String(Ut)});const ui=Tt.get(Ut);if(ui){if((0,ce.vZ)(pt,ui.options)&&(0,ce.vZ)(Vt,ui.config))return ui;throw $t.create("duplicate-app",{appName:Ut})}const Qt=new J.H0(Ut);for(const ht of Rt.values())Qt.addComponent(ht);const Qe=new kn(pt,Vt,Qt);return Tt.set(Ut,Qe),Qe}function ls(pt=ir){const vt=Tt.get(pt);if(!vt)throw $t.create("no-app",{appName:pt});return vt}function Ae(){return Array.from(Tt.values())}function hr(pt){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,c.Z)(function*(pt){const vt=pt.name;Tt.has(vt)&&(Tt.delete(vt),yield Promise.all(pt.container.getProviders().map(Vt=>Vt.delete())),pt.isDeleted=!0)})).apply(this,arguments)}function yt(pt,vt,Vt){var Ut;let ui=null!==(Ut=xt[pt])&&void 0!==Ut?Ut:pt;Vt&&(ui+=`-${Vt}`);const Qt=ui.match(/\s|\//),Qe=vt.match(/\s|\//);if(Qt||Qe){const ht=[`Unable to register library "${ui}" with version "${vt}":`];return Qt&&ht.push(`library name "${ui}" contains illegal characters (whitespace or "/")`),Qt&&Qe&&ht.push("and"),Qe&&ht.push(`version name "${vt}" contains illegal characters (whitespace or "/")`),void ue.warn(ht.join(" "))}li(new J.wA(`${ui}-version`,()=>({library:ui,version:vt}),"VERSION"))}function zt(pt,vt){if(null!==pt&&"function"!=typeof pt)throw $t.create("invalid-log-argument");(0,N.Am)(pt,vt)}function Ui(pt){(0,N.Ub)(pt)}li(new J.wA("platform-logger",vt=>new se(vt),"PRIVATE")),yt(te,"0.7.12",""),yt(te,"0.7.12","esm2017"),yt("fire-js","")},1177:(Ke,ye,P)=>{"use strict";P.d(ye,{wA:()=>N,H0:()=>oe});var c=P(8239),J=P(4213);class N{constructor(q,H,X){this.name=q,this.instanceFactory=H,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(q){return this.instantiationMode=q,this}setMultipleInstances(q){return this.multipleInstances=q,this}setServiceProps(q){return this.serviceProps=q,this}setInstanceCreatedCallback(q){return this.onInstanceCreated=q,this}}const ce="[DEFAULT]";class se{constructor(q,H){this.name=q,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(q){const H=this.normalizeInstanceIdentifier(q);if(!this.instancesDeferred.has(H)){const X=new J.BH;if(this.instancesDeferred.set(H,X),this.isInitialized(H)||this.shouldAutoInitialize())try{const Be=this.getOrInitializeService({instanceIdentifier:H});Be&&X.resolve(Be)}catch(Be){}}return this.instancesDeferred.get(H).promise}getImmediate(q){var H;const X=this.normalizeInstanceIdentifier(null==q?void 0:q.identifier),Be=null!==(H=null==q?void 0:q.optional)&&void 0!==H&&H;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(Be)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Te){if(Be)return null;throw Te}}getComponent(){return this.component}setComponent(q){if(q.name!==this.name)throw Error(`Mismatching Component ${q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=q,this.shouldAutoInitialize()){if("EAGER"===q.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ce})}catch(H){}for(const[H,X]of this.instancesDeferred.entries()){const Be=this.normalizeInstanceIdentifier(H);try{const Te=this.getOrInitializeService({instanceIdentifier:Be});X.resolve(Te)}catch(Te){}}}}clearInstance(q=ce){this.instancesDeferred.delete(q),this.instancesOptions.delete(q),this.instances.delete(q)}delete(){var q=this;return(0,c.Z)(function*(){const H=Array.from(q.instances.values());yield Promise.all([...H.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...H.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(q=ce){return this.instances.has(q)}getOptions(q=ce){return this.instancesOptions.get(q)||{}}initialize(q={}){const{options:H={}}=q,X=this.normalizeInstanceIdentifier(q.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Be=this.getOrInitializeService({instanceIdentifier:X,options:H});for(const[Te,je]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Te)&&je.resolve(Be);return Be}onInit(q,H){var X;const Be=this.normalizeInstanceIdentifier(H),Te=null!==(X=this.onInitCallbacks.get(Be))&&void 0!==X?X:new Set;Te.add(q),this.onInitCallbacks.set(Be,Te);const je=this.instances.get(Be);return je&&q(je,Be),()=>{Te.delete(q)}}invokeOnInitCallbacks(q,H){const X=this.onInitCallbacks.get(H);if(X)for(const Be of X)try{Be(q,H)}catch(Te){}}getOrInitializeService({instanceIdentifier:q,options:H={}}){let X=this.instances.get(q);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=q,ue===ce?void 0:ue),options:H}),this.instances.set(q,X),this.instancesOptions.set(q,H),this.invokeOnInitCallbacks(X,q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,q,X)}catch(Be){}var ue;return X||null}normalizeInstanceIdentifier(q=ce){return this.component?this.component.multipleInstances?q:ce:q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class oe{constructor(q){this.name=q,this.providers=new Map}addComponent(q){const H=this.getProvider(q.name);if(H.isComponentSet())throw new Error(`Component ${q.name} has already been registered with ${this.name}`);H.setComponent(q)}addOrOverwriteComponent(q){this.getProvider(q.name).isComponentSet()&&this.providers.delete(q.name),this.addComponent(q)}getProvider(q){if(this.providers.has(q))return this.providers.get(q);const H=new se(q,this);return this.providers.set(q,H),H}getProviders(){return Array.from(this.providers.values())}}},3855:(Ke,ye,P)=>{"use strict";P.d(ye,{in:()=>J,Yd:()=>te,Ub:()=>oe,Am:()=>ue});const c=[];var J=(()=>{return(q=J||(J={}))[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT",J;var q})();const N={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},ce=J.INFO,se={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},me=(q,H,...X)=>{if(H<q.logLevel)return;const Be=(new Date).toISOString(),Te=se[H];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Te](`[${Be}]  ${q.name}:`,...X)};class te{constructor(H){this.name=H,this._logLevel=ce,this._logHandler=me,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in J))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?N[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...H),this._logHandler(this,J.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...H),this._logHandler(this,J.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,J.INFO,...H),this._logHandler(this,J.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,J.WARN,...H),this._logHandler(this,J.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...H),this._logHandler(this,J.ERROR,...H)}}function oe(q){c.forEach(H=>{H.setLogLevel(q)})}function ue(q,H){for(const X of c){let Be=null;H&&H.level&&(Be=N[H.level]),X.userLogHandler=null===q?null:(Te,je,...Ue)=>{const ae=Ue.map(K=>{if(null==K)return null;if("string"==typeof K)return K;if("number"==typeof K||"boolean"==typeof K)return K.toString();if(K instanceof Error)return K.message;try{return JSON.stringify(K)}catch(le){return null}}).filter(K=>K).join(" ");je>=(null!=Be?Be:Te.logLevel)&&q({level:J[je].toLowerCase(),message:ae,args:Ue,type:Te.name})}}}},8239:(Ke,ye,P)=>{"use strict";function c(N,ce,se,me,te,oe,ue){try{var q=N[oe](ue),H=q.value}catch(X){return void se(X)}q.done?ce(H):Promise.resolve(H).then(me,te)}function J(N){return function(){var ce=this,se=arguments;return new Promise(function(me,te){var oe=N.apply(ce,se);function ue(H){c(oe,me,te,ue,q,"next",H)}function q(H){c(oe,me,te,ue,q,"throw",H)}ue(void 0)})}}P.d(ye,{Z:()=>J})}},Ke=>{Ke(Ke.s=9637)}]);